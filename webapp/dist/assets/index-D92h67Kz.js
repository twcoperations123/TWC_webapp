function Ap(c,r){for(var n=0;n<r.length;n++){const i=r[n];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in c)){const u=Object.getOwnPropertyDescriptor(i,o);u&&Object.defineProperty(c,o,u.get?u:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const m of u.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function Sd(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}function Dp(c){if(Object.prototype.hasOwnProperty.call(c,"__esModule"))return c;var r=c.default;if(typeof r=="function"){var n=function i(){var o=!1;try{o=this instanceof i}catch{}return o?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};n.prototype=r.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(c).forEach(function(i){var o=Object.getOwnPropertyDescriptor(c,i);Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:function(){return c[i]}})}),n}var Yc={exports:{}},Gn={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kf;function Up(){if(kf)return Gn;kf=1;var c=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function n(i,o,u){var m=null;if(u!==void 0&&(m=""+u),o.key!==void 0&&(m=""+o.key),"key"in o){u={};for(var f in o)f!=="key"&&(u[f]=o[f])}else u=o;return o=u.ref,{$$typeof:c,type:i,key:m,ref:o!==void 0?o:null,props:u}}return Gn.Fragment=r,Gn.jsx=n,Gn.jsxs=n,Gn}var Tf;function Mp(){return Tf||(Tf=1,Yc.exports=Up()),Yc.exports}var s=Mp(),Vc={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cf;function Rp(){if(Cf)return Ne;Cf=1;var c=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),m=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function w(N){return N===null||typeof N!="object"?null:(N=v&&N[v]||N["@@iterator"],typeof N=="function"?N:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,D={};function C(N,I,J){this.props=N,this.context=I,this.refs=D,this.updater=J||j}C.prototype.isReactComponent={},C.prototype.setState=function(N,I){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,I,"setState")},C.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function q(){}q.prototype=C.prototype;function K(N,I,J){this.props=N,this.context=I,this.refs=D,this.updater=J||j}var R=K.prototype=new q;R.constructor=K,S(R,C.prototype),R.isPureReactComponent=!0;var E=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},te=Object.prototype.hasOwnProperty;function G(N,I,J,z,Q,ce){return J=ce.ref,{$$typeof:c,type:N,key:I,ref:J!==void 0?J:null,props:ce}}function ie(N,I){return G(N.type,I,void 0,void 0,void 0,N.props)}function V(N){return typeof N=="object"&&N!==null&&N.$$typeof===c}function ue(N){var I={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(J){return I[J]})}var oe=/\/+/g;function he(N,I){return typeof N=="object"&&N!==null&&N.key!=null?ue(""+N.key):I.toString(36)}function re(){}function pe(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(re,re):(N.status="pending",N.then(function(I){N.status==="pending"&&(N.status="fulfilled",N.value=I)},function(I){N.status==="pending"&&(N.status="rejected",N.reason=I)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function Y(N,I,J,z,Q){var ce=typeof N;(ce==="undefined"||ce==="boolean")&&(N=null);var de=!1;if(N===null)de=!0;else switch(ce){case"bigint":case"string":case"number":de=!0;break;case"object":switch(N.$$typeof){case c:case r:de=!0;break;case y:return de=N._init,Y(de(N._payload),I,J,z,Q)}}if(de)return Q=Q(N),de=z===""?"."+he(N,0):z,E(Q)?(J="",de!=null&&(J=de.replace(oe,"$&/")+"/"),Y(Q,I,J,"",function(nt){return nt})):Q!=null&&(V(Q)&&(Q=ie(Q,J+(Q.key==null||N&&N.key===Q.key?"":(""+Q.key).replace(oe,"$&/")+"/")+de)),I.push(Q)),1;de=0;var Ee=z===""?".":z+":";if(E(N))for(var Se=0;Se<N.length;Se++)z=N[Se],ce=Ee+he(z,Se),de+=Y(z,I,J,ce,Q);else if(Se=w(N),typeof Se=="function")for(N=Se.call(N),Se=0;!(z=N.next()).done;)z=z.value,ce=Ee+he(z,Se++),de+=Y(z,I,J,ce,Q);else if(ce==="object"){if(typeof N.then=="function")return Y(pe(N),I,J,z,Q);throw I=String(N),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return de}function T(N,I,J){if(N==null)return N;var z=[],Q=0;return Y(N,z,"","",function(ce){return I.call(J,ce,Q++)}),z}function W(N){if(N._status===-1){var I=N._result;I=I(),I.then(function(J){(N._status===0||N._status===-1)&&(N._status=1,N._result=J)},function(J){(N._status===0||N._status===-1)&&(N._status=2,N._result=J)}),N._status===-1&&(N._status=0,N._result=I)}if(N._status===1)return N._result.default;throw N._result}var le=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function $(){}return Ne.Children={map:T,forEach:function(N,I,J){T(N,function(){I.apply(this,arguments)},J)},count:function(N){var I=0;return T(N,function(){I++}),I},toArray:function(N){return T(N,function(I){return I})||[]},only:function(N){if(!V(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ne.Component=C,Ne.Fragment=n,Ne.Profiler=o,Ne.PureComponent=K,Ne.StrictMode=i,Ne.Suspense=g,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(N){return A.H.useMemoCache(N)}},Ne.cache=function(N){return function(){return N.apply(null,arguments)}},Ne.cloneElement=function(N,I,J){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var z=S({},N.props),Q=N.key,ce=void 0;if(I!=null)for(de in I.ref!==void 0&&(ce=void 0),I.key!==void 0&&(Q=""+I.key),I)!te.call(I,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&I.ref===void 0||(z[de]=I[de]);var de=arguments.length-2;if(de===1)z.children=J;else if(1<de){for(var Ee=Array(de),Se=0;Se<de;Se++)Ee[Se]=arguments[Se+2];z.children=Ee}return G(N.type,Q,void 0,void 0,ce,z)},Ne.createContext=function(N){return N={$$typeof:m,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:u,_context:N},N},Ne.createElement=function(N,I,J){var z,Q={},ce=null;if(I!=null)for(z in I.key!==void 0&&(ce=""+I.key),I)te.call(I,z)&&z!=="key"&&z!=="__self"&&z!=="__source"&&(Q[z]=I[z]);var de=arguments.length-2;if(de===1)Q.children=J;else if(1<de){for(var Ee=Array(de),Se=0;Se<de;Se++)Ee[Se]=arguments[Se+2];Q.children=Ee}if(N&&N.defaultProps)for(z in de=N.defaultProps,de)Q[z]===void 0&&(Q[z]=de[z]);return G(N,ce,void 0,void 0,null,Q)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(N){return{$$typeof:f,render:N}},Ne.isValidElement=V,Ne.lazy=function(N){return{$$typeof:y,_payload:{_status:-1,_result:N},_init:W}},Ne.memo=function(N,I){return{$$typeof:x,type:N,compare:I===void 0?null:I}},Ne.startTransition=function(N){var I=A.T,J={};A.T=J;try{var z=N(),Q=A.S;Q!==null&&Q(J,z),typeof z=="object"&&z!==null&&typeof z.then=="function"&&z.then($,le)}catch(ce){le(ce)}finally{A.T=I}},Ne.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Ne.use=function(N){return A.H.use(N)},Ne.useActionState=function(N,I,J){return A.H.useActionState(N,I,J)},Ne.useCallback=function(N,I){return A.H.useCallback(N,I)},Ne.useContext=function(N){return A.H.useContext(N)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(N,I){return A.H.useDeferredValue(N,I)},Ne.useEffect=function(N,I,J){var z=A.H;if(typeof J=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return z.useEffect(N,I)},Ne.useId=function(){return A.H.useId()},Ne.useImperativeHandle=function(N,I,J){return A.H.useImperativeHandle(N,I,J)},Ne.useInsertionEffect=function(N,I){return A.H.useInsertionEffect(N,I)},Ne.useLayoutEffect=function(N,I){return A.H.useLayoutEffect(N,I)},Ne.useMemo=function(N,I){return A.H.useMemo(N,I)},Ne.useOptimistic=function(N,I){return A.H.useOptimistic(N,I)},Ne.useReducer=function(N,I,J){return A.H.useReducer(N,I,J)},Ne.useRef=function(N){return A.H.useRef(N)},Ne.useState=function(N){return A.H.useState(N)},Ne.useSyncExternalStore=function(N,I,J){return A.H.useSyncExternalStore(N,I,J)},Ne.useTransition=function(){return A.H.useTransition()},Ne.version="19.1.0",Ne}var Of;function _d(){return Of||(Of=1,Vc.exports=Rp()),Vc.exports}var _=_d();const C0=Sd(_),zp=Ap({__proto__:null,default:C0},[_]);var Qc={exports:{}},Yn={},Xc={exports:{}},Kc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Af;function Lp(){return Af||(Af=1,function(c){function r(T,W){var le=T.length;T.push(W);e:for(;0<le;){var $=le-1>>>1,N=T[$];if(0<o(N,W))T[$]=W,T[le]=N,le=$;else break e}}function n(T){return T.length===0?null:T[0]}function i(T){if(T.length===0)return null;var W=T[0],le=T.pop();if(le!==W){T[0]=le;e:for(var $=0,N=T.length,I=N>>>1;$<I;){var J=2*($+1)-1,z=T[J],Q=J+1,ce=T[Q];if(0>o(z,le))Q<N&&0>o(ce,z)?(T[$]=ce,T[Q]=le,$=Q):(T[$]=z,T[J]=le,$=J);else if(Q<N&&0>o(ce,le))T[$]=ce,T[Q]=le,$=Q;else break e}}return W}function o(T,W){var le=T.sortIndex-W.sortIndex;return le!==0?le:T.id-W.id}if(c.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;c.unstable_now=function(){return u.now()}}else{var m=Date,f=m.now();c.unstable_now=function(){return m.now()-f}}var g=[],x=[],y=1,v=null,w=3,j=!1,S=!1,D=!1,C=!1,q=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function E(T){for(var W=n(x);W!==null;){if(W.callback===null)i(x);else if(W.startTime<=T)i(x),W.sortIndex=W.expirationTime,r(g,W);else break;W=n(x)}}function A(T){if(D=!1,E(T),!S)if(n(g)!==null)S=!0,te||(te=!0,he());else{var W=n(x);W!==null&&Y(A,W.startTime-T)}}var te=!1,G=-1,ie=5,V=-1;function ue(){return C?!0:!(c.unstable_now()-V<ie)}function oe(){if(C=!1,te){var T=c.unstable_now();V=T;var W=!0;try{e:{S=!1,D&&(D=!1,K(G),G=-1),j=!0;var le=w;try{t:{for(E(T),v=n(g);v!==null&&!(v.expirationTime>T&&ue());){var $=v.callback;if(typeof $=="function"){v.callback=null,w=v.priorityLevel;var N=$(v.expirationTime<=T);if(T=c.unstable_now(),typeof N=="function"){v.callback=N,E(T),W=!0;break t}v===n(g)&&i(g),E(T)}else i(g);v=n(g)}if(v!==null)W=!0;else{var I=n(x);I!==null&&Y(A,I.startTime-T),W=!1}}break e}finally{v=null,w=le,j=!1}W=void 0}}finally{W?he():te=!1}}}var he;if(typeof R=="function")he=function(){R(oe)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,pe=re.port2;re.port1.onmessage=oe,he=function(){pe.postMessage(null)}}else he=function(){q(oe,0)};function Y(T,W){G=q(function(){T(c.unstable_now())},W)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(T){T.callback=null},c.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<T?Math.floor(1e3/T):5},c.unstable_getCurrentPriorityLevel=function(){return w},c.unstable_next=function(T){switch(w){case 1:case 2:case 3:var W=3;break;default:W=w}var le=w;w=W;try{return T()}finally{w=le}},c.unstable_requestPaint=function(){C=!0},c.unstable_runWithPriority=function(T,W){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var le=w;w=T;try{return W()}finally{w=le}},c.unstable_scheduleCallback=function(T,W,le){var $=c.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?$+le:$):le=$,T){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=le+N,T={id:y++,callback:W,priorityLevel:T,startTime:le,expirationTime:N,sortIndex:-1},le>$?(T.sortIndex=le,r(x,T),n(g)===null&&T===n(x)&&(D?(K(G),G=-1):D=!0,Y(A,le-$))):(T.sortIndex=N,r(g,T),S||j||(S=!0,te||(te=!0,he()))),T},c.unstable_shouldYield=ue,c.unstable_wrapCallback=function(T){var W=w;return function(){var le=w;w=W;try{return T.apply(this,arguments)}finally{w=le}}}}(Kc)),Kc}var Df;function qp(){return Df||(Df=1,Xc.exports=Lp()),Xc.exports}var Zc={exports:{}},yt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uf;function Bp(){if(Uf)return yt;Uf=1;var c=_d();function r(g){var x="https://react.dev/errors/"+g;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)x+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(r(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,x,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:v==null?null:""+v,children:g,containerInfo:x,implementation:y}}var m=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,x){if(g==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return yt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,yt.createPortal=function(g,x){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(r(299));return u(g,x,null,y)},yt.flushSync=function(g){var x=m.T,y=i.p;try{if(m.T=null,i.p=2,g)return g()}finally{m.T=x,i.p=y,i.d.f()}},yt.preconnect=function(g,x){typeof g=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,i.d.C(g,x))},yt.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},yt.preinit=function(g,x){if(typeof g=="string"&&x&&typeof x.as=="string"){var y=x.as,v=f(y,x.crossOrigin),w=typeof x.integrity=="string"?x.integrity:void 0,j=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;y==="style"?i.d.S(g,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:v,integrity:w,fetchPriority:j}):y==="script"&&i.d.X(g,{crossOrigin:v,integrity:w,fetchPriority:j,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},yt.preinitModule=function(g,x){if(typeof g=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var y=f(x.as,x.crossOrigin);i.d.M(g,{crossOrigin:y,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&i.d.M(g)},yt.preload=function(g,x){if(typeof g=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var y=x.as,v=f(y,x.crossOrigin);i.d.L(g,y,{crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},yt.preloadModule=function(g,x){if(typeof g=="string")if(x){var y=f(x.as,x.crossOrigin);i.d.m(g,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:y,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else i.d.m(g)},yt.requestFormReset=function(g){i.d.r(g)},yt.unstable_batchedUpdates=function(g,x){return g(x)},yt.useFormState=function(g,x,y){return m.H.useFormState(g,x,y)},yt.useFormStatus=function(){return m.H.useHostTransitionStatus()},yt.version="19.1.0",yt}var Mf;function O0(){if(Mf)return Zc.exports;Mf=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(r){console.error(r)}}return c(),Zc.exports=Bp(),Zc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rf;function $p(){if(Rf)return Yn;Rf=1;var c=qp(),r=_d(),n=O0();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function m(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function f(e){if(u(e)!==e)throw Error(i(188))}function g(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(i(188));return t!==e?null:e}for(var a=e,l=t;;){var d=a.return;if(d===null)break;var h=d.alternate;if(h===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===a)return f(d),e;if(h===l)return f(d),t;h=h.sibling}throw Error(i(188))}if(a.return!==l.return)a=d,l=h;else{for(var p=!1,b=d.child;b;){if(b===a){p=!0,a=d,l=h;break}if(b===l){p=!0,l=d,a=h;break}b=b.sibling}if(!p){for(b=h.child;b;){if(b===a){p=!0,a=h,l=d;break}if(b===l){p=!0,l=h,a=d;break}b=b.sibling}if(!p)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?e:t}function x(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=x(e),t!==null)return t;e=e.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),K=Symbol.for("react.consumer"),R=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),ue=Symbol.for("react.memo_cache_sentinel"),oe=Symbol.iterator;function he(e){return e===null||typeof e!="object"?null:(e=oe&&e[oe]||e["@@iterator"],typeof e=="function"?e:null)}var re=Symbol.for("react.client.reference");function pe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===re?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case C:return"Profiler";case D:return"StrictMode";case A:return"Suspense";case te:return"SuspenseList";case V:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case j:return"Portal";case R:return(e.displayName||"Context")+".Provider";case K:return(e._context.displayName||"Context")+".Consumer";case E:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case G:return t=e.displayName||null,t!==null?t:pe(e.type)||"Memo";case ie:t=e._payload,e=e._init;try{return pe(e(t))}catch{}}return null}var Y=Array.isArray,T=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},$=[],N=-1;function I(e){return{current:e}}function J(e){0>N||(e.current=$[N],$[N]=null,N--)}function z(e,t){N++,$[N]=e.current,e.current=t}var Q=I(null),ce=I(null),de=I(null),Ee=I(null);function Se(e,t){switch(z(de,t),z(ce,e),z(Q,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ef(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=ef(t),e=tf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}J(Q),z(Q,e)}function nt(){J(Q),J(ce),J(de)}function Vt(e){e.memoizedState!==null&&z(Ee,e);var t=Q.current,a=tf(t,e.type);t!==a&&(z(ce,e),z(Q,a))}function Wt(e){ce.current===e&&(J(Q),J(ce)),Ee.current===e&&(J(Ee),Bn._currentValue=le)}var Ds=Object.prototype.hasOwnProperty,Us=c.unstable_scheduleCallback,ha=c.unstable_cancelCallback,es=c.unstable_shouldYield,Vr=c.unstable_requestPaint,jt=c.unstable_now,ma=c.unstable_getCurrentPriorityLevel,Ms=c.unstable_ImmediatePriority,ds=c.unstable_UserBlockingPriority,U=c.unstable_NormalPriority,se=c.unstable_LowPriority,ve=c.unstable_IdlePriority,ee=c.log,ne=c.unstable_setDisableYieldValue,ke=null,be=null;function qe(e){if(typeof ee=="function"&&ne(e),be&&typeof be.setStrictMode=="function")try{be.setStrictMode(ke,e)}catch{}}var Ve=Math.clz32?Math.clz32:zd,ht=Math.log,Rd=Math.LN2;function zd(e){return e>>>=0,e===0?32:31-(ht(e)/Rd|0)|0}var $a=256,rl=4194304;function fa(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function nl(e,t,a){var l=e.pendingLanes;if(l===0)return 0;var d=0,h=e.suspendedLanes,p=e.pingedLanes;e=e.warmLanes;var b=l&134217727;return b!==0?(l=b&~h,l!==0?d=fa(l):(p&=b,p!==0?d=fa(p):a||(a=b&~e,a!==0&&(d=fa(a))))):(b=l&~h,b!==0?d=fa(b):p!==0?d=fa(p):a||(a=l&~e,a!==0&&(d=fa(a)))),d===0?0:t!==0&&t!==d&&(t&h)===0&&(h=d&-d,a=t&-t,h>=a||h===32&&(a&4194048)!==0)?t:d}function Qr(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function yg(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ld(){var e=$a;return $a<<=1,($a&4194048)===0&&($a=256),e}function qd(){var e=rl;return rl<<=1,(rl&62914560)===0&&(rl=4194304),e}function Ui(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Xr(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function vg(e,t,a,l,d,h){var p=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var b=e.entanglements,k=e.expirationTimes,B=e.hiddenUpdates;for(a=p&~a;0<a;){var X=31-Ve(a),F=1<<X;b[X]=0,k[X]=-1;var P=B[X];if(P!==null)for(B[X]=null,X=0;X<P.length;X++){var H=P[X];H!==null&&(H.lane&=-536870913)}a&=~F}l!==0&&Bd(e,l,0),h!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=h&~(p&~t))}function Bd(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Ve(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|a&4194090}function $d(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var l=31-Ve(a),d=1<<l;d&t|e[l]&t&&(e[l]|=t),a&=~d}}function Mi(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ri(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Pd(){var e=W.p;return e!==0?e:(e=window.event,e===void 0?32:jf(e.type))}function bg(e,t){var a=W.p;try{return W.p=e,t()}finally{W.p=a}}var Rs=Math.random().toString(36).slice(2),xt="__reactFiber$"+Rs,wt="__reactProps$"+Rs,Pa="__reactContainer$"+Rs,zi="__reactEvents$"+Rs,jg="__reactListeners$"+Rs,wg="__reactHandles$"+Rs,Hd="__reactResources$"+Rs,Kr="__reactMarker$"+Rs;function Li(e){delete e[xt],delete e[wt],delete e[zi],delete e[jg],delete e[wg]}function Ha(e){var t=e[xt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Pa]||a[xt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=nf(e);e!==null;){if(a=e[xt])return a;e=nf(e)}return t}e=a,a=e.parentNode}return null}function Ia(e){if(e=e[xt]||e[Pa]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Zr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function Ga(e){var t=e[Hd];return t||(t=e[Hd]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function lt(e){e[Kr]=!0}var Id=new Set,Gd={};function ga(e,t){Ya(e,t),Ya(e+"Capture",t)}function Ya(e,t){for(Gd[e]=t,e=0;e<t.length;e++)Id.add(t[e])}var Ng=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yd={},Vd={};function Sg(e){return Ds.call(Vd,e)?!0:Ds.call(Yd,e)?!1:Ng.test(e)?Vd[e]=!0:(Yd[e]=!0,!1)}function ll(e,t,a){if(Sg(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function il(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function us(e,t,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+l)}}var qi,Qd;function Va(e){if(qi===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);qi=t&&t[1]||"",Qd=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+qi+e+Qd}var Bi=!1;function $i(e,t){if(!e||Bi)return"";Bi=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var F=function(){throw Error()};if(Object.defineProperty(F.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(F,[])}catch(H){var P=H}Reflect.construct(e,[],F)}else{try{F.call()}catch(H){P=H}e.call(F.prototype)}}else{try{throw Error()}catch(H){P=H}(F=e())&&typeof F.catch=="function"&&F.catch(function(){})}}catch(H){if(H&&P&&typeof H.stack=="string")return[H.stack,P.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=l.DetermineComponentFrameRoot(),p=h[0],b=h[1];if(p&&b){var k=p.split(`
`),B=b.split(`
`);for(d=l=0;l<k.length&&!k[l].includes("DetermineComponentFrameRoot");)l++;for(;d<B.length&&!B[d].includes("DetermineComponentFrameRoot");)d++;if(l===k.length||d===B.length)for(l=k.length-1,d=B.length-1;1<=l&&0<=d&&k[l]!==B[d];)d--;for(;1<=l&&0<=d;l--,d--)if(k[l]!==B[d]){if(l!==1||d!==1)do if(l--,d--,0>d||k[l]!==B[d]){var X=`
`+k[l].replace(" at new "," at ");return e.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",e.displayName)),X}while(1<=l&&0<=d);break}}}finally{Bi=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Va(a):""}function _g(e){switch(e.tag){case 26:case 27:case 5:return Va(e.type);case 16:return Va("Lazy");case 13:return Va("Suspense");case 19:return Va("SuspenseList");case 0:case 15:return $i(e.type,!1);case 11:return $i(e.type.render,!1);case 1:return $i(e.type,!0);case 31:return Va("Activity");default:return""}}function Xd(e){try{var t="";do t+=_g(e),e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Rt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Kd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Eg(e){var t=Kd(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,h=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(p){l=""+p,h.call(this,p)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(p){l=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ol(e){e._valueTracker||(e._valueTracker=Eg(e))}function Zd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),l="";return e&&(l=Kd(e)?e.checked?"true":"false":e.value),e=l,e!==a?(t.setValue(e),!0):!1}function cl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var kg=/[\n"\\]/g;function zt(e){return e.replace(kg,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Pi(e,t,a,l,d,h,p,b){e.name="",p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.type=p:e.removeAttribute("type"),t!=null?p==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Rt(t)):e.value!==""+Rt(t)&&(e.value=""+Rt(t)):p!=="submit"&&p!=="reset"||e.removeAttribute("value"),t!=null?Hi(e,p,Rt(t)):a!=null?Hi(e,p,Rt(a)):l!=null&&e.removeAttribute("value"),d==null&&h!=null&&(e.defaultChecked=!!h),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+Rt(b):e.removeAttribute("name")}function Jd(e,t,a,l,d,h,p,b){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),t!=null||a!=null){if(!(h!=="submit"&&h!=="reset"||t!=null))return;a=a!=null?""+Rt(a):"",t=t!=null?""+Rt(t):a,b||t===e.value||(e.value=t),e.defaultValue=t}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=b?e.checked:!!l,e.defaultChecked=!!l,p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.name=p)}function Hi(e,t,a){t==="number"&&cl(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Qa(e,t,a,l){if(e=e.options,t){t={};for(var d=0;d<a.length;d++)t["$"+a[d]]=!0;for(a=0;a<e.length;a++)d=t.hasOwnProperty("$"+e[a].value),e[a].selected!==d&&(e[a].selected=d),d&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Rt(a),t=null,d=0;d<e.length;d++){if(e[d].value===a){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function Fd(e,t,a){if(t!=null&&(t=""+Rt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Rt(a):""}function Wd(e,t,a,l){if(t==null){if(l!=null){if(a!=null)throw Error(i(92));if(Y(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),t=a}a=Rt(t),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l)}function Xa(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Tg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function eu(e,t,a){var l=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,a):typeof a!="number"||a===0||Tg.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function tu(e,t,a){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var d in t)l=t[d],t.hasOwnProperty(d)&&a[d]!==l&&eu(e,d,l)}else for(var h in t)t.hasOwnProperty(h)&&eu(e,h,t[h])}function Ii(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Og=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function dl(e){return Og.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Gi=null;function Yi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ka=null,Za=null;function su(e){var t=Ia(e);if(t&&(e=t.stateNode)){var a=e[wt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Pi(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+zt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var l=a[t];if(l!==e&&l.form===e.form){var d=l[wt]||null;if(!d)throw Error(i(90));Pi(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(t=0;t<a.length;t++)l=a[t],l.form===e.form&&Zd(l)}break e;case"textarea":Fd(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Qa(e,!!a.multiple,t,!1)}}}var Vi=!1;function au(e,t,a){if(Vi)return e(t,a);Vi=!0;try{var l=e(t);return l}finally{if(Vi=!1,(Ka!==null||Za!==null)&&(Kl(),Ka&&(t=Ka,e=Za,Za=Ka=null,su(t),e)))for(t=0;t<e.length;t++)su(e[t])}}function Jr(e,t){var a=e.stateNode;if(a===null)return null;var l=a[wt]||null;if(l===null)return null;a=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(i(231,t,typeof a));return a}var hs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qi=!1;if(hs)try{var Fr={};Object.defineProperty(Fr,"passive",{get:function(){Qi=!0}}),window.addEventListener("test",Fr,Fr),window.removeEventListener("test",Fr,Fr)}catch{Qi=!1}var zs=null,Xi=null,ul=null;function ru(){if(ul)return ul;var e,t=Xi,a=t.length,l,d="value"in zs?zs.value:zs.textContent,h=d.length;for(e=0;e<a&&t[e]===d[e];e++);var p=a-e;for(l=1;l<=p&&t[a-l]===d[h-l];l++);return ul=d.slice(e,1<l?1-l:void 0)}function hl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ml(){return!0}function nu(){return!1}function Nt(e){function t(a,l,d,h,p){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=h,this.target=p,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(a=e[b],this[b]=a?a(h):h[b]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?ml:nu,this.isPropagationStopped=nu,this}return y(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ml)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ml)},persist:function(){},isPersistent:ml}),t}var xa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fl=Nt(xa),Wr=y({},xa,{view:0,detail:0}),Ag=Nt(Wr),Ki,Zi,en,gl=y({},Wr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&e.type==="mousemove"?(Ki=e.screenX-en.screenX,Zi=e.screenY-en.screenY):Zi=Ki=0,en=e),Ki)},movementY:function(e){return"movementY"in e?e.movementY:Zi}}),lu=Nt(gl),Dg=y({},gl,{dataTransfer:0}),Ug=Nt(Dg),Mg=y({},Wr,{relatedTarget:0}),Ji=Nt(Mg),Rg=y({},xa,{animationName:0,elapsedTime:0,pseudoElement:0}),zg=Nt(Rg),Lg=y({},xa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),qg=Nt(Lg),Bg=y({},xa,{data:0}),iu=Nt(Bg),$g={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ig(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Hg[e])?!!t[e]:!1}function Fi(){return Ig}var Gg=y({},Wr,{key:function(e){if(e.key){var t=$g[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=hl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Pg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fi,charCode:function(e){return e.type==="keypress"?hl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?hl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Yg=Nt(Gg),Vg=y({},gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ou=Nt(Vg),Qg=y({},Wr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fi}),Xg=Nt(Qg),Kg=y({},xa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zg=Nt(Kg),Jg=y({},gl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Fg=Nt(Jg),Wg=y({},xa,{newState:0,oldState:0}),ex=Nt(Wg),tx=[9,13,27,32],Wi=hs&&"CompositionEvent"in window,tn=null;hs&&"documentMode"in document&&(tn=document.documentMode);var sx=hs&&"TextEvent"in window&&!tn,cu=hs&&(!Wi||tn&&8<tn&&11>=tn),du=" ",uu=!1;function hu(e,t){switch(e){case"keyup":return tx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ja=!1;function ax(e,t){switch(e){case"compositionend":return mu(t);case"keypress":return t.which!==32?null:(uu=!0,du);case"textInput":return e=t.data,e===du&&uu?null:e;default:return null}}function rx(e,t){if(Ja)return e==="compositionend"||!Wi&&hu(e,t)?(e=ru(),ul=Xi=zs=null,Ja=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return cu&&t.locale!=="ko"?null:t.data;default:return null}}var nx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!nx[e.type]:t==="textarea"}function gu(e,t,a,l){Ka?Za?Za.push(l):Za=[l]:Ka=l,t=ti(t,"onChange"),0<t.length&&(a=new fl("onChange","change",null,a,l),e.push({event:a,listeners:t}))}var sn=null,an=null;function lx(e){Km(e,0)}function xl(e){var t=Zr(e);if(Zd(t))return e}function xu(e,t){if(e==="change")return t}var pu=!1;if(hs){var eo;if(hs){var to="oninput"in document;if(!to){var yu=document.createElement("div");yu.setAttribute("oninput","return;"),to=typeof yu.oninput=="function"}eo=to}else eo=!1;pu=eo&&(!document.documentMode||9<document.documentMode)}function vu(){sn&&(sn.detachEvent("onpropertychange",bu),an=sn=null)}function bu(e){if(e.propertyName==="value"&&xl(an)){var t=[];gu(t,an,e,Yi(e)),au(lx,t)}}function ix(e,t,a){e==="focusin"?(vu(),sn=t,an=a,sn.attachEvent("onpropertychange",bu)):e==="focusout"&&vu()}function ox(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return xl(an)}function cx(e,t){if(e==="click")return xl(t)}function dx(e,t){if(e==="input"||e==="change")return xl(t)}function ux(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Tt=typeof Object.is=="function"?Object.is:ux;function rn(e,t){if(Tt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),l=Object.keys(t);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!Ds.call(t,d)||!Tt(e[d],t[d]))return!1}return!0}function ju(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function wu(e,t){var a=ju(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=t&&l>=t)return{node:a,offset:t-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ju(a)}}function Nu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Nu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Su(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=cl(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=cl(e.document)}return t}function so(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var hx=hs&&"documentMode"in document&&11>=document.documentMode,Fa=null,ao=null,nn=null,ro=!1;function _u(e,t,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ro||Fa==null||Fa!==cl(l)||(l=Fa,"selectionStart"in l&&so(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),nn&&rn(nn,l)||(nn=l,l=ti(ao,"onSelect"),0<l.length&&(t=new fl("onSelect","select",null,t,a),e.push({event:t,listeners:l}),t.target=Fa)))}function pa(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Wa={animationend:pa("Animation","AnimationEnd"),animationiteration:pa("Animation","AnimationIteration"),animationstart:pa("Animation","AnimationStart"),transitionrun:pa("Transition","TransitionRun"),transitionstart:pa("Transition","TransitionStart"),transitioncancel:pa("Transition","TransitionCancel"),transitionend:pa("Transition","TransitionEnd")},no={},Eu={};hs&&(Eu=document.createElement("div").style,"AnimationEvent"in window||(delete Wa.animationend.animation,delete Wa.animationiteration.animation,delete Wa.animationstart.animation),"TransitionEvent"in window||delete Wa.transitionend.transition);function ya(e){if(no[e])return no[e];if(!Wa[e])return e;var t=Wa[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Eu)return no[e]=t[a];return e}var ku=ya("animationend"),Tu=ya("animationiteration"),Cu=ya("animationstart"),mx=ya("transitionrun"),fx=ya("transitionstart"),gx=ya("transitioncancel"),Ou=ya("transitionend"),Au=new Map,lo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");lo.push("scrollEnd");function Qt(e,t){Au.set(e,t),ga(t,[e])}var Du=new WeakMap;function Lt(e,t){if(typeof e=="object"&&e!==null){var a=Du.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Xd(t)},Du.set(e,t),t)}return{value:e,source:t,stack:Xd(t)}}var qt=[],er=0,io=0;function pl(){for(var e=er,t=io=er=0;t<e;){var a=qt[t];qt[t++]=null;var l=qt[t];qt[t++]=null;var d=qt[t];qt[t++]=null;var h=qt[t];if(qt[t++]=null,l!==null&&d!==null){var p=l.pending;p===null?d.next=d:(d.next=p.next,p.next=d),l.pending=d}h!==0&&Uu(a,d,h)}}function yl(e,t,a,l){qt[er++]=e,qt[er++]=t,qt[er++]=a,qt[er++]=l,io|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function oo(e,t,a,l){return yl(e,t,a,l),vl(e)}function tr(e,t){return yl(e,null,null,t),vl(e)}function Uu(e,t,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var d=!1,h=e.return;h!==null;)h.childLanes|=a,l=h.alternate,l!==null&&(l.childLanes|=a),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(d=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,d&&t!==null&&(d=31-Ve(a),e=h.hiddenUpdates,l=e[d],l===null?e[d]=[t]:l.push(t),t.lane=a|536870912),h):null}function vl(e){if(50<An)throw An=0,gc=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var sr={};function xx(e,t,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ct(e,t,a,l){return new xx(e,t,a,l)}function co(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ms(e,t){var a=e.alternate;return a===null?(a=Ct(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Mu(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function bl(e,t,a,l,d,h){var p=0;if(l=e,typeof e=="function")co(e)&&(p=1);else if(typeof e=="string")p=yp(e,a,Q.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case V:return e=Ct(31,a,t,d),e.elementType=V,e.lanes=h,e;case S:return va(a.children,d,h,t);case D:p=8,d|=24;break;case C:return e=Ct(12,a,t,d|2),e.elementType=C,e.lanes=h,e;case A:return e=Ct(13,a,t,d),e.elementType=A,e.lanes=h,e;case te:return e=Ct(19,a,t,d),e.elementType=te,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case q:case R:p=10;break e;case K:p=9;break e;case E:p=11;break e;case G:p=14;break e;case ie:p=16,l=null;break e}p=29,a=Error(i(130,e===null?"null":typeof e,"")),l=null}return t=Ct(p,a,t,d),t.elementType=e,t.type=l,t.lanes=h,t}function va(e,t,a,l){return e=Ct(7,e,l,t),e.lanes=a,e}function uo(e,t,a){return e=Ct(6,e,null,t),e.lanes=a,e}function ho(e,t,a){return t=Ct(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ar=[],rr=0,jl=null,wl=0,Bt=[],$t=0,ba=null,fs=1,gs="";function ja(e,t){ar[rr++]=wl,ar[rr++]=jl,jl=e,wl=t}function Ru(e,t,a){Bt[$t++]=fs,Bt[$t++]=gs,Bt[$t++]=ba,ba=e;var l=fs;e=gs;var d=32-Ve(l)-1;l&=~(1<<d),a+=1;var h=32-Ve(t)+d;if(30<h){var p=d-d%5;h=(l&(1<<p)-1).toString(32),l>>=p,d-=p,fs=1<<32-Ve(t)+d|a<<d|l,gs=h+e}else fs=1<<h|a<<d|l,gs=e}function mo(e){e.return!==null&&(ja(e,1),Ru(e,1,0))}function fo(e){for(;e===jl;)jl=ar[--rr],ar[rr]=null,wl=ar[--rr],ar[rr]=null;for(;e===ba;)ba=Bt[--$t],Bt[$t]=null,gs=Bt[--$t],Bt[$t]=null,fs=Bt[--$t],Bt[$t]=null}var bt=null,Ke=null,Re=!1,wa=null,ts=!1,go=Error(i(519));function Na(e){var t=Error(i(418,""));throw cn(Lt(t,e)),go}function zu(e){var t=e.stateNode,a=e.type,l=e.memoizedProps;switch(t[xt]=e,t[wt]=l,a){case"dialog":Oe("cancel",t),Oe("close",t);break;case"iframe":case"object":case"embed":Oe("load",t);break;case"video":case"audio":for(a=0;a<Un.length;a++)Oe(Un[a],t);break;case"source":Oe("error",t);break;case"img":case"image":case"link":Oe("error",t),Oe("load",t);break;case"details":Oe("toggle",t);break;case"input":Oe("invalid",t),Jd(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ol(t);break;case"select":Oe("invalid",t);break;case"textarea":Oe("invalid",t),Wd(t,l.value,l.defaultValue,l.children),ol(t)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||l.suppressHydrationWarning===!0||Wm(t.textContent,a)?(l.popover!=null&&(Oe("beforetoggle",t),Oe("toggle",t)),l.onScroll!=null&&Oe("scroll",t),l.onScrollEnd!=null&&Oe("scrollend",t),l.onClick!=null&&(t.onclick=si),t=!0):t=!1,t||Na(e)}function Lu(e){for(bt=e.return;bt;)switch(bt.tag){case 5:case 13:ts=!1;return;case 27:case 3:ts=!0;return;default:bt=bt.return}}function ln(e){if(e!==bt)return!1;if(!Re)return Lu(e),Re=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Ac(e.type,e.memoizedProps)),a=!a),a&&Ke&&Na(e),Lu(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(t===0){Ke=Kt(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++;e=e.nextSibling}Ke=null}}else t===27?(t=Ke,Fs(e.type)?(e=Rc,Rc=null,Ke=e):Ke=t):Ke=bt?Kt(e.stateNode.nextSibling):null;return!0}function on(){Ke=bt=null,Re=!1}function qu(){var e=wa;return e!==null&&(Et===null?Et=e:Et.push.apply(Et,e),wa=null),e}function cn(e){wa===null?wa=[e]:wa.push(e)}var xo=I(null),Sa=null,xs=null;function Ls(e,t,a){z(xo,t._currentValue),t._currentValue=a}function ps(e){e._currentValue=xo.current,J(xo)}function po(e,t,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===a)break;e=e.return}}function yo(e,t,a,l){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var h=d.dependencies;if(h!==null){var p=d.child;h=h.firstContext;e:for(;h!==null;){var b=h;h=d;for(var k=0;k<t.length;k++)if(b.context===t[k]){h.lanes|=a,b=h.alternate,b!==null&&(b.lanes|=a),po(h.return,a,e),l||(p=null);break e}h=b.next}}else if(d.tag===18){if(p=d.return,p===null)throw Error(i(341));p.lanes|=a,h=p.alternate,h!==null&&(h.lanes|=a),po(p,a,e),p=null}else p=d.child;if(p!==null)p.return=d;else for(p=d;p!==null;){if(p===e){p=null;break}if(d=p.sibling,d!==null){d.return=p.return,p=d;break}p=p.return}d=p}}function dn(e,t,a,l){e=null;for(var d=t,h=!1;d!==null;){if(!h){if((d.flags&524288)!==0)h=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var p=d.alternate;if(p===null)throw Error(i(387));if(p=p.memoizedProps,p!==null){var b=d.type;Tt(d.pendingProps.value,p.value)||(e!==null?e.push(b):e=[b])}}else if(d===Ee.current){if(p=d.alternate,p===null)throw Error(i(387));p.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Bn):e=[Bn])}d=d.return}e!==null&&yo(t,e,a,l),t.flags|=262144}function Nl(e){for(e=e.firstContext;e!==null;){if(!Tt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function _a(e){Sa=e,xs=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function pt(e){return Bu(Sa,e)}function Sl(e,t){return Sa===null&&_a(e),Bu(e,t)}function Bu(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},xs===null){if(e===null)throw Error(i(308));xs=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else xs=xs.next=t;return a}var px=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},yx=c.unstable_scheduleCallback,vx=c.unstable_NormalPriority,at={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vo(){return{controller:new px,data:new Map,refCount:0}}function un(e){e.refCount--,e.refCount===0&&yx(vx,function(){e.controller.abort()})}var hn=null,bo=0,nr=0,lr=null;function bx(e,t){if(hn===null){var a=hn=[];bo=0,nr=wc(),lr={status:"pending",value:void 0,then:function(l){a.push(l)}}}return bo++,t.then($u,$u),t}function $u(){if(--bo===0&&hn!==null){lr!==null&&(lr.status="fulfilled");var e=hn;hn=null,nr=0,lr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function jx(e,t){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var d=0;d<a.length;d++)(0,a[d])(t)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var Pu=T.S;T.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&bx(e,t),Pu!==null&&Pu(e,t)};var Ea=I(null);function jo(){var e=Ea.current;return e!==null?e:Ie.pooledCache}function _l(e,t){t===null?z(Ea,Ea.current):z(Ea,t.pool)}function Hu(){var e=jo();return e===null?null:{parent:at._currentValue,pool:e}}var mn=Error(i(460)),Iu=Error(i(474)),El=Error(i(542)),wo={then:function(){}};function Gu(e){return e=e.status,e==="fulfilled"||e==="rejected"}function kl(){}function Yu(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(kl,kl),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Qu(e),e;default:if(typeof t.status=="string")t.then(kl,kl);else{if(e=Ie,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var d=t;d.status="fulfilled",d.value=l}},function(l){if(t.status==="pending"){var d=t;d.status="rejected",d.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Qu(e),e}throw fn=t,mn}}var fn=null;function Vu(){if(fn===null)throw Error(i(459));var e=fn;return fn=null,e}function Qu(e){if(e===mn||e===El)throw Error(i(483))}var qs=!1;function No(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function So(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Bs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function $s(e,t,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(ze&2)!==0){var d=l.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),l.pending=t,t=vl(e),Uu(e,null,a),t}return yl(e,l,t,a),vl(e)}function gn(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,$d(e,a)}}function _o(e,t){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,h=null;if(a=a.firstBaseUpdate,a!==null){do{var p={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};h===null?d=h=p:h=h.next=p,a=a.next}while(a!==null);h===null?d=h=t:h=h.next=t}else d=h=t;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Eo=!1;function xn(){if(Eo){var e=lr;if(e!==null)throw e}}function pn(e,t,a,l){Eo=!1;var d=e.updateQueue;qs=!1;var h=d.firstBaseUpdate,p=d.lastBaseUpdate,b=d.shared.pending;if(b!==null){d.shared.pending=null;var k=b,B=k.next;k.next=null,p===null?h=B:p.next=B,p=k;var X=e.alternate;X!==null&&(X=X.updateQueue,b=X.lastBaseUpdate,b!==p&&(b===null?X.firstBaseUpdate=B:b.next=B,X.lastBaseUpdate=k))}if(h!==null){var F=d.baseState;p=0,X=B=k=null,b=h;do{var P=b.lane&-536870913,H=P!==b.lane;if(H?(De&P)===P:(l&P)===P){P!==0&&P===nr&&(Eo=!0),X!==null&&(X=X.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ye=e,ge=b;P=t;var Pe=a;switch(ge.tag){case 1:if(ye=ge.payload,typeof ye=="function"){F=ye.call(Pe,F,P);break e}F=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=ge.payload,P=typeof ye=="function"?ye.call(Pe,F,P):ye,P==null)break e;F=y({},F,P);break e;case 2:qs=!0}}P=b.callback,P!==null&&(e.flags|=64,H&&(e.flags|=8192),H=d.callbacks,H===null?d.callbacks=[P]:H.push(P))}else H={lane:P,tag:b.tag,payload:b.payload,callback:b.callback,next:null},X===null?(B=X=H,k=F):X=X.next=H,p|=P;if(b=b.next,b===null){if(b=d.shared.pending,b===null)break;H=b,b=H.next,H.next=null,d.lastBaseUpdate=H,d.shared.pending=null}}while(!0);X===null&&(k=F),d.baseState=k,d.firstBaseUpdate=B,d.lastBaseUpdate=X,h===null&&(d.shared.lanes=0),Xs|=p,e.lanes=p,e.memoizedState=F}}function Xu(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function Ku(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Xu(a[e],t)}var ir=I(null),Tl=I(0);function Zu(e,t){e=Ss,z(Tl,e),z(ir,t),Ss=e|t.baseLanes}function ko(){z(Tl,Ss),z(ir,ir.current)}function To(){Ss=Tl.current,J(ir),J(Tl)}var Ps=0,_e=null,Be=null,tt=null,Cl=!1,or=!1,ka=!1,Ol=0,yn=0,cr=null,wx=0;function Je(){throw Error(i(321))}function Co(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Tt(e[a],t[a]))return!1;return!0}function Oo(e,t,a,l,d,h){return Ps=h,_e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,T.H=e===null||e.memoizedState===null?Uh:Mh,ka=!1,h=a(l,d),ka=!1,or&&(h=Fu(t,a,l,d)),Ju(e),h}function Ju(e){T.H=zl;var t=Be!==null&&Be.next!==null;if(Ps=0,tt=Be=_e=null,Cl=!1,yn=0,cr=null,t)throw Error(i(300));e===null||it||(e=e.dependencies,e!==null&&Nl(e)&&(it=!0))}function Fu(e,t,a,l){_e=e;var d=0;do{if(or&&(cr=null),yn=0,or=!1,25<=d)throw Error(i(301));if(d+=1,tt=Be=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}T.H=Cx,h=t(a,l)}while(or);return h}function Nx(){var e=T.H,t=e.useState()[0];return t=typeof t.then=="function"?vn(t):t,e=e.useState()[0],(Be!==null?Be.memoizedState:null)!==e&&(_e.flags|=1024),t}function Ao(){var e=Ol!==0;return Ol=0,e}function Do(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Uo(e){if(Cl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Cl=!1}Ps=0,tt=Be=_e=null,or=!1,yn=Ol=0,cr=null}function St(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?_e.memoizedState=tt=e:tt=tt.next=e,tt}function st(){if(Be===null){var e=_e.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var t=tt===null?_e.memoizedState:tt.next;if(t!==null)tt=t,Be=e;else{if(e===null)throw _e.alternate===null?Error(i(467)):Error(i(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},tt===null?_e.memoizedState=tt=e:tt=tt.next=e}return tt}function Mo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vn(e){var t=yn;return yn+=1,cr===null&&(cr=[]),e=Yu(cr,e,t),t=_e,(tt===null?t.memoizedState:tt.next)===null&&(t=t.alternate,T.H=t===null||t.memoizedState===null?Uh:Mh),e}function Al(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return vn(e);if(e.$$typeof===R)return pt(e)}throw Error(i(438,String(e)))}function Ro(e){var t=null,a=_e.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var l=_e.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(d){return d.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Mo(),_e.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),l=0;l<e;l++)a[l]=ue;return t.index++,a}function ys(e,t){return typeof t=="function"?t(e):t}function Dl(e){var t=st();return zo(t,Be,e)}function zo(e,t,a){var l=e.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var d=e.baseQueue,h=l.pending;if(h!==null){if(d!==null){var p=d.next;d.next=h.next,h.next=p}t.baseQueue=d=h,l.pending=null}if(h=e.baseState,d===null)e.memoizedState=h;else{t=d.next;var b=p=null,k=null,B=t,X=!1;do{var F=B.lane&-536870913;if(F!==B.lane?(De&F)===F:(Ps&F)===F){var P=B.revertLane;if(P===0)k!==null&&(k=k.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),F===nr&&(X=!0);else if((Ps&P)===P){B=B.next,P===nr&&(X=!0);continue}else F={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},k===null?(b=k=F,p=h):k=k.next=F,_e.lanes|=P,Xs|=P;F=B.action,ka&&a(h,F),h=B.hasEagerState?B.eagerState:a(h,F)}else P={lane:F,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},k===null?(b=k=P,p=h):k=k.next=P,_e.lanes|=F,Xs|=F;B=B.next}while(B!==null&&B!==t);if(k===null?p=h:k.next=b,!Tt(h,e.memoizedState)&&(it=!0,X&&(a=lr,a!==null)))throw a;e.memoizedState=h,e.baseState=p,e.baseQueue=k,l.lastRenderedState=h}return d===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Lo(e){var t=st(),a=t.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=e;var l=a.dispatch,d=a.pending,h=t.memoizedState;if(d!==null){a.pending=null;var p=d=d.next;do h=e(h,p.action),p=p.next;while(p!==d);Tt(h,t.memoizedState)||(it=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),a.lastRenderedState=h}return[h,l]}function Wu(e,t,a){var l=_e,d=st(),h=Re;if(h){if(a===void 0)throw Error(i(407));a=a()}else a=t();var p=!Tt((Be||d).memoizedState,a);p&&(d.memoizedState=a,it=!0),d=d.queue;var b=sh.bind(null,l,d,e);if(bn(2048,8,b,[e]),d.getSnapshot!==t||p||tt!==null&&tt.memoizedState.tag&1){if(l.flags|=2048,dr(9,Ul(),th.bind(null,l,d,a,t),null),Ie===null)throw Error(i(349));h||(Ps&124)!==0||eh(l,t,a)}return a}function eh(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=_e.updateQueue,t===null?(t=Mo(),_e.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function th(e,t,a,l){t.value=a,t.getSnapshot=l,ah(t)&&rh(e)}function sh(e,t,a){return a(function(){ah(t)&&rh(e)})}function ah(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Tt(e,a)}catch{return!0}}function rh(e){var t=tr(e,2);t!==null&&Mt(t,e,2)}function qo(e){var t=St();if(typeof e=="function"){var a=e;if(e=a(),ka){qe(!0);try{a()}finally{qe(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:e},t}function nh(e,t,a,l){return e.baseState=a,zo(e,Be,typeof l=="function"?l:ys)}function Sx(e,t,a,l,d){if(Rl(e))throw Error(i(485));if(e=t.action,e!==null){var h={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){h.listeners.push(p)}};T.T!==null?a(!0):h.isTransition=!1,l(h),a=t.pending,a===null?(h.next=t.pending=h,lh(t,h)):(h.next=a.next,t.pending=a.next=h)}}function lh(e,t){var a=t.action,l=t.payload,d=e.state;if(t.isTransition){var h=T.T,p={};T.T=p;try{var b=a(d,l),k=T.S;k!==null&&k(p,b),ih(e,t,b)}catch(B){Bo(e,t,B)}finally{T.T=h}}else try{h=a(d,l),ih(e,t,h)}catch(B){Bo(e,t,B)}}function ih(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){oh(e,t,l)},function(l){return Bo(e,t,l)}):oh(e,t,a)}function oh(e,t,a){t.status="fulfilled",t.value=a,ch(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,lh(e,a)))}function Bo(e,t,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=a,ch(t),t=t.next;while(t!==l)}e.action=null}function ch(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function dh(e,t){return t}function uh(e,t){if(Re){var a=Ie.formState;if(a!==null){e:{var l=_e;if(Re){if(Ke){t:{for(var d=Ke,h=ts;d.nodeType!==8;){if(!h){d=null;break t}if(d=Kt(d.nextSibling),d===null){d=null;break t}}h=d.data,d=h==="F!"||h==="F"?d:null}if(d){Ke=Kt(d.nextSibling),l=d.data==="F!";break e}}Na(l)}l=!1}l&&(t=a[0])}}return a=St(),a.memoizedState=a.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dh,lastRenderedState:t},a.queue=l,a=Oh.bind(null,_e,l),l.dispatch=a,l=qo(!1),h=Go.bind(null,_e,!1,l.queue),l=St(),d={state:t,dispatch:null,action:e,pending:null},l.queue=d,a=Sx.bind(null,_e,d,h,a),d.dispatch=a,l.memoizedState=e,[t,a,!1]}function hh(e){var t=st();return mh(t,Be,e)}function mh(e,t,a){if(t=zo(e,t,dh)[0],e=Dl(ys)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=vn(t)}catch(p){throw p===mn?El:p}else l=t;t=st();var d=t.queue,h=d.dispatch;return a!==t.memoizedState&&(_e.flags|=2048,dr(9,Ul(),_x.bind(null,d,a),null)),[l,h,e]}function _x(e,t){e.action=t}function fh(e){var t=st(),a=Be;if(a!==null)return mh(t,a,e);st(),t=t.memoizedState,a=st();var l=a.queue.dispatch;return a.memoizedState=e,[t,l,!1]}function dr(e,t,a,l){return e={tag:e,create:a,deps:l,inst:t,next:null},t=_e.updateQueue,t===null&&(t=Mo(),_e.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,t.lastEffect=e),e}function Ul(){return{destroy:void 0,resource:void 0}}function gh(){return st().memoizedState}function Ml(e,t,a,l){var d=St();l=l===void 0?null:l,_e.flags|=e,d.memoizedState=dr(1|t,Ul(),a,l)}function bn(e,t,a,l){var d=st();l=l===void 0?null:l;var h=d.memoizedState.inst;Be!==null&&l!==null&&Co(l,Be.memoizedState.deps)?d.memoizedState=dr(t,h,a,l):(_e.flags|=e,d.memoizedState=dr(1|t,h,a,l))}function xh(e,t){Ml(8390656,8,e,t)}function ph(e,t){bn(2048,8,e,t)}function yh(e,t){return bn(4,2,e,t)}function vh(e,t){return bn(4,4,e,t)}function bh(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function jh(e,t,a){a=a!=null?a.concat([e]):null,bn(4,4,bh.bind(null,t,e),a)}function $o(){}function wh(e,t){var a=st();t=t===void 0?null:t;var l=a.memoizedState;return t!==null&&Co(t,l[1])?l[0]:(a.memoizedState=[e,t],e)}function Nh(e,t){var a=st();t=t===void 0?null:t;var l=a.memoizedState;if(t!==null&&Co(t,l[1]))return l[0];if(l=e(),ka){qe(!0);try{e()}finally{qe(!1)}}return a.memoizedState=[l,t],l}function Po(e,t,a){return a===void 0||(Ps&1073741824)!==0?e.memoizedState=t:(e.memoizedState=a,e=Em(),_e.lanes|=e,Xs|=e,a)}function Sh(e,t,a,l){return Tt(a,t)?a:ir.current!==null?(e=Po(e,a,l),Tt(e,t)||(it=!0),e):(Ps&42)===0?(it=!0,e.memoizedState=a):(e=Em(),_e.lanes|=e,Xs|=e,t)}function _h(e,t,a,l,d){var h=W.p;W.p=h!==0&&8>h?h:8;var p=T.T,b={};T.T=b,Go(e,!1,t,a);try{var k=d(),B=T.S;if(B!==null&&B(b,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var X=jx(k,l);jn(e,t,X,Ut(e))}else jn(e,t,l,Ut(e))}catch(F){jn(e,t,{then:function(){},status:"rejected",reason:F},Ut())}finally{W.p=h,T.T=p}}function Ex(){}function Ho(e,t,a,l){if(e.tag!==5)throw Error(i(476));var d=Eh(e).queue;_h(e,d,t,le,a===null?Ex:function(){return kh(e),a(l)})}function Eh(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:le},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function kh(e){var t=Eh(e).next.queue;jn(e,t,{},Ut())}function Io(){return pt(Bn)}function Th(){return st().memoizedState}function Ch(){return st().memoizedState}function kx(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Ut();e=Bs(a);var l=$s(t,e,a);l!==null&&(Mt(l,t,a),gn(l,t,a)),t={cache:vo()},e.payload=t;return}t=t.return}}function Tx(e,t,a){var l=Ut();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Rl(e)?Ah(t,a):(a=oo(e,t,a,l),a!==null&&(Mt(a,e,l),Dh(a,t,l)))}function Oh(e,t,a){var l=Ut();jn(e,t,a,l)}function jn(e,t,a,l){var d={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Rl(e))Ah(t,d);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var p=t.lastRenderedState,b=h(p,a);if(d.hasEagerState=!0,d.eagerState=b,Tt(b,p))return yl(e,t,d,0),Ie===null&&pl(),!1}catch{}finally{}if(a=oo(e,t,d,l),a!==null)return Mt(a,e,l),Dh(a,t,l),!0}return!1}function Go(e,t,a,l){if(l={lane:2,revertLane:wc(),action:l,hasEagerState:!1,eagerState:null,next:null},Rl(e)){if(t)throw Error(i(479))}else t=oo(e,a,l,2),t!==null&&Mt(t,e,2)}function Rl(e){var t=e.alternate;return e===_e||t!==null&&t===_e}function Ah(e,t){or=Cl=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Dh(e,t,a){if((a&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,$d(e,a)}}var zl={readContext:pt,use:Al,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useLayoutEffect:Je,useInsertionEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useSyncExternalStore:Je,useId:Je,useHostTransitionStatus:Je,useFormState:Je,useActionState:Je,useOptimistic:Je,useMemoCache:Je,useCacheRefresh:Je},Uh={readContext:pt,use:Al,useCallback:function(e,t){return St().memoizedState=[e,t===void 0?null:t],e},useContext:pt,useEffect:xh,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Ml(4194308,4,bh.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Ml(4194308,4,e,t)},useInsertionEffect:function(e,t){Ml(4,2,e,t)},useMemo:function(e,t){var a=St();t=t===void 0?null:t;var l=e();if(ka){qe(!0);try{e()}finally{qe(!1)}}return a.memoizedState=[l,t],l},useReducer:function(e,t,a){var l=St();if(a!==void 0){var d=a(t);if(ka){qe(!0);try{a(t)}finally{qe(!1)}}}else d=t;return l.memoizedState=l.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},l.queue=e,e=e.dispatch=Tx.bind(null,_e,e),[l.memoizedState,e]},useRef:function(e){var t=St();return e={current:e},t.memoizedState=e},useState:function(e){e=qo(e);var t=e.queue,a=Oh.bind(null,_e,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:$o,useDeferredValue:function(e,t){var a=St();return Po(a,e,t)},useTransition:function(){var e=qo(!1);return e=_h.bind(null,_e,e.queue,!0,!1),St().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var l=_e,d=St();if(Re){if(a===void 0)throw Error(i(407));a=a()}else{if(a=t(),Ie===null)throw Error(i(349));(De&124)!==0||eh(l,t,a)}d.memoizedState=a;var h={value:a,getSnapshot:t};return d.queue=h,xh(sh.bind(null,l,h,e),[e]),l.flags|=2048,dr(9,Ul(),th.bind(null,l,h,a,t),null),a},useId:function(){var e=St(),t=Ie.identifierPrefix;if(Re){var a=gs,l=fs;a=(l&~(1<<32-Ve(l)-1)).toString(32)+a,t=""+t+"R"+a,a=Ol++,0<a&&(t+="H"+a.toString(32)),t+=""}else a=wx++,t=""+t+"r"+a.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:Io,useFormState:uh,useActionState:uh,useOptimistic:function(e){var t=St();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Go.bind(null,_e,!0,a),a.dispatch=t,[e,t]},useMemoCache:Ro,useCacheRefresh:function(){return St().memoizedState=kx.bind(null,_e)}},Mh={readContext:pt,use:Al,useCallback:wh,useContext:pt,useEffect:ph,useImperativeHandle:jh,useInsertionEffect:yh,useLayoutEffect:vh,useMemo:Nh,useReducer:Dl,useRef:gh,useState:function(){return Dl(ys)},useDebugValue:$o,useDeferredValue:function(e,t){var a=st();return Sh(a,Be.memoizedState,e,t)},useTransition:function(){var e=Dl(ys)[0],t=st().memoizedState;return[typeof e=="boolean"?e:vn(e),t]},useSyncExternalStore:Wu,useId:Th,useHostTransitionStatus:Io,useFormState:hh,useActionState:hh,useOptimistic:function(e,t){var a=st();return nh(a,Be,e,t)},useMemoCache:Ro,useCacheRefresh:Ch},Cx={readContext:pt,use:Al,useCallback:wh,useContext:pt,useEffect:ph,useImperativeHandle:jh,useInsertionEffect:yh,useLayoutEffect:vh,useMemo:Nh,useReducer:Lo,useRef:gh,useState:function(){return Lo(ys)},useDebugValue:$o,useDeferredValue:function(e,t){var a=st();return Be===null?Po(a,e,t):Sh(a,Be.memoizedState,e,t)},useTransition:function(){var e=Lo(ys)[0],t=st().memoizedState;return[typeof e=="boolean"?e:vn(e),t]},useSyncExternalStore:Wu,useId:Th,useHostTransitionStatus:Io,useFormState:fh,useActionState:fh,useOptimistic:function(e,t){var a=st();return Be!==null?nh(a,Be,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Ro,useCacheRefresh:Ch},ur=null,wn=0;function Ll(e){var t=wn;return wn+=1,ur===null&&(ur=[]),Yu(ur,e,t)}function Nn(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ql(e,t){throw t.$$typeof===v?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Rh(e){var t=e._init;return t(e._payload)}function zh(e){function t(M,O){if(e){var L=M.deletions;L===null?(M.deletions=[O],M.flags|=16):L.push(O)}}function a(M,O){if(!e)return null;for(;O!==null;)t(M,O),O=O.sibling;return null}function l(M){for(var O=new Map;M!==null;)M.key!==null?O.set(M.key,M):O.set(M.index,M),M=M.sibling;return O}function d(M,O){return M=ms(M,O),M.index=0,M.sibling=null,M}function h(M,O,L){return M.index=L,e?(L=M.alternate,L!==null?(L=L.index,L<O?(M.flags|=67108866,O):L):(M.flags|=67108866,O)):(M.flags|=1048576,O)}function p(M){return e&&M.alternate===null&&(M.flags|=67108866),M}function b(M,O,L,Z){return O===null||O.tag!==6?(O=uo(L,M.mode,Z),O.return=M,O):(O=d(O,L),O.return=M,O)}function k(M,O,L,Z){var me=L.type;return me===S?X(M,O,L.props.children,Z,L.key):O!==null&&(O.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===ie&&Rh(me)===O.type)?(O=d(O,L.props),Nn(O,L),O.return=M,O):(O=bl(L.type,L.key,L.props,null,M.mode,Z),Nn(O,L),O.return=M,O)}function B(M,O,L,Z){return O===null||O.tag!==4||O.stateNode.containerInfo!==L.containerInfo||O.stateNode.implementation!==L.implementation?(O=ho(L,M.mode,Z),O.return=M,O):(O=d(O,L.children||[]),O.return=M,O)}function X(M,O,L,Z,me){return O===null||O.tag!==7?(O=va(L,M.mode,Z,me),O.return=M,O):(O=d(O,L),O.return=M,O)}function F(M,O,L){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=uo(""+O,M.mode,L),O.return=M,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case w:return L=bl(O.type,O.key,O.props,null,M.mode,L),Nn(L,O),L.return=M,L;case j:return O=ho(O,M.mode,L),O.return=M,O;case ie:var Z=O._init;return O=Z(O._payload),F(M,O,L)}if(Y(O)||he(O))return O=va(O,M.mode,L,null),O.return=M,O;if(typeof O.then=="function")return F(M,Ll(O),L);if(O.$$typeof===R)return F(M,Sl(M,O),L);ql(M,O)}return null}function P(M,O,L,Z){var me=O!==null?O.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return me!==null?null:b(M,O,""+L,Z);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case w:return L.key===me?k(M,O,L,Z):null;case j:return L.key===me?B(M,O,L,Z):null;case ie:return me=L._init,L=me(L._payload),P(M,O,L,Z)}if(Y(L)||he(L))return me!==null?null:X(M,O,L,Z,null);if(typeof L.then=="function")return P(M,O,Ll(L),Z);if(L.$$typeof===R)return P(M,O,Sl(M,L),Z);ql(M,L)}return null}function H(M,O,L,Z,me){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return M=M.get(L)||null,b(O,M,""+Z,me);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case w:return M=M.get(Z.key===null?L:Z.key)||null,k(O,M,Z,me);case j:return M=M.get(Z.key===null?L:Z.key)||null,B(O,M,Z,me);case ie:var Te=Z._init;return Z=Te(Z._payload),H(M,O,L,Z,me)}if(Y(Z)||he(Z))return M=M.get(L)||null,X(O,M,Z,me,null);if(typeof Z.then=="function")return H(M,O,L,Ll(Z),me);if(Z.$$typeof===R)return H(M,O,L,Sl(O,Z),me);ql(O,Z)}return null}function ye(M,O,L,Z){for(var me=null,Te=null,fe=O,xe=O=0,ct=null;fe!==null&&xe<L.length;xe++){fe.index>xe?(ct=fe,fe=null):ct=fe.sibling;var Me=P(M,fe,L[xe],Z);if(Me===null){fe===null&&(fe=ct);break}e&&fe&&Me.alternate===null&&t(M,fe),O=h(Me,O,xe),Te===null?me=Me:Te.sibling=Me,Te=Me,fe=ct}if(xe===L.length)return a(M,fe),Re&&ja(M,xe),me;if(fe===null){for(;xe<L.length;xe++)fe=F(M,L[xe],Z),fe!==null&&(O=h(fe,O,xe),Te===null?me=fe:Te.sibling=fe,Te=fe);return Re&&ja(M,xe),me}for(fe=l(fe);xe<L.length;xe++)ct=H(fe,M,xe,L[xe],Z),ct!==null&&(e&&ct.alternate!==null&&fe.delete(ct.key===null?xe:ct.key),O=h(ct,O,xe),Te===null?me=ct:Te.sibling=ct,Te=ct);return e&&fe.forEach(function(aa){return t(M,aa)}),Re&&ja(M,xe),me}function ge(M,O,L,Z){if(L==null)throw Error(i(151));for(var me=null,Te=null,fe=O,xe=O=0,ct=null,Me=L.next();fe!==null&&!Me.done;xe++,Me=L.next()){fe.index>xe?(ct=fe,fe=null):ct=fe.sibling;var aa=P(M,fe,Me.value,Z);if(aa===null){fe===null&&(fe=ct);break}e&&fe&&aa.alternate===null&&t(M,fe),O=h(aa,O,xe),Te===null?me=aa:Te.sibling=aa,Te=aa,fe=ct}if(Me.done)return a(M,fe),Re&&ja(M,xe),me;if(fe===null){for(;!Me.done;xe++,Me=L.next())Me=F(M,Me.value,Z),Me!==null&&(O=h(Me,O,xe),Te===null?me=Me:Te.sibling=Me,Te=Me);return Re&&ja(M,xe),me}for(fe=l(fe);!Me.done;xe++,Me=L.next())Me=H(fe,M,xe,Me.value,Z),Me!==null&&(e&&Me.alternate!==null&&fe.delete(Me.key===null?xe:Me.key),O=h(Me,O,xe),Te===null?me=Me:Te.sibling=Me,Te=Me);return e&&fe.forEach(function(Op){return t(M,Op)}),Re&&ja(M,xe),me}function Pe(M,O,L,Z){if(typeof L=="object"&&L!==null&&L.type===S&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case w:e:{for(var me=L.key;O!==null;){if(O.key===me){if(me=L.type,me===S){if(O.tag===7){a(M,O.sibling),Z=d(O,L.props.children),Z.return=M,M=Z;break e}}else if(O.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===ie&&Rh(me)===O.type){a(M,O.sibling),Z=d(O,L.props),Nn(Z,L),Z.return=M,M=Z;break e}a(M,O);break}else t(M,O);O=O.sibling}L.type===S?(Z=va(L.props.children,M.mode,Z,L.key),Z.return=M,M=Z):(Z=bl(L.type,L.key,L.props,null,M.mode,Z),Nn(Z,L),Z.return=M,M=Z)}return p(M);case j:e:{for(me=L.key;O!==null;){if(O.key===me)if(O.tag===4&&O.stateNode.containerInfo===L.containerInfo&&O.stateNode.implementation===L.implementation){a(M,O.sibling),Z=d(O,L.children||[]),Z.return=M,M=Z;break e}else{a(M,O);break}else t(M,O);O=O.sibling}Z=ho(L,M.mode,Z),Z.return=M,M=Z}return p(M);case ie:return me=L._init,L=me(L._payload),Pe(M,O,L,Z)}if(Y(L))return ye(M,O,L,Z);if(he(L)){if(me=he(L),typeof me!="function")throw Error(i(150));return L=me.call(L),ge(M,O,L,Z)}if(typeof L.then=="function")return Pe(M,O,Ll(L),Z);if(L.$$typeof===R)return Pe(M,O,Sl(M,L),Z);ql(M,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,O!==null&&O.tag===6?(a(M,O.sibling),Z=d(O,L),Z.return=M,M=Z):(a(M,O),Z=uo(L,M.mode,Z),Z.return=M,M=Z),p(M)):a(M,O)}return function(M,O,L,Z){try{wn=0;var me=Pe(M,O,L,Z);return ur=null,me}catch(fe){if(fe===mn||fe===El)throw fe;var Te=Ct(29,fe,null,M.mode);return Te.lanes=Z,Te.return=M,Te}finally{}}}var hr=zh(!0),Lh=zh(!1),Pt=I(null),ss=null;function Hs(e){var t=e.alternate;z(rt,rt.current&1),z(Pt,e),ss===null&&(t===null||ir.current!==null||t.memoizedState!==null)&&(ss=e)}function qh(e){if(e.tag===22){if(z(rt,rt.current),z(Pt,e),ss===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(ss=e)}}else Is()}function Is(){z(rt,rt.current),z(Pt,Pt.current)}function vs(e){J(Pt),ss===e&&(ss=null),J(rt)}var rt=I(0);function Bl(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Mc(a)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Yo(e,t,a,l){t=e.memoizedState,a=a(l,t),a=a==null?t:y({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Vo={enqueueSetState:function(e,t,a){e=e._reactInternals;var l=Ut(),d=Bs(l);d.payload=t,a!=null&&(d.callback=a),t=$s(e,d,l),t!==null&&(Mt(t,e,l),gn(t,e,l))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var l=Ut(),d=Bs(l);d.tag=1,d.payload=t,a!=null&&(d.callback=a),t=$s(e,d,l),t!==null&&(Mt(t,e,l),gn(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Ut(),l=Bs(a);l.tag=2,t!=null&&(l.callback=t),t=$s(e,l,a),t!==null&&(Mt(t,e,a),gn(t,e,a))}};function Bh(e,t,a,l,d,h,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,h,p):t.prototype&&t.prototype.isPureReactComponent?!rn(a,l)||!rn(d,h):!0}function $h(e,t,a,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,l),t.state!==e&&Vo.enqueueReplaceState(t,t.state,null)}function Ta(e,t){var a=t;if("ref"in t){a={};for(var l in t)l!=="ref"&&(a[l]=t[l])}if(e=e.defaultProps){a===t&&(a=y({},a));for(var d in e)a[d]===void 0&&(a[d]=e[d])}return a}var $l=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Ph(e){$l(e)}function Hh(e){console.error(e)}function Ih(e){$l(e)}function Pl(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function Gh(e,t,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Qo(e,t,a){return a=Bs(a),a.tag=3,a.payload={element:null},a.callback=function(){Pl(e,t)},a}function Yh(e){return e=Bs(e),e.tag=3,e}function Vh(e,t,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var h=l.value;e.payload=function(){return d(h)},e.callback=function(){Gh(t,a,l)}}var p=a.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(e.callback=function(){Gh(t,a,l),typeof d!="function"&&(Ks===null?Ks=new Set([this]):Ks.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function Ox(e,t,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=a.alternate,t!==null&&dn(t,a,d,!0),a=Pt.current,a!==null){switch(a.tag){case 13:return ss===null?pc():a.alternate===null&&Ze===0&&(Ze=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===wo?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([l]):t.add(l),vc(e,l,d)),!1;case 22:return a.flags|=65536,l===wo?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([l]):a.add(l)),vc(e,l,d)),!1}throw Error(i(435,a.tag))}return vc(e,l,d),pc(),!1}if(Re)return t=Pt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=d,l!==go&&(e=Error(i(422),{cause:l}),cn(Lt(e,a)))):(l!==go&&(t=Error(i(423),{cause:l}),cn(Lt(t,a))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,l=Lt(l,a),d=Qo(e.stateNode,l,d),_o(e,d),Ze!==4&&(Ze=2)),!1;var h=Error(i(520),{cause:l});if(h=Lt(h,a),On===null?On=[h]:On.push(h),Ze!==4&&(Ze=2),t===null)return!0;l=Lt(l,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=d&-d,a.lanes|=e,e=Qo(a.stateNode,l,e),_o(a,e),!1;case 1:if(t=a.type,h=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Ks===null||!Ks.has(h))))return a.flags|=65536,d&=-d,a.lanes|=d,d=Yh(d),Vh(d,e,a,l),_o(a,d),!1}a=a.return}while(a!==null);return!1}var Qh=Error(i(461)),it=!1;function mt(e,t,a,l){t.child=e===null?Lh(t,null,a,l):hr(t,e.child,a,l)}function Xh(e,t,a,l,d){a=a.render;var h=t.ref;if("ref"in l){var p={};for(var b in l)b!=="ref"&&(p[b]=l[b])}else p=l;return _a(t),l=Oo(e,t,a,p,h,d),b=Ao(),e!==null&&!it?(Do(e,t,d),bs(e,t,d)):(Re&&b&&mo(t),t.flags|=1,mt(e,t,l,d),t.child)}function Kh(e,t,a,l,d){if(e===null){var h=a.type;return typeof h=="function"&&!co(h)&&h.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=h,Zh(e,t,h,l,d)):(e=bl(a.type,null,l,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!tc(e,d)){var p=h.memoizedProps;if(a=a.compare,a=a!==null?a:rn,a(p,l)&&e.ref===t.ref)return bs(e,t,d)}return t.flags|=1,e=ms(h,l),e.ref=t.ref,e.return=t,t.child=e}function Zh(e,t,a,l,d){if(e!==null){var h=e.memoizedProps;if(rn(h,l)&&e.ref===t.ref)if(it=!1,t.pendingProps=l=h,tc(e,d))(e.flags&131072)!==0&&(it=!0);else return t.lanes=e.lanes,bs(e,t,d)}return Xo(e,t,a,l,d)}function Jh(e,t,a){var l=t.pendingProps,d=l.children,h=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((t.flags&128)!==0){if(l=h!==null?h.baseLanes|a:a,e!==null){for(d=t.child=e.child,h=0;d!==null;)h=h|d.lanes|d.childLanes,d=d.sibling;t.childLanes=h&~l}else t.childLanes=0,t.child=null;return Fh(e,t,l,a)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&_l(t,h!==null?h.cachePool:null),h!==null?Zu(t,h):ko(),qh(t);else return t.lanes=t.childLanes=536870912,Fh(e,t,h!==null?h.baseLanes|a:a,a)}else h!==null?(_l(t,h.cachePool),Zu(t,h),Is(),t.memoizedState=null):(e!==null&&_l(t,null),ko(),Is());return mt(e,t,d,a),t.child}function Fh(e,t,a,l){var d=jo();return d=d===null?null:{parent:at._currentValue,pool:d},t.memoizedState={baseLanes:a,cachePool:d},e!==null&&_l(t,null),ko(),qh(t),e!==null&&dn(e,t,l,!0),null}function Hl(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Xo(e,t,a,l,d){return _a(t),a=Oo(e,t,a,l,void 0,d),l=Ao(),e!==null&&!it?(Do(e,t,d),bs(e,t,d)):(Re&&l&&mo(t),t.flags|=1,mt(e,t,a,d),t.child)}function Wh(e,t,a,l,d,h){return _a(t),t.updateQueue=null,a=Fu(t,l,a,d),Ju(e),l=Ao(),e!==null&&!it?(Do(e,t,h),bs(e,t,h)):(Re&&l&&mo(t),t.flags|=1,mt(e,t,a,h),t.child)}function em(e,t,a,l,d){if(_a(t),t.stateNode===null){var h=sr,p=a.contextType;typeof p=="object"&&p!==null&&(h=pt(p)),h=new a(l,h),t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Vo,t.stateNode=h,h._reactInternals=t,h=t.stateNode,h.props=l,h.state=t.memoizedState,h.refs={},No(t),p=a.contextType,h.context=typeof p=="object"&&p!==null?pt(p):sr,h.state=t.memoizedState,p=a.getDerivedStateFromProps,typeof p=="function"&&(Yo(t,a,p,l),h.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(p=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),p!==h.state&&Vo.enqueueReplaceState(h,h.state,null),pn(t,l,h,d),xn(),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){h=t.stateNode;var b=t.memoizedProps,k=Ta(a,b);h.props=k;var B=h.context,X=a.contextType;p=sr,typeof X=="object"&&X!==null&&(p=pt(X));var F=a.getDerivedStateFromProps;X=typeof F=="function"||typeof h.getSnapshotBeforeUpdate=="function",b=t.pendingProps!==b,X||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(b||B!==p)&&$h(t,h,l,p),qs=!1;var P=t.memoizedState;h.state=P,pn(t,l,h,d),xn(),B=t.memoizedState,b||P!==B||qs?(typeof F=="function"&&(Yo(t,a,F,l),B=t.memoizedState),(k=qs||Bh(t,a,k,l,P,B,p))?(X||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=B),h.props=l,h.state=B,h.context=p,l=k):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{h=t.stateNode,So(e,t),p=t.memoizedProps,X=Ta(a,p),h.props=X,F=t.pendingProps,P=h.context,B=a.contextType,k=sr,typeof B=="object"&&B!==null&&(k=pt(B)),b=a.getDerivedStateFromProps,(B=typeof b=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(p!==F||P!==k)&&$h(t,h,l,k),qs=!1,P=t.memoizedState,h.state=P,pn(t,l,h,d),xn();var H=t.memoizedState;p!==F||P!==H||qs||e!==null&&e.dependencies!==null&&Nl(e.dependencies)?(typeof b=="function"&&(Yo(t,a,b,l),H=t.memoizedState),(X=qs||Bh(t,a,X,l,P,H,k)||e!==null&&e.dependencies!==null&&Nl(e.dependencies))?(B||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(l,H,k),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(l,H,k)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||p===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=H),h.props=l,h.state=H,h.context=k,l=X):(typeof h.componentDidUpdate!="function"||p===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),l=!1)}return h=l,Hl(e,t),l=(t.flags&128)!==0,h||l?(h=t.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:h.render(),t.flags|=1,e!==null&&l?(t.child=hr(t,e.child,null,d),t.child=hr(t,null,a,d)):mt(e,t,a,d),t.memoizedState=h.state,e=t.child):e=bs(e,t,d),e}function tm(e,t,a,l){return on(),t.flags|=256,mt(e,t,a,l),t.child}var Ko={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zo(e){return{baseLanes:e,cachePool:Hu()}}function Jo(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Ht),e}function sm(e,t,a){var l=t.pendingProps,d=!1,h=(t.flags&128)!==0,p;if((p=h)||(p=e!==null&&e.memoizedState===null?!1:(rt.current&2)!==0),p&&(d=!0,t.flags&=-129),p=(t.flags&32)!==0,t.flags&=-33,e===null){if(Re){if(d?Hs(t):Is(),Re){var b=Ke,k;if(k=b){e:{for(k=b,b=ts;k.nodeType!==8;){if(!b){b=null;break e}if(k=Kt(k.nextSibling),k===null){b=null;break e}}b=k}b!==null?(t.memoizedState={dehydrated:b,treeContext:ba!==null?{id:fs,overflow:gs}:null,retryLane:536870912,hydrationErrors:null},k=Ct(18,null,null,0),k.stateNode=b,k.return=t,t.child=k,bt=t,Ke=null,k=!0):k=!1}k||Na(t)}if(b=t.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return Mc(b)?t.lanes=32:t.lanes=536870912,null;vs(t)}return b=l.children,l=l.fallback,d?(Is(),d=t.mode,b=Il({mode:"hidden",children:b},d),l=va(l,d,a,null),b.return=t,l.return=t,b.sibling=l,t.child=b,d=t.child,d.memoizedState=Zo(a),d.childLanes=Jo(e,p,a),t.memoizedState=Ko,l):(Hs(t),Fo(t,b))}if(k=e.memoizedState,k!==null&&(b=k.dehydrated,b!==null)){if(h)t.flags&256?(Hs(t),t.flags&=-257,t=Wo(e,t,a)):t.memoizedState!==null?(Is(),t.child=e.child,t.flags|=128,t=null):(Is(),d=l.fallback,b=t.mode,l=Il({mode:"visible",children:l.children},b),d=va(d,b,a,null),d.flags|=2,l.return=t,d.return=t,l.sibling=d,t.child=l,hr(t,e.child,null,a),l=t.child,l.memoizedState=Zo(a),l.childLanes=Jo(e,p,a),t.memoizedState=Ko,t=d);else if(Hs(t),Mc(b)){if(p=b.nextSibling&&b.nextSibling.dataset,p)var B=p.dgst;p=B,l=Error(i(419)),l.stack="",l.digest=p,cn({value:l,source:null,stack:null}),t=Wo(e,t,a)}else if(it||dn(e,t,a,!1),p=(a&e.childLanes)!==0,it||p){if(p=Ie,p!==null&&(l=a&-a,l=(l&42)!==0?1:Mi(l),l=(l&(p.suspendedLanes|a))!==0?0:l,l!==0&&l!==k.retryLane))throw k.retryLane=l,tr(e,l),Mt(p,e,l),Qh;b.data==="$?"||pc(),t=Wo(e,t,a)}else b.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=k.treeContext,Ke=Kt(b.nextSibling),bt=t,Re=!0,wa=null,ts=!1,e!==null&&(Bt[$t++]=fs,Bt[$t++]=gs,Bt[$t++]=ba,fs=e.id,gs=e.overflow,ba=t),t=Fo(t,l.children),t.flags|=4096);return t}return d?(Is(),d=l.fallback,b=t.mode,k=e.child,B=k.sibling,l=ms(k,{mode:"hidden",children:l.children}),l.subtreeFlags=k.subtreeFlags&65011712,B!==null?d=ms(B,d):(d=va(d,b,a,null),d.flags|=2),d.return=t,l.return=t,l.sibling=d,t.child=l,l=d,d=t.child,b=e.child.memoizedState,b===null?b=Zo(a):(k=b.cachePool,k!==null?(B=at._currentValue,k=k.parent!==B?{parent:B,pool:B}:k):k=Hu(),b={baseLanes:b.baseLanes|a,cachePool:k}),d.memoizedState=b,d.childLanes=Jo(e,p,a),t.memoizedState=Ko,l):(Hs(t),a=e.child,e=a.sibling,a=ms(a,{mode:"visible",children:l.children}),a.return=t,a.sibling=null,e!==null&&(p=t.deletions,p===null?(t.deletions=[e],t.flags|=16):p.push(e)),t.child=a,t.memoizedState=null,a)}function Fo(e,t){return t=Il({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Il(e,t){return e=Ct(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Wo(e,t,a){return hr(t,e.child,null,a),e=Fo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function am(e,t,a){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),po(e.return,t,a)}function ec(e,t,a,l,d){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=l,h.tail=a,h.tailMode=d)}function rm(e,t,a){var l=t.pendingProps,d=l.revealOrder,h=l.tail;if(mt(e,t,l.children,a),l=rt.current,(l&2)!==0)l=l&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&am(e,a,t);else if(e.tag===19)am(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(z(rt,l),d){case"forwards":for(a=t.child,d=null;a!==null;)e=a.alternate,e!==null&&Bl(e)===null&&(d=a),a=a.sibling;a=d,a===null?(d=t.child,t.child=null):(d=a.sibling,a.sibling=null),ec(t,!1,d,a,h);break;case"backwards":for(a=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&Bl(e)===null){t.child=d;break}e=d.sibling,d.sibling=a,a=d,d=e}ec(t,!0,a,null,h);break;case"together":ec(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function bs(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Xs|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(dn(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,a=ms(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=ms(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function tc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Nl(e)))}function Ax(e,t,a){switch(t.tag){case 3:Se(t,t.stateNode.containerInfo),Ls(t,at,e.memoizedState.cache),on();break;case 27:case 5:Vt(t);break;case 4:Se(t,t.stateNode.containerInfo);break;case 10:Ls(t,t.type,t.memoizedProps.value);break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Hs(t),t.flags|=128,null):(a&t.child.childLanes)!==0?sm(e,t,a):(Hs(t),e=bs(e,t,a),e!==null?e.sibling:null);Hs(t);break;case 19:var d=(e.flags&128)!==0;if(l=(a&t.childLanes)!==0,l||(dn(e,t,a,!1),l=(a&t.childLanes)!==0),d){if(l)return rm(e,t,a);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),z(rt,rt.current),l)break;return null;case 22:case 23:return t.lanes=0,Jh(e,t,a);case 24:Ls(t,at,e.memoizedState.cache)}return bs(e,t,a)}function nm(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)it=!0;else{if(!tc(e,a)&&(t.flags&128)===0)return it=!1,Ax(e,t,a);it=(e.flags&131072)!==0}else it=!1,Re&&(t.flags&1048576)!==0&&Ru(t,wl,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var l=t.elementType,d=l._init;if(l=d(l._payload),t.type=l,typeof l=="function")co(l)?(e=Ta(l,e),t.tag=1,t=em(null,t,l,e,a)):(t.tag=0,t=Xo(null,t,l,e,a));else{if(l!=null){if(d=l.$$typeof,d===E){t.tag=11,t=Xh(null,t,l,e,a);break e}else if(d===G){t.tag=14,t=Kh(null,t,l,e,a);break e}}throw t=pe(l)||l,Error(i(306,t,""))}}return t;case 0:return Xo(e,t,t.type,t.pendingProps,a);case 1:return l=t.type,d=Ta(l,t.pendingProps),em(e,t,l,d,a);case 3:e:{if(Se(t,t.stateNode.containerInfo),e===null)throw Error(i(387));l=t.pendingProps;var h=t.memoizedState;d=h.element,So(e,t),pn(t,l,null,a);var p=t.memoizedState;if(l=p.cache,Ls(t,at,l),l!==h.cache&&yo(t,[at],a,!0),xn(),l=p.element,h.isDehydrated)if(h={element:l,isDehydrated:!1,cache:p.cache},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){t=tm(e,t,l,a);break e}else if(l!==d){d=Lt(Error(i(424)),t),cn(d),t=tm(e,t,l,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ke=Kt(e.firstChild),bt=t,Re=!0,wa=null,ts=!0,a=Lh(t,null,l,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(on(),l===d){t=bs(e,t,a);break e}mt(e,t,l,a)}t=t.child}return t;case 26:return Hl(e,t),e===null?(a=df(t.type,null,t.pendingProps,null))?t.memoizedState=a:Re||(a=t.type,e=t.pendingProps,l=ai(de.current).createElement(a),l[xt]=t,l[wt]=e,gt(l,a,e),lt(l),t.stateNode=l):t.memoizedState=df(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Vt(t),e===null&&Re&&(l=t.stateNode=lf(t.type,t.pendingProps,de.current),bt=t,ts=!0,d=Ke,Fs(t.type)?(Rc=d,Ke=Kt(l.firstChild)):Ke=d),mt(e,t,t.pendingProps.children,a),Hl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Re&&((d=l=Ke)&&(l=np(l,t.type,t.pendingProps,ts),l!==null?(t.stateNode=l,bt=t,Ke=Kt(l.firstChild),ts=!1,d=!0):d=!1),d||Na(t)),Vt(t),d=t.type,h=t.pendingProps,p=e!==null?e.memoizedProps:null,l=h.children,Ac(d,h)?l=null:p!==null&&Ac(d,p)&&(t.flags|=32),t.memoizedState!==null&&(d=Oo(e,t,Nx,null,null,a),Bn._currentValue=d),Hl(e,t),mt(e,t,l,a),t.child;case 6:return e===null&&Re&&((e=a=Ke)&&(a=lp(a,t.pendingProps,ts),a!==null?(t.stateNode=a,bt=t,Ke=null,e=!0):e=!1),e||Na(t)),null;case 13:return sm(e,t,a);case 4:return Se(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=hr(t,null,l,a):mt(e,t,l,a),t.child;case 11:return Xh(e,t,t.type,t.pendingProps,a);case 7:return mt(e,t,t.pendingProps,a),t.child;case 8:return mt(e,t,t.pendingProps.children,a),t.child;case 12:return mt(e,t,t.pendingProps.children,a),t.child;case 10:return l=t.pendingProps,Ls(t,t.type,l.value),mt(e,t,l.children,a),t.child;case 9:return d=t.type._context,l=t.pendingProps.children,_a(t),d=pt(d),l=l(d),t.flags|=1,mt(e,t,l,a),t.child;case 14:return Kh(e,t,t.type,t.pendingProps,a);case 15:return Zh(e,t,t.type,t.pendingProps,a);case 19:return rm(e,t,a);case 31:return l=t.pendingProps,a=t.mode,l={mode:l.mode,children:l.children},e===null?(a=Il(l,a),a.ref=t.ref,t.child=a,a.return=t,t=a):(a=ms(e.child,l),a.ref=t.ref,t.child=a,a.return=t,t=a),t;case 22:return Jh(e,t,a);case 24:return _a(t),l=pt(at),e===null?(d=jo(),d===null&&(d=Ie,h=vo(),d.pooledCache=h,h.refCount++,h!==null&&(d.pooledCacheLanes|=a),d=h),t.memoizedState={parent:l,cache:d},No(t),Ls(t,at,d)):((e.lanes&a)!==0&&(So(e,t),pn(t,null,null,a),xn()),d=e.memoizedState,h=t.memoizedState,d.parent!==l?(d={parent:l,cache:l},t.memoizedState=d,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=d),Ls(t,at,l)):(l=h.cache,Ls(t,at,l),l!==d.cache&&yo(t,[at],a,!0))),mt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function js(e){e.flags|=4}function lm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!gf(t)){if(t=Pt.current,t!==null&&((De&4194048)===De?ss!==null:(De&62914560)!==De&&(De&536870912)===0||t!==ss))throw fn=wo,Iu;e.flags|=8192}}function Gl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?qd():536870912,e.lanes|=t,xr|=t)}function Sn(e,t){if(!Re)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(t)for(var d=e.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=a,t}function Dx(e,t,a){var l=t.pendingProps;switch(fo(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(t),null;case 1:return Xe(t),null;case 3:return a=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),ps(at),nt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ln(t)?js(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,qu())),Xe(t),null;case 26:return a=t.memoizedState,e===null?(js(t),a!==null?(Xe(t),lm(t,a)):(Xe(t),t.flags&=-16777217)):a?a!==e.memoizedState?(js(t),Xe(t),lm(t,a)):(Xe(t),t.flags&=-16777217):(e.memoizedProps!==l&&js(t),Xe(t),t.flags&=-16777217),null;case 27:Wt(t),a=de.current;var d=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==l&&js(t);else{if(!l){if(t.stateNode===null)throw Error(i(166));return Xe(t),null}e=Q.current,ln(t)?zu(t):(e=lf(d,l,a),t.stateNode=e,js(t))}return Xe(t),null;case 5:if(Wt(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&js(t);else{if(!l){if(t.stateNode===null)throw Error(i(166));return Xe(t),null}if(e=Q.current,ln(t))zu(t);else{switch(d=ai(de.current),e){case 1:e=d.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=d.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?d.createElement("select",{is:l.is}):d.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?d.createElement(a,{is:l.is}):d.createElement(a)}}e[xt]=t,e[wt]=l;e:for(d=t.child;d!==null;){if(d.tag===5||d.tag===6)e.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}t.stateNode=e;e:switch(gt(e,a,l),a){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&js(t)}}return Xe(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&js(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(i(166));if(e=de.current,ln(t)){if(e=t.stateNode,a=t.memoizedProps,l=null,d=bt,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}e[xt]=t,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Wm(e.nodeValue,a)),e||Na(t)}else e=ai(e).createTextNode(l),e[xt]=t,t.stateNode=e}return Xe(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=ln(t),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(i(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[xt]=t}else on(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Xe(t),d=!1}else d=qu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return t.flags&256?(vs(t),t):(vs(t),null)}if(vs(t),(t.flags&128)!==0)return t.lanes=a,t;if(a=l!==null,e=e!==null&&e.memoizedState!==null,a){l=t.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool);var h=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==d&&(l.flags|=2048)}return a!==e&&a&&(t.child.flags|=8192),Gl(t,t.updateQueue),Xe(t),null;case 4:return nt(),e===null&&Ec(t.stateNode.containerInfo),Xe(t),null;case 10:return ps(t.type),Xe(t),null;case 19:if(J(rt),d=t.memoizedState,d===null)return Xe(t),null;if(l=(t.flags&128)!==0,h=d.rendering,h===null)if(l)Sn(d,!1);else{if(Ze!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=Bl(e),h!==null){for(t.flags|=128,Sn(d,!1),e=h.updateQueue,t.updateQueue=e,Gl(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Mu(a,e),a=a.sibling;return z(rt,rt.current&1|2),t.child}e=e.sibling}d.tail!==null&&jt()>Ql&&(t.flags|=128,l=!0,Sn(d,!1),t.lanes=4194304)}else{if(!l)if(e=Bl(h),e!==null){if(t.flags|=128,l=!0,e=e.updateQueue,t.updateQueue=e,Gl(t,e),Sn(d,!0),d.tail===null&&d.tailMode==="hidden"&&!h.alternate&&!Re)return Xe(t),null}else 2*jt()-d.renderingStartTime>Ql&&a!==536870912&&(t.flags|=128,l=!0,Sn(d,!1),t.lanes=4194304);d.isBackwards?(h.sibling=t.child,t.child=h):(e=d.last,e!==null?e.sibling=h:t.child=h,d.last=h)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=jt(),t.sibling=null,e=rt.current,z(rt,l?e&1|2:e&1),t):(Xe(t),null);case 22:case 23:return vs(t),To(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(a&536870912)!==0&&(t.flags&128)===0&&(Xe(t),t.subtreeFlags&6&&(t.flags|=8192)):Xe(t),a=t.updateQueue,a!==null&&Gl(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==a&&(t.flags|=2048),e!==null&&J(Ea),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),ps(at),Xe(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function Ux(e,t){switch(fo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ps(at),nt(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Wt(t),null;case 13:if(vs(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));on()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return J(rt),null;case 4:return nt(),null;case 10:return ps(t.type),null;case 22:case 23:return vs(t),To(),e!==null&&J(Ea),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ps(at),null;case 25:return null;default:return null}}function im(e,t){switch(fo(t),t.tag){case 3:ps(at),nt();break;case 26:case 27:case 5:Wt(t);break;case 4:nt();break;case 13:vs(t);break;case 19:J(rt);break;case 10:ps(t.type);break;case 22:case 23:vs(t),To(),e!==null&&J(Ea);break;case 24:ps(at)}}function _n(e,t){try{var a=t.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&e)===e){l=void 0;var h=a.create,p=a.inst;l=h(),p.destroy=l}a=a.next}while(a!==d)}}catch(b){He(t,t.return,b)}}function Gs(e,t,a){try{var l=t.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var h=d.next;l=h;do{if((l.tag&e)===e){var p=l.inst,b=p.destroy;if(b!==void 0){p.destroy=void 0,d=t;var k=a,B=b;try{B()}catch(X){He(d,k,X)}}}l=l.next}while(l!==h)}}catch(X){He(t,t.return,X)}}function om(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Ku(t,a)}catch(l){He(e,e.return,l)}}}function cm(e,t,a){a.props=Ta(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){He(e,t,l)}}function En(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(d){He(e,t,d)}}function as(e,t){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){He(e,t,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){He(e,t,d)}else a.current=null}function dm(e){var t=e.type,a=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){He(e,e.return,d)}}function sc(e,t,a){try{var l=e.stateNode;ep(l,e.type,a,t),l[wt]=t}catch(d){He(e,e.return,d)}}function um(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Fs(e.type)||e.tag===4}function ac(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||um(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Fs(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function rc(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=si));else if(l!==4&&(l===27&&Fs(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(rc(e,t,a),e=e.sibling;e!==null;)rc(e,t,a),e=e.sibling}function Yl(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(l!==4&&(l===27&&Fs(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Yl(e,t,a),e=e.sibling;e!==null;)Yl(e,t,a),e=e.sibling}function hm(e){var t=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,d=t.attributes;d.length;)t.removeAttributeNode(d[0]);gt(t,l,a),t[xt]=e,t[wt]=a}catch(h){He(e,e.return,h)}}var ws=!1,Fe=!1,nc=!1,mm=typeof WeakSet=="function"?WeakSet:Set,ot=null;function Mx(e,t){if(e=e.containerInfo,Cc=ci,e=Su(e),so(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{a.nodeType,h.nodeType}catch{a=null;break e}var p=0,b=-1,k=-1,B=0,X=0,F=e,P=null;t:for(;;){for(var H;F!==a||d!==0&&F.nodeType!==3||(b=p+d),F!==h||l!==0&&F.nodeType!==3||(k=p+l),F.nodeType===3&&(p+=F.nodeValue.length),(H=F.firstChild)!==null;)P=F,F=H;for(;;){if(F===e)break t;if(P===a&&++B===d&&(b=p),P===h&&++X===l&&(k=p),(H=F.nextSibling)!==null)break;F=P,P=F.parentNode}F=H}a=b===-1||k===-1?null:{start:b,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(Oc={focusedElem:e,selectionRange:a},ci=!1,ot=t;ot!==null;)if(t=ot,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,ot=e;else for(;ot!==null;){switch(t=ot,h=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,a=t,d=h.memoizedProps,h=h.memoizedState,l=a.stateNode;try{var ye=Ta(a.type,d,a.elementType===a.type);e=l.getSnapshotBeforeUpdate(ye,h),l.__reactInternalSnapshotBeforeUpdate=e}catch(ge){He(a,a.return,ge)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Uc(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Uc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,ot=e;break}ot=t.return}}function fm(e,t,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ys(e,a),l&4&&_n(5,a);break;case 1:if(Ys(e,a),l&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(p){He(a,a.return,p)}else{var d=Ta(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(d,t,e.__reactInternalSnapshotBeforeUpdate)}catch(p){He(a,a.return,p)}}l&64&&om(a),l&512&&En(a,a.return);break;case 3:if(Ys(e,a),l&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Ku(e,t)}catch(p){He(a,a.return,p)}}break;case 27:t===null&&l&4&&hm(a);case 26:case 5:Ys(e,a),t===null&&l&4&&dm(a),l&512&&En(a,a.return);break;case 12:Ys(e,a);break;case 13:Ys(e,a),l&4&&pm(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Ix.bind(null,a),ip(e,a))));break;case 22:if(l=a.memoizedState!==null||ws,!l){t=t!==null&&t.memoizedState!==null||Fe,d=ws;var h=Fe;ws=l,(Fe=t)&&!h?Vs(e,a,(a.subtreeFlags&8772)!==0):Ys(e,a),ws=d,Fe=h}break;case 30:break;default:Ys(e,a)}}function gm(e){var t=e.alternate;t!==null&&(e.alternate=null,gm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Li(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Qe=null,_t=!1;function Ns(e,t,a){for(a=a.child;a!==null;)xm(e,t,a),a=a.sibling}function xm(e,t,a){if(be&&typeof be.onCommitFiberUnmount=="function")try{be.onCommitFiberUnmount(ke,a)}catch{}switch(a.tag){case 26:Fe||as(a,t),Ns(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Fe||as(a,t);var l=Qe,d=_t;Fs(a.type)&&(Qe=a.stateNode,_t=!1),Ns(e,t,a),Rn(a.stateNode),Qe=l,_t=d;break;case 5:Fe||as(a,t);case 6:if(l=Qe,d=_t,Qe=null,Ns(e,t,a),Qe=l,_t=d,Qe!==null)if(_t)try{(Qe.nodeType===9?Qe.body:Qe.nodeName==="HTML"?Qe.ownerDocument.body:Qe).removeChild(a.stateNode)}catch(h){He(a,t,h)}else try{Qe.removeChild(a.stateNode)}catch(h){He(a,t,h)}break;case 18:Qe!==null&&(_t?(e=Qe,rf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),In(e)):rf(Qe,a.stateNode));break;case 4:l=Qe,d=_t,Qe=a.stateNode.containerInfo,_t=!0,Ns(e,t,a),Qe=l,_t=d;break;case 0:case 11:case 14:case 15:Fe||Gs(2,a,t),Fe||Gs(4,a,t),Ns(e,t,a);break;case 1:Fe||(as(a,t),l=a.stateNode,typeof l.componentWillUnmount=="function"&&cm(a,t,l)),Ns(e,t,a);break;case 21:Ns(e,t,a);break;case 22:Fe=(l=Fe)||a.memoizedState!==null,Ns(e,t,a),Fe=l;break;default:Ns(e,t,a)}}function pm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{In(e)}catch(a){He(t,t.return,a)}}function Rx(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new mm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new mm),t;default:throw Error(i(435,e.tag))}}function lc(e,t){var a=Rx(e);t.forEach(function(l){var d=Gx.bind(null,e,l);a.has(l)||(a.add(l),l.then(d,d))})}function Ot(e,t){var a=t.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],h=e,p=t,b=p;e:for(;b!==null;){switch(b.tag){case 27:if(Fs(b.type)){Qe=b.stateNode,_t=!1;break e}break;case 5:Qe=b.stateNode,_t=!1;break e;case 3:case 4:Qe=b.stateNode.containerInfo,_t=!0;break e}b=b.return}if(Qe===null)throw Error(i(160));xm(h,p,d),Qe=null,_t=!1,h=d.alternate,h!==null&&(h.return=null),d.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)ym(t,e),t=t.sibling}var Xt=null;function ym(e,t){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ot(t,e),At(e),l&4&&(Gs(3,e,e.return),_n(3,e),Gs(5,e,e.return));break;case 1:Ot(t,e),At(e),l&512&&(Fe||a===null||as(a,a.return)),l&64&&ws&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=Xt;if(Ot(t,e),At(e),l&512&&(Fe||a===null||as(a,a.return)),l&4){var h=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){e:{l=e.type,a=e.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":h=d.getElementsByTagName("title")[0],(!h||h[Kr]||h[xt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=d.createElement(l),d.head.insertBefore(h,d.querySelector("head > title"))),gt(h,l,a),h[xt]=e,lt(h),l=h;break e;case"link":var p=mf("link","href",d).get(l+(a.href||""));if(p){for(var b=0;b<p.length;b++)if(h=p[b],h.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&h.getAttribute("rel")===(a.rel==null?null:a.rel)&&h.getAttribute("title")===(a.title==null?null:a.title)&&h.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){p.splice(b,1);break t}}h=d.createElement(l),gt(h,l,a),d.head.appendChild(h);break;case"meta":if(p=mf("meta","content",d).get(l+(a.content||""))){for(b=0;b<p.length;b++)if(h=p[b],h.getAttribute("content")===(a.content==null?null:""+a.content)&&h.getAttribute("name")===(a.name==null?null:a.name)&&h.getAttribute("property")===(a.property==null?null:a.property)&&h.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&h.getAttribute("charset")===(a.charSet==null?null:a.charSet)){p.splice(b,1);break t}}h=d.createElement(l),gt(h,l,a),d.head.appendChild(h);break;default:throw Error(i(468,l))}h[xt]=e,lt(h),l=h}e.stateNode=l}else ff(d,e.type,e.stateNode);else e.stateNode=hf(d,l,e.memoizedProps);else h!==l?(h===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):h.count--,l===null?ff(d,e.type,e.stateNode):hf(d,l,e.memoizedProps)):l===null&&e.stateNode!==null&&sc(e,e.memoizedProps,a.memoizedProps)}break;case 27:Ot(t,e),At(e),l&512&&(Fe||a===null||as(a,a.return)),a!==null&&l&4&&sc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Ot(t,e),At(e),l&512&&(Fe||a===null||as(a,a.return)),e.flags&32){d=e.stateNode;try{Xa(d,"")}catch(H){He(e,e.return,H)}}l&4&&e.stateNode!=null&&(d=e.memoizedProps,sc(e,d,a!==null?a.memoizedProps:d)),l&1024&&(nc=!0);break;case 6:if(Ot(t,e),At(e),l&4){if(e.stateNode===null)throw Error(i(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(H){He(e,e.return,H)}}break;case 3:if(li=null,d=Xt,Xt=ri(t.containerInfo),Ot(t,e),Xt=d,At(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{In(t.containerInfo)}catch(H){He(e,e.return,H)}nc&&(nc=!1,vm(e));break;case 4:l=Xt,Xt=ri(e.stateNode.containerInfo),Ot(t,e),At(e),Xt=l;break;case 12:Ot(t,e),At(e);break;case 13:Ot(t,e),At(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(hc=jt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,lc(e,l)));break;case 22:d=e.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,B=ws,X=Fe;if(ws=B||d,Fe=X||k,Ot(t,e),Fe=X,ws=B,At(e),l&8192)e:for(t=e.stateNode,t._visibility=d?t._visibility&-2:t._visibility|1,d&&(a===null||k||ws||Fe||Ca(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){k=a=t;try{if(h=k.stateNode,d)p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{b=k.stateNode;var F=k.memoizedProps.style,P=F!=null&&F.hasOwnProperty("display")?F.display:null;b.style.display=P==null||typeof P=="boolean"?"":(""+P).trim()}}catch(H){He(k,k.return,H)}}}else if(t.tag===6){if(a===null){k=t;try{k.stateNode.nodeValue=d?"":k.memoizedProps}catch(H){He(k,k.return,H)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,lc(e,a))));break;case 19:Ot(t,e),At(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,lc(e,l)));break;case 30:break;case 21:break;default:Ot(t,e),At(e)}}function At(e){var t=e.flags;if(t&2){try{for(var a,l=e.return;l!==null;){if(um(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var d=a.stateNode,h=ac(e);Yl(e,h,d);break;case 5:var p=a.stateNode;a.flags&32&&(Xa(p,""),a.flags&=-33);var b=ac(e);Yl(e,b,p);break;case 3:case 4:var k=a.stateNode.containerInfo,B=ac(e);rc(e,B,k);break;default:throw Error(i(161))}}catch(X){He(e,e.return,X)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function vm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;vm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ys(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)fm(e,t.alternate,t),t=t.sibling}function Ca(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Gs(4,t,t.return),Ca(t);break;case 1:as(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&cm(t,t.return,a),Ca(t);break;case 27:Rn(t.stateNode);case 26:case 5:as(t,t.return),Ca(t);break;case 22:t.memoizedState===null&&Ca(t);break;case 30:Ca(t);break;default:Ca(t)}e=e.sibling}}function Vs(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,d=e,h=t,p=h.flags;switch(h.tag){case 0:case 11:case 15:Vs(d,h,a),_n(4,h);break;case 1:if(Vs(d,h,a),l=h,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(B){He(l,l.return,B)}if(l=h,d=l.updateQueue,d!==null){var b=l.stateNode;try{var k=d.shared.hiddenCallbacks;if(k!==null)for(d.shared.hiddenCallbacks=null,d=0;d<k.length;d++)Xu(k[d],b)}catch(B){He(l,l.return,B)}}a&&p&64&&om(h),En(h,h.return);break;case 27:hm(h);case 26:case 5:Vs(d,h,a),a&&l===null&&p&4&&dm(h),En(h,h.return);break;case 12:Vs(d,h,a);break;case 13:Vs(d,h,a),a&&p&4&&pm(d,h);break;case 22:h.memoizedState===null&&Vs(d,h,a),En(h,h.return);break;case 30:break;default:Vs(d,h,a)}t=t.sibling}}function ic(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&un(a))}function oc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&un(e))}function rs(e,t,a,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)bm(e,t,a,l),t=t.sibling}function bm(e,t,a,l){var d=t.flags;switch(t.tag){case 0:case 11:case 15:rs(e,t,a,l),d&2048&&_n(9,t);break;case 1:rs(e,t,a,l);break;case 3:rs(e,t,a,l),d&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&un(e)));break;case 12:if(d&2048){rs(e,t,a,l),e=t.stateNode;try{var h=t.memoizedProps,p=h.id,b=h.onPostCommit;typeof b=="function"&&b(p,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(k){He(t,t.return,k)}}else rs(e,t,a,l);break;case 13:rs(e,t,a,l);break;case 23:break;case 22:h=t.stateNode,p=t.alternate,t.memoizedState!==null?h._visibility&2?rs(e,t,a,l):kn(e,t):h._visibility&2?rs(e,t,a,l):(h._visibility|=2,mr(e,t,a,l,(t.subtreeFlags&10256)!==0)),d&2048&&ic(p,t);break;case 24:rs(e,t,a,l),d&2048&&oc(t.alternate,t);break;default:rs(e,t,a,l)}}function mr(e,t,a,l,d){for(d=d&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var h=e,p=t,b=a,k=l,B=p.flags;switch(p.tag){case 0:case 11:case 15:mr(h,p,b,k,d),_n(8,p);break;case 23:break;case 22:var X=p.stateNode;p.memoizedState!==null?X._visibility&2?mr(h,p,b,k,d):kn(h,p):(X._visibility|=2,mr(h,p,b,k,d)),d&&B&2048&&ic(p.alternate,p);break;case 24:mr(h,p,b,k,d),d&&B&2048&&oc(p.alternate,p);break;default:mr(h,p,b,k,d)}t=t.sibling}}function kn(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,l=t,d=l.flags;switch(l.tag){case 22:kn(a,l),d&2048&&ic(l.alternate,l);break;case 24:kn(a,l),d&2048&&oc(l.alternate,l);break;default:kn(a,l)}t=t.sibling}}var Tn=8192;function fr(e){if(e.subtreeFlags&Tn)for(e=e.child;e!==null;)jm(e),e=e.sibling}function jm(e){switch(e.tag){case 26:fr(e),e.flags&Tn&&e.memoizedState!==null&&bp(Xt,e.memoizedState,e.memoizedProps);break;case 5:fr(e);break;case 3:case 4:var t=Xt;Xt=ri(e.stateNode.containerInfo),fr(e),Xt=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Tn,Tn=16777216,fr(e),Tn=t):fr(e));break;default:fr(e)}}function wm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Cn(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];ot=l,Sm(l,e)}wm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Nm(e),e=e.sibling}function Nm(e){switch(e.tag){case 0:case 11:case 15:Cn(e),e.flags&2048&&Gs(9,e,e.return);break;case 3:Cn(e);break;case 12:Cn(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Vl(e)):Cn(e);break;default:Cn(e)}}function Vl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];ot=l,Sm(l,e)}wm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Gs(8,t,t.return),Vl(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Vl(t));break;default:Vl(t)}e=e.sibling}}function Sm(e,t){for(;ot!==null;){var a=ot;switch(a.tag){case 0:case 11:case 15:Gs(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:un(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,ot=l;else e:for(a=e;ot!==null;){l=ot;var d=l.sibling,h=l.return;if(gm(l),l===a){ot=null;break e}if(d!==null){d.return=h,ot=d;break e}ot=h}}}var zx={getCacheForType:function(e){var t=pt(at),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a}},Lx=typeof WeakMap=="function"?WeakMap:Map,ze=0,Ie=null,Ce=null,De=0,Le=0,Dt=null,Qs=!1,gr=!1,cc=!1,Ss=0,Ze=0,Xs=0,Oa=0,dc=0,Ht=0,xr=0,On=null,Et=null,uc=!1,hc=0,Ql=1/0,Xl=null,Ks=null,ft=0,Zs=null,pr=null,yr=0,mc=0,fc=null,_m=null,An=0,gc=null;function Ut(){if((ze&2)!==0&&De!==0)return De&-De;if(T.T!==null){var e=nr;return e!==0?e:wc()}return Pd()}function Em(){Ht===0&&(Ht=(De&536870912)===0||Re?Ld():536870912);var e=Pt.current;return e!==null&&(e.flags|=32),Ht}function Mt(e,t,a){(e===Ie&&(Le===2||Le===9)||e.cancelPendingCommit!==null)&&(vr(e,0),Js(e,De,Ht,!1)),Xr(e,a),((ze&2)===0||e!==Ie)&&(e===Ie&&((ze&2)===0&&(Oa|=a),Ze===4&&Js(e,De,Ht,!1)),ns(e))}function km(e,t,a){if((ze&6)!==0)throw Error(i(327));var l=!a&&(t&124)===0&&(t&e.expiredLanes)===0||Qr(e,t),d=l?$x(e,t):yc(e,t,!0),h=l;do{if(d===0){gr&&!l&&Js(e,t,0,!1);break}else{if(a=e.current.alternate,h&&!qx(a)){d=yc(e,t,!1),h=!1;continue}if(d===2){if(h=t,e.errorRecoveryDisabledLanes&h)var p=0;else p=e.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){t=p;e:{var b=e;d=On;var k=b.current.memoizedState.isDehydrated;if(k&&(vr(b,p).flags|=256),p=yc(b,p,!1),p!==2){if(cc&&!k){b.errorRecoveryDisabledLanes|=h,Oa|=h,d=4;break e}h=Et,Et=d,h!==null&&(Et===null?Et=h:Et.push.apply(Et,h))}d=p}if(h=!1,d!==2)continue}}if(d===1){vr(e,0),Js(e,t,0,!0);break}e:{switch(l=e,h=d,h){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:Js(l,t,Ht,!Qs);break e;case 2:Et=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(d=hc+300-jt(),10<d)){if(Js(l,t,Ht,!Qs),nl(l,0,!0)!==0)break e;l.timeoutHandle=sf(Tm.bind(null,l,a,Et,Xl,uc,t,Ht,Oa,xr,Qs,h,2,-0,0),d);break e}Tm(l,a,Et,Xl,uc,t,Ht,Oa,xr,Qs,h,0,-0,0)}}break}while(!0);ns(e)}function Tm(e,t,a,l,d,h,p,b,k,B,X,F,P,H){if(e.timeoutHandle=-1,F=t.subtreeFlags,(F&8192||(F&16785408)===16785408)&&(qn={stylesheets:null,count:0,unsuspend:vp},jm(t),F=jp(),F!==null)){e.cancelPendingCommit=F(Rm.bind(null,e,t,h,a,l,d,p,b,k,X,1,P,H)),Js(e,h,p,!B);return}Rm(e,t,h,a,l,d,p,b,k)}function qx(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],h=d.getSnapshot;d=d.value;try{if(!Tt(h(),d))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Js(e,t,a,l){t&=~dc,t&=~Oa,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var d=t;0<d;){var h=31-Ve(d),p=1<<h;l[h]=-1,d&=~p}a!==0&&Bd(e,a,t)}function Kl(){return(ze&6)===0?(Dn(0),!1):!0}function xc(){if(Ce!==null){if(Le===0)var e=Ce.return;else e=Ce,xs=Sa=null,Uo(e),ur=null,wn=0,e=Ce;for(;e!==null;)im(e.alternate,e),e=e.return;Ce=null}}function vr(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,sp(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),xc(),Ie=e,Ce=a=ms(e.current,null),De=t,Le=0,Dt=null,Qs=!1,gr=Qr(e,t),cc=!1,xr=Ht=dc=Oa=Xs=Ze=0,Et=On=null,uc=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var d=31-Ve(l),h=1<<d;t|=e[d],l&=~h}return Ss=t,pl(),a}function Cm(e,t){_e=null,T.H=zl,t===mn||t===El?(t=Vu(),Le=3):t===Iu?(t=Vu(),Le=4):Le=t===Qh?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Dt=t,Ce===null&&(Ze=1,Pl(e,Lt(t,e.current)))}function Om(){var e=T.H;return T.H=zl,e===null?zl:e}function Am(){var e=T.A;return T.A=zx,e}function pc(){Ze=4,Qs||(De&4194048)!==De&&Pt.current!==null||(gr=!0),(Xs&134217727)===0&&(Oa&134217727)===0||Ie===null||Js(Ie,De,Ht,!1)}function yc(e,t,a){var l=ze;ze|=2;var d=Om(),h=Am();(Ie!==e||De!==t)&&(Xl=null,vr(e,t)),t=!1;var p=Ze;e:do try{if(Le!==0&&Ce!==null){var b=Ce,k=Dt;switch(Le){case 8:xc(),p=6;break e;case 3:case 2:case 9:case 6:Pt.current===null&&(t=!0);var B=Le;if(Le=0,Dt=null,br(e,b,k,B),a&&gr){p=0;break e}break;default:B=Le,Le=0,Dt=null,br(e,b,k,B)}}Bx(),p=Ze;break}catch(X){Cm(e,X)}while(!0);return t&&e.shellSuspendCounter++,xs=Sa=null,ze=l,T.H=d,T.A=h,Ce===null&&(Ie=null,De=0,pl()),p}function Bx(){for(;Ce!==null;)Dm(Ce)}function $x(e,t){var a=ze;ze|=2;var l=Om(),d=Am();Ie!==e||De!==t?(Xl=null,Ql=jt()+500,vr(e,t)):gr=Qr(e,t);e:do try{if(Le!==0&&Ce!==null){t=Ce;var h=Dt;t:switch(Le){case 1:Le=0,Dt=null,br(e,t,h,1);break;case 2:case 9:if(Gu(h)){Le=0,Dt=null,Um(t);break}t=function(){Le!==2&&Le!==9||Ie!==e||(Le=7),ns(e)},h.then(t,t);break e;case 3:Le=7;break e;case 4:Le=5;break e;case 7:Gu(h)?(Le=0,Dt=null,Um(t)):(Le=0,Dt=null,br(e,t,h,7));break;case 5:var p=null;switch(Ce.tag){case 26:p=Ce.memoizedState;case 5:case 27:var b=Ce;if(!p||gf(p)){Le=0,Dt=null;var k=b.sibling;if(k!==null)Ce=k;else{var B=b.return;B!==null?(Ce=B,Zl(B)):Ce=null}break t}}Le=0,Dt=null,br(e,t,h,5);break;case 6:Le=0,Dt=null,br(e,t,h,6);break;case 8:xc(),Ze=6;break e;default:throw Error(i(462))}}Px();break}catch(X){Cm(e,X)}while(!0);return xs=Sa=null,T.H=l,T.A=d,ze=a,Ce!==null?0:(Ie=null,De=0,pl(),Ze)}function Px(){for(;Ce!==null&&!es();)Dm(Ce)}function Dm(e){var t=nm(e.alternate,e,Ss);e.memoizedProps=e.pendingProps,t===null?Zl(e):Ce=t}function Um(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Wh(a,t,t.pendingProps,t.type,void 0,De);break;case 11:t=Wh(a,t,t.pendingProps,t.type.render,t.ref,De);break;case 5:Uo(t);default:im(a,t),t=Ce=Mu(t,Ss),t=nm(a,t,Ss)}e.memoizedProps=e.pendingProps,t===null?Zl(e):Ce=t}function br(e,t,a,l){xs=Sa=null,Uo(t),ur=null,wn=0;var d=t.return;try{if(Ox(e,d,t,a,De)){Ze=1,Pl(e,Lt(a,e.current)),Ce=null;return}}catch(h){if(d!==null)throw Ce=d,h;Ze=1,Pl(e,Lt(a,e.current)),Ce=null;return}t.flags&32768?(Re||l===1?e=!0:gr||(De&536870912)!==0?e=!1:(Qs=e=!0,(l===2||l===9||l===3||l===6)&&(l=Pt.current,l!==null&&l.tag===13&&(l.flags|=16384))),Mm(t,e)):Zl(t)}function Zl(e){var t=e;do{if((t.flags&32768)!==0){Mm(t,Qs);return}e=t.return;var a=Dx(t.alternate,t,Ss);if(a!==null){Ce=a;return}if(t=t.sibling,t!==null){Ce=t;return}Ce=t=e}while(t!==null);Ze===0&&(Ze=5)}function Mm(e,t){do{var a=Ux(e.alternate,e);if(a!==null){a.flags&=32767,Ce=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Ce=e;return}Ce=e=a}while(e!==null);Ze=6,Ce=null}function Rm(e,t,a,l,d,h,p,b,k){e.cancelPendingCommit=null;do Jl();while(ft!==0);if((ze&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(h=t.lanes|t.childLanes,h|=io,vg(e,a,h,p,b,k),e===Ie&&(Ce=Ie=null,De=0),pr=t,Zs=e,yr=a,mc=h,fc=d,_m=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Yx(U,function(){return $m(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=T.T,T.T=null,d=W.p,W.p=2,p=ze,ze|=4;try{Mx(e,t,a)}finally{ze=p,W.p=d,T.T=l}}ft=1,zm(),Lm(),qm()}}function zm(){if(ft===1){ft=0;var e=Zs,t=pr,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=T.T,T.T=null;var l=W.p;W.p=2;var d=ze;ze|=4;try{ym(t,e);var h=Oc,p=Su(e.containerInfo),b=h.focusedElem,k=h.selectionRange;if(p!==b&&b&&b.ownerDocument&&Nu(b.ownerDocument.documentElement,b)){if(k!==null&&so(b)){var B=k.start,X=k.end;if(X===void 0&&(X=B),"selectionStart"in b)b.selectionStart=B,b.selectionEnd=Math.min(X,b.value.length);else{var F=b.ownerDocument||document,P=F&&F.defaultView||window;if(P.getSelection){var H=P.getSelection(),ye=b.textContent.length,ge=Math.min(k.start,ye),Pe=k.end===void 0?ge:Math.min(k.end,ye);!H.extend&&ge>Pe&&(p=Pe,Pe=ge,ge=p);var M=wu(b,ge),O=wu(b,Pe);if(M&&O&&(H.rangeCount!==1||H.anchorNode!==M.node||H.anchorOffset!==M.offset||H.focusNode!==O.node||H.focusOffset!==O.offset)){var L=F.createRange();L.setStart(M.node,M.offset),H.removeAllRanges(),ge>Pe?(H.addRange(L),H.extend(O.node,O.offset)):(L.setEnd(O.node,O.offset),H.addRange(L))}}}}for(F=[],H=b;H=H.parentNode;)H.nodeType===1&&F.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<F.length;b++){var Z=F[b];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}ci=!!Cc,Oc=Cc=null}finally{ze=d,W.p=l,T.T=a}}e.current=t,ft=2}}function Lm(){if(ft===2){ft=0;var e=Zs,t=pr,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=T.T,T.T=null;var l=W.p;W.p=2;var d=ze;ze|=4;try{fm(e,t.alternate,t)}finally{ze=d,W.p=l,T.T=a}}ft=3}}function qm(){if(ft===4||ft===3){ft=0,Vr();var e=Zs,t=pr,a=yr,l=_m;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?ft=5:(ft=0,pr=Zs=null,Bm(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(Ks=null),Ri(a),t=t.stateNode,be&&typeof be.onCommitFiberRoot=="function")try{be.onCommitFiberRoot(ke,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=T.T,d=W.p,W.p=2,T.T=null;try{for(var h=e.onRecoverableError,p=0;p<l.length;p++){var b=l[p];h(b.value,{componentStack:b.stack})}}finally{T.T=t,W.p=d}}(yr&3)!==0&&Jl(),ns(e),d=e.pendingLanes,(a&4194090)!==0&&(d&42)!==0?e===gc?An++:(An=0,gc=e):An=0,Dn(0)}}function Bm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,un(t)))}function Jl(e){return zm(),Lm(),qm(),$m()}function $m(){if(ft!==5)return!1;var e=Zs,t=mc;mc=0;var a=Ri(yr),l=T.T,d=W.p;try{W.p=32>a?32:a,T.T=null,a=fc,fc=null;var h=Zs,p=yr;if(ft=0,pr=Zs=null,yr=0,(ze&6)!==0)throw Error(i(331));var b=ze;if(ze|=4,Nm(h.current),bm(h,h.current,p,a),ze=b,Dn(0,!1),be&&typeof be.onPostCommitFiberRoot=="function")try{be.onPostCommitFiberRoot(ke,h)}catch{}return!0}finally{W.p=d,T.T=l,Bm(e,t)}}function Pm(e,t,a){t=Lt(a,t),t=Qo(e.stateNode,t,2),e=$s(e,t,2),e!==null&&(Xr(e,2),ns(e))}function He(e,t,a){if(e.tag===3)Pm(e,e,a);else for(;t!==null;){if(t.tag===3){Pm(t,e,a);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ks===null||!Ks.has(l))){e=Lt(a,e),a=Yh(2),l=$s(t,a,2),l!==null&&(Vh(a,l,t,e),Xr(l,2),ns(l));break}}t=t.return}}function vc(e,t,a){var l=e.pingCache;if(l===null){l=e.pingCache=new Lx;var d=new Set;l.set(t,d)}else d=l.get(t),d===void 0&&(d=new Set,l.set(t,d));d.has(a)||(cc=!0,d.add(a),e=Hx.bind(null,e,t,a),t.then(e,e))}function Hx(e,t,a){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ie===e&&(De&a)===a&&(Ze===4||Ze===3&&(De&62914560)===De&&300>jt()-hc?(ze&2)===0&&vr(e,0):dc|=a,xr===De&&(xr=0)),ns(e)}function Hm(e,t){t===0&&(t=qd()),e=tr(e,t),e!==null&&(Xr(e,t),ns(e))}function Ix(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Hm(e,a)}function Gx(e,t){var a=0;switch(e.tag){case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(t),Hm(e,a)}function Yx(e,t){return Us(e,t)}var Fl=null,jr=null,bc=!1,Wl=!1,jc=!1,Aa=0;function ns(e){e!==jr&&e.next===null&&(jr===null?Fl=jr=e:jr=jr.next=e),Wl=!0,bc||(bc=!0,Qx())}function Dn(e,t){if(!jc&&Wl){jc=!0;do for(var a=!1,l=Fl;l!==null;){if(e!==0){var d=l.pendingLanes;if(d===0)var h=0;else{var p=l.suspendedLanes,b=l.pingedLanes;h=(1<<31-Ve(42|e)+1)-1,h&=d&~(p&~b),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(a=!0,Vm(l,h))}else h=De,h=nl(l,l===Ie?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(h&3)===0||Qr(l,h)||(a=!0,Vm(l,h));l=l.next}while(a);jc=!1}}function Vx(){Im()}function Im(){Wl=bc=!1;var e=0;Aa!==0&&(tp()&&(e=Aa),Aa=0);for(var t=jt(),a=null,l=Fl;l!==null;){var d=l.next,h=Gm(l,t);h===0?(l.next=null,a===null?Fl=d:a.next=d,d===null&&(jr=a)):(a=l,(e!==0||(h&3)!==0)&&(Wl=!0)),l=d}Dn(e)}function Gm(e,t){for(var a=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var p=31-Ve(h),b=1<<p,k=d[p];k===-1?((b&a)===0||(b&l)!==0)&&(d[p]=yg(b,t)):k<=t&&(e.expiredLanes|=b),h&=~b}if(t=Ie,a=De,a=nl(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===t&&(Le===2||Le===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&ha(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Qr(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(l!==null&&ha(l),Ri(a)){case 2:case 8:a=ds;break;case 32:a=U;break;case 268435456:a=ve;break;default:a=U}return l=Ym.bind(null,e),a=Us(a,l),e.callbackPriority=t,e.callbackNode=a,t}return l!==null&&l!==null&&ha(l),e.callbackPriority=2,e.callbackNode=null,2}function Ym(e,t){if(ft!==0&&ft!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Jl()&&e.callbackNode!==a)return null;var l=De;return l=nl(e,e===Ie?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(km(e,l,t),Gm(e,jt()),e.callbackNode!=null&&e.callbackNode===a?Ym.bind(null,e):null)}function Vm(e,t){if(Jl())return null;km(e,t,!0)}function Qx(){ap(function(){(ze&6)!==0?Us(Ms,Vx):Im()})}function wc(){return Aa===0&&(Aa=Ld()),Aa}function Qm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:dl(""+e)}function Xm(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Xx(e,t,a,l,d){if(t==="submit"&&a&&a.stateNode===d){var h=Qm((d[wt]||null).action),p=l.submitter;p&&(t=(t=p[wt]||null)?Qm(t.formAction):p.getAttribute("formAction"),t!==null&&(h=t,p=null));var b=new fl("action","action",null,l,d);e.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Aa!==0){var k=p?Xm(d,p):new FormData(d);Ho(a,{pending:!0,data:k,method:d.method,action:h},null,k)}}else typeof h=="function"&&(b.preventDefault(),k=p?Xm(d,p):new FormData(d),Ho(a,{pending:!0,data:k,method:d.method,action:h},h,k))},currentTarget:d}]})}}for(var Nc=0;Nc<lo.length;Nc++){var Sc=lo[Nc],Kx=Sc.toLowerCase(),Zx=Sc[0].toUpperCase()+Sc.slice(1);Qt(Kx,"on"+Zx)}Qt(ku,"onAnimationEnd"),Qt(Tu,"onAnimationIteration"),Qt(Cu,"onAnimationStart"),Qt("dblclick","onDoubleClick"),Qt("focusin","onFocus"),Qt("focusout","onBlur"),Qt(mx,"onTransitionRun"),Qt(fx,"onTransitionStart"),Qt(gx,"onTransitionCancel"),Qt(Ou,"onTransitionEnd"),Ya("onMouseEnter",["mouseout","mouseover"]),Ya("onMouseLeave",["mouseout","mouseover"]),Ya("onPointerEnter",["pointerout","pointerover"]),Ya("onPointerLeave",["pointerout","pointerover"]),ga("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ga("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ga("onBeforeInput",["compositionend","keypress","textInput","paste"]),ga("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ga("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ga("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Un="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Un));function Km(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],d=l.event;l=l.listeners;e:{var h=void 0;if(t)for(var p=l.length-1;0<=p;p--){var b=l[p],k=b.instance,B=b.currentTarget;if(b=b.listener,k!==h&&d.isPropagationStopped())break e;h=b,d.currentTarget=B;try{h(d)}catch(X){$l(X)}d.currentTarget=null,h=k}else for(p=0;p<l.length;p++){if(b=l[p],k=b.instance,B=b.currentTarget,b=b.listener,k!==h&&d.isPropagationStopped())break e;h=b,d.currentTarget=B;try{h(d)}catch(X){$l(X)}d.currentTarget=null,h=k}}}}function Oe(e,t){var a=t[zi];a===void 0&&(a=t[zi]=new Set);var l=e+"__bubble";a.has(l)||(Zm(t,e,2,!1),a.add(l))}function _c(e,t,a){var l=0;t&&(l|=4),Zm(a,e,l,t)}var ei="_reactListening"+Math.random().toString(36).slice(2);function Ec(e){if(!e[ei]){e[ei]=!0,Id.forEach(function(a){a!=="selectionchange"&&(Jx.has(a)||_c(a,!1,e),_c(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ei]||(t[ei]=!0,_c("selectionchange",!1,t))}}function Zm(e,t,a,l){switch(jf(t)){case 2:var d=Sp;break;case 8:d=_p;break;default:d=$c}a=d.bind(null,t,a,e),d=void 0,!Qi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(t,a,{capture:!0,passive:d}):e.addEventListener(t,a,!0):d!==void 0?e.addEventListener(t,a,{passive:d}):e.addEventListener(t,a,!1)}function kc(e,t,a,l,d){var h=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var p=l.tag;if(p===3||p===4){var b=l.stateNode.containerInfo;if(b===d)break;if(p===4)for(p=l.return;p!==null;){var k=p.tag;if((k===3||k===4)&&p.stateNode.containerInfo===d)return;p=p.return}for(;b!==null;){if(p=Ha(b),p===null)return;if(k=p.tag,k===5||k===6||k===26||k===27){l=h=p;continue e}b=b.parentNode}}l=l.return}au(function(){var B=h,X=Yi(a),F=[];e:{var P=Au.get(e);if(P!==void 0){var H=fl,ye=e;switch(e){case"keypress":if(hl(a)===0)break e;case"keydown":case"keyup":H=Yg;break;case"focusin":ye="focus",H=Ji;break;case"focusout":ye="blur",H=Ji;break;case"beforeblur":case"afterblur":H=Ji;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=lu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Ug;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=Xg;break;case ku:case Tu:case Cu:H=zg;break;case Ou:H=Zg;break;case"scroll":case"scrollend":H=Ag;break;case"wheel":H=Fg;break;case"copy":case"cut":case"paste":H=qg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=ou;break;case"toggle":case"beforetoggle":H=ex}var ge=(t&4)!==0,Pe=!ge&&(e==="scroll"||e==="scrollend"),M=ge?P!==null?P+"Capture":null:P;ge=[];for(var O=B,L;O!==null;){var Z=O;if(L=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||L===null||M===null||(Z=Jr(O,M),Z!=null&&ge.push(Mn(O,Z,L))),Pe)break;O=O.return}0<ge.length&&(P=new H(P,ye,null,a,X),F.push({event:P,listeners:ge}))}}if((t&7)===0){e:{if(P=e==="mouseover"||e==="pointerover",H=e==="mouseout"||e==="pointerout",P&&a!==Gi&&(ye=a.relatedTarget||a.fromElement)&&(Ha(ye)||ye[Pa]))break e;if((H||P)&&(P=X.window===X?X:(P=X.ownerDocument)?P.defaultView||P.parentWindow:window,H?(ye=a.relatedTarget||a.toElement,H=B,ye=ye?Ha(ye):null,ye!==null&&(Pe=u(ye),ge=ye.tag,ye!==Pe||ge!==5&&ge!==27&&ge!==6)&&(ye=null)):(H=null,ye=B),H!==ye)){if(ge=lu,Z="onMouseLeave",M="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(ge=ou,Z="onPointerLeave",M="onPointerEnter",O="pointer"),Pe=H==null?P:Zr(H),L=ye==null?P:Zr(ye),P=new ge(Z,O+"leave",H,a,X),P.target=Pe,P.relatedTarget=L,Z=null,Ha(X)===B&&(ge=new ge(M,O+"enter",ye,a,X),ge.target=L,ge.relatedTarget=Pe,Z=ge),Pe=Z,H&&ye)t:{for(ge=H,M=ye,O=0,L=ge;L;L=wr(L))O++;for(L=0,Z=M;Z;Z=wr(Z))L++;for(;0<O-L;)ge=wr(ge),O--;for(;0<L-O;)M=wr(M),L--;for(;O--;){if(ge===M||M!==null&&ge===M.alternate)break t;ge=wr(ge),M=wr(M)}ge=null}else ge=null;H!==null&&Jm(F,P,H,ge,!1),ye!==null&&Pe!==null&&Jm(F,Pe,ye,ge,!0)}}e:{if(P=B?Zr(B):window,H=P.nodeName&&P.nodeName.toLowerCase(),H==="select"||H==="input"&&P.type==="file")var me=xu;else if(fu(P))if(pu)me=dx;else{me=ox;var Te=ix}else H=P.nodeName,!H||H.toLowerCase()!=="input"||P.type!=="checkbox"&&P.type!=="radio"?B&&Ii(B.elementType)&&(me=xu):me=cx;if(me&&(me=me(e,B))){gu(F,me,a,X);break e}Te&&Te(e,P,B),e==="focusout"&&B&&P.type==="number"&&B.memoizedProps.value!=null&&Hi(P,"number",P.value)}switch(Te=B?Zr(B):window,e){case"focusin":(fu(Te)||Te.contentEditable==="true")&&(Fa=Te,ao=B,nn=null);break;case"focusout":nn=ao=Fa=null;break;case"mousedown":ro=!0;break;case"contextmenu":case"mouseup":case"dragend":ro=!1,_u(F,a,X);break;case"selectionchange":if(hx)break;case"keydown":case"keyup":_u(F,a,X)}var fe;if(Wi)e:{switch(e){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else Ja?hu(e,a)&&(xe="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(xe="onCompositionStart");xe&&(cu&&a.locale!=="ko"&&(Ja||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&Ja&&(fe=ru()):(zs=X,Xi="value"in zs?zs.value:zs.textContent,Ja=!0)),Te=ti(B,xe),0<Te.length&&(xe=new iu(xe,e,null,a,X),F.push({event:xe,listeners:Te}),fe?xe.data=fe:(fe=mu(a),fe!==null&&(xe.data=fe)))),(fe=sx?ax(e,a):rx(e,a))&&(xe=ti(B,"onBeforeInput"),0<xe.length&&(Te=new iu("onBeforeInput","beforeinput",null,a,X),F.push({event:Te,listeners:xe}),Te.data=fe)),Xx(F,e,B,a,X)}Km(F,t)})}function Mn(e,t,a){return{instance:e,listener:t,currentTarget:a}}function ti(e,t){for(var a=t+"Capture",l=[];e!==null;){var d=e,h=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||h===null||(d=Jr(e,a),d!=null&&l.unshift(Mn(e,d,h)),d=Jr(e,t),d!=null&&l.push(Mn(e,d,h))),e.tag===3)return l;e=e.return}return[]}function wr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Jm(e,t,a,l,d){for(var h=t._reactName,p=[];a!==null&&a!==l;){var b=a,k=b.alternate,B=b.stateNode;if(b=b.tag,k!==null&&k===l)break;b!==5&&b!==26&&b!==27||B===null||(k=B,d?(B=Jr(a,h),B!=null&&p.unshift(Mn(a,B,k))):d||(B=Jr(a,h),B!=null&&p.push(Mn(a,B,k)))),a=a.return}p.length!==0&&e.push({event:t,listeners:p})}var Fx=/\r\n?/g,Wx=/\u0000|\uFFFD/g;function Fm(e){return(typeof e=="string"?e:""+e).replace(Fx,`
`).replace(Wx,"")}function Wm(e,t){return t=Fm(t),Fm(e)===t}function si(){}function $e(e,t,a,l,d,h){switch(a){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||Xa(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&Xa(e,""+l);break;case"className":il(e,"class",l);break;case"tabIndex":il(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":il(e,a,l);break;case"style":tu(e,l,h);break;case"data":if(t!=="object"){il(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=dl(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(a==="formAction"?(t!=="input"&&$e(e,t,"name",d.name,d,null),$e(e,t,"formEncType",d.formEncType,d,null),$e(e,t,"formMethod",d.formMethod,d,null),$e(e,t,"formTarget",d.formTarget,d,null)):($e(e,t,"encType",d.encType,d,null),$e(e,t,"method",d.method,d,null),$e(e,t,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=dl(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=si);break;case"onScroll":l!=null&&Oe("scroll",e);break;case"onScrollEnd":l!=null&&Oe("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=dl(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":Oe("beforetoggle",e),Oe("toggle",e),ll(e,"popover",l);break;case"xlinkActuate":us(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":us(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":us(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":us(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":us(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":us(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":us(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":us(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":us(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ll(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Cg.get(a)||a,ll(e,a,l))}}function Tc(e,t,a,l,d,h){switch(a){case"style":tu(e,l,h);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"children":typeof l=="string"?Xa(e,l):(typeof l=="number"||typeof l=="bigint")&&Xa(e,""+l);break;case"onScroll":l!=null&&Oe("scroll",e);break;case"onScrollEnd":l!=null&&Oe("scrollend",e);break;case"onClick":l!=null&&(e.onclick=si);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Gd.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),t=a.slice(2,d?a.length-7:void 0),h=e[wt]||null,h=h!=null?h[a]:null,typeof h=="function"&&e.removeEventListener(t,h,d),typeof l=="function")){typeof h!="function"&&h!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,l,d);break e}a in e?e[a]=l:l===!0?e.setAttribute(a,""):ll(e,a,l)}}}function gt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",e),Oe("load",e);var l=!1,d=!1,h;for(h in a)if(a.hasOwnProperty(h)){var p=a[h];if(p!=null)switch(h){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:$e(e,t,h,p,a,null)}}d&&$e(e,t,"srcSet",a.srcSet,a,null),l&&$e(e,t,"src",a.src,a,null);return;case"input":Oe("invalid",e);var b=h=p=d=null,k=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var X=a[l];if(X!=null)switch(l){case"name":d=X;break;case"type":p=X;break;case"checked":k=X;break;case"defaultChecked":B=X;break;case"value":h=X;break;case"defaultValue":b=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,t));break;default:$e(e,t,l,X,a,null)}}Jd(e,h,b,k,B,p,d,!1),ol(e);return;case"select":Oe("invalid",e),l=p=h=null;for(d in a)if(a.hasOwnProperty(d)&&(b=a[d],b!=null))switch(d){case"value":h=b;break;case"defaultValue":p=b;break;case"multiple":l=b;default:$e(e,t,d,b,a,null)}t=h,a=p,e.multiple=!!l,t!=null?Qa(e,!!l,t,!1):a!=null&&Qa(e,!!l,a,!0);return;case"textarea":Oe("invalid",e),h=d=l=null;for(p in a)if(a.hasOwnProperty(p)&&(b=a[p],b!=null))switch(p){case"value":l=b;break;case"defaultValue":d=b;break;case"children":h=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:$e(e,t,p,b,a,null)}Wd(e,l,d,h),ol(e);return;case"option":for(k in a)if(a.hasOwnProperty(k)&&(l=a[k],l!=null))switch(k){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:$e(e,t,k,l,a,null)}return;case"dialog":Oe("beforetoggle",e),Oe("toggle",e),Oe("cancel",e),Oe("close",e);break;case"iframe":case"object":Oe("load",e);break;case"video":case"audio":for(l=0;l<Un.length;l++)Oe(Un[l],e);break;case"image":Oe("error",e),Oe("load",e);break;case"details":Oe("toggle",e);break;case"embed":case"source":case"link":Oe("error",e),Oe("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:$e(e,t,B,l,a,null)}return;default:if(Ii(t)){for(X in a)a.hasOwnProperty(X)&&(l=a[X],l!==void 0&&Tc(e,t,X,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&$e(e,t,b,l,a,null))}function ep(e,t,a,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,h=null,p=null,b=null,k=null,B=null,X=null;for(H in a){var F=a[H];if(a.hasOwnProperty(H)&&F!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":k=F;default:l.hasOwnProperty(H)||$e(e,t,H,null,l,F)}}for(var P in l){var H=l[P];if(F=a[P],l.hasOwnProperty(P)&&(H!=null||F!=null))switch(P){case"type":h=H;break;case"name":d=H;break;case"checked":B=H;break;case"defaultChecked":X=H;break;case"value":p=H;break;case"defaultValue":b=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,t));break;default:H!==F&&$e(e,t,P,H,l,F)}}Pi(e,p,b,k,B,X,h,d);return;case"select":H=p=b=P=null;for(h in a)if(k=a[h],a.hasOwnProperty(h)&&k!=null)switch(h){case"value":break;case"multiple":H=k;default:l.hasOwnProperty(h)||$e(e,t,h,null,l,k)}for(d in l)if(h=l[d],k=a[d],l.hasOwnProperty(d)&&(h!=null||k!=null))switch(d){case"value":P=h;break;case"defaultValue":b=h;break;case"multiple":p=h;default:h!==k&&$e(e,t,d,h,l,k)}t=b,a=p,l=H,P!=null?Qa(e,!!a,P,!1):!!l!=!!a&&(t!=null?Qa(e,!!a,t,!0):Qa(e,!!a,a?[]:"",!1));return;case"textarea":H=P=null;for(b in a)if(d=a[b],a.hasOwnProperty(b)&&d!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:$e(e,t,b,null,l,d)}for(p in l)if(d=l[p],h=a[p],l.hasOwnProperty(p)&&(d!=null||h!=null))switch(p){case"value":P=d;break;case"defaultValue":H=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==h&&$e(e,t,p,d,l,h)}Fd(e,P,H);return;case"option":for(var ye in a)if(P=a[ye],a.hasOwnProperty(ye)&&P!=null&&!l.hasOwnProperty(ye))switch(ye){case"selected":e.selected=!1;break;default:$e(e,t,ye,null,l,P)}for(k in l)if(P=l[k],H=a[k],l.hasOwnProperty(k)&&P!==H&&(P!=null||H!=null))switch(k){case"selected":e.selected=P&&typeof P!="function"&&typeof P!="symbol";break;default:$e(e,t,k,P,l,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ge in a)P=a[ge],a.hasOwnProperty(ge)&&P!=null&&!l.hasOwnProperty(ge)&&$e(e,t,ge,null,l,P);for(B in l)if(P=l[B],H=a[B],l.hasOwnProperty(B)&&P!==H&&(P!=null||H!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(i(137,t));break;default:$e(e,t,B,P,l,H)}return;default:if(Ii(t)){for(var Pe in a)P=a[Pe],a.hasOwnProperty(Pe)&&P!==void 0&&!l.hasOwnProperty(Pe)&&Tc(e,t,Pe,void 0,l,P);for(X in l)P=l[X],H=a[X],!l.hasOwnProperty(X)||P===H||P===void 0&&H===void 0||Tc(e,t,X,P,l,H);return}}for(var M in a)P=a[M],a.hasOwnProperty(M)&&P!=null&&!l.hasOwnProperty(M)&&$e(e,t,M,null,l,P);for(F in l)P=l[F],H=a[F],!l.hasOwnProperty(F)||P===H||P==null&&H==null||$e(e,t,F,P,l,H)}var Cc=null,Oc=null;function ai(e){return e.nodeType===9?e:e.ownerDocument}function ef(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tf(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ac(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Dc=null;function tp(){var e=window.event;return e&&e.type==="popstate"?e===Dc?!1:(Dc=e,!0):(Dc=null,!1)}var sf=typeof setTimeout=="function"?setTimeout:void 0,sp=typeof clearTimeout=="function"?clearTimeout:void 0,af=typeof Promise=="function"?Promise:void 0,ap=typeof queueMicrotask=="function"?queueMicrotask:typeof af<"u"?function(e){return af.resolve(null).then(e).catch(rp)}:sf;function rp(e){setTimeout(function(){throw e})}function Fs(e){return e==="head"}function rf(e,t){var a=t,l=0,d=0;do{var h=a.nextSibling;if(e.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(0<l&&8>l){a=l;var p=e.ownerDocument;if(a&1&&Rn(p.documentElement),a&2&&Rn(p.body),a&4)for(a=p.head,Rn(a),p=a.firstChild;p;){var b=p.nextSibling,k=p.nodeName;p[Kr]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&p.rel.toLowerCase()==="stylesheet"||a.removeChild(p),p=b}}if(d===0){e.removeChild(h),In(t);return}d--}else a==="$"||a==="$?"||a==="$!"?d++:l=a.charCodeAt(0)-48;else l=0;a=h}while(a);In(t)}function Uc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Uc(a),Li(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function np(e,t,a,l){for(;e.nodeType===1;){var d=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Kr])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var h=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=Kt(e.nextSibling),e===null)break}return null}function lp(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Kt(e.nextSibling),e===null))return null;return e}function Mc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function ip(e,t){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")t();else{var l=function(){t(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Kt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Rc=null;function nf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}function lf(e,t,a){switch(t=ai(a),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Rn(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Li(e)}var It=new Map,of=new Set;function ri(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var _s=W.d;W.d={f:op,r:cp,D:dp,C:up,L:hp,m:mp,X:gp,S:fp,M:xp};function op(){var e=_s.f(),t=Kl();return e||t}function cp(e){var t=Ia(e);t!==null&&t.tag===5&&t.type==="form"?kh(t):_s.r(e)}var Nr=typeof document>"u"?null:document;function cf(e,t,a){var l=Nr;if(l&&typeof t=="string"&&t){var d=zt(t);d='link[rel="'+e+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),of.has(d)||(of.add(d),e={rel:e,crossOrigin:a,href:t},l.querySelector(d)===null&&(t=l.createElement("link"),gt(t,"link",e),lt(t),l.head.appendChild(t)))}}function dp(e){_s.D(e),cf("dns-prefetch",e,null)}function up(e,t){_s.C(e,t),cf("preconnect",e,t)}function hp(e,t,a){_s.L(e,t,a);var l=Nr;if(l&&e&&t){var d='link[rel="preload"][as="'+zt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+zt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+zt(a.imageSizes)+'"]')):d+='[href="'+zt(e)+'"]';var h=d;switch(t){case"style":h=Sr(e);break;case"script":h=_r(e)}It.has(h)||(e=y({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),It.set(h,e),l.querySelector(d)!==null||t==="style"&&l.querySelector(zn(h))||t==="script"&&l.querySelector(Ln(h))||(t=l.createElement("link"),gt(t,"link",e),lt(t),l.head.appendChild(t)))}}function mp(e,t){_s.m(e,t);var a=Nr;if(a&&e){var l=t&&typeof t.as=="string"?t.as:"script",d='link[rel="modulepreload"][as="'+zt(l)+'"][href="'+zt(e)+'"]',h=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=_r(e)}if(!It.has(h)&&(e=y({rel:"modulepreload",href:e},t),It.set(h,e),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ln(h)))return}l=a.createElement("link"),gt(l,"link",e),lt(l),a.head.appendChild(l)}}}function fp(e,t,a){_s.S(e,t,a);var l=Nr;if(l&&e){var d=Ga(l).hoistableStyles,h=Sr(e);t=t||"default";var p=d.get(h);if(!p){var b={loading:0,preload:null};if(p=l.querySelector(zn(h)))b.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":t},a),(a=It.get(h))&&zc(e,a);var k=p=l.createElement("link");lt(k),gt(k,"link",e),k._p=new Promise(function(B,X){k.onload=B,k.onerror=X}),k.addEventListener("load",function(){b.loading|=1}),k.addEventListener("error",function(){b.loading|=2}),b.loading|=4,ni(p,t,l)}p={type:"stylesheet",instance:p,count:1,state:b},d.set(h,p)}}}function gp(e,t){_s.X(e,t);var a=Nr;if(a&&e){var l=Ga(a).hoistableScripts,d=_r(e),h=l.get(d);h||(h=a.querySelector(Ln(d)),h||(e=y({src:e,async:!0},t),(t=It.get(d))&&Lc(e,t),h=a.createElement("script"),lt(h),gt(h,"link",e),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(d,h))}}function xp(e,t){_s.M(e,t);var a=Nr;if(a&&e){var l=Ga(a).hoistableScripts,d=_r(e),h=l.get(d);h||(h=a.querySelector(Ln(d)),h||(e=y({src:e,async:!0,type:"module"},t),(t=It.get(d))&&Lc(e,t),h=a.createElement("script"),lt(h),gt(h,"link",e),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(d,h))}}function df(e,t,a,l){var d=(d=de.current)?ri(d):null;if(!d)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Sr(a.href),a=Ga(d).hoistableStyles,l=a.get(t),l||(l={type:"style",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Sr(a.href);var h=Ga(d).hoistableStyles,p=h.get(e);if(p||(d=d.ownerDocument||d,p={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,p),(h=d.querySelector(zn(e)))&&!h._p&&(p.instance=h,p.state.loading=5),It.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},It.set(e,a),h||pp(d,e,a,p.state))),t&&l===null)throw Error(i(528,""));return p}if(t&&l!==null)throw Error(i(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=_r(a),a=Ga(d).hoistableScripts,l=a.get(t),l||(l={type:"script",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Sr(e){return'href="'+zt(e)+'"'}function zn(e){return'link[rel="stylesheet"]['+e+"]"}function uf(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function pp(e,t,a,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),gt(t,"link",a),lt(t),e.head.appendChild(t))}function _r(e){return'[src="'+zt(e)+'"]'}function Ln(e){return"script[async]"+e}function hf(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+zt(a.href)+'"]');if(l)return t.instance=l,lt(l),l;var d=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),lt(l),gt(l,"style",d),ni(l,a.precedence,e),t.instance=l;case"stylesheet":d=Sr(a.href);var h=e.querySelector(zn(d));if(h)return t.state.loading|=4,t.instance=h,lt(h),h;l=uf(a),(d=It.get(d))&&zc(l,d),h=(e.ownerDocument||e).createElement("link"),lt(h);var p=h;return p._p=new Promise(function(b,k){p.onload=b,p.onerror=k}),gt(h,"link",l),t.state.loading|=4,ni(h,a.precedence,e),t.instance=h;case"script":return h=_r(a.src),(d=e.querySelector(Ln(h)))?(t.instance=d,lt(d),d):(l=a,(d=It.get(h))&&(l=y({},a),Lc(l,d)),e=e.ownerDocument||e,d=e.createElement("script"),lt(d),gt(d,"link",l),e.head.appendChild(d),t.instance=d);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,ni(l,a.precedence,e));return t.instance}function ni(e,t,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,h=d,p=0;p<l.length;p++){var b=l[p];if(b.dataset.precedence===t)h=b;else if(h!==d)break}h?h.parentNode.insertBefore(e,h.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function zc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Lc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var li=null;function mf(e,t,a){if(li===null){var l=new Map,d=li=new Map;d.set(a,l)}else d=li,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),d=0;d<a.length;d++){var h=a[d];if(!(h[Kr]||h[xt]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var p=h.getAttribute(t)||"";p=e+p;var b=l.get(p);b?b.push(h):l.set(p,[h])}}return l}function ff(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function yp(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function gf(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var qn=null;function vp(){}function bp(e,t,a){if(qn===null)throw Error(i(475));var l=qn;if(t.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var d=Sr(a.href),h=e.querySelector(zn(d));if(h){e=h._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=ii.bind(l),e.then(l,l)),t.state.loading|=4,t.instance=h,lt(h);return}h=e.ownerDocument||e,a=uf(a),(d=It.get(d))&&zc(a,d),h=h.createElement("link"),lt(h);var p=h;p._p=new Promise(function(b,k){p.onload=b,p.onerror=k}),gt(h,"link",a),t.instance=h}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(l.count++,t=ii.bind(l),e.addEventListener("load",t),e.addEventListener("error",t))}}function jp(){if(qn===null)throw Error(i(475));var e=qn;return e.stylesheets&&e.count===0&&qc(e,e.stylesheets),0<e.count?function(t){var a=setTimeout(function(){if(e.stylesheets&&qc(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(a)}}:null}function ii(){if(this.count--,this.count===0){if(this.stylesheets)qc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var oi=null;function qc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,oi=new Map,t.forEach(wp,e),oi=null,ii.call(e))}function wp(e,t){if(!(t.state.loading&4)){var a=oi.get(e);if(a)var l=a.get(null);else{a=new Map,oi.set(e,a);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<d.length;h++){var p=d[h];(p.nodeName==="LINK"||p.getAttribute("media")!=="not all")&&(a.set(p.dataset.precedence,p),l=p)}l&&a.set(null,l)}d=t.instance,p=d.getAttribute("data-precedence"),h=a.get(p)||l,h===l&&a.set(null,d),a.set(p,d),this.count++,l=ii.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),h?h.parentNode.insertBefore(d,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),t.state.loading|=4}}var Bn={$$typeof:R,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function Np(e,t,a,l,d,h,p,b){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ui(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ui(0),this.hiddenUpdates=Ui(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=h,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function xf(e,t,a,l,d,h,p,b,k,B,X,F){return e=new Np(e,t,a,p,b,k,B,F),t=1,h===!0&&(t|=24),h=Ct(3,null,null,t),e.current=h,h.stateNode=e,t=vo(),t.refCount++,e.pooledCache=t,t.refCount++,h.memoizedState={element:l,isDehydrated:a,cache:t},No(h),e}function pf(e){return e?(e=sr,e):sr}function yf(e,t,a,l,d,h){d=pf(d),l.context===null?l.context=d:l.pendingContext=d,l=Bs(t),l.payload={element:a},h=h===void 0?null:h,h!==null&&(l.callback=h),a=$s(e,l,t),a!==null&&(Mt(a,e,t),gn(a,e,t))}function vf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Bc(e,t){vf(e,t),(e=e.alternate)&&vf(e,t)}function bf(e){if(e.tag===13){var t=tr(e,67108864);t!==null&&Mt(t,e,67108864),Bc(e,67108864)}}var ci=!0;function Sp(e,t,a,l){var d=T.T;T.T=null;var h=W.p;try{W.p=2,$c(e,t,a,l)}finally{W.p=h,T.T=d}}function _p(e,t,a,l){var d=T.T;T.T=null;var h=W.p;try{W.p=8,$c(e,t,a,l)}finally{W.p=h,T.T=d}}function $c(e,t,a,l){if(ci){var d=Pc(l);if(d===null)kc(e,t,l,di,a),wf(e,l);else if(kp(d,e,t,a,l))l.stopPropagation();else if(wf(e,l),t&4&&-1<Ep.indexOf(e)){for(;d!==null;){var h=Ia(d);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var p=fa(h.pendingLanes);if(p!==0){var b=h;for(b.pendingLanes|=2,b.entangledLanes|=2;p;){var k=1<<31-Ve(p);b.entanglements[1]|=k,p&=~k}ns(h),(ze&6)===0&&(Ql=jt()+500,Dn(0))}}break;case 13:b=tr(h,2),b!==null&&Mt(b,h,2),Kl(),Bc(h,2)}if(h=Pc(l),h===null&&kc(e,t,l,di,a),h===d)break;d=h}d!==null&&l.stopPropagation()}else kc(e,t,l,null,a)}}function Pc(e){return e=Yi(e),Hc(e)}var di=null;function Hc(e){if(di=null,e=Ha(e),e!==null){var t=u(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=m(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return di=e,null}function jf(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ma()){case Ms:return 2;case ds:return 8;case U:case se:return 32;case ve:return 268435456;default:return 32}default:return 32}}var Ic=!1,Ws=null,ea=null,ta=null,$n=new Map,Pn=new Map,sa=[],Ep="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wf(e,t){switch(e){case"focusin":case"focusout":Ws=null;break;case"dragenter":case"dragleave":ea=null;break;case"mouseover":case"mouseout":ta=null;break;case"pointerover":case"pointerout":$n.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pn.delete(t.pointerId)}}function Hn(e,t,a,l,d,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:a,eventSystemFlags:l,nativeEvent:h,targetContainers:[d]},t!==null&&(t=Ia(t),t!==null&&bf(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function kp(e,t,a,l,d){switch(t){case"focusin":return Ws=Hn(Ws,e,t,a,l,d),!0;case"dragenter":return ea=Hn(ea,e,t,a,l,d),!0;case"mouseover":return ta=Hn(ta,e,t,a,l,d),!0;case"pointerover":var h=d.pointerId;return $n.set(h,Hn($n.get(h)||null,e,t,a,l,d)),!0;case"gotpointercapture":return h=d.pointerId,Pn.set(h,Hn(Pn.get(h)||null,e,t,a,l,d)),!0}return!1}function Nf(e){var t=Ha(e.target);if(t!==null){var a=u(t);if(a!==null){if(t=a.tag,t===13){if(t=m(a),t!==null){e.blockedOn=t,bg(e.priority,function(){if(a.tag===13){var l=Ut();l=Mi(l);var d=tr(a,l);d!==null&&Mt(d,a,l),Bc(a,l)}});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ui(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Pc(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Gi=l,a.target.dispatchEvent(l),Gi=null}else return t=Ia(a),t!==null&&bf(t),e.blockedOn=a,!1;t.shift()}return!0}function Sf(e,t,a){ui(e)&&a.delete(t)}function Tp(){Ic=!1,Ws!==null&&ui(Ws)&&(Ws=null),ea!==null&&ui(ea)&&(ea=null),ta!==null&&ui(ta)&&(ta=null),$n.forEach(Sf),Pn.forEach(Sf)}function hi(e,t){e.blockedOn===t&&(e.blockedOn=null,Ic||(Ic=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,Tp)))}var mi=null;function _f(e){mi!==e&&(mi=e,c.unstable_scheduleCallback(c.unstable_NormalPriority,function(){mi===e&&(mi=null);for(var t=0;t<e.length;t+=3){var a=e[t],l=e[t+1],d=e[t+2];if(typeof l!="function"){if(Hc(l||a)===null)continue;break}var h=Ia(a);h!==null&&(e.splice(t,3),t-=3,Ho(h,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function In(e){function t(k){return hi(k,e)}Ws!==null&&hi(Ws,e),ea!==null&&hi(ea,e),ta!==null&&hi(ta,e),$n.forEach(t),Pn.forEach(t);for(var a=0;a<sa.length;a++){var l=sa[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<sa.length&&(a=sa[0],a.blockedOn===null);)Nf(a),a.blockedOn===null&&sa.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],h=a[l+1],p=d[wt]||null;if(typeof h=="function")p||_f(a);else if(p){var b=null;if(h&&h.hasAttribute("formAction")){if(d=h,p=h[wt]||null)b=p.formAction;else if(Hc(d)!==null)continue}else b=p.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),_f(a)}}}function Gc(e){this._internalRoot=e}fi.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var a=t.current,l=Ut();yf(a,l,e,t,null,null)},fi.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;yf(e.current,2,null,e,null,null),Kl(),t[Pa]=null}};function fi(e){this._internalRoot=e}fi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pd();e={blockedOn:null,target:e,priority:t};for(var a=0;a<sa.length&&t!==0&&t<sa[a].priority;a++);sa.splice(a,0,e),a===0&&Nf(e)}};var Ef=r.version;if(Ef!=="19.1.0")throw Error(i(527,Ef,"19.1.0"));W.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=g(t),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var Cp={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:T,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gi.isDisabled&&gi.supportsFiber)try{ke=gi.inject(Cp),be=gi}catch{}}return Yn.createRoot=function(e,t){if(!o(e))throw Error(i(299));var a=!1,l="",d=Ph,h=Hh,p=Ih,b=null;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(d=t.onUncaughtError),t.onCaughtError!==void 0&&(h=t.onCaughtError),t.onRecoverableError!==void 0&&(p=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(b=t.unstable_transitionCallbacks)),t=xf(e,1,!1,null,null,a,l,d,h,p,b,null),e[Pa]=t.current,Ec(e),new Gc(t)},Yn.hydrateRoot=function(e,t,a){if(!o(e))throw Error(i(299));var l=!1,d="",h=Ph,p=Hh,b=Ih,k=null,B=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(h=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(k=a.unstable_transitionCallbacks),a.formState!==void 0&&(B=a.formState)),t=xf(e,1,!0,t,a??null,l,d,h,p,b,k,B),t.context=pf(null),a=t.current,l=Ut(),l=Mi(l),d=Bs(l),d.callback=null,$s(a,d,l),a=l,t.current.lanes=a,Xr(t,a),ns(t),e[Pa]=t.current,Ec(e),new fi(t)},Yn.version="19.1.0",Yn}var zf;function Pp(){if(zf)return Qc.exports;zf=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(r){console.error(r)}}return c(),Qc.exports=$p(),Qc.exports}var Hp=Pp();const Ip=Sd(Hp);O0();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wn(){return Wn=Object.assign?Object.assign.bind():function(c){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(c[i]=n[i])}return c},Wn.apply(this,arguments)}var oa;(function(c){c.Pop="POP",c.Push="PUSH",c.Replace="REPLACE"})(oa||(oa={}));const Lf="popstate";function Gp(c){c===void 0&&(c={});function r(i,o){let{pathname:u,search:m,hash:f}=i.location;return od("",{pathname:u,search:m,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){return typeof o=="string"?o:_i(o)}return Vp(r,n,null,c)}function et(c,r){if(c===!1||c===null||typeof c>"u")throw new Error(r)}function A0(c,r){if(!c){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function Yp(){return Math.random().toString(36).substr(2,8)}function qf(c,r){return{usr:c.state,key:c.key,idx:r}}function od(c,r,n,i){return n===void 0&&(n=null),Wn({pathname:typeof c=="string"?c:c.pathname,search:"",hash:""},typeof r=="string"?Hr(r):r,{state:n,key:r&&r.key||i||Yp()})}function _i(c){let{pathname:r="/",search:n="",hash:i=""}=c;return n&&n!=="?"&&(r+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(r+=i.charAt(0)==="#"?i:"#"+i),r}function Hr(c){let r={};if(c){let n=c.indexOf("#");n>=0&&(r.hash=c.substr(n),c=c.substr(0,n));let i=c.indexOf("?");i>=0&&(r.search=c.substr(i),c=c.substr(0,i)),c&&(r.pathname=c)}return r}function Vp(c,r,n,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:u=!1}=i,m=o.history,f=oa.Pop,g=null,x=y();x==null&&(x=0,m.replaceState(Wn({},m.state,{idx:x}),""));function y(){return(m.state||{idx:null}).idx}function v(){f=oa.Pop;let C=y(),q=C==null?null:C-x;x=C,g&&g({action:f,location:D.location,delta:q})}function w(C,q){f=oa.Push;let K=od(D.location,C,q);x=y()+1;let R=qf(K,x),E=D.createHref(K);try{m.pushState(R,"",E)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;o.location.assign(E)}u&&g&&g({action:f,location:D.location,delta:1})}function j(C,q){f=oa.Replace;let K=od(D.location,C,q);x=y();let R=qf(K,x),E=D.createHref(K);m.replaceState(R,"",E),u&&g&&g({action:f,location:D.location,delta:0})}function S(C){let q=o.location.origin!=="null"?o.location.origin:o.location.href,K=typeof C=="string"?C:_i(C);return K=K.replace(/ $/,"%20"),et(q,"No window.location.(origin|href) available to create URL for href: "+K),new URL(K,q)}let D={get action(){return f},get location(){return c(o,m)},listen(C){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Lf,v),g=C,()=>{o.removeEventListener(Lf,v),g=null}},createHref(C){return r(o,C)},createURL:S,encodeLocation(C){let q=S(C);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:w,replace:j,go(C){return m.go(C)}};return D}var Bf;(function(c){c.data="data",c.deferred="deferred",c.redirect="redirect",c.error="error"})(Bf||(Bf={}));function Qp(c,r,n){return n===void 0&&(n="/"),Xp(c,r,n)}function Xp(c,r,n,i){let o=typeof r=="string"?Hr(r):r,u=Ed(o.pathname||"/",n);if(u==null)return null;let m=D0(c);Kp(m);let f=null;for(let g=0;f==null&&g<m.length;++g){let x=iy(u);f=ry(m[g],x)}return f}function D0(c,r,n,i){r===void 0&&(r=[]),n===void 0&&(n=[]),i===void 0&&(i="");let o=(u,m,f)=>{let g={relativePath:f===void 0?u.path||"":f,caseSensitive:u.caseSensitive===!0,childrenIndex:m,route:u};g.relativePath.startsWith("/")&&(et(g.relativePath.startsWith(i),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(i.length));let x=ca([i,g.relativePath]),y=n.concat(g);u.children&&u.children.length>0&&(et(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+x+'".')),D0(u.children,r,y,x)),!(u.path==null&&!u.index)&&r.push({path:x,score:sy(x,u.index),routesMeta:y})};return c.forEach((u,m)=>{var f;if(u.path===""||!((f=u.path)!=null&&f.includes("?")))o(u,m);else for(let g of U0(u.path))o(u,m,g)}),r}function U0(c){let r=c.split("/");if(r.length===0)return[];let[n,...i]=r,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return o?[u,""]:[u];let m=U0(i.join("/")),f=[];return f.push(...m.map(g=>g===""?u:[u,g].join("/"))),o&&f.push(...m),f.map(g=>c.startsWith("/")&&g===""?"/":g)}function Kp(c){c.sort((r,n)=>r.score!==n.score?n.score-r.score:ay(r.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const Zp=/^:[\w-]+$/,Jp=3,Fp=2,Wp=1,ey=10,ty=-2,$f=c=>c==="*";function sy(c,r){let n=c.split("/"),i=n.length;return n.some($f)&&(i+=ty),r&&(i+=Fp),n.filter(o=>!$f(o)).reduce((o,u)=>o+(Zp.test(u)?Jp:u===""?Wp:ey),i)}function ay(c,r){return c.length===r.length&&c.slice(0,-1).every((i,o)=>i===r[o])?c[c.length-1]-r[r.length-1]:0}function ry(c,r,n){let{routesMeta:i}=c,o={},u="/",m=[];for(let f=0;f<i.length;++f){let g=i[f],x=f===i.length-1,y=u==="/"?r:r.slice(u.length)||"/",v=ny({path:g.relativePath,caseSensitive:g.caseSensitive,end:x},y),w=g.route;if(!v)return null;Object.assign(o,v.params),m.push({params:o,pathname:ca([u,v.pathname]),pathnameBase:uy(ca([u,v.pathnameBase])),route:w}),v.pathnameBase!=="/"&&(u=ca([u,v.pathnameBase]))}return m}function ny(c,r){typeof c=="string"&&(c={path:c,caseSensitive:!1,end:!0});let[n,i]=ly(c.path,c.caseSensitive,c.end),o=r.match(n);if(!o)return null;let u=o[0],m=u.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:i.reduce((x,y,v)=>{let{paramName:w,isOptional:j}=y;if(w==="*"){let D=f[v]||"";m=u.slice(0,u.length-D.length).replace(/(.)\/+$/,"$1")}const S=f[v];return j&&!S?x[w]=void 0:x[w]=(S||"").replace(/%2F/g,"/"),x},{}),pathname:u,pathnameBase:m,pattern:c}}function ly(c,r,n){r===void 0&&(r=!1),n===void 0&&(n=!0),A0(c==="*"||!c.endsWith("*")||c.endsWith("/*"),'Route path "'+c+'" will be treated as if it were '+('"'+c.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+c.replace(/\*$/,"/*")+'".'));let i=[],o="^"+c.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,f,g)=>(i.push({paramName:f,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return c.endsWith("*")?(i.push({paramName:"*"}),o+=c==="*"||c==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":c!==""&&c!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,r?void 0:"i"),i]}function iy(c){try{return c.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return A0(!1,'The URL path "'+c+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),c}}function Ed(c,r){if(r==="/")return c;if(!c.toLowerCase().startsWith(r.toLowerCase()))return null;let n=r.endsWith("/")?r.length-1:r.length,i=c.charAt(n);return i&&i!=="/"?null:c.slice(n)||"/"}function oy(c,r){r===void 0&&(r="/");let{pathname:n,search:i="",hash:o=""}=typeof c=="string"?Hr(c):c;return{pathname:n?n.startsWith("/")?n:cy(n,r):r,search:hy(i),hash:my(o)}}function cy(c,r){let n=r.replace(/\/+$/,"").split("/");return c.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Jc(c,r,n,i){return"Cannot include a '"+c+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dy(c){return c.filter((r,n)=>n===0||r.route.path&&r.route.path.length>0)}function kd(c,r){let n=dy(c);return r?n.map((i,o)=>o===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Td(c,r,n,i){i===void 0&&(i=!1);let o;typeof c=="string"?o=Hr(c):(o=Wn({},c),et(!o.pathname||!o.pathname.includes("?"),Jc("?","pathname","search",o)),et(!o.pathname||!o.pathname.includes("#"),Jc("#","pathname","hash",o)),et(!o.search||!o.search.includes("#"),Jc("#","search","hash",o)));let u=c===""||o.pathname==="",m=u?"/":o.pathname,f;if(m==null)f=n;else{let v=r.length-1;if(!i&&m.startsWith("..")){let w=m.split("/");for(;w[0]==="..";)w.shift(),v-=1;o.pathname=w.join("/")}f=v>=0?r[v]:"/"}let g=oy(o,f),x=m&&m!=="/"&&m.endsWith("/"),y=(u||m===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(x||y)&&(g.pathname+="/"),g}const ca=c=>c.join("/").replace(/\/\/+/g,"/"),uy=c=>c.replace(/\/+$/,"").replace(/^\/*/,"/"),hy=c=>!c||c==="?"?"":c.startsWith("?")?c:"?"+c,my=c=>!c||c==="#"?"":c.startsWith("#")?c:"#"+c;function fy(c){return c!=null&&typeof c.status=="number"&&typeof c.statusText=="string"&&typeof c.internal=="boolean"&&"data"in c}const M0=["post","put","patch","delete"];new Set(M0);const gy=["get",...M0];new Set(gy);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function el(){return el=Object.assign?Object.assign.bind():function(c){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(c[i]=n[i])}return c},el.apply(this,arguments)}const Cd=_.createContext(null),xy=_.createContext(null),da=_.createContext(null),Ci=_.createContext(null),ls=_.createContext({outlet:null,matches:[],isDataRoute:!1}),R0=_.createContext(null);function py(c,r){let{relative:n}=r===void 0?{}:r;Ir()||et(!1);let{basename:i,navigator:o}=_.useContext(da),{hash:u,pathname:m,search:f}=L0(c,{relative:n}),g=m;return i!=="/"&&(g=m==="/"?i:ca([i,m])),o.createHref({pathname:g,search:f,hash:u})}function Ir(){return _.useContext(Ci)!=null}function is(){return Ir()||et(!1),_.useContext(Ci).location}function z0(c){_.useContext(da).static||_.useLayoutEffect(c)}function Ft(){let{isDataRoute:c}=_.useContext(ls);return c?Dy():yy()}function yy(){Ir()||et(!1);let c=_.useContext(Cd),{basename:r,future:n,navigator:i}=_.useContext(da),{matches:o}=_.useContext(ls),{pathname:u}=is(),m=JSON.stringify(kd(o,n.v7_relativeSplatPath)),f=_.useRef(!1);return z0(()=>{f.current=!0}),_.useCallback(function(x,y){if(y===void 0&&(y={}),!f.current)return;if(typeof x=="number"){i.go(x);return}let v=Td(x,JSON.parse(m),u,y.relative==="path");c==null&&r!=="/"&&(v.pathname=v.pathname==="/"?r:ca([r,v.pathname])),(y.replace?i.replace:i.push)(v,y.state,y)},[r,i,m,u,c])}const vy=_.createContext(null);function by(c){let r=_.useContext(ls).outlet;return r&&_.createElement(vy.Provider,{value:c},r)}function os(){let{matches:c}=_.useContext(ls),r=c[c.length-1];return r?r.params:{}}function L0(c,r){let{relative:n}=r===void 0?{}:r,{future:i}=_.useContext(da),{matches:o}=_.useContext(ls),{pathname:u}=is(),m=JSON.stringify(kd(o,i.v7_relativeSplatPath));return _.useMemo(()=>Td(c,JSON.parse(m),u,n==="path"),[c,m,u,n])}function jy(c,r){return wy(c,r)}function wy(c,r,n,i){Ir()||et(!1);let{navigator:o}=_.useContext(da),{matches:u}=_.useContext(ls),m=u[u.length-1],f=m?m.params:{};m&&m.pathname;let g=m?m.pathnameBase:"/";m&&m.route;let x=is(),y;if(r){var v;let C=typeof r=="string"?Hr(r):r;g==="/"||(v=C.pathname)!=null&&v.startsWith(g)||et(!1),y=C}else y=x;let w=y.pathname||"/",j=w;if(g!=="/"){let C=g.replace(/^\//,"").split("/");j="/"+w.replace(/^\//,"").split("/").slice(C.length).join("/")}let S=Qp(c,{pathname:j}),D=ky(S&&S.map(C=>Object.assign({},C,{params:Object.assign({},f,C.params),pathname:ca([g,o.encodeLocation?o.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?g:ca([g,o.encodeLocation?o.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),u,n,i);return r&&D?_.createElement(Ci.Provider,{value:{location:el({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:oa.Pop}},D):D}function Ny(){let c=Ay(),r=fy(c)?c.status+" "+c.statusText:c instanceof Error?c.message:JSON.stringify(c),n=c instanceof Error?c.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},r),n?_.createElement("pre",{style:o},n):null,null)}const Sy=_.createElement(Ny,null);class _y extends _.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,n){return n.location!==r.location||n.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:n.error,location:n.location,revalidation:r.revalidation||n.revalidation}}componentDidCatch(r,n){console.error("React Router caught the following error during render",r,n)}render(){return this.state.error!==void 0?_.createElement(ls.Provider,{value:this.props.routeContext},_.createElement(R0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ey(c){let{routeContext:r,match:n,children:i}=c,o=_.useContext(Cd);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(ls.Provider,{value:r},i)}function ky(c,r,n,i){var o;if(r===void 0&&(r=[]),n===void 0&&(n=null),i===void 0&&(i=null),c==null){var u;if(!n)return null;if(n.errors)c=n.matches;else if((u=i)!=null&&u.v7_partialHydration&&r.length===0&&!n.initialized&&n.matches.length>0)c=n.matches;else return null}let m=c,f=(o=n)==null?void 0:o.errors;if(f!=null){let y=m.findIndex(v=>v.route.id&&f?.[v.route.id]!==void 0);y>=0||et(!1),m=m.slice(0,Math.min(m.length,y+1))}let g=!1,x=-1;if(n&&i&&i.v7_partialHydration)for(let y=0;y<m.length;y++){let v=m[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(x=y),v.route.id){let{loaderData:w,errors:j}=n,S=v.route.loader&&w[v.route.id]===void 0&&(!j||j[v.route.id]===void 0);if(v.route.lazy||S){g=!0,x>=0?m=m.slice(0,x+1):m=[m[0]];break}}}return m.reduceRight((y,v,w)=>{let j,S=!1,D=null,C=null;n&&(j=f&&v.route.id?f[v.route.id]:void 0,D=v.route.errorElement||Sy,g&&(x<0&&w===0?(Uy("route-fallback"),S=!0,C=null):x===w&&(S=!0,C=v.route.hydrateFallbackElement||null)));let q=r.concat(m.slice(0,w+1)),K=()=>{let R;return j?R=D:S?R=C:v.route.Component?R=_.createElement(v.route.Component,null):v.route.element?R=v.route.element:R=y,_.createElement(Ey,{match:v,routeContext:{outlet:y,matches:q,isDataRoute:n!=null},children:R})};return n&&(v.route.ErrorBoundary||v.route.errorElement||w===0)?_.createElement(_y,{location:n.location,revalidation:n.revalidation,component:D,error:j,children:K(),routeContext:{outlet:null,matches:q,isDataRoute:!0}}):K()},null)}var q0=function(c){return c.UseBlocker="useBlocker",c.UseRevalidator="useRevalidator",c.UseNavigateStable="useNavigate",c}(q0||{}),B0=function(c){return c.UseBlocker="useBlocker",c.UseLoaderData="useLoaderData",c.UseActionData="useActionData",c.UseRouteError="useRouteError",c.UseNavigation="useNavigation",c.UseRouteLoaderData="useRouteLoaderData",c.UseMatches="useMatches",c.UseRevalidator="useRevalidator",c.UseNavigateStable="useNavigate",c.UseRouteId="useRouteId",c}(B0||{});function Ty(c){let r=_.useContext(Cd);return r||et(!1),r}function Cy(c){let r=_.useContext(xy);return r||et(!1),r}function Oy(c){let r=_.useContext(ls);return r||et(!1),r}function $0(c){let r=Oy(),n=r.matches[r.matches.length-1];return n.route.id||et(!1),n.route.id}function Ay(){var c;let r=_.useContext(R0),n=Cy(),i=$0();return r!==void 0?r:(c=n.errors)==null?void 0:c[i]}function Dy(){let{router:c}=Ty(q0.UseNavigateStable),r=$0(B0.UseNavigateStable),n=_.useRef(!1);return z0(()=>{n.current=!0}),_.useCallback(function(o,u){u===void 0&&(u={}),n.current&&(typeof o=="number"?c.navigate(o):c.navigate(o,el({fromRouteId:r},u)))},[c,r])}const Pf={};function Uy(c,r,n){Pf[c]||(Pf[c]=!0)}function My(c,r){c?.v7_startTransition,c?.v7_relativeSplatPath}function Fc(c){let{to:r,replace:n,state:i,relative:o}=c;Ir()||et(!1);let{future:u,static:m}=_.useContext(da),{matches:f}=_.useContext(ls),{pathname:g}=is(),x=Ft(),y=Td(r,kd(f,u.v7_relativeSplatPath),g,o==="path"),v=JSON.stringify(y);return _.useEffect(()=>x(JSON.parse(v),{replace:n,state:i,relative:o}),[x,v,o,n,i]),null}function P0(c){return by(c.context)}function Ge(c){et(!1)}function Ry(c){let{basename:r="/",children:n=null,location:i,navigationType:o=oa.Pop,navigator:u,static:m=!1,future:f}=c;Ir()&&et(!1);let g=r.replace(/^\/*/,"/"),x=_.useMemo(()=>({basename:g,navigator:u,static:m,future:el({v7_relativeSplatPath:!1},f)}),[g,f,u,m]);typeof i=="string"&&(i=Hr(i));let{pathname:y="/",search:v="",hash:w="",state:j=null,key:S="default"}=i,D=_.useMemo(()=>{let C=Ed(y,g);return C==null?null:{location:{pathname:C,search:v,hash:w,state:j,key:S},navigationType:o}},[g,y,v,w,j,S,o]);return D==null?null:_.createElement(da.Provider,{value:x},_.createElement(Ci.Provider,{children:n,value:D}))}function zy(c){let{children:r,location:n}=c;return jy(cd(r),n)}new Promise(()=>{});function cd(c,r){r===void 0&&(r=[]);let n=[];return _.Children.forEach(c,(i,o)=>{if(!_.isValidElement(i))return;let u=[...r,o];if(i.type===_.Fragment){n.push.apply(n,cd(i.props.children,u));return}i.type!==Ge&&et(!1),!i.props.index||!i.props.children||et(!1);let m={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(m.children=cd(i.props.children,u)),n.push(m)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dd(){return dd=Object.assign?Object.assign.bind():function(c){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(c[i]=n[i])}return c},dd.apply(this,arguments)}function Ly(c,r){if(c==null)return{};var n={},i=Object.keys(c),o,u;for(u=0;u<i.length;u++)o=i[u],!(r.indexOf(o)>=0)&&(n[o]=c[o]);return n}function qy(c){return!!(c.metaKey||c.altKey||c.ctrlKey||c.shiftKey)}function By(c,r){return c.button===0&&(!r||r==="_self")&&!qy(c)}function ud(c){return c===void 0&&(c=""),new URLSearchParams(typeof c=="string"||Array.isArray(c)||c instanceof URLSearchParams?c:Object.keys(c).reduce((r,n)=>{let i=c[n];return r.concat(Array.isArray(i)?i.map(o=>[n,o]):[[n,i]])},[]))}function $y(c,r){let n=ud(c);return r&&r.forEach((i,o)=>{n.has(o)||r.getAll(o).forEach(u=>{n.append(o,u)})}),n}const Py=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Hy="6";try{window.__reactRouterVersion=Hy}catch{}const Iy="startTransition",Hf=zp[Iy];function Gy(c){let{basename:r,children:n,future:i,window:o}=c,u=_.useRef();u.current==null&&(u.current=Gp({window:o,v5Compat:!0}));let m=u.current,[f,g]=_.useState({action:m.action,location:m.location}),{v7_startTransition:x}=i||{},y=_.useCallback(v=>{x&&Hf?Hf(()=>g(v)):g(v)},[g,x]);return _.useLayoutEffect(()=>m.listen(y),[m,y]),_.useEffect(()=>My(i),[i]),_.createElement(Ry,{basename:r,children:n,location:f.location,navigationType:f.action,navigator:m,future:i})}const Yy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Vy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,we=_.forwardRef(function(r,n){let{onClick:i,relative:o,reloadDocument:u,replace:m,state:f,target:g,to:x,preventScrollReset:y,viewTransition:v}=r,w=Ly(r,Py),{basename:j}=_.useContext(da),S,D=!1;if(typeof x=="string"&&Vy.test(x)&&(S=x,Yy))try{let R=new URL(window.location.href),E=x.startsWith("//")?new URL(R.protocol+x):new URL(x),A=Ed(E.pathname,j);E.origin===R.origin&&A!=null?x=A+E.search+E.hash:D=!0}catch{}let C=py(x,{relative:o}),q=Qy(x,{replace:m,state:f,target:g,preventScrollReset:y,relative:o,viewTransition:v});function K(R){i&&i(R),R.defaultPrevented||q(R)}return _.createElement("a",dd({},w,{href:S||C,onClick:D||u?i:K,ref:n,target:g}))});var If;(function(c){c.UseScrollRestoration="useScrollRestoration",c.UseSubmit="useSubmit",c.UseSubmitFetcher="useSubmitFetcher",c.UseFetcher="useFetcher",c.useViewTransitionState="useViewTransitionState"})(If||(If={}));var Gf;(function(c){c.UseFetcher="useFetcher",c.UseFetchers="useFetchers",c.UseScrollRestoration="useScrollRestoration"})(Gf||(Gf={}));function Qy(c,r){let{target:n,replace:i,state:o,preventScrollReset:u,relative:m,viewTransition:f}=r===void 0?{}:r,g=Ft(),x=is(),y=L0(c,{relative:m});return _.useCallback(v=>{if(By(v,n)){v.preventDefault();let w=i!==void 0?i:_i(x)===_i(y);g(c,{replace:w,state:o,preventScrollReset:u,relative:m,viewTransition:f})}},[x,g,y,i,o,n,c,u,m,f])}function Xy(c){let r=_.useRef(ud(c)),n=_.useRef(!1),i=is(),o=_.useMemo(()=>$y(i.search,n.current?null:r.current),[i.search]),u=Ft(),m=_.useCallback((f,g)=>{const x=ud(typeof f=="function"?f(o):f);n.current=!0,u("?"+x,g)},[u,o]);return[o,m]}function Ky(){return s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:`
          relative w-screen h-screen 
          bg-[url('/cocktails.webp')] bg-cover bg-center bg-no-repeat
        `,children:[s.jsxs("header",{className:`
            absolute top-0 left-0 w-full h-16 sm:h-20
            flex items-center justify-between
            px-4 sm:px-6
            z-10
          `,children:[s.jsxs("h1",{className:"text-lg sm:text-2xl md:text-3xl lg:text-4xl font-extrabold tracking-tight text-white flex-1 mr-4",children:[s.jsx("span",{className:"block sm:hidden",children:"Cocktails"}),s.jsx("span",{className:"hidden sm:block",children:"Cocktails and Alcohol Ordering"})]}),s.jsx(we,{to:"/sign-in",className:`
              rounded-full border border-white bg-white
              px-4 py-2 sm:px-6 sm:py-2 text-sm sm:text-lg font-medium
              text-black hover:bg-white hover:text-black transition
              whitespace-nowrap flex-shrink-0
              min-h-[44px] flex items-center justify-center
            `,children:"SignIn"})]}),s.jsx("div",{className:`
            absolute inset-0
            flex items-end
            pb-14 px-6
            pointer-events-none
          `})]}),s.jsxs("section",{className:"bg-white py-16 sm:py-24 md:py-32 lg:py-80 px-4 sm:px-6 space-y-8 sm:space-y-12 md:space-y-16",children:[s.jsx("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-slate-800 text-center",children:"Premium Cocktail Delivery Service"}),s.jsx("p",{className:"text-sm sm:text-base text-slate-700 text-center max-w-2xl mx-auto leading-relaxed",children:"Order from our curated selection of premium cocktails and alcoholic beverages. Fresh ingredients, expertly crafted, delivered to your door."})]})]})}const Zy="modulepreload",Jy=function(c){return"/"+c},Yf={},Gr=function(r,n,i){let o=Promise.resolve();if(n&&n.length>0){let x=function(y){return Promise.all(y.map(v=>Promise.resolve(v).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};var m=x;document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),g=f?.nonce||f?.getAttribute("nonce");o=x(n.map(y=>{if(y=Jy(y),y in Yf)return;Yf[y]=!0;const v=y.endsWith(".css"),w=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${w}`))return;const j=document.createElement("link");if(j.rel=v?"stylesheet":Zy,v||(j.as="script"),j.crossOrigin="",j.href=y,g&&j.setAttribute("nonce",g),document.head.appendChild(j),v)return new Promise((S,D)=>{j.addEventListener("load",S),j.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(f){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=f,window.dispatchEvent(g),!g.defaultPrevented)throw f}return o.then(f=>{for(const g of f||[])g.status==="rejected"&&u(g.reason);return r().catch(u)})},Fy=c=>{let r;return c?r=c:typeof fetch>"u"?r=(...n)=>Gr(async()=>{const{default:i}=await Promise.resolve().then(()=>Yr);return{default:i}},void 0).then(({default:i})=>i(...n)):r=fetch,(...n)=>r(...n)};class Od extends Error{constructor(r,n="FunctionsError",i){super(r),this.name=n,this.context=i}}class Wy extends Od{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class Vf extends Od{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class Qf extends Od{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var hd;(function(c){c.Any="any",c.ApNortheast1="ap-northeast-1",c.ApNortheast2="ap-northeast-2",c.ApSouth1="ap-south-1",c.ApSoutheast1="ap-southeast-1",c.ApSoutheast2="ap-southeast-2",c.CaCentral1="ca-central-1",c.EuCentral1="eu-central-1",c.EuWest1="eu-west-1",c.EuWest2="eu-west-2",c.EuWest3="eu-west-3",c.SaEast1="sa-east-1",c.UsEast1="us-east-1",c.UsWest1="us-west-1",c.UsWest2="us-west-2"})(hd||(hd={}));var ev=function(c,r,n,i){function o(u){return u instanceof n?u:new n(function(m){m(u)})}return new(n||(n=Promise))(function(u,m){function f(y){try{x(i.next(y))}catch(v){m(v)}}function g(y){try{x(i.throw(y))}catch(v){m(v)}}function x(y){y.done?u(y.value):o(y.value).then(f,g)}x((i=i.apply(c,r||[])).next())})};class tv{constructor(r,{headers:n={},customFetch:i,region:o=hd.Any}={}){this.url=r,this.headers=n,this.region=o,this.fetch=Fy(i)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r,n={}){var i;return ev(this,void 0,void 0,function*(){try{const{headers:o,method:u,body:m}=n;let f={},{region:g}=n;g||(g=this.region);const x=new URL(`${this.url}/${r}`);g&&g!=="any"&&(f["x-region"]=g,x.searchParams.set("forceFunctionRegion",g));let y;m&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",y=m):typeof m=="string"?(f["Content-Type"]="text/plain",y=m):typeof FormData<"u"&&m instanceof FormData?y=m:(f["Content-Type"]="application/json",y=JSON.stringify(m)));const v=yield this.fetch(x.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:y}).catch(D=>{throw new Wy(D)}),w=v.headers.get("x-relay-error");if(w&&w==="true")throw new Vf(v);if(!v.ok)throw new Qf(v);let j=((i=v.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),S;return j==="application/json"?S=yield v.json():j==="application/octet-stream"?S=yield v.blob():j==="text/event-stream"?S=v:j==="multipart/form-data"?S=yield v.formData():S=yield v.text(),{data:S,error:null,response:v}}catch(o){return{data:null,error:o,response:o instanceof Qf||o instanceof Vf?o.context:void 0}}})}}var dt={},Er={},kr={},Tr={},Cr={},Or={},sv=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},$r=sv();const av=$r.fetch,H0=$r.fetch.bind($r),I0=$r.Headers,rv=$r.Request,nv=$r.Response,Yr=Object.freeze(Object.defineProperty({__proto__:null,Headers:I0,Request:rv,Response:nv,default:H0,fetch:av},Symbol.toStringTag,{value:"Module"})),lv=Dp(Yr);var xi={},Xf;function G0(){if(Xf)return xi;Xf=1,Object.defineProperty(xi,"__esModule",{value:!0});class c extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return xi.default=c,xi}var Kf;function Y0(){if(Kf)return Or;Kf=1;var c=Or&&Or.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Or,"__esModule",{value:!0});const r=c(lv),n=c(G0());class i{constructor(u){this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=u.headers,this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=u.shouldThrowOnError,this.signal=u.signal,this.isMaybeSingle=u.isMaybeSingle,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=r.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,m){return this.headers=Object.assign({},this.headers),this.headers[u]=m,this}then(u,m){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const f=this.fetch;let g=f(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async x=>{var y,v,w;let j=null,S=null,D=null,C=x.status,q=x.statusText;if(x.ok){if(this.method!=="HEAD"){const A=await x.text();A===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?S=A:S=JSON.parse(A))}const R=(y=this.headers.Prefer)===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),E=(v=x.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");R&&E&&E.length>1&&(D=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(j={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,D=null,C=406,q="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const R=await x.text();try{j=JSON.parse(R),Array.isArray(j)&&x.status===404&&(S=[],j=null,C=200,q="OK")}catch{x.status===404&&R===""?(C=204,q="No Content"):j={message:R}}if(j&&this.isMaybeSingle&&(!((w=j?.details)===null||w===void 0)&&w.includes("0 rows"))&&(j=null,C=200,q="OK"),j&&this.shouldThrowOnError)throw new n.default(j)}return{error:j,data:S,count:D,status:C,statusText:q}});return this.shouldThrowOnError||(g=g.catch(x=>{var y,v,w;return{error:{message:`${(y=x?.name)!==null&&y!==void 0?y:"FetchError"}: ${x?.message}`,details:`${(v=x?.stack)!==null&&v!==void 0?v:""}`,hint:"",code:`${(w=x?.code)!==null&&w!==void 0?w:""}`},data:null,count:null,status:0,statusText:""}})),g.then(u,m)}returns(){return this}overrideTypes(){return this}}return Or.default=i,Or}var Zf;function V0(){if(Zf)return Cr;Zf=1;var c=Cr&&Cr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Cr,"__esModule",{value:!0});const r=c(Y0());class n extends r.default{select(o){let u=!1;const m=(o??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join("");return this.url.searchParams.set("select",m),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(o,{ascending:u=!0,nullsFirst:m,foreignTable:f,referencedTable:g=f}={}){const x=g?`${g}.order`:"order",y=this.url.searchParams.get(x);return this.url.searchParams.set(x,`${y?`${y},`:""}${o}.${u?"asc":"desc"}${m===void 0?"":m?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:u,referencedTable:m=u}={}){const f=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(f,`${o}`),this}range(o,u,{foreignTable:m,referencedTable:f=m}={}){const g=typeof f>"u"?"offset":`${f}.offset`,x=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(g,`${o}`),this.url.searchParams.set(x,`${u-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:o=!1,verbose:u=!1,settings:m=!1,buffers:f=!1,wal:g=!1,format:x="text"}={}){var y;const v=[o?"analyze":null,u?"verbose":null,m?"settings":null,f?"buffers":null,g?"wal":null].filter(Boolean).join("|"),w=(y=this.headers.Accept)!==null&&y!==void 0?y:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${x}; for="${w}"; options=${v};`,x==="json"?this:this}rollback(){var o;return((o=this.headers.Prefer)!==null&&o!==void 0?o:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Cr.default=n,Cr}var Jf;function Ad(){if(Jf)return Tr;Jf=1;var c=Tr&&Tr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Tr,"__esModule",{value:!0});const r=c(V0());class n extends r.default{eq(o,u){return this.url.searchParams.append(o,`eq.${u}`),this}neq(o,u){return this.url.searchParams.append(o,`neq.${u}`),this}gt(o,u){return this.url.searchParams.append(o,`gt.${u}`),this}gte(o,u){return this.url.searchParams.append(o,`gte.${u}`),this}lt(o,u){return this.url.searchParams.append(o,`lt.${u}`),this}lte(o,u){return this.url.searchParams.append(o,`lte.${u}`),this}like(o,u){return this.url.searchParams.append(o,`like.${u}`),this}likeAllOf(o,u){return this.url.searchParams.append(o,`like(all).{${u.join(",")}}`),this}likeAnyOf(o,u){return this.url.searchParams.append(o,`like(any).{${u.join(",")}}`),this}ilike(o,u){return this.url.searchParams.append(o,`ilike.${u}`),this}ilikeAllOf(o,u){return this.url.searchParams.append(o,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(o,u){return this.url.searchParams.append(o,`ilike(any).{${u.join(",")}}`),this}is(o,u){return this.url.searchParams.append(o,`is.${u}`),this}in(o,u){const m=Array.from(new Set(u)).map(f=>typeof f=="string"&&new RegExp("[,()]").test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(o,`in.(${m})`),this}contains(o,u){return typeof u=="string"?this.url.searchParams.append(o,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(o,`cs.{${u.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(u)}`),this}containedBy(o,u){return typeof u=="string"?this.url.searchParams.append(o,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(o,`cd.{${u.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(u)}`),this}rangeGt(o,u){return this.url.searchParams.append(o,`sr.${u}`),this}rangeGte(o,u){return this.url.searchParams.append(o,`nxl.${u}`),this}rangeLt(o,u){return this.url.searchParams.append(o,`sl.${u}`),this}rangeLte(o,u){return this.url.searchParams.append(o,`nxr.${u}`),this}rangeAdjacent(o,u){return this.url.searchParams.append(o,`adj.${u}`),this}overlaps(o,u){return typeof u=="string"?this.url.searchParams.append(o,`ov.${u}`):this.url.searchParams.append(o,`ov.{${u.join(",")}}`),this}textSearch(o,u,{config:m,type:f}={}){let g="";f==="plain"?g="pl":f==="phrase"?g="ph":f==="websearch"&&(g="w");const x=m===void 0?"":`(${m})`;return this.url.searchParams.append(o,`${g}fts${x}.${u}`),this}match(o){return Object.entries(o).forEach(([u,m])=>{this.url.searchParams.append(u,`eq.${m}`)}),this}not(o,u,m){return this.url.searchParams.append(o,`not.${u}.${m}`),this}or(o,{foreignTable:u,referencedTable:m=u}={}){const f=m?`${m}.or`:"or";return this.url.searchParams.append(f,`(${o})`),this}filter(o,u,m){return this.url.searchParams.append(o,`${u}.${m}`),this}}return Tr.default=n,Tr}var Ff;function Q0(){if(Ff)return kr;Ff=1;var c=kr&&kr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(kr,"__esModule",{value:!0});const r=c(Ad());class n{constructor(o,{headers:u={},schema:m,fetch:f}){this.url=o,this.headers=u,this.schema=m,this.fetch=f}select(o,{head:u=!1,count:m}={}){const f=u?"HEAD":"GET";let g=!1;const x=(o??"*").split("").map(y=>/\s/.test(y)&&!g?"":(y==='"'&&(g=!g),y)).join("");return this.url.searchParams.set("select",x),m&&(this.headers.Prefer=`count=${m}`),new r.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(o,{count:u,defaultToNull:m=!0}={}){const f="POST",g=[];if(this.headers.Prefer&&g.push(this.headers.Prefer),u&&g.push(`count=${u}`),m||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(o)){const x=o.reduce((y,v)=>y.concat(Object.keys(v)),[]);if(x.length>0){const y=[...new Set(x)].map(v=>`"${v}"`);this.url.searchParams.set("columns",y.join(","))}}return new r.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}upsert(o,{onConflict:u,ignoreDuplicates:m=!1,count:f,defaultToNull:g=!0}={}){const x="POST",y=[`resolution=${m?"ignore":"merge"}-duplicates`];if(u!==void 0&&this.url.searchParams.set("on_conflict",u),this.headers.Prefer&&y.push(this.headers.Prefer),f&&y.push(`count=${f}`),g||y.push("missing=default"),this.headers.Prefer=y.join(","),Array.isArray(o)){const v=o.reduce((w,j)=>w.concat(Object.keys(j)),[]);if(v.length>0){const w=[...new Set(v)].map(j=>`"${j}"`);this.url.searchParams.set("columns",w.join(","))}}return new r.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}update(o,{count:u}={}){const m="PATCH",f=[];return this.headers.Prefer&&f.push(this.headers.Prefer),u&&f.push(`count=${u}`),this.headers.Prefer=f.join(","),new r.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}delete({count:o}={}){const u="DELETE",m=[];return o&&m.push(`count=${o}`),this.headers.Prefer&&m.unshift(this.headers.Prefer),this.headers.Prefer=m.join(","),new r.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return kr.default=n,kr}var Vn={},Qn={},Wf;function iv(){return Wf||(Wf=1,Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.version=void 0,Qn.version="0.0.0-automated"),Qn}var e0;function ov(){if(e0)return Vn;e0=1,Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.DEFAULT_HEADERS=void 0;const c=iv();return Vn.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${c.version}`},Vn}var t0;function cv(){if(t0)return Er;t0=1;var c=Er&&Er.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Er,"__esModule",{value:!0});const r=c(Q0()),n=c(Ad()),i=ov();class o{constructor(m,{headers:f={},schema:g,fetch:x}={}){this.url=m,this.headers=Object.assign(Object.assign({},i.DEFAULT_HEADERS),f),this.schemaName=g,this.fetch=x}from(m){const f=new URL(`${this.url}/${m}`);return new r.default(f,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(m){return new o(this.url,{headers:this.headers,schema:m,fetch:this.fetch})}rpc(m,f={},{head:g=!1,get:x=!1,count:y}={}){let v;const w=new URL(`${this.url}/rpc/${m}`);let j;g||x?(v=g?"HEAD":"GET",Object.entries(f).filter(([D,C])=>C!==void 0).map(([D,C])=>[D,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([D,C])=>{w.searchParams.append(D,C)})):(v="POST",j=f);const S=Object.assign({},this.headers);return y&&(S.Prefer=`count=${y}`),new n.default({method:v,url:w,headers:S,schema:this.schemaName,body:j,fetch:this.fetch,allowEmpty:!1})}}return Er.default=o,Er}var s0;function dv(){if(s0)return dt;s0=1;var c=dt&&dt.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(dt,"__esModule",{value:!0}),dt.PostgrestError=dt.PostgrestBuilder=dt.PostgrestTransformBuilder=dt.PostgrestFilterBuilder=dt.PostgrestQueryBuilder=dt.PostgrestClient=void 0;const r=c(cv());dt.PostgrestClient=r.default;const n=c(Q0());dt.PostgrestQueryBuilder=n.default;const i=c(Ad());dt.PostgrestFilterBuilder=i.default;const o=c(V0());dt.PostgrestTransformBuilder=o.default;const u=c(Y0());dt.PostgrestBuilder=u.default;const m=c(G0());return dt.PostgrestError=m.default,dt.default={PostgrestClient:r.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:u.default,PostgrestError:m.default},dt}var uv=dv();const hv=Sd(uv),{PostgrestClient:mv,PostgrestQueryBuilder:Lw,PostgrestFilterBuilder:qw,PostgrestTransformBuilder:Bw,PostgrestBuilder:$w,PostgrestError:Pw}=hv;function fv(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const gv=fv(),xv="2.11.15",pv=`realtime-js/${xv}`,yv="1.0.0",X0=1e4,vv=1e3;var Jn;(function(c){c[c.connecting=0]="connecting",c[c.open=1]="open",c[c.closing=2]="closing",c[c.closed=3]="closed"})(Jn||(Jn={}));var vt;(function(c){c.closed="closed",c.errored="errored",c.joined="joined",c.joining="joining",c.leaving="leaving"})(vt||(vt={}));var Jt;(function(c){c.close="phx_close",c.error="phx_error",c.join="phx_join",c.reply="phx_reply",c.leave="phx_leave",c.access_token="access_token"})(Jt||(Jt={}));var md;(function(c){c.websocket="websocket"})(md||(md={}));var za;(function(c){c.Connecting="connecting",c.Open="open",c.Closing="closing",c.Closed="closed"})(za||(za={}));class bv{constructor(){this.HEADER_LENGTH=1}decode(r,n){return r.constructor===ArrayBuffer?n(this._binaryDecode(r)):n(typeof r=="string"?JSON.parse(r):{})}_binaryDecode(r){const n=new DataView(r),i=new TextDecoder;return this._decodeBroadcast(r,n,i)}_decodeBroadcast(r,n,i){const o=n.getUint8(1),u=n.getUint8(2);let m=this.HEADER_LENGTH+2;const f=i.decode(r.slice(m,m+o));m=m+o;const g=i.decode(r.slice(m,m+u));m=m+u;const x=JSON.parse(i.decode(r.slice(m,r.byteLength)));return{ref:null,topic:f,event:g,payload:x}}}class K0{constructor(r,n){this.callback=r,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ye;(function(c){c.abstime="abstime",c.bool="bool",c.date="date",c.daterange="daterange",c.float4="float4",c.float8="float8",c.int2="int2",c.int4="int4",c.int4range="int4range",c.int8="int8",c.int8range="int8range",c.json="json",c.jsonb="jsonb",c.money="money",c.numeric="numeric",c.oid="oid",c.reltime="reltime",c.text="text",c.time="time",c.timestamp="timestamp",c.timestamptz="timestamptz",c.timetz="timetz",c.tsrange="tsrange",c.tstzrange="tstzrange"})(Ye||(Ye={}));const a0=(c,r,n={})=>{var i;const o=(i=n.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(r).reduce((u,m)=>(u[m]=jv(m,c,r,o),u),{})},jv=(c,r,n,i)=>{const o=r.find(f=>f.name===c),u=o?.type,m=n[c];return u&&!i.includes(u)?Z0(u,m):fd(m)},Z0=(c,r)=>{if(c.charAt(0)==="_"){const n=c.slice(1,c.length);return _v(r,n)}switch(c){case Ye.bool:return wv(r);case Ye.float4:case Ye.float8:case Ye.int2:case Ye.int4:case Ye.int8:case Ye.numeric:case Ye.oid:return Nv(r);case Ye.json:case Ye.jsonb:return Sv(r);case Ye.timestamp:return Ev(r);case Ye.abstime:case Ye.date:case Ye.daterange:case Ye.int4range:case Ye.int8range:case Ye.money:case Ye.reltime:case Ye.text:case Ye.time:case Ye.timestamptz:case Ye.timetz:case Ye.tsrange:case Ye.tstzrange:return fd(r);default:return fd(r)}},fd=c=>c,wv=c=>{switch(c){case"t":return!0;case"f":return!1;default:return c}},Nv=c=>{if(typeof c=="string"){const r=parseFloat(c);if(!Number.isNaN(r))return r}return c},Sv=c=>{if(typeof c=="string")try{return JSON.parse(c)}catch(r){return console.log(`JSON parse error: ${r}`),c}return c},_v=(c,r)=>{if(typeof c!="string")return c;const n=c.length-1,i=c[n];if(c[0]==="{"&&i==="}"){let u;const m=c.slice(1,n);try{u=JSON.parse("["+m+"]")}catch{u=m?m.split(","):[]}return u.map(f=>Z0(r,f))}return c},Ev=c=>typeof c=="string"?c.replace(" ","T"):c,J0=c=>{let r=c;return r=r.replace(/^ws/i,"http"),r=r.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),r.replace(/\/+$/,"")};class Wc{constructor(r,n,i={},o=X0){this.channel=r,this.event=n,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,n){var i;return this._hasReceived(r)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:r,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:n}){this.recHooks.filter(i=>i.status===r).forEach(i=>i.callback(n))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var r0;(function(c){c.SYNC="sync",c.JOIN="join",c.LEAVE="leave"})(r0||(r0={}));class Fn{constructor(r,n){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:u,onLeave:m,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Fn.syncState(this.state,o,u,m),this.pendingDiffs.forEach(g=>{this.state=Fn.syncDiff(this.state,g,u,m)}),this.pendingDiffs=[],f()}),this.channel._on(i.diff,{},o=>{const{onJoin:u,onLeave:m,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Fn.syncDiff(this.state,o,u,m),f())}),this.onJoin((o,u,m)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:u,newPresences:m})}),this.onLeave((o,u,m)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:u,leftPresences:m})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,n,i,o){const u=this.cloneDeep(r),m=this.transformState(n),f={},g={};return this.map(u,(x,y)=>{m[x]||(g[x]=y)}),this.map(m,(x,y)=>{const v=u[x];if(v){const w=y.map(C=>C.presence_ref),j=v.map(C=>C.presence_ref),S=y.filter(C=>j.indexOf(C.presence_ref)<0),D=v.filter(C=>w.indexOf(C.presence_ref)<0);S.length>0&&(f[x]=S),D.length>0&&(g[x]=D)}else f[x]=y}),this.syncDiff(u,{joins:f,leaves:g},i,o)}static syncDiff(r,n,i,o){const{joins:u,leaves:m}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(u,(f,g)=>{var x;const y=(x=r[f])!==null&&x!==void 0?x:[];if(r[f]=this.cloneDeep(g),y.length>0){const v=r[f].map(j=>j.presence_ref),w=y.filter(j=>v.indexOf(j.presence_ref)<0);r[f].unshift(...w)}i(f,y,g)}),this.map(m,(f,g)=>{let x=r[f];if(!x)return;const y=g.map(v=>v.presence_ref);x=x.filter(v=>y.indexOf(v.presence_ref)<0),r[f]=x,o(f,x,g),x.length===0&&delete r[f]}),r}static map(r,n){return Object.getOwnPropertyNames(r).map(i=>n(i,r[i]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((n,i)=>{const o=r[i];return"metas"in o?n[i]=o.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):n[i]=o,n},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var n0;(function(c){c.ALL="*",c.INSERT="INSERT",c.UPDATE="UPDATE",c.DELETE="DELETE"})(n0||(n0={}));var l0;(function(c){c.BROADCAST="broadcast",c.PRESENCE="presence",c.POSTGRES_CHANGES="postgres_changes",c.SYSTEM="system"})(l0||(l0={}));var Ts;(function(c){c.SUBSCRIBED="SUBSCRIBED",c.TIMED_OUT="TIMED_OUT",c.CLOSED="CLOSED",c.CHANNEL_ERROR="CHANNEL_ERROR"})(Ts||(Ts={}));class Dd{constructor(r,n={config:{}},i){this.topic=r,this.params=n,this.socket=i,this.bindings={},this.state=vt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Wc(this,Jt.join,this.params,this.timeout),this.rejoinTimer=new K0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=vt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=vt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Jt.reply,{},(o,u)=>{this._trigger(this._replyEventName(u),o)}),this.presence=new Fn(this),this.broadcastEndpointURL=J0(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(r,n=this.timeout){var i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==vt.closed){const{config:{broadcast:u,presence:m,private:f}}=this.params;this._onError(y=>r?.(Ts.CHANNEL_ERROR,y)),this._onClose(()=>r?.(Ts.CLOSED));const g={},x={broadcast:u,presence:m,postgres_changes:(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(y=>y.filter))!==null&&o!==void 0?o:[],private:f};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:x},g)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:y})=>{var v;if(this.socket.setAuth(),y===void 0){r?.(Ts.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,j=(v=w?.length)!==null&&v!==void 0?v:0,S=[];for(let D=0;D<j;D++){const C=w[D],{filter:{event:q,schema:K,table:R,filter:E}}=C,A=y&&y[D];if(A&&A.event===q&&A.schema===K&&A.table===R&&A.filter===E)S.push(Object.assign(Object.assign({},C),{id:A.id}));else{this.unsubscribe(),this.state=vt.errored,r?.(Ts.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,r&&r(Ts.SUBSCRIBED);return}}).receive("error",y=>{this.state=vt.errored,r?.(Ts.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{r?.(Ts.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,n={}){return await this.send({type:"presence",event:"track",payload:r},n.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,n,i){return this._on(r,n,i)}async send(r,n={}){var i,o;if(!this._canPush()&&r.type==="broadcast"){const{event:u,payload:m}=r,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:m,private:this.private}]})};try{const x=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=x.body)===null||o===void 0?void 0:o.cancel()),x.ok?"ok":"error"}catch(x){return x.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var m,f,g;const x=this._push(r.type,r,n.timeout||this.timeout);r.type==="broadcast"&&!(!((g=(f=(m=this.params)===null||m===void 0?void 0:m.config)===null||f===void 0?void 0:f.broadcast)===null||g===void 0)&&g.ack)&&u("ok"),x.receive("ok",()=>u("ok")),x.receive("error",()=>u("error")),x.receive("timeout",()=>u("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=vt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Jt.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new Wc(this,Jt.leave,{},r),i.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(r,n,i){const o=new AbortController,u=setTimeout(()=>o.abort(),i),m=await this.socket.fetch(r,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(u),m}_push(r,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Wc(this,r,n,i);return this._canPush()?o.send():(o.startTimeout(),this.pushBuffer.push(o)),o}_onMessage(r,n,i){return n}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,n,i){var o,u;const m=r.toLocaleLowerCase(),{close:f,error:g,leave:x,join:y}=Jt;if(i&&[f,g,x,y].indexOf(m)>=0&&i!==this._joinRef())return;let w=this._onMessage(m,n,i);if(n&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(m)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(j=>{var S,D,C;return((S=j.filter)===null||S===void 0?void 0:S.event)==="*"||((C=(D=j.filter)===null||D===void 0?void 0:D.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===m}).map(j=>j.callback(w,i)):(u=this.bindings[m])===null||u===void 0||u.filter(j=>{var S,D,C,q,K,R;if(["broadcast","presence","postgres_changes"].includes(m))if("id"in j){const E=j.id,A=(S=j.filter)===null||S===void 0?void 0:S.event;return E&&((D=n.ids)===null||D===void 0?void 0:D.includes(E))&&(A==="*"||A?.toLocaleLowerCase()===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const E=(K=(q=j?.filter)===null||q===void 0?void 0:q.event)===null||K===void 0?void 0:K.toLocaleLowerCase();return E==="*"||E===((R=n?.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return j.type.toLocaleLowerCase()===m}).map(j=>{if(typeof w=="object"&&"ids"in w){const S=w.data,{schema:D,table:C,commit_timestamp:q,type:K,errors:R}=S;w=Object.assign(Object.assign({},{schema:D,table:C,commit_timestamp:q,eventType:K,new:{},old:{},errors:R}),this._getPayloadRecords(S))}j.callback(w,i)})}_isClosed(){return this.state===vt.closed}_isJoined(){return this.state===vt.joined}_isJoining(){return this.state===vt.joining}_isLeaving(){return this.state===vt.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,n,i){const o=r.toLocaleLowerCase(),u={type:o,filter:n,callback:i};return this.bindings[o]?this.bindings[o].push(u):this.bindings[o]=[u],this}_off(r,n){const i=r.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(o=>{var u;return!(((u=o.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===i&&Dd.isEqual(o.filter,n))}),this}static isEqual(r,n){if(Object.keys(r).length!==Object.keys(n).length)return!1;for(const i in r)if(r[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(Jt.close,{},r)}_onError(r){this._on(Jt.error,{},n=>r(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=vt.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const n={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(n.new=a0(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(n.old=a0(r.columns,r.old_record)),n}}const i0=()=>{},kv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Tv{constructor(r,n){var i;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=X0,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=i0,this.ref=0,this.logger=i0,this.conn=null,this.sendBuffer=[],this.serializer=new bv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=u=>{let m;return u?m=u:typeof fetch>"u"?m=(...f)=>Gr(async()=>{const{default:g}=await Promise.resolve().then(()=>Yr);return{default:g}},void 0).then(({default:g})=>g(...f)):m=fetch,(...f)=>m(...f)},this.endPoint=`${r}/${md.websocket}`,this.httpEndpoint=J0(r),n?.transport?this.transport=n.transport:this.transport=null,n?.params&&(this.params=n.params),n?.timeout&&(this.timeout=n.timeout),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const o=(i=n?.params)===null||i===void 0?void 0:i.apikey;if(o&&(this.accessTokenValue=o,this.apiKey=o),this.reconnectAfterMs=n?.reconnectAfterMs?n.reconnectAfterMs:u=>[1e3,2e3,5e3,1e4][u-1]||1e4,this.encode=n?.encode?n.encode:(u,m)=>m(JSON.stringify(u)),this.decode=n?.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new K0(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n?.fetch),n?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=n?.worker||!1,this.workerUrl=n?.workerUrl}this.accessToken=n?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=gv),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:yv}))}disconnect(r,n){this.conn&&(this.conn.onclose=function(){},r?this.conn.close(r,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(i=>i.teardown()))}getChannels(){return this.channels}async removeChannel(r){const n=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const r=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,n,i){this.logger(r,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Jn.connecting:return za.Connecting;case Jn.open:return za.Open;case Jn.closing:return za.Closing;default:return za.Closed}}isConnected(){return this.connectionState()===za.Open}channel(r,n={config:{}}){const i=`realtime:${r}`,o=this.getChannels().find(u=>u.topic===i);if(o)return o;{const u=new Dd(`realtime:${r}`,n,this);return this.channels.push(u),u}}push(r){const{topic:n,event:i,payload:o,ref:u}=r,m=()=>{this.encode(r,f=>{var g;(g=this.conn)===null||g===void 0||g.send(f)})};this.log("push",`${n} ${i} (${u})`,o),this.isConnected()?m():this.sendBuffer.push(m)}async setAuth(r=null){let n=r||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const o={access_token:n,version:pv};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(Jt.access_token,{access_token:n})}))}async sendHeartbeat(){var r;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(r=this.conn)===null||r===void 0||r.close(vv,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let n=this.channels.find(i=>i.topic===r&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${r}"`),n.unsubscribe())}_remove(r){this.channels=this.channels.filter(n=>n.topic!==r.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r))}_onConnMessage(r){this.decode(r.data,n=>{let{topic:i,event:o,payload:u,ref:m}=n;i==="phoenix"&&o==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),m&&m===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${u.status||""} ${i} ${o} ${m&&"("+m+")"||""}`,u),Array.from(this.channels).filter(f=>f._isMember(i)).forEach(f=>f._trigger(o,u,m)),this.stateChangeCallbacks.message.forEach(f=>f(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(r=>r())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(r){this.log("transport","close",r),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(r))}_onConnError(r){this.log("transport",`${r}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(r))}_triggerChanError(){this.channels.forEach(r=>r._trigger(Jt.error))}_appendParams(r,n){if(Object.keys(n).length===0)return r;const i=r.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${r}${i}${o}`}_workerObjectUrl(r){let n;if(r)n=r;else{const i=new Blob([kv],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}}class Ud extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}}function ut(c){return typeof c=="object"&&c!==null&&"__isStorageError"in c}class Cv extends Ud{constructor(r,n){super(r),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class gd extends Ud{constructor(r,n){super(r),this.name="StorageUnknownError",this.originalError=n}}var Ov=function(c,r,n,i){function o(u){return u instanceof n?u:new n(function(m){m(u)})}return new(n||(n=Promise))(function(u,m){function f(y){try{x(i.next(y))}catch(v){m(v)}}function g(y){try{x(i.throw(y))}catch(v){m(v)}}function x(y){y.done?u(y.value):o(y.value).then(f,g)}x((i=i.apply(c,r||[])).next())})};const F0=c=>{let r;return c?r=c:typeof fetch>"u"?r=(...n)=>Gr(async()=>{const{default:i}=await Promise.resolve().then(()=>Yr);return{default:i}},void 0).then(({default:i})=>i(...n)):r=fetch,(...n)=>r(...n)},Av=()=>Ov(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Gr(()=>Promise.resolve().then(()=>Yr),void 0)).Response:Response}),xd=c=>{if(Array.isArray(c))return c.map(n=>xd(n));if(typeof c=="function"||c!==Object(c))return c;const r={};return Object.entries(c).forEach(([n,i])=>{const o=n.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));r[o]=xd(i)}),r};var Ba=function(c,r,n,i){function o(u){return u instanceof n?u:new n(function(m){m(u)})}return new(n||(n=Promise))(function(u,m){function f(y){try{x(i.next(y))}catch(v){m(v)}}function g(y){try{x(i.throw(y))}catch(v){m(v)}}function x(y){y.done?u(y.value):o(y.value).then(f,g)}x((i=i.apply(c,r||[])).next())})};const ed=c=>c.msg||c.message||c.error_description||c.error||JSON.stringify(c),Dv=(c,r,n)=>Ba(void 0,void 0,void 0,function*(){const i=yield Av();c instanceof i&&!n?.noResolveJson?c.json().then(o=>{r(new Cv(ed(o),c.status||500))}).catch(o=>{r(new gd(ed(o),o))}):r(new gd(ed(c),c))}),Uv=(c,r,n,i)=>{const o={method:c,headers:r?.headers||{}};return c==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json"},r?.headers),i&&(o.body=JSON.stringify(i)),Object.assign(Object.assign({},o),n))};function sl(c,r,n,i,o,u){return Ba(this,void 0,void 0,function*(){return new Promise((m,f)=>{c(n,Uv(r,i,o,u)).then(g=>{if(!g.ok)throw g;return i?.noResolveJson?g:g.json()}).then(g=>m(g)).catch(g=>Dv(g,f,i))})})}function Ei(c,r,n,i){return Ba(this,void 0,void 0,function*(){return sl(c,"GET",r,n,i)})}function la(c,r,n,i,o){return Ba(this,void 0,void 0,function*(){return sl(c,"POST",r,i,o,n)})}function Mv(c,r,n,i,o){return Ba(this,void 0,void 0,function*(){return sl(c,"PUT",r,i,o,n)})}function Rv(c,r,n,i){return Ba(this,void 0,void 0,function*(){return sl(c,"HEAD",r,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function W0(c,r,n,i,o){return Ba(this,void 0,void 0,function*(){return sl(c,"DELETE",r,i,o,n)})}var kt=function(c,r,n,i){function o(u){return u instanceof n?u:new n(function(m){m(u)})}return new(n||(n=Promise))(function(u,m){function f(y){try{x(i.next(y))}catch(v){m(v)}}function g(y){try{x(i.throw(y))}catch(v){m(v)}}function x(y){y.done?u(y.value):o(y.value).then(f,g)}x((i=i.apply(c,r||[])).next())})};const zv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},o0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Lv{constructor(r,n={},i,o){this.url=r,this.headers=n,this.bucketId=i,this.fetch=F0(o)}uploadOrUpdate(r,n,i,o){return kt(this,void 0,void 0,function*(){try{let u;const m=Object.assign(Object.assign({},o0),o);let f=Object.assign(Object.assign({},this.headers),r==="POST"&&{"x-upsert":String(m.upsert)});const g=m.metadata;typeof Blob<"u"&&i instanceof Blob?(u=new FormData,u.append("cacheControl",m.cacheControl),g&&u.append("metadata",this.encodeMetadata(g)),u.append("",i)):typeof FormData<"u"&&i instanceof FormData?(u=i,u.append("cacheControl",m.cacheControl),g&&u.append("metadata",this.encodeMetadata(g))):(u=i,f["cache-control"]=`max-age=${m.cacheControl}`,f["content-type"]=m.contentType,g&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(g)))),o?.headers&&(f=Object.assign(Object.assign({},f),o.headers));const x=this._removeEmptyFolders(n),y=this._getFinalPath(x),v=yield this.fetch(`${this.url}/object/${y}`,Object.assign({method:r,body:u,headers:f},m?.duplex?{duplex:m.duplex}:{})),w=yield v.json();return v.ok?{data:{path:x,id:w.Id,fullPath:w.Key},error:null}:{data:null,error:w}}catch(u){if(ut(u))return{data:null,error:u};throw u}})}upload(r,n,i){return kt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",r,n,i)})}uploadToSignedUrl(r,n,i,o){return kt(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(r),m=this._getFinalPath(u),f=new URL(this.url+`/object/upload/sign/${m}`);f.searchParams.set("token",n);try{let g;const x=Object.assign({upsert:o0.upsert},o),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(x.upsert)});typeof Blob<"u"&&i instanceof Blob?(g=new FormData,g.append("cacheControl",x.cacheControl),g.append("",i)):typeof FormData<"u"&&i instanceof FormData?(g=i,g.append("cacheControl",x.cacheControl)):(g=i,y["cache-control"]=`max-age=${x.cacheControl}`,y["content-type"]=x.contentType);const v=yield this.fetch(f.toString(),{method:"PUT",body:g,headers:y}),w=yield v.json();return v.ok?{data:{path:u,fullPath:w.Key},error:null}:{data:null,error:w}}catch(g){if(ut(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(r,n){return kt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(r);const o=Object.assign({},this.headers);n?.upsert&&(o["x-upsert"]="true");const u=yield la(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:o}),m=new URL(this.url+u.url),f=m.searchParams.get("token");if(!f)throw new Ud("No token returned by API");return{data:{signedUrl:m.toString(),path:r,token:f},error:null}}catch(i){if(ut(i))return{data:null,error:i};throw i}})}update(r,n,i){return kt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",r,n,i)})}move(r,n,i){return kt(this,void 0,void 0,function*(){try{return{data:yield la(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:r,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(ut(o))return{data:null,error:o};throw o}})}copy(r,n,i){return kt(this,void 0,void 0,function*(){try{return{data:{path:(yield la(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:r,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(ut(o))return{data:null,error:o};throw o}})}createSignedUrl(r,n,i){return kt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(r),u=yield la(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const m=i?.download?`&download=${i.download===!0?"":i.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${m}`)},{data:u,error:null}}catch(o){if(ut(o))return{data:null,error:o};throw o}})}createSignedUrls(r,n,i){return kt(this,void 0,void 0,function*(){try{const o=yield la(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:r},{headers:this.headers}),u=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:o.map(m=>Object.assign(Object.assign({},m),{signedUrl:m.signedURL?encodeURI(`${this.url}${m.signedURL}${u}`):null})),error:null}}catch(o){if(ut(o))return{data:null,error:o};throw o}})}download(r,n){return kt(this,void 0,void 0,function*(){const o=typeof n?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(n?.transform||{}),m=u?`?${u}`:"";try{const f=this._getFinalPath(r);return{data:yield(yield Ei(this.fetch,`${this.url}/${o}/${f}${m}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(f){if(ut(f))return{data:null,error:f};throw f}})}info(r){return kt(this,void 0,void 0,function*(){const n=this._getFinalPath(r);try{const i=yield Ei(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:xd(i),error:null}}catch(i){if(ut(i))return{data:null,error:i};throw i}})}exists(r){return kt(this,void 0,void 0,function*(){const n=this._getFinalPath(r);try{return yield Rv(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(ut(i)&&i instanceof gd){const o=i.originalError;if([400,404].includes(o?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(r,n){const i=this._getFinalPath(r),o=[],u=n?.download?`download=${n.download===!0?"":n.download}`:"";u!==""&&o.push(u);const f=typeof n?.transform<"u"?"render/image":"object",g=this.transformOptsToQueryString(n?.transform||{});g!==""&&o.push(g);let x=o.join("&");return x!==""&&(x=`?${x}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${i}${x}`)}}}remove(r){return kt(this,void 0,void 0,function*(){try{return{data:yield W0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:r},{headers:this.headers}),error:null}}catch(n){if(ut(n))return{data:null,error:n};throw n}})}list(r,n,i){return kt(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},zv),n),{prefix:r||""});return{data:yield la(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(ut(o))return{data:null,error:o};throw o}})}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const n=[];return r.width&&n.push(`width=${r.width}`),r.height&&n.push(`height=${r.height}`),r.resize&&n.push(`resize=${r.resize}`),r.format&&n.push(`format=${r.format}`),r.quality&&n.push(`quality=${r.quality}`),n.join("&")}}const qv="2.7.1",Bv={"X-Client-Info":`storage-js/${qv}`};var Ar=function(c,r,n,i){function o(u){return u instanceof n?u:new n(function(m){m(u)})}return new(n||(n=Promise))(function(u,m){function f(y){try{x(i.next(y))}catch(v){m(v)}}function g(y){try{x(i.throw(y))}catch(v){m(v)}}function x(y){y.done?u(y.value):o(y.value).then(f,g)}x((i=i.apply(c,r||[])).next())})};class $v{constructor(r,n={},i){this.url=r,this.headers=Object.assign(Object.assign({},Bv),n),this.fetch=F0(i)}listBuckets(){return Ar(this,void 0,void 0,function*(){try{return{data:yield Ei(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(r){if(ut(r))return{data:null,error:r};throw r}})}getBucket(r){return Ar(this,void 0,void 0,function*(){try{return{data:yield Ei(this.fetch,`${this.url}/bucket/${r}`,{headers:this.headers}),error:null}}catch(n){if(ut(n))return{data:null,error:n};throw n}})}createBucket(r,n={public:!1}){return Ar(this,void 0,void 0,function*(){try{return{data:yield la(this.fetch,`${this.url}/bucket`,{id:r,name:r,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(ut(i))return{data:null,error:i};throw i}})}updateBucket(r,n){return Ar(this,void 0,void 0,function*(){try{return{data:yield Mv(this.fetch,`${this.url}/bucket/${r}`,{id:r,name:r,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(ut(i))return{data:null,error:i};throw i}})}emptyBucket(r){return Ar(this,void 0,void 0,function*(){try{return{data:yield la(this.fetch,`${this.url}/bucket/${r}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(ut(n))return{data:null,error:n};throw n}})}deleteBucket(r){return Ar(this,void 0,void 0,function*(){try{return{data:yield W0(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(n){if(ut(n))return{data:null,error:n};throw n}})}}class Pv extends $v{constructor(r,n={},i){super(r,n,i)}from(r){return new Lv(this.url,this.headers,r,this.fetch)}}const Hv="2.52.1";let Kn="";typeof Deno<"u"?Kn="deno":typeof document<"u"?Kn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Kn="react-native":Kn="node";const Iv={"X-Client-Info":`supabase-js-${Kn}/${Hv}`},Gv={headers:Iv},Yv={schema:"public"},Vv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Qv={};var Xv=function(c,r,n,i){function o(u){return u instanceof n?u:new n(function(m){m(u)})}return new(n||(n=Promise))(function(u,m){function f(y){try{x(i.next(y))}catch(v){m(v)}}function g(y){try{x(i.throw(y))}catch(v){m(v)}}function x(y){y.done?u(y.value):o(y.value).then(f,g)}x((i=i.apply(c,r||[])).next())})};const Kv=c=>{let r;return c?r=c:typeof fetch>"u"?r=H0:r=fetch,(...n)=>r(...n)},Zv=()=>typeof Headers>"u"?I0:Headers,Jv=(c,r,n)=>{const i=Kv(n),o=Zv();return(u,m)=>Xv(void 0,void 0,void 0,function*(){var f;const g=(f=yield r())!==null&&f!==void 0?f:c;let x=new o(m?.headers);return x.has("apikey")||x.set("apikey",c),x.has("Authorization")||x.set("Authorization",`Bearer ${g}`),i(u,Object.assign(Object.assign({},m),{headers:x}))})};var Fv=function(c,r,n,i){function o(u){return u instanceof n?u:new n(function(m){m(u)})}return new(n||(n=Promise))(function(u,m){function f(y){try{x(i.next(y))}catch(v){m(v)}}function g(y){try{x(i.throw(y))}catch(v){m(v)}}function x(y){y.done?u(y.value):o(y.value).then(f,g)}x((i=i.apply(c,r||[])).next())})};function Wv(c){return c.endsWith("/")?c:c+"/"}function eb(c,r){var n,i;const{db:o,auth:u,realtime:m,global:f}=c,{db:g,auth:x,realtime:y,global:v}=r,w={db:Object.assign(Object.assign({},g),o),auth:Object.assign(Object.assign({},x),u),realtime:Object.assign(Object.assign({},y),m),global:Object.assign(Object.assign(Object.assign({},v),f),{headers:Object.assign(Object.assign({},(n=v?.headers)!==null&&n!==void 0?n:{}),(i=f?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>Fv(this,void 0,void 0,function*(){return""})};return c.accessToken?w.accessToken=c.accessToken:delete w.accessToken,w}const eg="2.71.1",zr=30*1e3,pd=3,td=pd*zr,tb="http://localhost:9999",sb="supabase.auth.token",ab={"X-Client-Info":`gotrue-js/${eg}`},yd="X-Supabase-Api-Version",tg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},rb=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,nb=600*1e3;class Md extends Error{constructor(r,n,i){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function je(c){return typeof c=="object"&&c!==null&&"__isAuthError"in c}class lb extends Md{constructor(r,n,i){super(r,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function ib(c){return je(c)&&c.name==="AuthApiError"}class sg extends Md{constructor(r,n){super(r),this.name="AuthUnknownError",this.originalError=n}}class ua extends Md{constructor(r,n,i,o){super(r,i,o),this.name=n,this.status=i}}class na extends ua{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ob(c){return je(c)&&c.name==="AuthSessionMissingError"}class pi extends ua{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class yi extends ua{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class vi extends ua{constructor(r,n=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function cb(c){return je(c)&&c.name==="AuthImplicitGrantRedirectError"}class c0 extends ua{constructor(r,n=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class vd extends ua{constructor(r,n){super(r,"AuthRetryableFetchError",n,void 0)}}function sd(c){return je(c)&&c.name==="AuthRetryableFetchError"}class d0 extends ua{constructor(r,n,i){super(r,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class bd extends ua{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const ki="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),u0=` 	
\r=`.split(""),db=(()=>{const c=new Array(128);for(let r=0;r<c.length;r+=1)c[r]=-1;for(let r=0;r<u0.length;r+=1)c[u0[r].charCodeAt(0)]=-2;for(let r=0;r<ki.length;r+=1)c[ki[r].charCodeAt(0)]=r;return c})();function h0(c,r,n){if(c!==null)for(r.queue=r.queue<<8|c,r.queuedBits+=8;r.queuedBits>=6;){const i=r.queue>>r.queuedBits-6&63;n(ki[i]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const i=r.queue>>r.queuedBits-6&63;n(ki[i]),r.queuedBits-=6}}function ag(c,r,n){const i=db[c];if(i>-1)for(r.queue=r.queue<<6|i,r.queuedBits+=6;r.queuedBits>=8;)n(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(c)}"`)}}function m0(c){const r=[],n=m=>{r.push(String.fromCodePoint(m))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},u=m=>{mb(m,i,n)};for(let m=0;m<c.length;m+=1)ag(c.charCodeAt(m),o,u);return r.join("")}function ub(c,r){if(c<=127){r(c);return}else if(c<=2047){r(192|c>>6),r(128|c&63);return}else if(c<=65535){r(224|c>>12),r(128|c>>6&63),r(128|c&63);return}else if(c<=1114111){r(240|c>>18),r(128|c>>12&63),r(128|c>>6&63),r(128|c&63);return}throw new Error(`Unrecognized Unicode codepoint: ${c.toString(16)}`)}function hb(c,r){for(let n=0;n<c.length;n+=1){let i=c.charCodeAt(n);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(c.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}ub(i,r)}}function mb(c,r,n){if(r.utf8seq===0){if(c<=127){n(c);return}for(let i=1;i<6;i+=1)if((c>>7-i&1)===0){r.utf8seq=i;break}if(r.utf8seq===2)r.codepoint=c&31;else if(r.utf8seq===3)r.codepoint=c&15;else if(r.utf8seq===4)r.codepoint=c&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(c<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|c&63,r.utf8seq-=1,r.utf8seq===0&&n(r.codepoint)}}function fb(c){const r=[],n={queue:0,queuedBits:0},i=o=>{r.push(o)};for(let o=0;o<c.length;o+=1)ag(c.charCodeAt(o),n,i);return new Uint8Array(r)}function gb(c){const r=[];return hb(c,n=>r.push(n)),new Uint8Array(r)}function xb(c){const r=[],n={queue:0,queuedBits:0},i=o=>{r.push(o)};return c.forEach(o=>h0(o,n,i)),h0(null,n,i),r.join("")}function pb(c){return Math.round(Date.now()/1e3)+c}function yb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){const r=Math.random()*16|0;return(c=="x"?r:r&3|8).toString(16)})}const Zt=()=>typeof window<"u"&&typeof document<"u",Da={tested:!1,writable:!1},rg=()=>{if(!Zt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Da.tested)return Da.writable;const c=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(c,c),globalThis.localStorage.removeItem(c),Da.tested=!0,Da.writable=!0}catch{Da.tested=!0,Da.writable=!1}return Da.writable};function vb(c){const r={},n=new URL(c);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,u)=>{r[u]=o})}catch{}return n.searchParams.forEach((i,o)=>{r[o]=i}),r}const ng=c=>{let r;return c?r=c:typeof fetch>"u"?r=(...n)=>Gr(async()=>{const{default:i}=await Promise.resolve().then(()=>Yr);return{default:i}},void 0).then(({default:i})=>i(...n)):r=fetch,(...n)=>r(...n)},bb=c=>typeof c=="object"&&c!==null&&"status"in c&&"ok"in c&&"json"in c&&typeof c.json=="function",Lr=async(c,r,n)=>{await c.setItem(r,JSON.stringify(n))},Ua=async(c,r)=>{const n=await c.getItem(r);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ra=async(c,r)=>{await c.removeItem(r)};class Oi{constructor(){this.promise=new Oi.promiseConstructor((r,n)=>{this.resolve=r,this.reject=n})}}Oi.promiseConstructor=Promise;function ad(c){const r=c.split(".");if(r.length!==3)throw new bd("Invalid JWT structure");for(let i=0;i<r.length;i++)if(!rb.test(r[i]))throw new bd("JWT not in base64url format");return{header:JSON.parse(m0(r[0])),payload:JSON.parse(m0(r[1])),signature:fb(r[2]),raw:{header:r[0],payload:r[1]}}}async function jb(c){return await new Promise(r=>{setTimeout(()=>r(null),c)})}function wb(c,r){return new Promise((i,o)=>{(async()=>{for(let u=0;u<1/0;u++)try{const m=await c(u);if(!r(u,null,m)){i(m);return}}catch(m){if(!r(u,m)){o(m);return}}})()})}function Nb(c){return("0"+c.toString(16)).substr(-2)}function Sb(){const r=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let o="";for(let u=0;u<56;u++)o+=n.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(r),Array.from(r,Nb).join("")}async function _b(c){const n=new TextEncoder().encode(c),i=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(i);return Array.from(o).map(u=>String.fromCharCode(u)).join("")}async function Eb(c){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),c;const n=await _b(c);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Dr(c,r,n=!1){const i=Sb();let o=i;n&&(o+="/PASSWORD_RECOVERY"),await Lr(c,`${r}-code-verifier`,o);const u=await Eb(i);return[u,i===u?"plain":"s256"]}const kb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Tb(c){const r=c.headers.get(yd);if(!r||!r.match(kb))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function Cb(c){if(!c)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(c<=r)throw new Error("JWT has expired")}function Ob(c){switch(c){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Ab=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ur(c){if(!Ab.test(c))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function rd(){const c={};return new Proxy(c,{get:(r,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function f0(c){return JSON.parse(JSON.stringify(c))}var Db=function(c,r){var n={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&r.indexOf(i)<0&&(n[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(c);o<i.length;o++)r.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(c,i[o])&&(n[i[o]]=c[i[o]]);return n};const Ra=c=>c.msg||c.message||c.error_description||c.error||JSON.stringify(c),Ub=[502,503,504];async function g0(c){var r;if(!bb(c))throw new vd(Ra(c),0);if(Ub.includes(c.status))throw new vd(Ra(c),c.status);let n;try{n=await c.json()}catch(u){throw new sg(Ra(u),u)}let i;const o=Tb(c);if(o&&o.getTime()>=tg["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new d0(Ra(n),c.status,((r=n.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(i==="session_not_found")throw new na}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((u,m)=>u&&typeof m=="string",!0))throw new d0(Ra(n),c.status,n.weak_password.reasons);throw new lb(Ra(n),c.status||500,i)}const Mb=(c,r,n,i)=>{const o={method:c,headers:r?.headers||{}};return c==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),n))};async function Ae(c,r,n,i){var o;const u=Object.assign({},i?.headers);u[yd]||(u[yd]=tg["2024-01-01"].name),i?.jwt&&(u.Authorization=`Bearer ${i.jwt}`);const m=(o=i?.query)!==null&&o!==void 0?o:{};i?.redirectTo&&(m.redirect_to=i.redirectTo);const f=Object.keys(m).length?"?"+new URLSearchParams(m).toString():"",g=await Rb(c,r,n+f,{headers:u,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(g):{data:Object.assign({},g),error:null}}async function Rb(c,r,n,i,o,u){const m=Mb(r,i,o,u);let f;try{f=await c(n,Object.assign({},m))}catch(g){throw console.error(g),new vd(Ra(g),0)}if(f.ok||await g0(f),i?.noResolveJson)return f;try{return await f.json()}catch(g){await g0(g)}}function Es(c){var r;let n=null;Bb(c)&&(n=Object.assign({},c),c.expires_at||(n.expires_at=pb(c.expires_in)));const i=(r=c.user)!==null&&r!==void 0?r:c;return{data:{session:n,user:i},error:null}}function x0(c){const r=Es(c);return!r.error&&c.weak_password&&typeof c.weak_password=="object"&&Array.isArray(c.weak_password.reasons)&&c.weak_password.reasons.length&&c.weak_password.message&&typeof c.weak_password.message=="string"&&c.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(r.data.weak_password=c.weak_password),r}function ia(c){var r;return{data:{user:(r=c.user)!==null&&r!==void 0?r:c},error:null}}function zb(c){return{data:c,error:null}}function Lb(c){const{action_link:r,email_otp:n,hashed_token:i,redirect_to:o,verification_type:u}=c,m=Db(c,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:r,email_otp:n,hashed_token:i,redirect_to:o,verification_type:u},g=Object.assign({},m);return{data:{properties:f,user:g},error:null}}function qb(c){return c}function Bb(c){return c.access_token&&c.refresh_token&&c.expires_in}const nd=["global","local","others"];var $b=function(c,r){var n={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&r.indexOf(i)<0&&(n[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(c);o<i.length;o++)r.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(c,i[o])&&(n[i[o]]=c[i[o]]);return n};class Pb{constructor({url:r="",headers:n={},fetch:i}){this.url=r,this.headers=n,this.fetch=ng(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(r,n=nd[0]){if(nd.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${nd.join(", ")}`);try{return await Ae(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(i){if(je(i))return{data:null,error:i};throw i}}async inviteUserByEmail(r,n={}){try{return await Ae(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ia})}catch(i){if(je(i))return{data:{user:null},error:i};throw i}}async generateLink(r){try{const{options:n}=r,i=$b(r,["options"]),o=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(o.new_email=i?.newEmail,delete o.newEmail),await Ae(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:Lb,redirectTo:n?.redirectTo})}catch(n){if(je(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(r){try{return await Ae(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:ia})}catch(n){if(je(n))return{data:{user:null},error:n};throw n}}async listUsers(r){var n,i,o,u,m,f,g;try{const x={nextPage:null,lastPage:0,total:0},y=await Ae(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=r?.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(u=(o=r?.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:qb});if(y.error)throw y.error;const v=await y.json(),w=(m=y.headers.get("x-total-count"))!==null&&m!==void 0?m:0,j=(g=(f=y.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&g!==void 0?g:[];return j.length>0&&(j.forEach(S=>{const D=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(S.split(";")[1].split("=")[1]);x[`${C}Page`]=D}),x.total=parseInt(w)),{data:Object.assign(Object.assign({},v),x),error:null}}catch(x){if(je(x))return{data:{users:[]},error:x};throw x}}async getUserById(r){Ur(r);try{return await Ae(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:ia})}catch(n){if(je(n))return{data:{user:null},error:n};throw n}}async updateUserById(r,n){Ur(r);try{return await Ae(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:n,headers:this.headers,xform:ia})}catch(i){if(je(i))return{data:{user:null},error:i};throw i}}async deleteUser(r,n=!1){Ur(r);try{return await Ae(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:n},xform:ia})}catch(i){if(je(i))return{data:{user:null},error:i};throw i}}async _listFactors(r){Ur(r.userId);try{const{data:n,error:i}=await Ae(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:i}}catch(n){if(je(n))return{data:null,error:n};throw n}}async _deleteFactor(r){Ur(r.userId),Ur(r.id);try{return{data:await Ae(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(n){if(je(n))return{data:null,error:n};throw n}}}function p0(c={}){return{getItem:r=>c[r]||null,setItem:(r,n)=>{c[r]=n},removeItem:r=>{delete c[r]}}}function Hb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Mr={debug:!!(globalThis&&rg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class lg extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class Ib extends lg{}async function Gb(c,r,n){Mr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",c,r);const i=new globalThis.AbortController;return r>0&&setTimeout(()=>{i.abort(),Mr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",c)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(c,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){Mr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",c,o.name);try{return await n()}finally{Mr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",c,o.name)}}else{if(r===0)throw Mr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",c),new Ib(`Acquiring an exclusive Navigator LockManager lock "${c}" immediately failed`);if(Mr.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}Hb();const Yb={url:tb,storageKey:sb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ab,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function y0(c,r,n){return await n()}const Rr={};class tl{constructor(r){var n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=tl.nextInstanceID,tl.nextInstanceID+=1,this.instanceID>0&&Zt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},Yb),r);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Pb({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=ng(o.fetch),this.lock=o.lock||y0,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:Zt()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=Gb:this.lock=y0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:rg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=p0(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=p0(this.memoryStorage)),Zt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}get jwks(){var r,n;return(n=(r=Rr[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(r){Rr[this.storageKey]=Object.assign(Object.assign({},Rr[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,n;return(n=(r=Rr[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){Rr[this.storageKey]=Object.assign(Object.assign({},Rr[this.storageKey]),{cachedAt:r})}_debug(...r){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${eg}) ${new Date().toISOString()}`,...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{const n=vb(window.location.href);let i="none";if(this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce"),Zt()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:u}=await this._getSessionFromURL(n,i);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),cb(u)){const g=(r=u.details)===null||r===void 0?void 0:r.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:m,redirectType:f}=o;return this._debug("#_initialize()","detected session in URL",m,"redirect type",f),await this._saveSession(m),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",m):await this._notifyAllSubscribers("SIGNED_IN",m)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return je(n)?{error:n}:{error:new sg("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var n,i,o;try{const u=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=r?.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=r?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Es}),{data:m,error:f}=u;if(f||!m)return{data:{user:null,session:null},error:f};const g=m.session,x=m.user;return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:x,session:g},error:null}}catch(u){if(je(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(r){var n,i,o;try{let u;if("email"in r){const{email:y,password:v,options:w}=r;let j=null,S=null;this.flowType==="pkce"&&([j,S]=await Dr(this.storage,this.storageKey)),u=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w?.emailRedirectTo,body:{email:y,password:v,data:(n=w?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:w?.captchaToken},code_challenge:j,code_challenge_method:S},xform:Es})}else if("phone"in r){const{phone:y,password:v,options:w}=r;u=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:v,data:(i=w?.data)!==null&&i!==void 0?i:{},channel:(o=w?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:w?.captchaToken}},xform:Es})}else throw new yi("You must provide either an email or phone number and a password");const{data:m,error:f}=u;if(f||!m)return{data:{user:null,session:null},error:f};const g=m.session,x=m.user;return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:x,session:g},error:null}}catch(u){if(je(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(r){try{let n;if("email"in r){const{email:u,password:m,options:f}=r;n=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:m,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:x0})}else if("phone"in r){const{phone:u,password:m,options:f}=r;n=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:m,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:x0})}else throw new yi("You must provide either an email or phone number and a password");const{data:i,error:o}=n;return o?{data:{user:null,session:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new pi}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(n){if(je(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(r){var n,i,o,u;return await this._handleProviderSignIn(r.provider,{redirectTo:(n=r.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=r.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=r.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(u=r.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:n}=r;if(n==="solana")return await this.signInWithSolana(r);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(r){var n,i,o,u,m,f,g,x,y,v,w,j;let S,D;if("message"in r)S=r.message,D=r.signature;else{const{chain:C,wallet:q,statement:K,options:R}=r;let E;if(Zt())if(typeof q=="object")E=q;else{const te=window;if("solana"in te&&typeof te.solana=="object"&&("signIn"in te.solana&&typeof te.solana.signIn=="function"||"signMessage"in te.solana&&typeof te.solana.signMessage=="function"))E=te.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof q!="object"||!R?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=q}const A=new URL((n=R?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in E&&E.signIn){const te=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},R?.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),K?{statement:K}:null));let G;if(Array.isArray(te)&&te[0]&&typeof te[0]=="object")G=te[0];else if(te&&typeof te=="object"&&"signedMessage"in te&&"signature"in te)G=te;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in G&&"signature"in G&&(typeof G.signedMessage=="string"||G.signedMessage instanceof Uint8Array)&&G.signature instanceof Uint8Array)S=typeof G.signedMessage=="string"?G.signedMessage:new TextDecoder().decode(G.signedMessage),D=G.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${A.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...K?["",K,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(o=(i=R?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((u=R?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${R.signInWithSolana.notBefore}`]:[],...!((m=R?.signInWithSolana)===null||m===void 0)&&m.expirationTime?[`Expiration Time: ${R.signInWithSolana.expirationTime}`]:[],...!((f=R?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${R.signInWithSolana.chainId}`]:[],...!((g=R?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${R.signInWithSolana.nonce}`]:[],...!((x=R?.signInWithSolana)===null||x===void 0)&&x.requestId?[`Request ID: ${R.signInWithSolana.requestId}`]:[],...!((v=(y=R?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||v===void 0)&&v.length?["Resources",...R.signInWithSolana.resources.map(G=>`- ${G}`)]:[]].join(`
`);const te=await E.signMessage(new TextEncoder().encode(S),"utf8");if(!te||!(te instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");D=te}}try{const{data:C,error:q}=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:xb(D)},!((w=r.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(j=r.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:Es});if(q)throw q;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new pi}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:q})}catch(C){if(je(C))return{data:{user:null,session:null},error:C};throw C}}async _exchangeCodeForSession(r){const n=await Ua(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(n??"").split("/");try{const{data:u,error:m}=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:i},xform:Es});if(await ra(this.storage,`${this.storageKey}-code-verifier`),m)throw m;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new pi}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:o??null}),error:m})}catch(u){if(je(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(r){try{const{options:n,provider:i,token:o,access_token:u,nonce:m}=r,f=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:u,nonce:m,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Es}),{data:g,error:x}=f;return x?{data:{user:null,session:null},error:x}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new pi}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:x})}catch(n){if(je(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(r){var n,i,o,u,m;try{if("email"in r){const{email:f,options:g}=r;let x=null,y=null;this.flowType==="pkce"&&([x,y]=await Dr(this.storage,this.storageKey));const{error:v}=await Ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(n=g?.data)!==null&&n!==void 0?n:{},create_user:(i=g?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:x,code_challenge_method:y},redirectTo:g?.emailRedirectTo});return{data:{user:null,session:null},error:v}}if("phone"in r){const{phone:f,options:g}=r,{data:x,error:y}=await Ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(o=g?.data)!==null&&o!==void 0?o:{},create_user:(u=g?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(m=g?.channel)!==null&&m!==void 0?m:"sms"}});return{data:{user:null,session:null,messageId:x?.message_id},error:y}}throw new yi("You must provide either an email or phone number.")}catch(f){if(je(f))return{data:{user:null,session:null},error:f};throw f}}async verifyOtp(r){var n,i;try{let o,u;"options"in r&&(o=(n=r.options)===null||n===void 0?void 0:n.redirectTo,u=(i=r.options)===null||i===void 0?void 0:i.captchaToken);const{data:m,error:f}=await Ae(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:u}}),redirectTo:o,xform:Es});if(f)throw f;if(!m)throw new Error("An error occurred on token verification.");const g=m.session,x=m.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),{data:{user:x,session:g},error:null}}catch(o){if(je(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(r){var n,i,o;try{let u=null,m=null;return this.flowType==="pkce"&&([u,m]=await Dr(this.storage,this.storageKey)),await Ae(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(i=(n=r.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=r?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:m}),headers:this.headers,xform:zb})}catch(u){if(je(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;if(i)throw i;if(!n)throw new na;const{error:o}=await Ae(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:o}})}catch(r){if(je(r))return{data:{user:null,session:null},error:r};throw r}}async resend(r){try{const n=`${this.url}/resend`;if("email"in r){const{email:i,type:o,options:u}=r,{error:m}=await Ae(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:m}}else if("phone"in r){const{phone:i,type:o,options:u}=r,{data:m,error:f}=await Ae(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return{data:{user:null,session:null,messageId:m?.message_id},error:f}}throw new yi("You must provide either an email or phone number and a type")}catch(n){if(je(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(r,n){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await r(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const n=await Ua(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?r=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const i=r.expires_at?r.expires_at*1e3-Date.now()<td:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",r.expires_at),!i){if(this.userStorage){const m=await Ua(this.userStorage,this.storageKey+"-user");m?.user?r.user=m.user:r.user=rd()}if(this.storage.isServer&&r.user){let m=this.suppressGetSessionWarning;r=new Proxy(r,{get:(g,x,y)=>(!m&&x==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),m=!0,this.suppressGetSessionWarning=!0),Reflect.get(g,x,y))})}return{data:{session:r},error:null}}const{session:o,error:u}=await this._callRefreshToken(r.refresh_token);return u?{data:{session:null},error:u}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(r){return r?await this._getUser(r):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(r){try{return r?await Ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:ia}):await this._useSession(async n=>{var i,o,u;const{data:m,error:f}=n;if(f)throw f;return!(!((i=m.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new na}:await Ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(o=m.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0,xform:ia})})}catch(n){if(je(n))return ob(n)&&(await this._removeSession(),await ra(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(r,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(r,n))}async _updateUser(r,n={}){try{return await this._useSession(async i=>{const{data:o,error:u}=i;if(u)throw u;if(!o.session)throw new na;const m=o.session;let f=null,g=null;this.flowType==="pkce"&&r.email!=null&&([f,g]=await Dr(this.storage,this.storageKey));const{data:x,error:y}=await Ae(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:f,code_challenge_method:g}),jwt:m.access_token,xform:ia});if(y)throw y;return m.user=x.user,await this._saveSession(m),await this._notifyAllSubscribers("USER_UPDATED",m),{data:{user:m.user},error:null}})}catch(i){if(je(i))return{data:{user:null},error:i};throw i}}async setSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new na;const n=Date.now()/1e3;let i=n,o=!0,u=null;const{payload:m}=ad(r.access_token);if(m.exp&&(i=m.exp,o=i<=n),o){const{session:f,error:g}=await this._callRefreshToken(r.refresh_token);if(g)return{data:{user:null,session:null},error:g};if(!f)return{data:{user:null,session:null},error:null};u=f}else{const{data:f,error:g}=await this._getUser(r.access_token);if(g)throw g;u={access_token:r.access_token,refresh_token:r.refresh_token,user:f.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(n){if(je(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async n=>{var i;if(!r){const{data:m,error:f}=n;if(f)throw f;r=(i=m.session)!==null&&i!==void 0?i:void 0}if(!r?.refresh_token)throw new na;const{session:o,error:u}=await this._callRefreshToken(r.refresh_token);return u?{data:{user:null,session:null},error:u}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(je(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(r,n){try{if(!Zt())throw new vi("No browser detected.");if(r.error||r.error_description||r.error_code)throw new vi(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new c0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new vi("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new c0("No code detected.");const{data:K,error:R}=await this._exchangeCodeForSession(r.code);if(R)throw R;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:K.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:u,refresh_token:m,expires_in:f,expires_at:g,token_type:x}=r;if(!u||!f||!m||!x)throw new vi("No session defined in URL");const y=Math.round(Date.now()/1e3),v=parseInt(f);let w=y+v;g&&(w=parseInt(g));const j=w-y;j*1e3<=zr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${j}s, should have been closer to ${v}s`);const S=w-v;y-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,w,y):y-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,w,y);const{data:D,error:C}=await this._getUser(u);if(C)throw C;const q={provider_token:i,provider_refresh_token:o,access_token:u,expires_in:v,expires_at:w,refresh_token:m,token_type:x,user:D.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:q,redirectType:r.type},error:null}}catch(i){if(je(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(r){return!!(r.access_token||r.error_description)}async _isPKCECallback(r){const n=await Ua(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&n)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:o,error:u}=n;if(u)return{error:u};const m=(i=o.session)===null||i===void 0?void 0:i.access_token;if(m){const{error:f}=await this.admin.signOut(m,r);if(f&&!(ib(f)&&(f.status===404||f.status===401||f.status===403)))return{error:f}}return r!=="others"&&(await this._removeSession(),await ra(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(r){const n=yb(),i={id:n,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(r){return await this._useSession(async n=>{var i,o;try{const{data:{session:u},error:m}=n;if(m)throw m;await((i=this.stateChangeEmitters.get(r))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",r,"session",u)}catch(u){await((o=this.stateChangeEmitters.get(r))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",u),console.error(u)}})}async resetPasswordForEmail(r,n={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Dr(this.storage,this.storageKey,!0));try{return await Ae(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(u){if(je(u))return{data:null,error:u};throw u}}async getUserIdentities(){var r;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(r=n.user.identities)!==null&&r!==void 0?r:[]},error:null}}catch(n){if(je(n))return{data:null,error:n};throw n}}async linkIdentity(r){var n;try{const{data:i,error:o}=await this._useSession(async u=>{var m,f,g,x,y;const{data:v,error:w}=u;if(w)throw w;const j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(m=r.options)===null||m===void 0?void 0:m.redirectTo,scopes:(f=r.options)===null||f===void 0?void 0:f.scopes,queryParams:(g=r.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await Ae(this.fetch,"GET",j,{headers:this.headers,jwt:(y=(x=v.session)===null||x===void 0?void 0:x.access_token)!==null&&y!==void 0?y:void 0})});if(o)throw o;return Zt()&&!(!((n=r.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:r.provider,url:i?.url},error:null}}catch(i){if(je(i))return{data:{provider:r.provider,url:null},error:i};throw i}}async unlinkIdentity(r){try{return await this._useSession(async n=>{var i,o;const{data:u,error:m}=n;if(m)throw m;return await Ae(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(o=(i=u.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(je(n))return{data:null,error:n};throw n}}async _refreshAccessToken(r){const n=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await wb(async o=>(o>0&&await jb(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await Ae(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:Es})),(o,u)=>{const m=200*Math.pow(2,o);return u&&sd(u)&&Date.now()+m-i<zr})}catch(i){if(this._debug(n,"error",i),je(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",n,"url",i),Zt()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:r,url:i},error:null}}async _recoverAndRefresh(){var r,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await Ua(this.storage,this.storageKey);if(o&&this.userStorage){let m=await Ua(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!m&&(m={user:o.user},await Lr(this.userStorage,this.storageKey+"-user",m)),o.user=(r=m?.user)!==null&&r!==void 0?r:rd()}else if(o&&!o.user&&!o.user){const m=await Ua(this.storage,this.storageKey+"-user");m&&m?.user?(o.user=m.user,await ra(this.storage,this.storageKey+"-user"),await Lr(this.storage,this.storageKey,o)):o.user=rd()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const u=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<td;if(this._debug(i,`session has${u?"":" not"} expired with margin of ${td}s`),u){if(this.autoRefreshToken&&o.refresh_token){const{error:m}=await this._callRefreshToken(o.refresh_token);m&&(console.error(m),sd(m)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",m),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:m,error:f}=await this._getUser(o.access_token);!f&&m?.user?(o.user=m.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(m){console.error("Error getting user data:",m),this._debug(i,"error getting user data, skipping SIGNED_IN notification",m)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(r){var n,i;if(!r)throw new na;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Oi;const{data:u,error:m}=await this._refreshAccessToken(r);if(m)throw m;if(!u.session)throw new na;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const f={session:u.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(u){if(this._debug(o,"error",u),je(u)){const m={session:null,error:u};return sd(u)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(m),m}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(u),u}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(r,n,i=!0){const o=`#_notifyAllSubscribers(${r})`;this._debug(o,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:r,session:n});const u=[],m=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(r,n)}catch(g){u.push(g)}});if(await Promise.all(m),u.length>0){for(let f=0;f<u.length;f+=1)console.error(u[f]);throw u[0]}}finally{this._debug(o,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0;const n=Object.assign({},r),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await Lr(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const u=f0(o);await Lr(this.storage,this.storageKey,u)}else{const o=f0(n);await Lr(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await ra(this.storage,this.storageKey),await ra(this.storage,this.storageKey+"-code-verifier"),await ra(this.storage,this.storageKey+"-user"),this.userStorage&&await ra(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&Zt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),zr);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-r)/zr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${zr}ms, refresh threshold is ${pd} ticks`),o<=pd&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof lg)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Zt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const n=`#_onVisibilityChanged(${r})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,n,i){const o=[`provider=${encodeURIComponent(n)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[u,m]=await Dr(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(m)}`});o.push(f.toString())}if(i?.queryParams){const u=new URLSearchParams(i.queryParams);o.push(u.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${r}?${o.join("&")}`}async _unenroll(r){try{return await this._useSession(async n=>{var i;const{data:o,error:u}=n;return u?{data:null,error:u}:await Ae(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(je(n))return{data:null,error:n};throw n}}async _enroll(r){try{return await this._useSession(async n=>{var i,o;const{data:u,error:m}=n;if(m)return{data:null,error:m};const f=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:{issuer:r.issuer}),{data:g,error:x}=await Ae(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(i=u?.session)===null||i===void 0?void 0:i.access_token});return x?{data:null,error:x}:(r.factorType==="totp"&&(!((o=g?.totp)===null||o===void 0)&&o.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),{data:g,error:null})})}catch(n){if(je(n))return{data:null,error:n};throw n}}async _verify(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:u}=n;if(u)return{data:null,error:u};const{data:m,error:f}=await Ae(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:{code:r.code,challenge_id:r.challengeId},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),{data:m,error:f})})}catch(n){if(je(n))return{data:null,error:n};throw n}})}async _challenge(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:u}=n;return u?{data:null,error:u}:await Ae(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:{channel:r.channel},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(je(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(r){const{data:n,error:i}=await this._challenge({factorId:r.factorId});return i?{data:null,error:i}:await this._verify({factorId:r.factorId,challengeId:n.id,code:r.code})}async _listFactors(){const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i=r?.factors||[],o=i.filter(m=>m.factor_type==="totp"&&m.status==="verified"),u=i.filter(m=>m.factor_type==="phone"&&m.status==="verified");return{data:{all:i,totp:o,phone:u},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async r=>{var n,i;const{data:{session:o},error:u}=r;if(u)return{data:null,error:u};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:m}=ad(o.access_token);let f=null;m.aal&&(f=m.aal);let g=f;((i=(n=o.user.factors)===null||n===void 0?void 0:n.filter(v=>v.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(g="aal2");const y=m.amr||[];return{data:{currentLevel:f,nextLevel:g,currentAuthenticationMethods:y},error:null}}))}async fetchJwk(r,n={keys:[]}){let i=n.keys.find(f=>f.kid===r);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(f=>f.kid===r),i&&this.jwks_cached_at+nb>o)return i;const{data:u,error:m}=await Ae(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(m)throw m;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=o,i=u.keys.find(f=>f.kid===r),!i)?null:i}async getClaims(r,n={}){try{let i=r;if(!i){const{data:j,error:S}=await this.getSession();if(S||!j.session)return{data:null,error:S};i=j.session.access_token}const{header:o,payload:u,signature:m,raw:{header:f,payload:g}}=ad(i);n?.allowExpired||Cb(u.exp);const x=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!x){const{error:j}=await this.getUser(i);if(j)throw j;return{data:{claims:u,header:o,signature:m},error:null}}const y=Ob(o.alg),v=await crypto.subtle.importKey("jwk",x,y,!0,["verify"]);if(!await crypto.subtle.verify(y,v,m,gb(`${f}.${g}`)))throw new bd("Invalid JWT signature");return{data:{claims:u,header:o,signature:m},error:null}}catch(i){if(je(i))return{data:null,error:i};throw i}}}tl.nextInstanceID=0;const Vb=tl;class Qb extends Vb{constructor(r){super(r)}}var Xb=function(c,r,n,i){function o(u){return u instanceof n?u:new n(function(m){m(u)})}return new(n||(n=Promise))(function(u,m){function f(y){try{x(i.next(y))}catch(v){m(v)}}function g(y){try{x(i.throw(y))}catch(v){m(v)}}function x(y){y.done?u(y.value):o(y.value).then(f,g)}x((i=i.apply(c,r||[])).next())})};class Kb{constructor(r,n,i){var o,u,m;if(this.supabaseUrl=r,this.supabaseKey=n,!r)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const f=Wv(r),g=new URL(f);this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const x=`sb-${g.hostname.split(".")[0]}-auth-token`,y={db:Yv,realtime:Qv,auth:Object.assign(Object.assign({},Vv),{storageKey:x}),global:Gv},v=eb(i??{},y);this.storageKey=(o=v.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(u=v.global.headers)!==null&&u!==void 0?u:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(w,j)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(j)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((m=v.auth)!==null&&m!==void 0?m:{},this.headers,v.global.fetch),this.fetch=Jv(n,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new mv(new URL("rest/v1",g).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),v.accessToken||this._listenForAuthEvents()}get functions(){return new tv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Pv(this.storageUrl.href,this.headers,this.fetch)}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,n={},i={}){return this.rest.rpc(r,n,i)}channel(r,n={config:{}}){return this.realtime.channel(r,n)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var r,n;return Xb(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:n,detectSessionInUrl:i,storage:o,storageKey:u,flowType:m,lock:f,debug:g},x,y){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Qb({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),x),storageKey:u,autoRefreshToken:r,persistSession:n,detectSessionInUrl:i,storage:o,flowType:m,lock:f,debug:g,fetch:y,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(r){return new Tv(this.realtimeUrl.href,Object.assign(Object.assign({},r),{params:Object.assign({apikey:this.supabaseKey},r?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i?.access_token)})}_handleTokenChanged(r,n,i){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:r==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ig=(c,r,n)=>new Kb(c,r,n);function Zb(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const c=process.version.match(/^v(\d+)\./);return c?parseInt(c[1],10)<=18:!1}Zb()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Jb="https://fktvtmolbvwtrxsgodaw.supabase.co",Fb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZrdHZ0bW9sYnZ3dHJ4c2dvZGF3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU2NjU1NjcsImV4cCI6MjA3MTI0MTU2N30._wbmrSyLPbfjg4W8mLhh0xmzfYGwg71XZl7IOH5d6yo",ae=ig(Jb,Fb),og=_.createContext(null);function v0(c){return{id:c.id,name:c.name,address:c.address,username:c.username,email:c.email,phoneNumber:c.phone_number,profileImage:c.profile_image??null,role:c.role}}function Wb({children:c}){const[r,n]=_.useState(()=>{try{const f=localStorage.getItem("currentUser");return f?JSON.parse(f):null}catch{return null}}),[i,o]=_.useState(()=>{try{return!localStorage.getItem("currentUser")}catch{return!0}});_.useEffect(()=>{let f=!0;const g=async y=>{if(y?.user?.id){const{data:v}=await ae.from("users").select("*").eq("id",y.user.id).single();if(v&&f){const w=v0(v);n(w),localStorage.setItem("currentUser",JSON.stringify(w))}}else f&&(n(null),localStorage.removeItem("currentUser"));f&&o(!1)};ae.auth.getSession().then(({data:{session:y}})=>{!r&&y&&o(!0),g(y)});const{data:{subscription:x}}=ae.auth.onAuthStateChange((y,v)=>{g(v)});return()=>{f=!1,x.unsubscribe()}},[]);const u=async(f,g)=>{const{data:x,error:y}=await ae.auth.signInWithPassword({email:f,password:g});if(y)throw console.error("Supabase sign-in error:",y),new Error("Invalid email or password");if(!x.user)throw new Error("No user data returned");const{data:v,error:w}=await ae.from("users").select("*").eq("id",x.user.id).single();if(w||!v)throw console.error("Failed to load user profile:",w),new Error("Failed to load user profile");const j=v0(v);return n(j),localStorage.setItem("currentUser",JSON.stringify(j)),j},m=async()=>{await ae.auth.signOut(),localStorage.removeItem("currentUser"),n(null)};return s.jsx(og.Provider,{value:{user:r,login:u,logout:m,isLoading:i},children:c})}function cs(){const c=_.useContext(og);if(!c)throw new Error("useAuth must be used within an AuthProvider");return c}function ej(){const[c,r]=_.useState(""),[n,i]=_.useState(""),[o,u]=_.useState(!1),[m,f]=_.useState(""),[g,x]=_.useState(!1),[y,v]=_.useState(""),w=Ft(),j=is(),{login:S}=cs();_.useEffect(()=>{j.state?.message&&(v(j.state.message),window.history.replaceState({},document.title))},[j]);const D=async C=>{C.preventDefault(),f(""),x(!0);try{const q=await S(c,n);q.role==="admin"?w("/admin"):w(`/user/${q.id}`)}catch(q){console.error("Authentication error:",q);const K=q instanceof Error?q.message:"Authentication failed. Please try again.";f(K)}finally{x(!1)}};return s.jsxs("div",{className:"w-screen flex min-h-screen items-center justify-center bg-gray-50 px-4",children:[s.jsx("header",{className:"fixed top-0 left-0 w-screen h-20 flex items-center bg-slate-800 text-white px-5",children:s.jsx(we,{to:"/",className:"text-white hover:text-white active:text-white visited:text-white",children:s.jsx("h1",{className:"text-4xl font-extrabold tracking-tight",children:"Cocktails and Alcohol Ordering"})})}),s.jsxs("form",{onSubmit:D,className:"w-full max-w-sm rounded-lg bg-white p-8 shadow-md",children:[s.jsx("h2",{className:"mb-6 text-center text-2xl font-semibold",children:"Sign In"}),y&&s.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),s.jsx("p",{className:"text-sm text-green-600",children:y})]})}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Email"}),s.jsx("input",{type:"email",value:c,onChange:C=>r(C.target.value),className:"block w-full rounded-md border border-gray-300 p-2 focus:border-indigo-500 focus:ring-indigo-500",required:!0,disabled:g})]}),s.jsxs("label",{className:"mt-4 block",children:[s.jsx("span",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:o?"text":"password",value:n,onChange:C=>i(C.target.value),className:"block w-full rounded-md border border-gray-300 p-2 pr-20 focus:border-indigo-500 focus:ring-indigo-500",required:!0,disabled:g}),s.jsx("button",{type:"button",onClick:()=>u(!o),className:"absolute inset-y-0 right-0 mr-2 rounded px-2 text-sm text-gray-600 hover:underline focus:outline-none disabled:opacity-50",disabled:g,children:o?"Hide":"Show"})]})]}),s.jsx("div",{className:"mt-2 text-right",children:s.jsx(we,{to:"/contact-admin",className:"text-sm text-emerald-600 hover:text-emerald-700 hover:underline focus:outline-none",children:"Forgot your password?"})}),m&&s.jsx("p",{className:"mt-3 text-sm text-red-600",children:m}),s.jsx("button",{type:"submit",disabled:g,className:"mt-6 w-full rounded bg-emerald-600 py-2 font-semibold text-white hover:bg-emerald-700 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:g?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Signing In..."})]}):s.jsx("span",{children:"Log In"})})]})]})}function tj(){const[c,r]=_.useState(""),[n,i]=_.useState(""),[o,u]=_.useState(!1),[m,f]=_.useState(!1),[g,x]=_.useState(""),[y,v]=_.useState(!1),[w,j]=_.useState(!1),[S,D]=_.useState(!0),C=Ft(),[q]=Xy();_.useEffect(()=>{(async()=>{console.log(" Reset password page loaded"),console.log(" Full URL:",window.location.href),console.log(" Search:",window.location.search),console.log(" Hash:",window.location.hash);const E=new URLSearchParams(window.location.hash.substring(1)),A=q.get("access_token")||E.get("access_token"),te=q.get("refresh_token")||E.get("refresh_token"),G=q.get("type")||E.get("type"),ie=q.get("token_type")||E.get("token_type"),V=q.get("error")||E.get("error"),ue=q.get("error_description")||E.get("error_description"),oe=q.get("error_code")||E.get("error_code");if(console.log(" Token analysis:",{accessToken:A?"PRESENT":"MISSING",refreshToken:te?"PRESENT":"MISSING",type:G||"NOT SET",tokenType:ie||"NOT SET",error:V||"NONE",errorDescription:ue||"NONE"}),V){let he="Authentication error occurred.";V==="access_denied"?ue?.includes("expired")||oe==="otp_expired"?he="This password reset link has expired. Please request a new password reset.":ue?.includes("invalid")?he="This password reset link is invalid. Please request a new password reset.":he=`Access denied: ${ue||"Please request a new password reset."}`:he=ue||V,console.log(" Password reset error detected:",{error:V,errorDescription:ue,errorCode:oe}),x(he),D(!1);return}try{const{data:{session:he},error:re}=await ae.auth.getSession();if(console.log(" Current session check:",{session:he?"EXISTS":"NONE",sessionError:re}),he&&!re){console.log(" Valid session found, allowing password reset"),j(!0),D(!1);return}}catch(he){console.log(" Session check failed:",he)}if(!A&&!te){console.log(" No tokens found in URL and no existing session"),x("Invalid reset link. Please request a new password reset."),D(!1);return}if(G&&G!=="recovery"){console.log(" Wrong link type:",G),x(`Invalid reset link type: ${G}. Please request a new password reset.`),D(!1);return}try{console.log(" Attempting to set session with tokens...");const{data:he,error:re}=await ae.auth.setSession({access_token:A,refresh_token:te});console.log(" Session setup result:",{data:he?"SUCCESS":"NO_DATA",error:re||"NONE"}),re?(console.error(" Session error:",re),x(`Invalid or expired reset link: ${re.message}`)):he?.session?(console.log(" Session established successfully"),j(!0),window.history.replaceState({},document.title,"/auth/reset-password")):(console.error(" No session data returned"),x("Failed to establish session. Please request a new password reset."))}catch(he){console.error(" Token validation error:",he),x("Invalid reset link. Please request a new password reset.")}finally{D(!1)}})()},[q]);const K=async R=>{if(R.preventDefault(),x(""),c.length<6){x("Password must be at least 6 characters long.");return}if(c!==n){x("Passwords do not match.");return}v(!0);try{const{error:E}=await ae.auth.updateUser({password:c});E?x(E.message):(await ae.auth.signOut(),C("/signin",{state:{message:"Password updated successfully! Please sign in with your new password."}}))}catch(E){console.error("Password update error:",E);const A=E instanceof Error?E.message:"Failed to update password. Please try again.";x(A)}finally{v(!1)}};return S?s.jsxs("div",{className:"w-screen flex min-h-screen items-center justify-center bg-gray-50 px-4",children:[s.jsx("header",{className:"fixed top-0 left-0 w-screen h-20 flex items-center bg-slate-800 text-white px-5",children:s.jsx(we,{to:"/",className:"text-white hover:text-white active:text-white visited:text-white",children:s.jsx("h1",{className:"text-4xl font-extrabold tracking-tight",children:"Cocktails and Alcohol Ordering"})})}),s.jsx("div",{className:"w-full max-w-sm rounded-lg bg-white p-8 shadow-md",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-8 h-8 border-4 border-emerald-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"Verifying Reset Link..."}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Please wait while we validate your password reset link."})]})})]}):w?s.jsxs("div",{className:"w-screen flex min-h-screen items-center justify-center bg-gray-50 px-4",children:[s.jsx("header",{className:"fixed top-0 left-0 w-screen h-20 flex items-center bg-slate-800 text-white px-5",children:s.jsx(we,{to:"/",className:"text-white hover:text-white active:text-white visited:text-white",children:s.jsx("h1",{className:"text-4xl font-extrabold tracking-tight",children:"Cocktails and Alcohol Ordering"})})}),s.jsxs("form",{onSubmit:K,className:"w-full max-w-sm rounded-lg bg-white p-8 shadow-md",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"w-12 h-12 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-6 h-6 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-3a1 1 0 011-1h2.586l4.707-4.707A6 6 0 1721 9z"})})}),s.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Reset Your Password"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Enter your new password below."})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"mb-1 block text-sm font-medium text-gray-700",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:o?"text":"password",value:c,onChange:R=>r(R.target.value),className:"block w-full rounded-md border border-gray-300 p-2 pr-20 focus:border-emerald-500 focus:ring-emerald-500",placeholder:"Enter new password",required:!0,disabled:y,minLength:6}),s.jsx("button",{type:"button",onClick:()=>u(!o),className:"absolute inset-y-0 right-0 mr-2 rounded px-2 text-sm text-gray-600 hover:underline focus:outline-none disabled:opacity-50",disabled:y,children:o?"Hide":"Show"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 6 characters long."})]}),s.jsxs("label",{className:"mt-4 block",children:[s.jsx("span",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Confirm New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:m?"text":"password",value:n,onChange:R=>i(R.target.value),className:`block w-full rounded-md border p-2 pr-20 focus:ring-emerald-500 ${n&&c!==n?"border-red-400 bg-red-50 focus:border-red-500":n&&c===n?"border-green-400 bg-green-50 focus:border-green-500":"border-gray-300 focus:border-emerald-500"}`,placeholder:"Confirm new password",required:!0,disabled:y}),s.jsx("button",{type:"button",onClick:()=>f(!m),className:"absolute inset-y-0 right-0 mr-2 rounded px-2 text-sm text-gray-600 hover:underline focus:outline-none disabled:opacity-50",disabled:y,children:m?"Hide":"Show"})]}),n&&s.jsx("p",{className:`text-xs mt-1 ${c===n?"text-green-600":"text-red-600"}`,children:c===n?" Passwords match":" Passwords do not match"})]}),g&&s.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md",children:s.jsx("p",{className:"text-sm text-red-600",children:g})}),s.jsx("button",{type:"submit",disabled:y||c!==n||c.length<6,className:"mt-6 w-full rounded bg-emerald-600 py-2 font-semibold text-white hover:bg-emerald-700 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:y?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Updating Password..."})]}):s.jsx("span",{children:"Update Password"})}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx(we,{to:"/signin",className:"text-sm text-emerald-600 hover:text-emerald-700 hover:underline",children:"Back to Sign In"})})]})]}):s.jsxs("div",{className:"w-screen flex min-h-screen items-center justify-center bg-gray-50 px-4",children:[s.jsx("header",{className:"fixed top-0 left-0 w-screen h-20 flex items-center bg-slate-800 text-white px-5",children:s.jsx(we,{to:"/",className:"text-white hover:text-white active:text-white visited:text-white",children:s.jsx("h1",{className:"text-4xl font-extrabold tracking-tight",children:"Cocktails and Alcohol Ordering"})})}),s.jsx("div",{className:"w-full max-w-sm rounded-lg bg-white p-8 shadow-md",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsx("h2",{className:"text-xl font-semibold text-red-800 mb-2",children:"Invalid Reset Link"}),s.jsx("p",{className:"text-gray-600 mb-4",children:g}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(we,{to:"/sign-in",className:"inline-block w-full px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 transition-colors",children:"Request New Password Reset"}),s.jsx(we,{to:"/",className:"inline-block w-full px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors",children:"Back to Home"})]})]})})]})}function sj(){const c="twcoperations123@gmail.com",r=()=>{const o=`mailto:${c}?subject=${encodeURIComponent("Account Password Reset Request")}&body=${encodeURIComponent(`Hello Admin,

I need help with my account password reset. Please assist me with accessing my account.

Thank you,
[Your Name]`)}`;window.location.href=o};return s.jsxs("div",{className:"w-screen flex min-h-screen items-center justify-center bg-gray-50 px-4",children:[s.jsx("header",{className:"fixed top-0 left-0 w-screen h-20 flex items-center bg-slate-800 text-white px-5",children:s.jsx(we,{to:"/",className:"text-white hover:text-white active:text-white visited:text-white",children:s.jsx("h1",{className:"text-4xl font-extrabold tracking-tight",children:"Cocktails and Alcohol Ordering"})})}),s.jsx("div",{className:"w-full max-w-md rounded-lg bg-white p-8 shadow-md",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 7.89a1 1 0 001.42 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),s.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Contact Admin"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"For password reset requests, please contact our administrator directly."}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Admin Email:"}),s.jsx("p",{className:"text-lg font-medium text-gray-800 break-all",children:c})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:r,className:"w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 7.89a1 1 0 001.42 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Send Email to Admin"]}),s.jsx(we,{to:"/sign-in",className:"block w-full px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors text-center",children:"Back to Sign In"}),s.jsx(we,{to:"/",className:"block w-full px-4 py-2 bg-gray-100 text-gray-600 rounded hover:bg-gray-200 transition-colors text-center",children:"Back to Home"})]})]})})]})}/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=c=>c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rj=c=>c.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,n,i)=>i?i.toUpperCase():n.toLowerCase()),b0=c=>{const r=rj(c);return r.charAt(0).toUpperCase()+r.slice(1)},cg=(...c)=>c.filter((r,n,i)=>!!r&&r.trim()!==""&&i.indexOf(r)===n).join(" ").trim(),nj=c=>{for(const r in c)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=_.forwardRef(({color:c="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:o="",children:u,iconNode:m,...f},g)=>_.createElement("svg",{ref:g,...lj,width:r,height:r,stroke:c,strokeWidth:i?Number(n)*24/Number(r):n,className:cg("lucide",o),...!u&&!nj(f)&&{"aria-hidden":"true"},...f},[...m.map(([x,y])=>_.createElement(x,y)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=(c,r)=>{const n=_.forwardRef(({className:i,...o},u)=>_.createElement(ij,{ref:u,iconNode:r,className:cg(`lucide-${aj(b0(c))}`,`lucide-${c}`,i),...o}));return n.displayName=b0(c),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],j0=Ue("bell",oj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],w0=Ue("camera",cj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],dg=Ue("chart-column",dj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ai=Ue("circle-alert",uj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],al=Ue("circle-check-big",hj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ug=Ue("circle-question-mark",mj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Pr=Ue("clock",fj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],xj=Ue("credit-card",gj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],bi=Ue("database",pj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],N0=Ue("dollar-sign",yj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ld=Ue("eye-off",vj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ni=Ue("eye",bj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],qa=Ue("file-text",jj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Nj=Ue("funnel",wj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],hg=Ue("log-out",Sj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],mg=Ue("mail",_j);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],fg=Ue("menu",Ej);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Di=Ue("message-square",kj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Os=Ue("package",Tj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],jd=Ue("phone",Cj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Aj=Ue("refresh-cw",Oj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]],Uj=Ue("reply",Dj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Rj=Ue("save",Mj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Lj=Ue("search",zj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Bj=Ue("send",qj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],wd=Ue("settings",$j);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ji=Ue("shield",Pj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Ti=Ue("shopping-cart",Hj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],id=Ue("trending-up",Ij);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],Yj=Ue("truck",Gj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],gg=Ue("user",Vj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Zn=Ue("users",Qj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Kj=Ue("x",Xj);function Zj({onClick:c}){return s.jsx("button",{onClick:c,"aria-label":"Open menu",className:"p-3 rounded-lg hover:bg-gray-100 touch-manipulation min-h-[44px] min-w-[44px] flex items-center justify-center",children:s.jsx(fg,{className:"h-6 w-6"})})}function Jj({open:c,onClose:r,user:n,userId:i}){const[o,u]=_.useState(null);return _.useEffect(()=>{const m=f=>f.key==="Escape"&&r();return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[r]),_.useEffect(()=>{if(n?.profileImage)u(n.profileImage);else{const m=localStorage.getItem("userProfileImage");m&&u(m)}},[n?.profileImage]),s.jsxs(s.Fragment,{children:[s.jsx("div",{onClick:r,className:`fixed inset-0 bg-black/50 transition-opacity z-40 ${c?"opacity-100":"opacity-0 pointer-events-none"}`}),s.jsxs("nav",{className:`fixed top-0 left-0 h-full w-72 sm:w-80 max-w-[85vw] bg-white shadow-lg transform transition-transform duration-300 ease-in-out z-50 ${c?"translate-x-0":"-translate-x-full"} flex flex-col pt-4 sm:pt-6 pb-safe-bottom`,children:[s.jsx("div",{className:"px-6 pb-6 border-b border-gray-200 mb-4 relative",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:o?s.jsx("img",{src:o,alt:"Profile",className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-8 h-8 bg-gray-400 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-sm font-medium",children:n?.name?.charAt(0).toUpperCase()||"U"})})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:n?.name||"User"}),s.jsx("p",{className:"text-sm text-gray-500",children:n?.email||"user@example.com"})]})]})}),s.jsxs("ul",{className:"px-4 sm:px-6 text-base sm:text-lg font-medium space-y-1",children:[s.jsx("li",{children:s.jsx(we,{to:`/user/${i}/dashboard`,onClick:r,className:"block py-3 px-2 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors touch-manipulation min-h-[48px] flex items-center",children:"Dashboard"})}),s.jsx("li",{children:s.jsx(we,{to:`/user/${i}/orders`,onClick:r,className:"block py-3 px-2 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors touch-manipulation min-h-[48px] flex items-center",children:"Orders"})}),s.jsx("li",{children:s.jsx(we,{to:`/user/${i}/inventory`,onClick:r,className:"block py-3 px-2 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors touch-manipulation min-h-[48px] flex items-center",children:"Our Inventory"})}),s.jsx("li",{children:s.jsx(we,{to:`/user/${i}/support`,onClick:r,className:"block py-3 px-2 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors touch-manipulation min-h-[48px] flex items-center",children:"Support"})}),s.jsx("li",{children:s.jsx(we,{to:`/user/${i}/settings`,onClick:r,className:"block py-3 px-2 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors touch-manipulation min-h-[48px] flex items-center",children:"Settings"})})]}),s.jsx("div",{className:"mt-auto px-4 sm:px-6 pb-4 sm:pb-6",children:s.jsxs(we,{to:"/",onClick:r,className:"flex items-center space-x-2 py-3 px-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors touch-manipulation min-h-[48px]",children:[s.jsx(hg,{className:"h-5 w-5"}),s.jsx("span",{children:"Sign Out"})]})})]})]})}const Fj="https://fktvtmolbvwtrxsgodaw.supabase.co",Wj="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZrdHZ0bW9sYnZ3dHJ4c2dvZGF3Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NTY2NTU2NywiZXhwIjoyMDcxMjQxNTY3fQ.UVIKA2Vt-MOUA8kXi4J26bTepZBgV-tGmvCYUz7KPks",ks=ig(Fj,Wj),Xn=!!ks;class ew{async getAllUsers(){try{const{data:r,error:n}=await ae.from("users").select("*").order("created_at",{ascending:!1});if(n)throw console.error("Error fetching users:",n),n;return r?.map(this.mapDatabaseUserToAppUser)||[]}catch(r){return console.error("Error in getAllUsers:",r),[]}}async getUserById(r){try{const{data:n,error:i}=await ae.from("users").select("*").eq("id",r).single();return i?(console.error("Error fetching user:",i),null):n?this.mapDatabaseUserToAppUser(n):null}catch(n){return console.error("Error in getUserById:",n),null}}async createUser(r){try{const n=r.email==="hello@hello.com";if(n){console.log(" EMERGENCY DEBUG MODE ACTIVATED for hello@hello.com"),console.log(" Starting comprehensive debugging..."),console.log(" Step 1: Direct auth.users check");try{const{data:D}=await ae.rpc("get_auth_users_count",{target_email:r.email});console.log(" Direct auth users count:",D)}catch{console.log(" RPC not available, skipping direct auth check")}console.log(" Step 2: Direct users table check");const{data:w,error:j}=await ae.from("users").select("*").eq("email",r.email);console.log(" Direct users check result:",{data:w,error:j,count:w?.length||0}),console.log(" Step 3: Case-insensitive check");const{data:S}=await ae.from("users").select("*").ilike("email",r.email);console.log(" Case-insensitive check result:",{data:S,count:S?.length||0})}const{data:i}=await ae.auth.getSession();console.log("Creating user with data:",r),console.log("Checking if email exists in custom users table:",r.email);const o=await this.checkEmailExists(r.email);if(console.log("Email exists in custom users check result:",o),o)throw new Error(`A user with email "${r.email}" already exists in the system`);console.log("Checking if username exists in custom users table:",r.username);const u=await this.checkUsernameExists(r.username);if(console.log("Username exists in custom users check result:",u),u)throw new Error(`A user with username "${r.username}" already exists`);console.log("Checking for existing auth user with this email...");let m=null;if(Xn&&ks){const{data:w,error:j}=await ks.auth.admin.listUsers();!j&&w&&(m=w.users.find(S=>S.email===r.email),n&&console.log(" Admin auth user check:",{total_auth_users:w.users.length,matching_auth_user:m,all_emails:w.users.map(S=>S.email)}))}if(m){const{data:w}=await ae.from("users").select("id").eq("id",m.id).single();if(w)throw new Error(`A user with email "${r.email}" already exists in the authentication system`);{console.log("Found orphaned auth user, creating profile for existing auth user:",m.id);const{data:j,error:S}=await ae.from("users").insert({id:m.id,email:r.email,name:r.name,address:r.address,username:r.username,password:"managed_by_supabase_auth",phone_number:r.phoneNumber,profile_image:r.profileImage||null,role:r.role??"user"}).select().single();if(S)throw console.error("Failed to create profile for orphaned auth user:",S),new Error(`Failed to create user profile: ${S.message}`);return console.log("Successfully created profile for orphaned auth user"),this.mapDatabaseUserToAppUser(j)}}console.log("Attempting to create auth user...");const{data:f,error:g}=await ae.auth.signUp({email:r.email,password:r.password,options:{data:{name:r.name,username:r.username,address:r.address,phone:r.phoneNumber,role:r.role??"user"}}});if(g)throw console.error("Auth signup error:",g),g.message.includes("User already registered")?new Error(`The email "${r.email}" is already registered. If this is an orphaned user, please contact an administrator.`):new Error(`Failed to create user account: ${g.message}`);if(!f.user)throw new Error("No user data returned from signup");if(console.log("Auth user created successfully:",f.user.id),await ae.auth.signOut(),i?.session){const{error:w}=await ae.auth.setSession(i.session);w&&console.warn("Could not restore admin session:",w)}console.log("Creating custom user profile...");let x=3,y=null,v=null;for(;x>0&&!y;){if(x<3){console.log(` Retry ${4-x}: Re-checking for conflicts before insert...`);const{data:D}=await ae.from("users").select("*").eq("email",r.email);if(D&&D.length>0){const q=D[0];if(q.id===f.user.id)return console.log(" SUCCESS: Our user was actually created successfully on previous attempt!"),console.log(" User details:",q),this.mapDatabaseUserToAppUser(q);throw console.log(" RACE CONDITION DETECTED: Email created by different auth user"),console.log(" Existing user ID:",q.id),console.log(" Our auth user ID:",f.user.id),new Error(`Race condition detected: Email "${r.email}" was created by another process`)}const{data:C}=await ae.from("users").select("id, username").eq("username",r.username);if(C&&C.length>0&&C[0].id!==f.user.id)throw console.log(" RACE CONDITION DETECTED: Username created by different auth user"),new Error(`Race condition detected: Username "${r.username}" was created by another process`)}const w={id:f.user.id,email:r.email,name:r.name,address:r.address,username:r.username,password:"managed_by_supabase_auth",phone_number:r.phoneNumber,profile_image:r.profileImage||null,role:r.role??"user"};console.log(" INSERTING DATA:",{address:w.address,phone_number:w.phone_number,email:w.email,name:w.name,username:w.username});const{data:j,error:S}=await ae.from("users").insert(w).select().single();if(!S){y=j;break}if(v=S,x--,console.log(` Database insert failed (${x} attempts left):`,{code:S.code,message:S.message,details:S.details,hint:S.hint}),S.code==="23505"||S.message.includes("duplicate key")){if(console.log(" UNIQUE CONSTRAINT VIOLATION - Likely race condition"),x>0){const D=(4-x)*1e3;console.log(` Waiting ${D}ms before retry to avoid race condition...`),await new Promise(C=>setTimeout(C,D))}}else{console.log(" Non-constraint error, stopping retries");break}}if(v||!y){console.error("Database insert error after retries:",v),console.error(`CRITICAL: Orphaned auth user created: ${f.user.id} (${r.email})`),console.error("Attempting to clean up orphaned auth user...");try{if(console.log(" Attempting to cleanup orphaned auth user..."),console.log(" Admin access available:",Xn),console.log(" Service role key configured:",!0),Xn&&ks){console.log(" Using admin client for cleanup...");const{error:w}=await ks.auth.admin.deleteUser(f.user.id);w?(console.error(" Failed to delete orphaned auth user via admin client:",w),console.log(" Falling back to edge function..."),await this.cleanupOrphanedAuthUser(f.user.id)):console.log(" Successfully cleaned up orphaned auth user via admin client")}else console.log(" Admin client not available, using edge function..."),console.log(" To fix: Set VITE_SUPABASE_SERVICE_ROLE_KEY in your .env file"),await this.cleanupOrphanedAuthUser(f.user.id)}catch(w){console.error(" Failed to cleanup orphaned auth user:",w),console.error(" Manual cleanup required for auth user:",f.user.id),console.error(" Run this SQL: DELETE FROM auth.users WHERE id = '"+f.user.id+"';")}throw v?.message.includes("users_email_key")||v?.code==="23505"?new Error(`Database error: The email "${r.email}" is already in use. This indicates a race condition or data inconsistency.`):v?.message.includes("users_username_key")?new Error(`Database error: The username "${r.username}" is already in use. This indicates a race condition or data inconsistency.`):new Error(`Failed to create user profile: ${v?.message||"Unknown database error"}. The orphaned auth user has been cleaned up.`)}return console.log("Custom user created successfully:",y),this.mapDatabaseUserToAppUser(y)}catch(n){throw console.error("Error in createUser:",n),n}}async createUserBypassValidation(r){try{console.log(" BYPASS MODE: Creating user without validation checks");const{data:n}=await ae.auth.getSession();console.log(" BYPASS: Creating auth user...");const{data:i,error:o}=await ae.auth.signUp({email:r.email,password:r.password,options:{data:{name:r.name,username:r.username,role:r.role??"user"}}});if(o)throw console.error(" BYPASS: Auth signup error:",o),new Error(`Auth signup failed: ${o.message}`);if(!i.user)throw new Error(" BYPASS: No user data returned from signup");console.log(" BYPASS: Auth user created:",i.user.id),await ae.auth.signOut(),n?.session&&await ae.auth.setSession(n.session),console.log(" BYPASS: Creating custom user record...");const{data:u,error:m}=await ae.from("users").insert({id:i.user.id,email:r.email,name:r.name,address:r.address,username:r.username,password:"managed_by_supabase_auth",phone_number:r.phoneNumber,profile_image:r.profileImage||null,role:r.role??"user"}).select().single();if(m){if(console.error(" BYPASS: Database error:",m),console.error(" BYPASS: Error code:",m.code),console.error(" BYPASS: Error details:",m.details),console.error(" BYPASS: Error hint:",m.hint),console.error(" BYPASS: Error message:",m.message),Xn&&ks)try{await ks.auth.admin.deleteUser(i.user.id),console.log(" BYPASS: Cleaned up auth user")}catch(f){console.error(" BYPASS: Failed to cleanup auth user:",f)}throw new Error(`Database insert failed: ${m.message} (Code: ${m.code})`)}return console.log(" BYPASS: Success! User created:",u),this.mapDatabaseUserToAppUser(u)}catch(n){throw console.error(" BYPASS: Error in createUserBypassValidation:",n),n}}async updateUser(r,n){try{const i={...n,updated_at:new Date().toISOString()};n.phoneNumber&&(i.phone_number=n.phoneNumber,delete i.phoneNumber),n.profileImage&&(i.profile_image=n.profileImage,delete i.profileImage),console.log("Updating user with data:",i);const{data:o,error:u}=await ae.from("users").update(i).eq("id",r).select().single();if(u)throw console.error("Supabase error details:",u),console.error("Update data that failed:",i),new Error(`Failed to update user: ${u.message}`);return o?this.mapDatabaseUserToAppUser(o):null}catch(i){throw console.error("Error in updateUser:",i),i}}async deleteUser(r){try{console.log("Deleting user with ID:",r);try{const{data:i,error:o}=await ae.functions.invoke("delete-user-admin",{body:{userId:r}});if(!o&&!i?.error)return console.log("User deleted via edge function:",i),!0;console.log("Edge function not available, using database trigger method")}catch(i){console.log("Edge function failed, using database trigger method:",i)}const{error:n}=await ae.from("users").delete().eq("id",r);if(n)throw console.error("Database deletion failed:",n),new Error(`Failed to delete user: ${n.message}`);return console.log("User deleted successfully via database trigger"),!0}catch(n){throw console.error("Error in deleteUser:",n),n}}async authenticateUser(r,n){try{const{data:i,error:o}=await ae.from("users").select("*").eq("username",r).eq("password",n).single();return o?(console.error("Error authenticating user:",o),null):i?this.mapDatabaseUserToAppUser(i):null}catch(i){return console.error("Error in authenticateUser:",i),null}}async checkUsernameExists(r){try{console.log(` DEBUGGING: Checking if username exists: "${r}"`),console.log(` Username length: ${r.length}`),console.log(` Username trimmed: "${r.trim()}"`);const{data:n,error:i}=await ae.from("users").select("id, username").eq("username",r).limit(1);if(console.log(" Username query result:",{data:n,error:i}),console.log(" Data length:",n?.length||0),i)return console.error(" Error checking username:",i),console.log(" Returning false due to error"),!1;const o=n&&n.length>0;return console.log(` Username exists result: ${o}`),o&&n&&console.log(" Existing username details:",n[0]),o}catch(n){return console.error(" Exception in checkUsernameExists:",n),console.log(" Returning false due to exception"),!1}}async checkEmailExists(r){try{console.log(` DEBUGGING: Checking if email exists: "${r}"`),console.log(` Email length: ${r.length}`),console.log(` Email trimmed: "${r.trim()}"`);const{data:n,error:i}=await ae.from("users").select("id, email").eq("email",r).limit(1);if(console.log(" Supabase query result:",{data:n,error:i}),console.log(" Data length:",n?.length||0),i)return console.error(" Error checking email:",i),console.log(" Returning false due to error"),!1;const o=n&&n.length>0;return console.log(` Email exists result: ${o}`),o&&n&&console.log(" Existing user details:",n[0]),o}catch(n){return console.error(" Exception in checkEmailExists:",n),console.log(" Returning false due to exception"),!1}}async checkForOrphanedAuthUsers(){try{return[]}catch(r){return console.error("Error checking for orphaned auth users:",r),[]}}async cleanupOrphanedAuthUser(r){try{if(Xn&&ks){console.log("Attempting to delete orphaned auth user via admin client...");const{error:i}=await ks.auth.admin.deleteUser(r);if(!i){console.log("Successfully cleaned up orphaned auth user via admin client");return}console.warn("Admin client cleanup failed, trying edge function...",i)}else console.warn("Admin client not available, trying edge function...");const{error:n}=await ae.functions.invoke("delete-user-admin",{body:{userId:r,forceAuthDelete:!0}});if(n)throw console.error("Edge function cleanup failed:",n),new Error(`Failed to cleanup orphaned auth user: ${n.message}`);console.log("Successfully cleaned up orphaned auth user via edge function")}catch(n){throw console.error("Error cleaning up orphaned auth user:",n),n}}async seedUsers(){try{const r=[{name:"Regular User",address:"123 Main St",username:"user",password:"1234567890",email:"user@restaurantapp.com",phoneNumber:"555-1234",role:"user"},{name:"Admin Account",address:"Admin St",username:"admin",password:"0987654321",email:"admin@restaurantapp.com",phoneNumber:"555-0000",role:"admin"}];for(const n of r)await this.checkUsernameExists(n.username)||await this.createUser(n)}catch(r){console.error("Error seeding users:",r)}}mapDatabaseUserToAppUser(r){return{id:r.id,name:r.name,address:r.address,username:r.username,password:r.password,email:r.email,phoneNumber:r.phone_number,profileImage:r.profile_image,role:r.role,comments:r.comments}}}const Ma=new ew,xg=_.createContext(null);function tw({children:c}){const[r,n]=_.useState([]),[i,o]=_.useState(!0),[u,m]=_.useState(null),f=async()=>{try{o(!0),m(null);const j=await Ma.getAllUsers();if(j.length===0){await Ma.seedUsers();const S=await Ma.getAllUsers();n(S)}else n(j)}catch(j){console.error("Error loading users:",j),m("Failed to load users")}finally{o(!1)}};_.useEffect(()=>{f()},[]);const g=async j=>{try{m(null);const S=await Ma.createUser(j);S&&n(D=>[S,...D])}catch(S){throw console.error("Error creating user:",S),m(S.message||"Failed to create user"),S}},x=async(j,S)=>{try{m(null);const D=await Ma.updateUser(j,S);D&&n(C=>C.map(q=>q.id===j?D:q))}catch(D){throw console.error("Error updating user:",D),m(D.message||"Failed to update user"),D}},y=async j=>{try{m(null),await Ma.deleteUser(j)&&(n(D=>D.filter(C=>C.id!==j)),await w())}catch(S){throw console.error("Error deleting user:",S),m(S.message||"Failed to delete user"),S}},v=async(j,S)=>{try{return m(null),await Ma.authenticateUser(j,S)}catch(D){return console.error("Error authenticating user:",D),m(D.message||"Authentication failed"),null}},w=async()=>{await f()};return s.jsx(xg.Provider,{value:{users:r,createUser:g,updateUser:x,deleteUser:y,authenticate:v,isLoading:i,error:u,refreshUsers:w},children:c})}function Yt(){const c=_.useContext(xg);if(!c)throw new Error("useUsers must be inside UsersProvider");return c}function sw(){const[c,r]=_.useState(!1),{id:n}=os(),{users:i}=Yt(),o=i.find(u=>u.id===n);return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsxs("header",{className:"flex items-center h-14 sm:h-16 px-4 shadow-sm bg-white sticky top-0 z-30",children:[s.jsx(Zj,{onClick:()=>r(!0)}),s.jsxs("h1",{className:"ml-4 text-sm sm:text-lg md:text-xl lg:text-2xl font-bold leading-tight",children:[s.jsx("span",{className:"block sm:hidden",children:"Order Portal"}),s.jsx("span",{className:"hidden sm:block lg:hidden",children:"Cocktail Portal"}),s.jsx("span",{className:"hidden lg:block",children:"Cocktails and Alcohol Ordering Portal"})]})]}),s.jsx(Jj,{open:c,onClose:()=>r(!1),user:o,userId:n}),s.jsxs("main",{className:"w-full",children:[s.jsx(P0,{})," "]})]})}class aw{generateOrderNumber(){const r=Date.now(),n=Math.random().toString(36).substr(2,5).toUpperCase();return`ORD-${r}-${n}`}async createOrder(r){try{console.log("OrderService: Creating order with data:",r);const n=this.generateOrderNumber();let i;try{const y=new Date(r.deliveryDate);if(isNaN(y.getTime()))throw new Error("Invalid delivery date");i=y.toISOString().split("T")[0]}catch(y){return console.error("OrderService: Invalid delivery date:",r.deliveryDate,y),null}const o={user_id:r.userId,order_number:n,total:Number(r.total),status:r.paymentMethod==="Pay on Delivery"?"confirmed":"paid",payment_method:r.paymentMethod,delivery_date:i,delivery_time:r.deliveryTime,delivery_address:r.deliveryAddress||"",notes:r.notes||""};console.log("OrderService: Inserting order:",o);const{data:u,error:m}=await ae.from("orders").insert(o).select().single();if(m)return console.error("OrderService: Error creating order:",m),console.error("OrderService: Error details:",{message:m.message,details:m.details,hint:m.hint,code:m.code}),null;console.log("OrderService: Order created successfully:",u);const f=r.items.map(y=>({order_id:u.id,menu_item_id:y.menuItemId||null,menu_item_name:y.menuItemName,menu_item_ingredients:y.menuItemIngredients||"",unit_size:y.unitSize||"",abv:Number(y.abv)||0,price:Number(y.price),quantity:Number(y.quantity),subtotal:Number(y.price)*Number(y.quantity)}));console.log("OrderService: Inserting order items:",f);const{data:g,error:x}=await ae.from("order_items").insert(f).select();return x?(console.error("OrderService: Error creating order items:",x),console.error("OrderService: Order items error details:",{message:x.message,details:x.details,hint:x.hint,code:x.code}),await ae.from("orders").delete().eq("id",u.id),null):(console.log("OrderService: Order items created successfully:",g),{id:u.id,userId:u.user_id,orderNumber:u.order_number,total:u.total,status:u.status,paymentMethod:u.payment_method,deliveryDate:u.delivery_date,deliveryTime:u.delivery_time,deliveryAddress:u.delivery_address,notes:u.notes,items:g.map(y=>({id:y.id,menuItemId:y.menu_item_id,menuItemName:y.menu_item_name,menuItemIngredients:y.menu_item_ingredients,unitSize:y.unit_size,abv:y.abv,price:y.price,quantity:y.quantity,subtotal:y.subtotal})),createdAt:u.created_at,updatedAt:u.updated_at})}catch(n){return console.error("Error in createOrder:",n),null}}async getUserOrders(r){try{const{data:n,error:i}=await ae.from("orders").select(`
          *,
          order_items (*)
        `).eq("user_id",r).order("created_at",{ascending:!1});return i?(console.error("Error fetching user orders:",i),[]):n.map(o=>({id:o.id,userId:o.user_id,orderNumber:o.order_number,total:o.total,status:o.status,paymentMethod:o.payment_method,deliveryDate:o.delivery_date,deliveryTime:o.delivery_time,deliveryAddress:o.delivery_address,notes:o.notes,items:o.order_items.map(u=>({id:u.id,menuItemId:u.menu_item_id,menuItemName:u.menu_item_name,menuItemIngredients:u.menu_item_ingredients,unitSize:u.unit_size,abv:u.abv,price:u.price,quantity:u.quantity,subtotal:u.subtotal})),createdAt:o.created_at,updatedAt:o.updated_at}))}catch(n){return console.error("Error in getUserOrders:",n),[]}}async getAllOrders(){try{const{data:r,error:n}=await ae.from("orders").select(`
          *,
          order_items (*),
          users!orders_user_id_fkey (name, email)
        `).order("created_at",{ascending:!1});return n?(console.error("Error fetching all orders:",n),[]):r.map(i=>({id:i.id,userId:i.user_id,orderNumber:i.order_number,total:i.total,status:i.status,paymentMethod:i.payment_method,deliveryDate:i.delivery_date,deliveryTime:i.delivery_time,deliveryAddress:i.delivery_address,notes:i.notes,items:i.order_items.map(o=>({id:o.id,menuItemId:o.menu_item_id,menuItemName:o.menu_item_name,menuItemIngredients:o.menu_item_ingredients,unitSize:o.unit_size,abv:o.abv,price:o.price,quantity:o.quantity,subtotal:o.subtotal})),createdAt:i.created_at,updatedAt:i.updated_at,userName:i.users?.name,userEmail:i.users?.email}))}catch(r){return console.error("Error in getAllOrders:",r),[]}}async updateOrderStatus(r,n){try{const{error:i}=await ae.from("orders").update({status:n}).eq("id",r);return i?(console.error("Error updating order status:",i),!1):!0}catch(i){return console.error("Error in updateOrderStatus:",i),!1}}async getOrderById(r){try{const{data:n,error:i}=await ae.from("orders").select(`
          *,
          order_items (*)
        `).eq("id",r).single();return i?(console.error("Error fetching order:",i),null):{id:n.id,userId:n.user_id,orderNumber:n.order_number,total:n.total,status:n.status,paymentMethod:n.payment_method,deliveryDate:n.delivery_date,deliveryTime:n.delivery_time,deliveryAddress:n.delivery_address,notes:n.notes,items:n.order_items.map(o=>({id:o.id,menuItemId:o.menu_item_id,menuItemName:o.menu_item_name,menuItemIngredients:o.menu_item_ingredients,unitSize:o.unit_size,abv:o.abv,price:o.price,quantity:o.quantity,subtotal:o.subtotal})),createdAt:n.created_at,updatedAt:n.updated_at}}catch(n){return console.error("Error in getOrderById:",n),null}}async getRecentOrders(r,n=5){try{const{data:i,error:o}=await ae.from("orders").select(`
          *,
          order_items (*)
        `).eq("user_id",r).order("created_at",{ascending:!1}).limit(n);return o?(console.error("Error fetching recent orders:",o),[]):i.map(u=>({id:u.id,userId:u.user_id,orderNumber:u.order_number,total:u.total,status:u.status,paymentMethod:u.payment_method,deliveryDate:u.delivery_date,deliveryTime:u.delivery_time,deliveryAddress:u.delivery_address,notes:u.notes,items:u.order_items.map(m=>({id:m.id,menuItemId:m.menu_item_id,menuItemName:m.menu_item_name,menuItemIngredients:m.menu_item_ingredients,unitSize:m.unit_size,abv:m.abv,price:m.price,quantity:m.quantity,subtotal:m.subtotal})),createdAt:u.created_at,updatedAt:u.updated_at}))}catch(i){return console.error("Error in getRecentOrders:",i),[]}}}const Br=new aw;function rw(){const{id:c}=os(),{users:r}=Yt(),{user:n,isLoading:i}=cs(),[o,u]=_.useState([]),[m,f]=_.useState([]),[g,x]=_.useState([]),y=n||r.find(q=>q.id===c);if(_.useEffect(()=>{(async()=>{const K=y?.id||c;if(K)try{const R=await Br.getUserOrders(K);u(R);const E=[];R.slice(0,5).forEach(A=>{A.id&&(E.push({id:A.id,type:"order_placed",message:`Order #${A.orderNumber||A.id.slice(-5)} placed for $${A.total.toFixed(2)}`,timestamp:A.createdAt||new Date().toISOString(),icon:s.jsx(Os,{className:"w-4 h-4"}),color:"bg-blue-500"}),A.status==="delivered"&&E.push({id:`${A.id}-delivered`,type:"order_delivered",message:`Order #${A.orderNumber||A.id.slice(-5)} delivered successfully`,timestamp:A.deliveryDate,icon:s.jsx(al,{className:"w-4 h-4"}),color:"bg-emerald-500"}))}),f(E.sort((A,te)=>new Date(te.timestamp).getTime()-new Date(A.timestamp).getTime()))}catch(R){console.error("Error loading orders:",R)}})()},[y?.id,c]),_.useEffect(()=>{const q=localStorage.getItem("supportTickets");if(q){const K=JSON.parse(q),R=y?.id||c,E=K.filter(A=>A.userId===R);x(E)}},[y?.id,c]),i&&!y)return s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"Loading user data..."})]})});if(!y)return s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-600 mb-4",children:"User Not Found"}),s.jsx("p",{className:"text-gray-500",children:"The requested user could not be found."})]})});const v=o.filter(q=>q.status==="paid"||q.status==="confirmed").length,w=o.filter(q=>q.status==="processing"||q.status==="out_for_delivery").length,j=o.filter(q=>q.status==="delivered").length,S=g.filter(q=>q.status==="open"||q.status==="in_progress").length,D=g.filter(q=>q.adminResponse&&q.adminResponseDate&&new Date(q.adminResponseDate)>new Date(Date.now()-10080*60*1e3)).length,C=q=>{const K=new Date(q),E=Math.abs(new Date().getTime()-K.getTime()),A=Math.ceil(E/(1e3*60*60*24));return A===1?"1 day ago":A<7?`${A} days ago`:K.toLocaleDateString()};return s.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6 pb-safe-bottom",children:[s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-emerald-600 rounded-lg p-4 sm:p-6 text-white",children:[s.jsxs("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold mb-2",children:["Welcome back, ",y.name,"!"]}),s.jsx("p",{className:"text-emerald-100 text-sm sm:text-base",children:"Here's what's happening with your orders today"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3 sm:gap-4",children:[s.jsx("div",{className:"bg-white p-4 sm:p-5 rounded-lg shadow-md border border-gray-200 min-h-[80px] flex items-center touch-manipulation",children:s.jsxs("div",{className:"flex items-center w-full",children:[s.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg flex-shrink-0",children:s.jsx(Pr,{className:"w-5 h-5 text-yellow-600"})}),s.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600 truncate",children:"Active Orders"}),s.jsx("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:v})]})]})}),s.jsx("div",{className:"bg-white p-4 sm:p-5 rounded-lg shadow-md border border-gray-200 min-h-[80px] flex items-center touch-manipulation",children:s.jsxs("div",{className:"flex items-center w-full",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg flex-shrink-0",children:s.jsx(Os,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600 truncate",children:"Processing Orders"}),s.jsx("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:w})]})]})}),s.jsx("div",{className:"bg-white p-4 sm:p-5 rounded-lg shadow-md border border-gray-200 min-h-[80px] flex items-center touch-manipulation",children:s.jsxs("div",{className:"flex items-center w-full",children:[s.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg flex-shrink-0",children:s.jsx(Yj,{className:"w-5 h-5 text-emerald-600"})}),s.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600 truncate",children:"Delivered Orders"}),s.jsx("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:j})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx(qa,{className:"w-5 h-5 text-purple-600"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Active Tickets"}),s.jsx("p",{className:"text-xl font-bold text-gray-900",children:S})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:s.jsx(Di,{className:"w-5 h-5 text-orange-600"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600",children:"New Responses"}),s.jsx("p",{className:"text-xl font-bold text-gray-900",children:D})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Quick Actions"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Get things done faster"})]}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs(we,{to:`/user/${c}/inventory`,className:"flex flex-col items-center p-6 border border-gray-300 rounded-lg hover:bg-emerald-50 hover:border-emerald-300 transition-all duration-200 group",children:[s.jsx("div",{className:"p-3 bg-emerald-100 rounded-lg mb-3 group-hover:bg-emerald-200 transition-colors",children:s.jsx(Ti,{className:"w-6 h-6 text-emerald-600"})}),s.jsx("span",{className:"font-medium text-gray-900 text-center",children:"Browse Menu"}),s.jsx("span",{className:"text-sm text-gray-500 text-center mt-1",children:"Order delicious drinks"})]}),s.jsxs(we,{to:`/user/${c}/orders`,className:"flex flex-col items-center p-6 border border-gray-300 rounded-lg hover:bg-blue-50 hover:border-blue-300 transition-all duration-200 group",children:[s.jsx("div",{className:"p-3 bg-blue-100 rounded-lg mb-3 group-hover:bg-blue-200 transition-colors",children:s.jsx(Os,{className:"w-6 h-6 text-blue-600"})}),s.jsx("span",{className:"font-medium text-gray-900 text-center",children:"My Orders"}),s.jsx("span",{className:"text-sm text-gray-500 text-center mt-1",children:"Track your orders"})]}),s.jsxs(we,{to:`/user/${c}/support`,className:"flex flex-col items-center p-6 border border-gray-300 rounded-lg hover:bg-purple-50 hover:border-purple-300 transition-all duration-200 group",children:[s.jsx("div",{className:"p-3 bg-purple-100 rounded-lg mb-3 group-hover:bg-purple-200 transition-colors",children:s.jsx(ug,{className:"w-6 h-6 text-purple-600"})}),s.jsx("span",{className:"font-medium text-gray-900 text-center",children:"Get Support"}),s.jsx("span",{className:"text-sm text-gray-500 text-center mt-1",children:"Need help?"})]}),s.jsxs(we,{to:`/user/${c}/settings`,className:"flex flex-col items-center p-6 border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 group",children:[s.jsx("div",{className:"p-3 bg-gray-100 rounded-lg mb-3 group-hover:bg-gray-200 transition-colors",children:s.jsx(wd,{className:"w-6 h-6 text-gray-600"})}),s.jsx("span",{className:"font-medium text-gray-900 text-center",children:"Settings"}),s.jsx("span",{className:"text-sm text-gray-500 text-center mt-1",children:"Manage account"})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Activities"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Your latest order updates"})]}),s.jsx("div",{className:"p-6",children:m.length>0?s.jsx("div",{className:"space-y-4",children:m.map(q=>s.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-50 rounded-lg",children:[s.jsx("div",{className:`p-2 rounded-full ${q.color}`,children:q.icon}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:q.message}),s.jsx("p",{className:"text-xs text-gray-500",children:C(q.timestamp)})]})]},q.id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Os,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No recent activities"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Your order activities will appear here"})]})})]})]})}const nw=c=>{const r=[["Order ID","Customer Name","Order Date","Delivery Date","Delivery Time","Status","Payment Method","Total"],[c.id||"",c.userName||"Unknown",new Date(c.createdAt||"").toLocaleDateString(),new Date(c.deliveryDate).toLocaleDateString(),c.deliveryTime,c.status,c.paymentMethod,`$${c.total.toFixed(2)}`],[],["Item Name","Category","Size","ABV","Price","Quantity","Subtotal"],...c.items.map(u=>[u.menuItemName,"N/A",u.unitSize||"N/A",u.abv&&u.abv>0?`${u.abv}%`:"N/A",`$${u.price.toFixed(2)}`,u.quantity,`$${(u.price*u.quantity).toFixed(2)}`])].map(u=>u.join(",")).join(`
`),n=new Blob([r],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),o=URL.createObjectURL(n);i.setAttribute("href",o),i.setAttribute("download",`order-${c.id}.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)};function pg({order:c,isOpen:r,onClose:n}){const[i,o]=_.useState(!1),u=async()=>{if(c){o(!0);try{nw(c)}catch(f){console.error("Export failed:",f),alert("Failed to export order. Please try again.")}finally{o(!1)}}},m=f=>{switch(f){case"paid":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Paid"});case"confirmed":case"processing":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Processing"});case"out_for_delivery":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:"Out for Delivery"});case"delivered":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Delivered"});case"cancelled":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Cancelled"});default:return null}};return!r||!c?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Order Details"}),s.jsx("p",{className:"text-sm text-gray-600",children:c.id})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:u,disabled:i,className:"px-4 py-2 bg-emerald-600 text-white text-sm rounded-lg hover:bg-emerald-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center space-x-2",children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Exporting..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("span",{children:"Export CSV"})]})}),s.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Order Information"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Order ID:"}),s.jsx("span",{className:"font-medium",children:c.id})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Customer:"}),s.jsx("span",{className:"font-medium",children:c.userName||"Unknown"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Order Date:"}),s.jsx("span",{className:"font-medium",children:new Date(c.createdAt||"").toLocaleDateString()})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Status:"}),s.jsx("span",{children:m(c.status)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Payment Method:"}),s.jsx("span",{className:"font-medium",children:c.paymentMethod})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Delivery Information"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Delivery Date:"}),s.jsx("span",{className:"font-medium",children:new Date(c.deliveryDate).toLocaleDateString()})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Delivery Time:"}),s.jsx("span",{className:"font-medium",children:c.deliveryTime})]})]})]})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Order Summary"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Total Items:"}),s.jsx("span",{className:"font-medium",children:c.items.length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Total Quantity:"}),s.jsx("span",{className:"font-medium",children:c.items.reduce((f,g)=>f+g.quantity,0)})]}),s.jsxs("div",{className:"flex justify-between text-lg font-medium border-t pt-2",children:[s.jsx("span",{children:"Total Amount:"}),s.jsxs("span",{children:["$",c.total.toFixed(2)]})]})]})]})})]}),s.jsxs("div",{className:"mt-6",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Order Items"}),s.jsx("div",{className:"bg-white border rounded-lg overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Size"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subtotal"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.items.map(f=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg flex items-center justify-center overflow-hidden mr-3",children:s.jsx("span",{className:"text-gray-500 text-xs",children:"No Image"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:f.menuItemName}),s.jsx("div",{className:"text-sm text-gray-500",children:f.menuItemIngredients||"No ingredients listed"})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 capitalize",children:"N/A"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:f.unitSize||"N/A"}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",f.price.toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:f.quantity}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["$",(f.price*f.quantity).toFixed(2)]})]},f.id))})]})})})]})]})]})})}class Cs{static CACHE_EXPIRY=300*1e3;static getFromCache(r){try{const n=localStorage.getItem(r);if(!n)return null;const i=JSON.parse(n),o=Date.now();return i.timestamp&&o-i.timestamp<this.CACHE_EXPIRY?i.data:(localStorage.removeItem(r),null)}catch{return null}}static setToCache(r,n){try{const i={data:n,timestamp:Date.now()};localStorage.setItem(r,JSON.stringify(i))}catch{}}static getUserMenuCache(r){return this.getFromCache(`userMenu_${r}`)}static setUserMenuCache(r,n){this.setToCache(`userMenu_${r}`,n)}static getUserOrdersCache(r){return this.getFromCache(`userOrders_${r}`)}static setUserOrdersCache(r,n){this.setToCache(`userOrders_${r}`,n)}static getUserCartCache(r){return this.getFromCache(`userCart_${r}`)}static setUserCartCache(r,n){this.setToCache(`userCart_${r}`,n)}static getDeliverySlotsCache(){return this.getFromCache("deliverySlots")}static setDeliverySlotsCache(r){this.setToCache("deliverySlots",r)}static clearUserCache(r){localStorage.removeItem(`userMenu_${r}`),localStorage.removeItem(`userOrders_${r}`),localStorage.removeItem(`userCart_${r}`)}static clearAllCache(){Object.keys(localStorage).forEach(n=>{(n.startsWith("userMenu_")||n.startsWith("userOrders_")||n.startsWith("userCart_")||n==="deliverySlots")&&localStorage.removeItem(n)})}}function lw(){const{id:c}=os(),r=Ft(),{users:n}=Yt(),{user:i,isLoading:o}=cs(),u=i||n.find(V=>V.id===c),m=`orders_loaded_${u?.id||c}`,f=sessionStorage.getItem(m)==="true",[g,x]=_.useState(()=>u?.id||c?Cs.getUserOrdersCache(u?.id||c)||[]:[]),[y,v]=_.useState(null),[w,j]=_.useState(!1),[S,D]=_.useState(!f);_.useEffect(()=>{const V=async()=>{const ue=u?.id||c;if(ue)try{const oe=await Br.getUserOrders(ue);x(oe),Cs.setUserOrdersCache(ue,oe),sessionStorage.setItem(m,"true")}catch(oe){console.error("Error loading orders:",oe)}finally{D(!1)}else D(!1)};D(!f),V()},[u?.id,c]);const C=g.filter(V=>V.status==="paid"||V.status==="confirmed"),q=g.filter(V=>V.status==="processing"||V.status==="out_for_delivery"),K=g.filter(V=>V.status==="delivered"),R=g.length,E=V=>{switch(V){case"paid":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Paid"});case"confirmed":case"processing":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Processing"});case"out_for_delivery":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:"Out for Delivery"});case"delivered":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Delivered"});case"cancelled":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Cancelled"});default:return null}},A=V=>{switch(V){case"paid":return"Your order has been paid and is waiting to be processed by our team.";case"confirmed":case"processing":return"Your order is being prepared and will be delivered on the scheduled date.";case"out_for_delivery":return"Your order is on its way to you.";case"delivered":return"Your order has been successfully delivered.";case"cancelled":return"This order has been cancelled.";default:return""}},te=V=>{v(V),j(!0)},G=()=>{j(!1),v(null)},ie=V=>{const ue=V.items.map(oe=>({id:oe.menuItemId||`temp-${Date.now()}-${Math.random()}`,name:oe.menuItemName,ingredients:oe.menuItemIngredients||"",unitSize:oe.unitSize||"",abv:oe.abv||0,price:oe.price,imageUrl:"",category:"",inStock:!0,createdAt:new Date,quantity:oe.quantity}));r(`/user/${c}/delivery-time`,{state:{cart:ue}})};return o&&!u?s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"Loading..."})]})}):u?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"mx-5 mt-2 text-3xl font-bold",children:"My Orders"}),s.jsx("p",{className:"mx-5 text-gray-600",children:"Track your ongoing orders and view order history"})]}),s.jsx(we,{to:`/user/${c}/inventory`,className:"mx-5 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Order from Menu"})]}),g.length>0&&s.jsxs("div",{className:"mx-5 grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:C.length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Active Orders"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:q.length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Processing"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:K.length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-600",children:R}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Orders"})]})]}),C.length>0&&s.jsxs("div",{className:"mx-5 bg-white rounded-lg shadow-md",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Active Orders"})}),s.jsx("div",{className:"divide-y divide-gray-200",children:C.map(V=>s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:V.orderNumber||V.id}),s.jsx("p",{className:"text-sm text-gray-600",children:V.items.map(ue=>ue.menuItemName).join(", ")})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-lg font-medium text-gray-900",children:["$",V.total.toFixed(2)]}),E(V.status)]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm text-gray-600 mb-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Order Date:"})," ",new Date(V.createdAt||"").toLocaleDateString()]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Delivery Date:"})," ",new Date(V.deliveryDate).toLocaleDateString()]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Delivery Time:"})," ",V.deliveryTime]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Items:"})," ",V.items.length," items"]})]}),s.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:s.jsx("p",{className:"text-sm text-gray-600",children:A(V.status)})}),s.jsx("div",{className:"flex space-x-2",children:s.jsx("button",{onClick:()=>te(V),className:"text-emerald-600 hover:text-emerald-700 text-sm font-medium",children:"View Details"})})]},V.id))})]}),K.length>0&&s.jsxs("div",{className:"mx-5 bg-white rounded-lg shadow-md",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Completed Orders"})}),s.jsx("div",{className:"divide-y divide-gray-200",children:K.slice(0,5).map(V=>s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:V.orderNumber||V.id}),s.jsx("p",{className:"text-sm text-gray-600",children:V.items.map(ue=>ue.menuItemName).join(", ")})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-lg font-medium text-gray-900",children:["$",V.total.toFixed(2)]}),E(V.status)]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Order Date:"})," ",new Date(V.createdAt||"").toLocaleDateString()]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Delivery Date:"})," ",new Date(V.deliveryDate).toLocaleDateString()]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Items:"})," ",V.items.length," items"]})]}),s.jsxs("div",{className:"mt-4 flex space-x-2",children:[s.jsx("button",{onClick:()=>te(V),className:"text-emerald-600 hover:text-emerald-700 text-sm font-medium",children:"View Details"}),s.jsx("button",{onClick:()=>ie(V),className:"text-gray-600 hover:text-gray-700 text-sm font-medium",children:"Reorder"})]})]},V.id))})]}),!f&&S&&g.length===0&&s.jsxs("div",{className:"mx-5 bg-white rounded-lg shadow-md p-8 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading your orders..."})]}),!S&&g.length===0&&s.jsxs("div",{className:"mx-5 bg-white rounded-lg shadow-md p-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Orders Yet"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"You haven't placed any orders yet. Start shopping to see your orders here."}),s.jsx(we,{to:`/user/${c}/inventory`,className:"inline-flex px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Browse Menu"})]}),s.jsx(pg,{order:y,isOpen:w,onClose:G})]}):s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-600 mb-4",children:"User Not Found"}),s.jsx("p",{className:"text-gray-500",children:"The requested user could not be found."})]})})}class iw{async getAllMenuItems(r=!1){try{const{data:n,error:i}=await ae.from("menu_items").select("*").eq("is_draft",r).order("name",{ascending:!0});if(i)throw console.error("Error fetching menu items:",i),i;return n?.map(this.mapDatabaseItemToMenuItem)||[]}catch(n){return console.error("Error in getAllMenuItems:",n),[]}}async getMenuItemsByCategory(r,n=!1){try{const{data:i,error:o}=await ae.from("menu_items").select("*").eq("category",r).eq("is_draft",n).order("name",{ascending:!0});if(o)throw console.error("Error fetching menu items by category:",o),o;return i?.map(this.mapDatabaseItemToMenuItem)||[]}catch(i){return console.error("Error in getMenuItemsByCategory:",i),[]}}async getMenuItemById(r){try{const{data:n,error:i}=await ae.from("menu_items").select("*").eq("id",r).single();return i?(console.error("Error fetching menu item:",i),null):n?this.mapDatabaseItemToMenuItem(n):null}catch(n){return console.error("Error in getMenuItemById:",n),null}}async createMenuItem(r){try{const n={name:r.name,ingredients:r.ingredients,unit_size:r.unitSize,abv:r.abv??0,price:r.price,image_url:r.imageUrl,category:r.category,in_stock:r.inStock??!0,is_draft:r.isDraft??!1,assignment_type:r.assignmentType??"all_users"},{data:i,error:o}=await ae.from("menu_items").insert([n]).select().single();if(o)throw console.error("Error creating menu item:",o),o;return i?this.mapDatabaseItemToMenuItem(i):null}catch(n){throw console.error("Error in createMenuItem:",n),n}}async updateMenuItem(r,n){try{const i={};n.name!==void 0&&(i.name=n.name),n.ingredients!==void 0&&(i.ingredients=n.ingredients),n.unitSize!==void 0&&(i.unit_size=n.unitSize),n.abv!==void 0&&(i.abv=n.abv),n.price!==void 0&&(i.price=n.price),n.imageUrl!==void 0&&(i.image_url=n.imageUrl),n.category!==void 0&&(i.category=n.category),n.inStock!==void 0&&(i.in_stock=n.inStock),n.isDraft!==void 0&&(i.is_draft=n.isDraft),n.assignmentType!==void 0&&(i.assignment_type=n.assignmentType);const{data:o,error:u}=await ae.from("menu_items").update(i).eq("id",r).select().single();if(u)throw console.error("Error updating menu item:",u),u;return o?this.mapDatabaseItemToMenuItem(o):null}catch(i){throw console.error("Error in updateMenuItem:",i),i}}async deleteMenuItem(r){try{const{error:n}=await ae.from("menu_items").delete().eq("id",r);if(n)throw console.error("Error deleting menu item:",n),n;return!0}catch(n){return console.error("Error in deleteMenuItem:",n),!1}}async publishDraftItems(r){try{const{error:n}=await ae.from("menu_items").update({is_draft:!1}).in("id",r);if(n)throw console.error("Error publishing draft items:",n),n;return!0}catch(n){return console.error("Error in publishDraftItems:",n),!1}}async copyLiveToDraft(){try{const{data:r,error:n}=await ae.from("menu_items").select("*").eq("is_draft",!1);if(n)throw console.error("Error fetching live items:",n),n;if(!r||r.length===0)return!0;const i=r.map(u=>({name:u.name,ingredients:u.ingredients,unit_size:u.unit_size,abv:u.abv,price:u.price,image_url:u.image_url,category:u.category,in_stock:u.in_stock,is_draft:!0}));await ae.from("menu_items").delete().eq("is_draft",!0);const{error:o}=await ae.from("menu_items").insert(i);if(o)throw console.error("Error inserting draft items:",o),o;return!0}catch(r){return console.error("Error in copyLiveToDraft:",r),!1}}async getMenuItemsByAssignmentType(r,n=!1){try{const{data:i,error:o}=await ae.from("menu_items").select("*").eq("assignment_type",r).eq("is_draft",n).order("name",{ascending:!0});if(o)throw console.error("Error fetching menu items by assignment type:",o),o;return i?.map(this.mapDatabaseItemToMenuItem)||[]}catch(i){return console.error("Error in getMenuItemsByAssignmentType:",i),[]}}async assignDrinkToUsers(r,n){try{if(await ae.from("user_menus").delete().eq("menu_item_id",r),n.length>0){const i=n.map(u=>({user_id:u,menu_item_id:r,is_active:!0})),{error:o}=await ae.from("user_menus").insert(i);if(o)throw console.error("Error assigning drink to users:",o),o}return!0}catch(i){return console.error("Error in assignDrinkToUsers:",i),!1}}async getUsersForDrink(r){try{const{data:n,error:i}=await ae.from("user_menus").select("user_id").eq("menu_item_id",r).eq("is_active",!0);return i?(console.error("Error fetching users for drink:",i),[]):n?.map(o=>o.user_id)||[]}catch(n){return console.error("Error in getUsersForDrink:",n),[]}}mapDatabaseItemToMenuItem(r){return{id:r.id,name:r.name,ingredients:r.ingredients,unitSize:r.unit_size,abv:r.abv,price:r.price,imageUrl:r.image_url||"",category:r.category,inStock:r.in_stock,assignmentType:r.assignment_type||"all_users",createdAt:new Date(r.created_at)}}async migrateFromLocalStorage(){try{const r=localStorage.getItem("menuItems");if(r){const i=JSON.parse(r);for(const o of i)await this.createMenuItem({name:o.name,ingredients:o.ingredients,unitSize:o.unitSize,abv:o.abv,price:o.price,imageUrl:o.imageUrl,category:o.category,inStock:o.inStock,isDraft:!1,assignmentType:"all_users"})}const n=localStorage.getItem("draftMenuItems");if(n){const i=JSON.parse(n);for(const o of i)await this.createMenuItem({name:o.name,ingredients:o.ingredients,unitSize:o.unitSize,abv:o.abv,price:o.price,imageUrl:o.imageUrl,category:o.category,inStock:o.inStock,isDraft:!0,assignmentType:"all_users"})}console.log("Successfully migrated menu items from localStorage to Supabase")}catch(r){throw console.error("Error migrating from localStorage:",r),r}}}const We=new iw,ow=Object.freeze(Object.defineProperty({__proto__:null,menuService:We},Symbol.toStringTag,{value:"Module"}));class Nd{static async getUserMenu(r){try{const n=await We.getMenuItemsByAssignmentType("all_users",!1),{data:i,error:o}=await ae.from("user_menus").select(`
          menu_item_id,
          menu_items (*)
        `).eq("user_id",r).eq("is_active",!0);if(o)return console.error("Error fetching user specialized drinks:",o),n;let u=[];return i&&i.length>0&&(u=i.map(g=>g.menu_items).filter(Boolean).filter(g=>g.assignment_type==="specific_users").map(g=>({id:g.id,name:g.name,ingredients:g.ingredients,unitSize:g.unit_size,abv:g.abv,price:g.price,imageUrl:g.image_url||"",category:g.category,inStock:g.in_stock,assignmentType:g.assignment_type,createdAt:new Date(g.created_at)}))),[...n,...u].filter((g,x,y)=>x===y.findIndex(v=>v.id===g.id))}catch(n){return console.error("Error loading user menu:",n),await We.getMenuItemsByAssignmentType("all_users",!1)}}static async saveUserSpecializedDrinks(r,n){try{if(await ae.from("user_menus").delete().eq("user_id",r),n.length>0){const i=n.map(u=>({user_id:r,menu_item_id:u,is_active:!0})),{error:o}=await ae.from("user_menus").insert(i);if(o)throw console.error("Error saving user specialized drinks:",o),o}}catch(i){throw console.error("Error saving user specialized drinks:",i),i}}static async getAllUserMenus(){try{const{data:r,error:n}=await ae.from("user_menus").select(`
          user_id,
          menu_item_id,
          menu_items (*)
        `).eq("is_active",!0);if(n)return console.error("Error loading all user menus:",n),{};const i={};return r&&r.forEach(o=>{i[o.user_id]||(i[o.user_id]=[]),o.menu_items&&i[o.user_id].push({id:o.menu_items.id,name:o.menu_items.name,ingredients:o.menu_items.ingredients,unitSize:o.menu_items.unit_size,abv:o.menu_items.abv,price:o.menu_items.price,imageUrl:o.menu_items.image_url||"",category:o.menu_items.category,inStock:o.menu_items.in_stock,assignmentType:o.menu_items.assignment_type||"all_users",createdAt:new Date(o.menu_items.created_at)})}),i}catch(r){return console.error("Error loading all user menus:",r),{}}}static async getSpecializedDrinksAssignments(){try{const{data:r,error:n}=await ae.from("user_menus").select(`
          user_id,
          menu_item_id,
          menu_items!inner(assignment_type)
        `).eq("is_active",!0).eq("menu_items.assignment_type","specific_users");if(n)return console.error("Error loading specialized drink assignments:",n),{};const i={};return r&&r.forEach(o=>{i[o.menu_item_id]||(i[o.menu_item_id]=[]),i[o.menu_item_id].push(o.user_id)}),i}catch(r){return console.error("Error loading specialized drink assignments:",r),{}}}static async getAllSpecializedDrinksWithUsers(){try{const r=await We.getMenuItemsByAssignmentType("specific_users",!1),n=await this.getSpecializedDrinksAssignments(),i={};return r.forEach(o=>{i[o.id]={drink:o,userIds:n[o.id]||[]}}),i}catch(r){return console.error("Error loading specialized drinks with users:",r),{}}}static async hasSpecializedDrinks(r){try{const{data:n,error:i}=await ae.from("user_menus").select("id").eq("user_id",r).eq("is_active",!0).limit(1);return i?(console.error("Error checking specialized drinks:",i),!1):n&&n.length>0}catch(n){return console.error("Error checking specialized drinks:",n),!1}}static async migrateFromLocalStorage(){try{for(let r=0;r<localStorage.length;r++){const n=localStorage.key(r);if(n&&n.startsWith("userMenu_")){const i=n.replace("userMenu_",""),o=localStorage.getItem(n);if(o){const u=JSON.parse(o),m=[];for(const f of u)if(await We.getMenuItemById(f.id))m.push(f.id);else{const x=await We.createMenuItem({name:f.name,ingredients:f.ingredients,unitSize:f.unitSize,abv:f.abv,price:f.price,imageUrl:f.imageUrl,category:f.category,inStock:f.inStock,isDraft:!1});x&&m.push(x.id)}await this.saveUserSpecializedDrinks(i,m)}}}console.log("Successfully migrated user menus from localStorage to Supabase")}catch(r){throw console.error("Error migrating user menus from localStorage:",r),r}}}class cw{async getCart(r){try{const{data:n,error:i}=await ae.from("shopping_carts").select(`
          quantity,
          menu_items (*)
        `).eq("user_id",r);return i?(console.error("Error fetching cart:",i),[]):n?n.filter(o=>o.menu_items).map(o=>({id:o.menu_items.id,name:o.menu_items.name,ingredients:o.menu_items.ingredients,unitSize:o.menu_items.unit_size,abv:o.menu_items.abv,price:o.menu_items.price,imageUrl:o.menu_items.image_url||"",category:o.menu_items.category,inStock:o.menu_items.in_stock,assignmentType:o.menu_items.assignment_type||"all_users",createdAt:new Date(o.menu_items.created_at),quantity:o.quantity})):[]}catch(n){return console.error("Error in getCart:",n),[]}}async addToCart(r,n,i){try{const{data:o,error:u}=await ae.from("shopping_carts").select("*").eq("user_id",r).eq("menu_item_id",n).single();if(u&&u.code!=="PGRST116")throw console.error("Error checking existing cart item:",u),u;if(o){const{error:m}=await ae.from("shopping_carts").update({quantity:o.quantity+i}).eq("id",o.id);if(m)throw console.error("Error updating cart item:",m),m}else{const{error:m}=await ae.from("shopping_carts").insert([{user_id:r,menu_item_id:n,quantity:i}]);if(m)throw console.error("Error adding item to cart:",m),m}return!0}catch(o){return console.error("Error in addToCart:",o),!1}}async updateCartItem(r,n,i){try{if(i<=0)return await this.removeFromCart(r,n);const{error:o}=await ae.from("shopping_carts").update({quantity:i}).eq("user_id",r).eq("menu_item_id",n);if(o)throw console.error("Error updating cart item:",o),o;return!0}catch(o){return console.error("Error in updateCartItem:",o),!1}}async removeFromCart(r,n){try{const{error:i}=await ae.from("shopping_carts").delete().eq("user_id",r).eq("menu_item_id",n);if(i)throw console.error("Error removing item from cart:",i),i;return!0}catch(i){return console.error("Error in removeFromCart:",i),!1}}async clearCart(r){try{const{error:n}=await ae.from("shopping_carts").delete().eq("user_id",r);if(n)throw console.error("Error clearing cart:",n),n;return!0}catch(n){return console.error("Error in clearCart:",n),!1}}async getCartItemCount(r){try{const{data:n,error:i}=await ae.from("shopping_carts").select("quantity").eq("user_id",r);return i?(console.error("Error fetching cart count:",i),0):n?.reduce((o,u)=>o+u.quantity,0)||0}catch(n){return console.error("Error in getCartItemCount:",n),0}}async getCartTotal(r){try{return(await this.getCart(r)).reduce((i,o)=>i+o.price*o.quantity,0)}catch(n){return console.error("Error in getCartTotal:",n),0}}}const qr=new cw;function dw(){const{id:c}=os(),r=Ft(),{users:n}=Yt(),{user:i,isLoading:o}=cs(),[u,m]=_.useState(()=>c?Cs.getUserMenuCache(c)||[]:[]),[f,g]=_.useState(()=>c?Cs.getUserCartCache(c)||[]:[]),[x,y]=_.useState(""),[v,w]=_.useState("all"),[j,S]=_.useState("name"),[D,C]=_.useState(!1),[q,K]=_.useState({}),R=`inventory_loaded_${c}`,E=sessionStorage.getItem(R)==="true",[A,te]=_.useState(!E),G=i||n.find($=>$.id===c);_.useEffect(()=>{const $=async()=>{if(c)try{const N=await Nd.getUserMenu(c);m(N),Cs.setUserMenuCache(c,N),sessionStorage.setItem(R,"true");const I=await qr.getCart(c);g(I),Cs.setUserCartCache(c,I)}catch(N){console.error("Error loading user data:",N)}finally{te(!1)}else try{const{menuService:N}=await Gr(async()=>{const{menuService:J}=await Promise.resolve().then(()=>ow);return{menuService:J}},void 0),I=await N.getAllMenuItems(!1);m(I),sessionStorage.setItem(R,"true")}catch(N){console.error("Error loading general menu:",N)}finally{te(!1)}};if(c){const N=Cs.getUserMenuCache(c);!N||N.length===0?te(!0):te(!1)}$()},[c]);const ie=async()=>{if(c)try{const $=await qr.getCart(c);g($)}catch($){console.error("Error refreshing cart:",$)}};_.useEffect(()=>{const $=()=>{document.visibilityState==="visible"&&ie()},N=()=>{ie()};return document.addEventListener("visibilitychange",$),window.addEventListener("focus",N),()=>{document.removeEventListener("visibilitychange",$),window.removeEventListener("focus",N)}},[c]);const V=u.filter($=>{const N=$.name.toLowerCase().includes(x.toLowerCase())||$.ingredients.toLowerCase().includes(x.toLowerCase()),I=v==="all"||$.category===v,J=$.inStock;return N&&I&&J}).sort(($,N)=>{switch(j){case"price-low":return $.price-N.price;case"price-high":return N.price-$.price;case"name":return $.name.localeCompare(N.name);default:return 0}}),ue=async $=>{if(!c)return;const N=q[$.id]||1;try{await qr.addToCart(c,$.id,N)&&(g(J=>J.find(Q=>Q.id===$.id)?J.map(Q=>Q.id===$.id?{...Q,quantity:Q.quantity+N}:Q):[...J,{...$,quantity:N}]),K(J=>({...J,[$.id]:1})))}catch(I){console.error("Error adding to cart:",I)}},oe=async $=>{if(c)try{await qr.removeFromCart(c,$)&&g(I=>I.filter(J=>J.id!==$))}catch(N){console.error("Error removing from cart:",N)}},he=async($,N)=>{if(c){if(N<=0){await oe($);return}try{await qr.updateCartItem(c,$,N)&&g(J=>J.map(z=>z.id===$?{...z,quantity:N}:z))}catch(I){console.error("Error updating cart quantity:",I)}}},re=f.reduce(($,N)=>$+N.price*N.quantity,0),pe=f.reduce(($,N)=>$+N.quantity,0),Y=$=>q[$]||1,T=($,N)=>{N<1||K(I=>({...I,[$]:N}))},W=$=>{T($,Y($)+1)},le=$=>{T($,Y($)-1)};return o&&!G?s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"Loading..."})]})}):G?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"mt-2 mx-5 text-3xl font-bold",children:"Our Inventory"}),s.jsx("p",{className:"mx-5 text-gray-600",children:"Browse our selection of premium beverages and place your order"})]}),s.jsx("div",{className:"relative",children:s.jsxs("button",{onClick:()=>C(!0),className:"mt-2 mx-5 relative p-3 bg-emerald-600 text-white rounded-full hover:bg-emerald-700 transition-colors shadow-lg",children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m8 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"})}),pe>0&&s.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center",children:pe})]})})]}),s.jsx("div",{className:"mx-4 bg-white p-4 rounded-lg shadow-md",children:s.jsxs("div",{className:"flex flex-wrap gap-4",children:[s.jsx("input",{type:"text",placeholder:"Search menu items...",value:x,onChange:$=>y($.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}),s.jsxs("select",{value:v,onChange:$=>w($.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[s.jsx("option",{value:"all",children:"All Categories"}),s.jsx("option",{value:"wine",children:"Wine"}),s.jsx("option",{value:"beer",children:"Beer"}),s.jsx("option",{value:"spirits",children:"Spirits"}),s.jsx("option",{value:"cocktails",children:"Cocktails"}),s.jsx("option",{value:"mixers",children:"Mixers"})]}),s.jsxs("select",{value:j,onChange:$=>S($.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[s.jsx("option",{value:"name",children:"Name: A to Z"}),s.jsx("option",{value:"price-low",children:"Price: Low to High"}),s.jsx("option",{value:"price-high",children:"Price: High to Low"})]})]})}),s.jsx("div",{className:"w-full",children:s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4 px-4",children:V.map($=>s.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[s.jsx("div",{className:"h-40 bg-gray-200 flex items-center justify-center overflow-hidden",children:$.imageUrl?s.jsx("img",{src:$.imageUrl,alt:$.name,className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-gray-500",children:"No Image"})}),s.jsxs("div",{className:"p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:$.name}),$.assignmentType==="specific_users"&&s.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded-full",children:"Specialized"})]}),s.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:$.ingredients}),s.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[s.jsxs("div",{children:["Size: ",$.unitSize]}),$.abv>0&&s.jsxs("div",{children:["ABV: ",$.abv,"%"]}),s.jsxs("div",{className:"font-medium text-gray-900",children:["$",$.price.toFixed(2)]})]}),s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs text-gray-600",children:"Quantity:"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>le($.id),className:"w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center hover:bg-gray-300 text-sm",children:"-"}),s.jsx("input",{type:"number",min:"1",value:Y($.id),onChange:N=>T($.id,parseInt(N.target.value)||1),className:"w-12 text-center text-sm border border-gray-300 rounded px-1 py-1"}),s.jsx("button",{onClick:()=>W($.id),className:"w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center hover:bg-gray-300 text-sm",children:"+"})]})]}),s.jsx("button",{onClick:()=>ue($),className:"w-full px-3 py-1 bg-emerald-600 text-white text-sm rounded hover:bg-emerald-700 transition-colors",children:"Add to Cart"})]})]})]},$.id))})}),!E&&A&&u.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading menu items..."})]}):V.length===0?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:x||v!=="all"?"No items match your search criteria.":"No items available at the moment."})}):null,D&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[80vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Shopping Cart (",pe," items)"]}),s.jsx("button",{onClick:()=>C(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"p-4 overflow-y-auto max-h-[60vh]",children:f.length===0?s.jsx("p",{className:"text-gray-500 text-center py-8",children:"Your cart is empty"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"space-y-3 mb-4",children:f.map($=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:$.name}),s.jsxs("p",{className:"text-xs text-gray-600",children:["$",$.price.toFixed(2)," each"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>he($.id,$.quantity-1),className:"w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center hover:bg-gray-300 text-sm",children:"-"}),s.jsx("span",{className:"w-8 text-center text-sm",children:$.quantity}),s.jsx("button",{onClick:()=>he($.id,$.quantity+1),className:"w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center hover:bg-gray-300 text-sm",children:"+"}),s.jsx("button",{onClick:()=>oe($.id),className:"ml-2 text-red-600 hover:text-red-700 text-xs",children:"Remove"})]})]},$.id))}),s.jsxs("div",{className:"border-t pt-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Subtotal:"}),s.jsxs("span",{children:["$",re.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Shipping:"}),s.jsx("span",{children:"$0.00"})]}),s.jsx("div",{className:"border-t pt-2",children:s.jsxs("div",{className:"flex justify-between font-medium",children:[s.jsx("span",{children:"Total:"}),s.jsxs("span",{children:["$",re.toFixed(2)]})]})})]})]})}),f.length>0&&s.jsx("div",{className:"p-4 border-t",children:s.jsx("button",{onClick:()=>r(`/user/${c}/delivery-time`,{state:{cart:f}}),className:"w-full px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Proceed to Checkout"})})]})})]}):s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-600 mb-4",children:"User Not Found"}),s.jsx("p",{className:"text-gray-500",children:"The requested user could not be found."})]})})}function uw({isOpen:c,onClose:r,onSubmit:n,user:i}){const[o,u]=_.useState({subject:"",category:"",priority:"medium",description:""}),[m,f]=_.useState(!1),[g,x]=_.useState(""),y=j=>{const{name:S,value:D}=j.target;u(C=>({...C,[S]:D}))},v=async j=>{if(j.preventDefault(),x(""),!o.subject.trim()){x("Please enter a subject");return}if(!o.category){x("Please select a category");return}if(!o.description.trim()){x("Please enter a description");return}f(!0);try{const S={userId:i.id,userName:i.name,userEmail:i.email,subject:o.subject.trim(),category:o.category,priority:o.priority,description:o.description.trim()};await n(S),u({subject:"",category:"",priority:"medium",description:""}),r()}catch{x("Failed to submit ticket. Please try again.")}finally{f(!1)}},w=()=>{m||(u({subject:"",category:"",priority:"medium",description:""}),x(""),r())};return c?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Create Support Ticket"}),s.jsx("button",{onClick:w,disabled:m,className:"p-3 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 touch-manipulation min-h-[44px] min-w-[44px] flex items-center justify-center",children:s.jsx(Kj,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:v,className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[g&&s.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[s.jsx(Ai,{className:"w-5 h-5 text-red-500"}),s.jsx("span",{className:"text-red-700 text-sm",children:g})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject *"}),s.jsx("input",{type:"text",name:"subject",value:o.subject,onChange:y,placeholder:"Brief description of your issue",className:"w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 touch-manipulation",disabled:m})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),s.jsxs("select",{name:"category",value:o.category,onChange:y,className:"w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 touch-manipulation",disabled:m,children:[s.jsx("option",{value:"",children:"Select a category"}),s.jsx("option",{value:"order",children:"Order Issues"}),s.jsx("option",{value:"shipping",children:"Shipping & Delivery"}),s.jsx("option",{value:"product",children:"Product Quality"}),s.jsx("option",{value:"account",children:"Account Access"}),s.jsx("option",{value:"payment",children:"Payment Issues"}),s.jsx("option",{value:"technical",children:"Technical Issues"}),s.jsx("option",{value:"other",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),s.jsxs("select",{name:"priority",value:o.priority,onChange:y,className:"w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 touch-manipulation",disabled:m,children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),s.jsx("textarea",{name:"description",value:o.description,onChange:y,rows:6,placeholder:"Please provide detailed information about your issue. Include order numbers if applicable, steps to reproduce the problem, and any relevant details...",className:"w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none touch-manipulation",disabled:m})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Ticket Information"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Submitted by:"}),s.jsx("p",{className:"font-medium text-gray-900",children:i.name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Email:"}),s.jsx("p",{className:"font-medium text-gray-900",children:i.email})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:w,disabled:m,className:"px-4 py-3 text-base text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50 touch-manipulation min-h-[48px]",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:m,className:"px-4 py-3 text-base bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 flex items-center justify-center space-x-2 touch-manipulation min-h-[48px]",children:m?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Submitting..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Bj,{className:"w-4 h-4"}),s.jsx("span",{children:"Submit Ticket"})]})})]})]})]})}):null}function hw(){const{id:c}=os(),{users:r}=Yt(),{user:n,isLoading:i}=cs(),[o,u]=_.useState(!1),[m,f]=_.useState([]),[g,x]=_.useState(!0),[y,v]=_.useState(""),[w,j]=_.useState(new Set),S=n||r.find(E=>E.id===c);_.useEffect(()=>{const E=()=>{try{const G=localStorage.getItem("adminSettings");if(G){const ie=JSON.parse(G);ie.phoneNumber&&v(ie.phoneNumber)}}catch(G){console.error("Failed to load admin phone from settings:",G)}};E();const A=G=>{G.detail&&G.detail.phoneNumber&&v(G.detail.phoneNumber)},te=G=>{G.key==="adminSettings"&&E()};return window.addEventListener("adminSettingsUpdated",A),window.addEventListener("storage",te),()=>{window.removeEventListener("adminSettingsUpdated",A),window.removeEventListener("storage",te)}},[]),_.useEffect(()=>{const E=localStorage.getItem("supportTickets");if(E){const A=JSON.parse(E),te=S?.id||c,G=A.filter(ie=>ie.userId===te);f(G.sort((ie,V)=>new Date(V.createdAt).getTime()-new Date(ie.createdAt).getTime()))}x(!1)},[S?.id,c]);const D=async E=>{const A={...E,id:`TICKET-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,status:"open",createdAt:new Date().toISOString()},te=JSON.parse(localStorage.getItem("supportTickets")||"[]");te.push(A),localStorage.setItem("supportTickets",JSON.stringify(te)),f(G=>[A,...G])},C=E=>{j(A=>{const te=new Set(A);return te.has(E)?te.delete(E):te.add(E),te})},q=E=>{switch(E){case"open":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Open"});case"in_progress":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"In Progress"});case"resolved":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Resolved"});case"closed":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Closed"});default:return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:E})}},K=E=>{switch(E){case"urgent":return s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800",children:"Urgent"});case"high":return s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-orange-100 text-orange-800",children:"High"});case"medium":return s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-yellow-100 text-yellow-800",children:"Medium"});case"low":return s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800",children:"Low"});default:return s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800",children:E})}},R=E=>new Date(E).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return i&&!S?s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"Loading..."})]})}):S?s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Support Center"}),s.jsx("p",{className:"text-gray-600",children:"Get help with your orders and account issues"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(ug,{className:"w-6 h-6 text-blue-600"})}),s.jsx("h3",{className:"ml-3 text-lg font-medium text-gray-900",children:"FAQ"})]}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Find answers to common questions about ordering, shipping, and returns."}),s.jsx("button",{className:"text-blue-600 hover:text-blue-700 font-medium",children:"Browse FAQ "})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(jd,{className:"w-6 h-6 text-green-600"})}),s.jsx("h3",{className:"ml-3 text-lg font-medium text-gray-900",children:"Contact Admin"})]}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Get in touch with our admin team for immediate assistance."}),y?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(jd,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"text-green-600 font-medium",children:y})]}),s.jsx("a",{href:`tel:${y}`,className:"inline-block text-green-600 hover:text-green-700 font-medium",children:"Call Now "})]}):s.jsx("p",{className:"text-gray-400 text-sm italic",children:"No contact number available"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx(qa,{className:"w-6 h-6 text-purple-600"})}),s.jsx("h3",{className:"ml-3 text-lg font-medium text-gray-900",children:"New Ticket"})]}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Create a new support ticket for specific issues or questions."}),s.jsx("button",{onClick:()=>u(!0),className:"text-purple-600 hover:text-purple-700 font-medium",children:"Create Ticket "})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"My Support Tickets"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Track your support requests and responses"})]}),s.jsxs("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors flex items-center space-x-2",children:[s.jsx(qa,{className:"w-4 h-4"}),s.jsx("span",{children:"New Ticket"})]})]})}),s.jsx("div",{className:"divide-y divide-gray-200",children:g?s.jsxs("div",{className:"p-6 text-center",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-emerald-600 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500",children:"Loading tickets..."})]}):m.length>0?m.map(E=>{const A=w.has(E.id);return s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"flex items-start justify-between mb-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:E.subject}),q(E.status),K(E.priority)]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Ticket #",E.id.slice(-8)," - ",E.category]})]})}),s.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:E.description}),s.jsx("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx(Pr,{className:"w-4 h-4"}),s.jsxs("span",{children:["Created: ",R(E.createdAt)]})]}),E.adminResponseDate&&s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx(Di,{className:"w-4 h-4"}),s.jsxs("span",{children:["Replied: ",R(E.adminResponseDate)]})]})]})}),A&&s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4 border border-gray-200",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Full Details"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ticket ID:"}),s.jsx("span",{className:"text-sm text-gray-600 ml-2",children:E.id})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Category:"}),s.jsx("span",{className:"text-sm text-gray-600 ml-2",children:E.category})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Priority:"}),s.jsx("span",{className:"ml-2",children:K(E.priority)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Status:"}),s.jsx("span",{className:"ml-2",children:q(E.status)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Description:"}),s.jsx("div",{className:"text-sm text-gray-600 mt-1 whitespace-pre-wrap",children:E.description})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Created:"}),s.jsx("span",{className:"text-sm text-gray-600 ml-2",children:R(E.createdAt)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Contact:"}),s.jsx("span",{className:"text-sm text-gray-600 ml-2",children:E.userEmail})]})]})]}),E.adminResponse&&s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(al,{className:"w-4 h-4 text-emerald-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Admin Response"})]}),s.jsx("p",{className:"text-gray-700 text-sm",children:E.adminResponse})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:()=>C(E.id),className:"text-emerald-600 hover:text-emerald-700 text-sm font-medium flex items-center space-x-1",children:[s.jsx("span",{children:A?"Hide Details":"View Details"}),s.jsx("svg",{className:`w-4 h-4 transform transition-transform ${A?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),E.status==="open"&&s.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Reply"})]})]},E.id)}):s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(qa,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500 mb-2",children:"No support tickets yet"}),s.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Create your first support ticket to get help"}),s.jsx("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Create Your First Ticket"})]})})]}),s.jsx(uw,{isOpen:o,onClose:()=>u(!1),onSubmit:D,user:S})]}):s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-600 mb-4",children:"User Not Found"}),s.jsx("p",{className:"text-gray-500",children:"The requested user could not be found."})]})})}function mw(){const{id:c}=os(),{users:r,updateUser:n}=Yt(),{user:i,isLoading:o}=cs(),[u,m]=_.useState(!1),[f,g]=_.useState(!1),[x,y]=_.useState(""),v=i||r.find(K=>K.id===c),[w,j]=_.useState({name:v?.name||"",email:v?.email||"",phoneNumber:v?.phoneNumber||"",address:v?.address||"",username:v?.username||"",password:"",confirmPassword:"",profileImage:v?.profileImage||""});_.useEffect(()=>{v&&j({name:v.name,email:v.email,phoneNumber:v.phoneNumber,address:v.address,username:v.username,password:"",confirmPassword:"",profileImage:v.profileImage||""})},[v]);const S=K=>{const{name:R,value:E}=K.target;j(A=>({...A,[R]:E}))},D=K=>{const R=K.target.files?.[0];if(R){const E=new FileReader;E.onload=A=>{const te=A.target?.result;j(G=>({...G,profileImage:te}))},E.readAsDataURL(R)}},C=async()=>{if(!v)return;if(!w.name||!w.email||!w.username){y("Please fill in all required fields.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w.email)){y("Please enter a valid email address.");return}if(w.password){if(w.password.length<6){y("Password must be at least 6 characters long.");return}if(w.password!==w.confirmPassword){y("Passwords do not match.");return}}g(!0),y("");try{const R={name:w.name,email:w.email,phoneNumber:w.phoneNumber,address:w.address,username:w.username,profileImage:w.profileImage||void 0};w.password&&(R.password=w.password),n(v.id,R),j(E=>({...E,password:"",confirmPassword:""})),m(!1),y("Profile updated successfully!"),setTimeout(()=>y(""),3e3)}catch{y("Failed to update profile. Please try again.")}finally{g(!1)}},q=()=>{v&&j({name:v.name,email:v.email,phoneNumber:v.phoneNumber,address:v.address,username:v.username,password:"",confirmPassword:"",profileImage:v.profileImage||""}),m(!1),y("")};return o&&!v?s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"Loading..."})]})}):v?s.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Account Settings"}),s.jsx("p",{className:"text-gray-600",children:"Manage your profile information and preferences"})]}),s.jsx("div",{className:"flex space-x-3",children:u?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:q,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:C,disabled:f,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center space-x-2",children:f?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Saving..."})]}):s.jsx("span",{children:"Save Changes"})})]}):s.jsx("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Edit Profile"})})]}),x&&s.jsx("div",{className:`p-4 rounded-lg ${x.includes("successfully")?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"}`,children:x}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Profile Picture"}),s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsxs("div",{className:"relative z-0",children:[s.jsx("div",{className:"relative w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:w.profileImage?s.jsx("img",{src:w.profileImage,alt:"Profile",className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-16 h-16 bg-gray-400 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-2xl font-medium",children:v.name.charAt(0).toUpperCase()})})}),u&&s.jsx("label",{htmlFor:"profile-image-input",className:"absolute bottom-2 right-2 p-2 bg-emerald-600 rounded-full cursor-pointer hover:bg-emerald-700 transition-colors",children:s.jsxs("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),s.jsx("input",{id:"profile-image-input",type:"file",accept:"image/*",onChange:D,className:"hidden",disabled:!u})]}),u&&s.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Click the camera icon to upload a new profile picture"})]})]})}),s.jsxs("div",{className:"lg:col-span-2",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Profile Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),s.jsx("input",{type:"text",name:"name",value:w.name,onChange:S,disabled:!u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 disabled:bg-gray-50 disabled:text-gray-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),s.jsx("input",{type:"email",name:"email",value:w.email,onChange:S,disabled:!u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 disabled:bg-gray-50 disabled:text-gray-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),s.jsx("input",{type:"tel",name:"phoneNumber",value:w.phoneNumber,onChange:S,disabled:!u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 disabled:bg-gray-50 disabled:text-gray-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username *"}),s.jsx("input",{type:"text",name:"username",value:w.username,onChange:S,disabled:!u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 disabled:bg-gray-50 disabled:text-gray-500"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),s.jsx("textarea",{name:"address",value:w.address,onChange:S,disabled:!u,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 disabled:bg-gray-50 disabled:text-gray-500"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mt-6",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Change Password"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),s.jsx("input",{type:"password",name:"password",value:w.password,onChange:S,disabled:!u,placeholder:"Leave blank to keep current password",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 disabled:bg-gray-50 disabled:text-gray-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),s.jsx("input",{type:"password",name:"confirmPassword",value:w.confirmPassword,onChange:S,disabled:!u,placeholder:"Confirm new password",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 disabled:bg-gray-50 disabled:text-gray-500"})]})]}),u&&s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Password must be at least 6 characters long. Leave blank to keep your current password."})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mt-6",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Account Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"User ID:"}),s.jsx("span",{className:"ml-2 font-medium",children:v.id})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Role:"}),s.jsx("span",{className:"ml-2 font-medium capitalize",children:v.role||"user"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Member Since:"}),s.jsx("span",{className:"ml-2 font-medium",children:new Date().toLocaleDateString()})]})]})]})]})]})]}):s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-600 mb-4",children:"User Not Found"}),s.jsx("p",{className:"text-gray-500",children:"The requested user could not be found."})]})})}const La=()=>({adminEmail:"admin@gmail.com",phoneNumber:"",enableEmailNotifications:!0,enableSMSNotifications:!1,notificationEmail:"",paypalEmail:"",profileImage:"",displayName:"Admin User",businessHours:{monday:{isOpen:!0,openTime:"09:00",closeTime:"17:00"},tuesday:{isOpen:!0,openTime:"09:00",closeTime:"17:00"},wednesday:{isOpen:!0,openTime:"09:00",closeTime:"17:00"},thursday:{isOpen:!0,openTime:"09:00",closeTime:"17:00"},friday:{isOpen:!0,openTime:"09:00",closeTime:"17:00"},saturday:{isOpen:!0,openTime:"10:00",closeTime:"22:00"},sunday:{isOpen:!1,openTime:"09:00",closeTime:"17:00"}},deliverySettings:{enabled:!0,deliverySlotDuration:120,advanceNoticeHours:24,maxDaysInAdvance:7,unavailableDates:[]}});class Gt{static async getSettings(){const{data:r,error:n}=await ae.from("admin_settings").select("*").single();if(n)throw console.error("Failed to load settings from Supabase:",n),n;if(!r)throw new Error("No admin settings found");return{adminEmail:r.admin_email,phoneNumber:r.phone_number||"",enableEmailNotifications:r.enable_email_notifications,enableSMSNotifications:r.enable_sms_notifications,notificationEmail:r.notification_email||"",paypalEmail:r.paypal_email||"",profileImage:r.profile_image||"",displayName:r.display_name||"Admin User",businessHours:r.business_hours||La().businessHours,deliverySettings:r.delivery_settings||La().deliverySettings}}static async updateSettings(r){const{data:n,error:i}=await ae.from("admin_settings").select("id").single();if(i)throw i;const o={admin_email:r.adminEmail,phone_number:r.phoneNumber||null,enable_email_notifications:r.enableEmailNotifications,enable_sms_notifications:r.enableSMSNotifications,notification_email:r.notificationEmail||null,paypal_email:r.paypalEmail||null,profile_image:r.profileImage||null,display_name:r.displayName||null,business_hours:r.businessHours,delivery_settings:r.deliverySettings},{error:u}=await ae.from("admin_settings").update(o).eq("id",n.id);if(u)throw u}static async resetToDefaults(){const r=La();await this.updateSettings(r)}static async initializeSettings(){const{error:r}=await ae.from("admin_settings").select("id").single();if(r&&r.code==="PGRST116"){const n=La(),i={admin_email:n.adminEmail,phone_number:n.phoneNumber||null,enable_email_notifications:n.enableEmailNotifications,enable_sms_notifications:n.enableSMSNotifications,notification_email:n.notificationEmail||null,paypal_email:n.paypalEmail||null,profile_image:n.profileImage||null,display_name:n.displayName||null,business_hours:n.businessHours,delivery_settings:n.deliverySettings},{error:o}=await ae.from("admin_settings").insert([i]);if(o)throw o}else if(r)throw r}static async updateAdminAccount(r){const{data:n,error:i}=await ae.auth.getUser();if(i||!n.user)throw new Error("Failed to get current user");const{error:o}=await ae.auth.signInWithPassword({email:n.user.email,password:r.currentPassword});if(o)throw new Error("Current password is incorrect");if(r.newEmail){const{error:u}=await ae.auth.updateUser({email:r.newEmail});if(u)throw new Error(`Failed to update email: ${u.message}`);const{error:m}=await ae.from("users").update({email:r.newEmail}).eq("email",n.user.email);if(m)throw new Error(`Failed to update user email in database: ${m.message}`)}if(r.newUsername){const{data:u,error:m}=await ae.from("users").select("id").eq("username",r.newUsername).neq("email",n.user.email).single();if(m&&m.code!=="PGRST116")throw new Error("Failed to check username availability");if(u)throw new Error("Username is already taken");const{error:f}=await ae.from("users").update({username:r.newUsername}).eq("email",n.user.email);if(f)throw new Error(`Failed to update username: ${f.message}`)}if(r.newPassword){const{error:u}=await ae.auth.updateUser({password:r.newPassword});if(u)throw new Error(`Failed to update password: ${u.message}`)}}static async getCurrentAdminUser(){const{data:r,error:n}=await ae.auth.getUser();if(n||!r.user)return null;const{data:i,error:o}=await ae.from("users").select("username, email").eq("email",r.user.email).single();return o||!i?{email:r.user.email,username:""}:{email:i.email,username:i.username}}}class fw{static async getAvailableDeliverySlots(){try{const r=await Gt.getSettings();return r.deliverySettings.enabled?this.generateDeliverySlots(r):[]}catch(r){return console.error("Error loading admin settings for delivery:",r),this.generateFallbackSlots()}}static generateDeliverySlots(r){const n=[],i=new Date,{deliverySettings:o,businessHours:u}=r,m=new Date(i);m.setHours(m.getHours()+o.advanceNoticeHours);for(let f=0;f<=o.maxDaysInAdvance;f++){const g=new Date(i);if(g.setDate(i.getDate()+f),g<m)continue;const x=g.toISOString().split("T")[0];if(o.unavailableDates.includes(x))continue;const y=g.getDay(),v=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][y],w=u[v];if(!w.isOpen)continue;const j=this.generateTimeSlotsForDay(x,w.openTime,w.closeTime,o.deliverySlotDuration,g,m);n.push(...j)}return n}static generateTimeSlotsForDay(r,n,i,o,u,m){const f=[],[g,x]=n.split(":").map(Number),[y,v]=i.split(":").map(Number),w=new Date(u);w.setHours(g,x,0,0);const j=new Date(u);j.setHours(y,v,0,0);const S=new Date(w);for(;S<j;){const D=new Date(S);if(D.setMinutes(D.getMinutes()+o),D>j)break;const C=S.toTimeString().slice(0,5),q=S>=m,K=q?void 0:"Too soon to book";f.push({date:r,time:C,available:q,reason:K}),S.setMinutes(S.getMinutes()+o)}return f}static generateFallbackSlots(){const r=[],n=new Date;for(let i=1;i<=7;i++){const o=new Date(n);o.setDate(n.getDate()+i);const u=o.toISOString().split("T")[0];["10:00","12:00","14:00","16:00","18:00","20:00"].forEach(f=>{r.push({date:u,time:f,available:Math.random()>.2})})}return r}static async isSlotAvailable(r,n){return(await this.getAvailableDeliverySlots()).find(u=>u.date===r&&u.time===n)?.available||!1}static async getDeliverySlotsGroupedByDate(){const r=await this.getAvailableDeliverySlots(),n={};return r.forEach(i=>{n[i.date]||(n[i.date]=[]),n[i.date].push(i)}),n}}function gw(){const{id:c}=os(),r=Ft(),n=is(),{users:i}=Yt(),{user:o,isLoading:u}=cs(),[m,f]=_.useState(""),[g,x]=_.useState(""),y="delivery_slots_loaded",v=sessionStorage.getItem(y)==="true",[w,j]=_.useState(()=>Cs.getDeliverySlotsCache()||[]),[S,D]=_.useState(n.state?.cart||[]),C=o||i.find(re=>re.id===c),[q,K]=_.useState(!v),R=S.reduce((re,pe)=>re+pe.price*pe.quantity,0);_.useEffect(()=>{const re=async()=>{try{const pe=await fw.getAvailableDeliverySlots();j(pe),Cs.setDeliverySlotsCache(pe),sessionStorage.setItem(y,"true")}catch(pe){console.error("Error loading delivery slots:",pe),j([])}finally{K(!1)}};K(!v),re()},[]);const E=re=>{f(re),x("")},A=re=>{x(re)},te=(re,pe)=>{if(pe<=0){D(Y=>Y.filter(T=>T.id!==re));return}D(Y=>Y.map(T=>T.id===re?{...T,quantity:pe}:T))},G=re=>{const pe=S.find(Y=>Y.id===re);pe&&te(re,pe.quantity+1)},ie=re=>{const pe=S.find(Y=>Y.id===re);pe&&te(re,pe.quantity-1)},V=()=>{if(!m||!g){alert("Please select both a date and time for delivery.");return}r(`/user/${c}/payment`,{state:{cart:S,deliveryDate:m,deliveryTime:g}})},ue=()=>{r(`/user/${c}/inventory`,{state:{cart:S}})};if(u&&!C)return s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"Loading..."})]})});if(!C)return s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-600 mb-4",children:"User Not Found"}),s.jsx("p",{className:"text-gray-500",children:"The requested user could not be found."})]})});if(S.length===0)return s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-600 mb-4",children:"Empty Cart"}),s.jsx("p",{className:"text-gray-500",children:"Your cart is empty. Please add items before proceeding."}),s.jsx("button",{onClick:()=>r(`/user/${c}/inventory`),className:"mt-4 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Back to Inventory"})]})});const oe=[...new Set(w.map(re=>re.date))],he=w.filter(re=>re.date===m&&re.available);return!v&&q&&w.length===0?s.jsx("div",{className:"max-w-4xl mx-auto p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading delivery options..."})]})}):w.length===0?s.jsx("div",{className:"max-w-4xl mx-auto p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-600 mb-4",children:"Delivery Not Available"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Sorry, delivery is currently not available. Please contact us for more information."}),s.jsx("button",{onClick:()=>r(`/user/${c}/inventory`),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Back to Inventory"})]})}):s.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Select Delivery Time"}),s.jsx("p",{className:"text-gray-600",children:"Choose when you'd like your order delivered"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Order Total"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",R.toFixed(2)]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Summary"}),s.jsx("div",{className:"space-y-3",children:S.map(re=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center overflow-hidden",children:re.imageUrl?s.jsx("img",{src:re.imageUrl,alt:re.name,className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-gray-500 text-xs",children:"No Image"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:re.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["$",re.price.toFixed(2)," each"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>ie(re.id),className:"w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center hover:bg-gray-300 text-sm",children:"-"}),s.jsx("input",{type:"number",min:"1",value:re.quantity,onChange:pe=>te(re.id,parseInt(pe.target.value)||1),className:"w-12 text-center text-sm border border-gray-300 rounded px-1 py-1"}),s.jsx("button",{onClick:()=>G(re.id),className:"w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center hover:bg-gray-300 text-sm",children:"+"})]}),s.jsxs("p",{className:"font-medium text-gray-900 w-16 text-right",children:["$",(re.price*re.quantity).toFixed(2)]})]})]},re.id))}),s.jsx("div",{className:"border-t pt-4 mt-4",children:s.jsxs("div",{className:"flex justify-between font-medium",children:[s.jsx("span",{children:"Total:"}),s.jsxs("span",{children:["$",R.toFixed(2)]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Select Delivery Date"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3",children:oe.map(re=>{const pe=new Date(re),Y=m===re,T=pe.toDateString()===new Date().toDateString();return s.jsxs("button",{onClick:()=>E(re),className:`p-4 rounded-lg border-2 text-center transition-colors ${Y?"border-emerald-500 bg-emerald-50 text-emerald-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:[s.jsx("div",{className:"text-sm font-medium",children:pe.toLocaleDateString("en-US",{weekday:"short"})}),s.jsx("div",{className:"text-lg font-bold",children:pe.getDate()}),s.jsx("div",{className:"text-xs text-gray-500",children:pe.toLocaleDateString("en-US",{month:"short"})}),T&&s.jsx("div",{className:"text-xs text-emerald-600 font-medium mt-1",children:"Today"})]},re)})})]}),m&&s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:["Select Delivery Time for ",new Date(m).toLocaleDateString()]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:he.map(re=>s.jsxs("button",{onClick:()=>A(re.time),className:`p-4 rounded-lg border-2 text-center transition-colors ${g===re.time?"border-emerald-500 bg-emerald-50 text-emerald-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:[s.jsx("div",{className:"text-lg font-medium",children:re.time}),s.jsx("div",{className:"text-sm text-gray-500",children:"Available"})]},`${m}-${re.time}`))}),he.length===0&&s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No available time slots for this date. Please select a different date."})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("button",{onClick:ue,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Back to Cart"}),s.jsx("button",{onClick:V,disabled:!m||!g,className:"px-6 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Continue to Payment"})]})]})}function xw(){const{id:c}=os(),r=Ft(),n=is(),{users:i}=Yt(),{user:o,isLoading:u}=cs(),[m,f]=_.useState("credit"),[g,x]=_.useState(""),[y,v]=_.useState(""),[w,j]=_.useState(""),[S,D]=_.useState(""),[C,q]=_.useState(!1),[K,R]=_.useState(""),[E,A]=_.useState(!1),[te,G]=_.useState(!0),ie=o||i.find(Y=>Y.id===c),V=n.state?.cart||[],ue=n.state?.deliveryDate,oe=n.state?.deliveryTime,he=V.reduce((Y,T)=>Y+T.price*T.quantity,0);_.useEffect(()=>{(async()=>{try{G(!0);const T=await Gt.getSettings();A(!T.paypalEmail||T.paypalEmail.trim()==="")}catch(T){console.error("Error loading admin settings:",T),A(!0)}finally{G(!1)}})()},[]);const re=async()=>{if(!ie)return;if(!E){if(!g||!y||!w||!S){R("Please fill in all payment fields.");return}if(g.length<13||g.length>19){R("Please enter a valid card number.");return}if(w.length<3||w.length>4){R("Please enter a valid CVV.");return}}if(q(!0),R(""),E)await new Promise(T=>setTimeout(T,1e3));else if(await new Promise(W=>setTimeout(W,2e3)),!(Math.random()>.1)){R("Payment failed. Please check your card details and try again."),q(!1);return}const Y={userId:ie.id,items:V.map(T=>({menuItemId:T.id,menuItemName:T.name,menuItemIngredients:T.ingredients,unitSize:T.unitSize,abv:T.abv,price:T.price,quantity:T.quantity})),total:he,paymentMethod:E?"Pay on Delivery":m==="credit"?"Credit Card":"Debit Card",deliveryDate:ue,deliveryTime:oe,deliveryAddress:ie.address||"",notes:""};console.log("Creating order with data:",Y);try{const T=await Br.createOrder(Y);if(T){console.log("Order created successfully:",T);try{await qr.clearCart(c),console.log("Cart cleared successfully after order creation")}catch(W){console.error("Error clearing cart after order creation:",W)}r(`/user/${c}/order-success`,{state:{orderId:T.id,orderNumber:T.orderNumber,orderTotal:he,deliveryDate:ue,deliveryTime:oe,paymentMethod:T.paymentMethod}})}else console.error("Order creation returned null"),R("Failed to save order. Please try again.")}catch(T){console.error("Error creating order:",T),R("Failed to save order. Please check your connection and try again.")}q(!1)},pe=()=>{r(`/user/${c}/delivery-time`,{state:{cart:V,deliveryDate:ue,deliveryTime:oe}})};return u&&!ie?s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"Loading..."})]})}):ie?V.length===0?s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-600 mb-4",children:"Empty Cart"}),s.jsx("p",{className:"text-gray-500",children:"Your cart is empty. Please add items before proceeding."}),s.jsx("button",{onClick:()=>r(`/user/${c}/inventory`),className:"mt-4 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Back to Inventory"})]})}):s.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Order Total"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",he.toFixed(2)]})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Summary"}),s.jsx("div",{className:"space-y-3",children:V.map(Y=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center overflow-hidden",children:Y.imageUrl?s.jsx("img",{src:Y.imageUrl,alt:Y.name,className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-gray-500 text-xs",children:"No Image"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:Y.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Qty: ",Y.quantity]})]})]}),s.jsxs("p",{className:"font-medium text-gray-900",children:["$",(Y.price*Y.quantity).toFixed(2)]})]},Y.id))}),s.jsxs("div",{className:"border-t pt-4 mt-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Subtotal:"}),s.jsxs("span",{children:["$",he.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Delivery:"}),s.jsx("span",{children:"$0.00"})]}),s.jsxs("div",{className:"flex justify-between font-medium text-lg",children:[s.jsx("span",{children:"Total:"}),s.jsxs("span",{children:["$",he.toFixed(2)]})]})]}),s.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Delivery Details"}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",new Date(ue).toLocaleDateString()]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Time: ",oe]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Payment Information"}),K&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-red-600 text-sm",children:K})}),te?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-emerald-600 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"ml-2 text-gray-600",children:"Loading payment options..."})]}):E?s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"p-4 bg-emerald-50 border border-emerald-200 rounded-lg",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-6 h-6 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-emerald-900",children:"Pay on Delivery"}),s.jsx("p",{className:"text-sm text-emerald-700",children:"You'll pay when your order is delivered"})]})]})}),s.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Order Confirmation"}),s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["By confirming this order, you agree to pay ",s.jsxs("strong",{children:["$",he.toFixed(2)]})," upon delivery."]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Delivery Date: ",s.jsx("strong",{children:new Date(ue).toLocaleDateString()}),s.jsx("br",{}),"Delivery Time: ",s.jsx("strong",{children:oe})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",value:"credit",checked:m==="credit",onChange:Y=>f(Y.target.value),className:"mr-2"}),s.jsx("span",{className:"text-sm",children:"Credit Card"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",value:"debit",checked:m==="debit",onChange:Y=>f(Y.target.value),className:"mr-2"}),s.jsx("span",{className:"text-sm",children:"Debit Card"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Card Number"}),s.jsx("input",{type:"text",value:g,onChange:Y=>x(Y.target.value.replace(/\D/g,"")),placeholder:"1234 5678 9012 3456",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",maxLength:19})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name on Card"}),s.jsx("input",{type:"text",value:S,onChange:Y=>D(Y.target.value),placeholder:"John Doe",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Date"}),s.jsx("input",{type:"text",value:y,onChange:Y=>v(Y.target.value.replace(/\D/g,"").slice(0,4)),placeholder:"MM/YY",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",maxLength:4})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CVV"}),s.jsx("input",{type:"text",value:w,onChange:Y=>j(Y.target.value.replace(/\D/g,"")),placeholder:"123",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",maxLength:4})]})]}),s.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsx("p",{className:"text-blue-600 text-sm",children:" This is a mock payment system. No real charges will be made."})})]})]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("button",{onClick:pe,disabled:C,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Back"}),s.jsx("button",{onClick:re,disabled:C||te,className:"px-6 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center space-x-2",children:C?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Processing..."})]}):te?s.jsx("span",{children:"Loading..."}):E?s.jsx("span",{children:"Confirm Order"}):s.jsxs("span",{children:["Pay $",he.toFixed(2)]})})]})]}):s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-600 mb-4",children:"User Not Found"}),s.jsx("p",{className:"text-gray-500",children:"The requested user could not be found."})]})})}function pw(){const{id:c}=os(),r=Ft(),n=is(),{users:i}=Yt(),{user:o,isLoading:u}=cs(),m=o||i.find(j=>j.id===c),f=n.state?.orderId,g=n.state?.orderNumber,x=n.state?.orderTotal,y=n.state?.deliveryDate,v=n.state?.deliveryTime,w=n.state?.paymentMethod;return _.useEffect(()=>{const j=setTimeout(()=>{r(`/user/${c}/orders`)},1e4);return()=>clearTimeout(j)},[r,c]),u&&!m?s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"Loading..."})]})}):m?f?s.jsx("div",{className:"max-w-2xl mx-auto p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-6",children:s.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Order Confirmed!"}),s.jsx("p",{className:"text-gray-600 mb-8",children:"Thank you for your order. We'll start preparing it right away."}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Details"}),s.jsxs("div",{className:"space-y-3 text-left",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Order Number:"}),s.jsx("span",{className:"font-medium text-gray-900",children:g||f?.slice(-8)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),s.jsxs("span",{className:"font-medium text-gray-900",children:["$",x.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Delivery Date:"}),s.jsx("span",{className:"font-medium text-gray-900",children:new Date(y).toLocaleDateString()})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Delivery Time:"}),s.jsx("span",{className:"font-medium text-gray-900",children:v})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Payment Method:"}),s.jsx("span",{className:"font-medium text-gray-900",children:w||"Credit Card"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Status:"}),s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:w==="Pay on Delivery"?"Confirmed":"Paid"})]})]})]}),s.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 mb-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"What's Next?"}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[s.jsx("p",{children:" We'll send you an email confirmation shortly"}),s.jsx("p",{children:" Your order will be processed and prepared for delivery"}),s.jsx("p",{children:" You can track your order status in the Orders section"}),s.jsx("p",{children:" We'll notify you when your order is out for delivery"}),w==="Pay on Delivery"&&s.jsxs("p",{children:[" ",s.jsxs("strong",{children:["Please have $",x.toFixed(2)," in cash ready for payment upon delivery"]})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[s.jsx("button",{onClick:()=>r(`/user/${c}/orders`),className:"px-6 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"View My Orders"}),s.jsx("button",{onClick:()=>r(`/user/${c}/inventory`),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Continue Shopping"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-6",children:"You'll be automatically redirected to your orders page in 10 seconds..."})]})}):s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-600 mb-4",children:"Invalid Order"}),s.jsx("p",{className:"text-gray-500",children:"No order information found."}),s.jsx("button",{onClick:()=>r(`/user/${c}/inventory`),className:"mt-4 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Back to Inventory"})]})}):s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-600 mb-4",children:"User Not Found"}),s.jsx("p",{className:"text-gray-500",children:"The requested user could not be found."})]})})}function yw({onClick:c}){return s.jsx("button",{onClick:c,"aria-label":"Open menu",className:"p-3 rounded-lg hover:bg-gray-100 touch-manipulation min-h-[44px] min-w-[44px] flex items-center justify-center",children:s.jsx(fg,{className:"h-6 w-6"})})}function vw({open:c,onClose:r}){const[n,i]=_.useState(""),[o,u]=_.useState("Admin User");return _.useEffect(()=>{const m=f=>f.key==="Escape"&&r();return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[r]),_.useEffect(()=>{(async()=>{try{const g=await Gt.getSettings();i(g.profileImage||""),u(g.displayName||"Admin User")}catch(g){console.error("Failed to load profile settings from Supabase:",g),i(""),u("Admin User")}})();const f=g=>{g.detail&&(g.detail.profileImage!==void 0&&i(g.detail.profileImage),g.detail.displayName!==void 0&&u(g.detail.displayName||"Admin User"))};return window.addEventListener("adminSettingsUpdated",f),()=>{window.removeEventListener("adminSettingsUpdated",f)}},[]),s.jsxs(s.Fragment,{children:[s.jsx("div",{onClick:r,className:`fixed inset-0 bg-black/50 transition-opacity z-40 ${c?"opacity-100":"opacity-0 pointer-events-none"}`}),s.jsxs("nav",{className:`fixed top-0 left-0 h-full w-72 sm:w-80 max-w-[85vw] bg-white shadow-lg transform transition-transform duration-300 ease-in-out z-50 ${c?"translate-x-0":"-translate-x-full"} flex flex-col pt-4 sm:pt-6 pb-safe-bottom`,children:[s.jsx("div",{className:"px-6 pb-6 border-b border-gray-200 mb-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:n?s.jsx("img",{src:n,alt:"Profile",className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-8 h-8 bg-gray-400 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-sm font-medium",children:"A"})})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:o}),s.jsx("p",{className:"text-sm text-gray-500",children:"Administrator"})]})]})}),s.jsxs("ul",{className:"px-4 sm:px-6 text-base sm:text-lg font-medium space-y-1",children:[s.jsx("li",{children:s.jsx(we,{to:"/admin/dashboard",onClick:r,className:"block py-3 px-2 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors touch-manipulation min-h-[48px] flex items-center",children:"Dashboard"})}),s.jsx("li",{children:s.jsx(we,{to:"/admin/users",onClick:r,className:"block py-3 px-2 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors touch-manipulation min-h-[48px] flex items-center",children:"Manage Users"})}),s.jsx("li",{children:s.jsx(we,{to:"/admin/orders",onClick:r,className:"block py-3 px-2 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors touch-manipulation min-h-[48px] flex items-center",children:"Orders"})}),s.jsx("li",{children:s.jsx(we,{to:"/admin/inventory",onClick:r,className:"block py-3 px-2 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors touch-manipulation min-h-[48px] flex items-center",children:"Inventory"})}),s.jsx("li",{children:s.jsx(we,{to:"/admin/analytics",onClick:r,className:"block py-3 px-2 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors touch-manipulation min-h-[48px] flex items-center",children:"Analytics"})}),s.jsx("li",{children:s.jsx(we,{to:"/admin/support",onClick:r,className:"block py-3 px-2 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors touch-manipulation min-h-[48px] flex items-center",children:"Support Tickets"})}),s.jsx("li",{children:s.jsx(we,{to:"/admin/settings",onClick:r,className:"block py-3 px-2 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors touch-manipulation min-h-[48px] flex items-center",children:"Settings"})})]}),s.jsx("div",{className:"mt-auto px-4 sm:px-6 pb-4 sm:pb-6",children:s.jsxs(we,{to:"/",onClick:r,className:"flex items-center space-x-2 py-3 px-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors touch-manipulation min-h-[48px]",children:[s.jsx(hg,{className:"h-5 w-5"}),s.jsx("span",{children:"Sign Out"})]})})]})]})}function bw(){const[c,r]=_.useState(!1);return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsxs("header",{className:"flex items-center h-14 sm:h-16 px-4 shadow-sm bg-white sticky top-0 z-30",children:[s.jsx(yw,{onClick:()=>r(!0)}),s.jsxs("h1",{className:"ml-4 text-sm sm:text-lg md:text-xl lg:text-2xl font-bold leading-tight",children:[s.jsx("span",{className:"block sm:hidden",children:"Admin Portal"}),s.jsx("span",{className:"hidden sm:block lg:hidden",children:"Cocktail Admin Portal"}),s.jsx("span",{className:"hidden lg:block",children:"Cocktails and Alcohol Ordering Admin Portal"})]})]}),s.jsx(vw,{open:c,onClose:()=>r(!1)}),s.jsxs("main",{className:"w-full",children:[s.jsx(P0,{})," "]})]})}class wi{static async migrateMenuItems(){try{if(console.log("Starting menu items migration..."),(await We.getAllMenuItems(!1)).length>0){console.log("Menu items already exist in database, skipping migration");return}const n=localStorage.getItem("menuItems");if(n){const o=JSON.parse(n);console.log(`Migrating ${o.length} live menu items...`);for(const u of o)await We.createMenuItem({name:u.name,ingredients:u.ingredients,unitSize:u.unitSize,abv:u.abv||0,price:u.price,imageUrl:u.imageUrl,category:u.category,inStock:u.inStock??!0,isDraft:!1})}const i=localStorage.getItem("draftMenuItems");if(i){const o=JSON.parse(i);console.log(`Migrating ${o.length} draft menu items...`);for(const u of o)await We.createMenuItem({name:u.name,ingredients:u.ingredients,unitSize:u.unitSize,abv:u.abv||0,price:u.price,imageUrl:u.imageUrl,category:u.category,inStock:u.inStock??!0,isDraft:!0})}console.log("Menu items migration completed successfully!")}catch(r){throw console.error("Error during menu items migration:",r),r}}static async createSampleMenuItems(){try{console.log("Creating sample menu items...");const r=[{name:"Cabernet Sauvignon",ingredients:"Premium red wine grapes",unitSize:"750ml",abv:13.5,price:24.99,imageUrl:"",category:"wine",inStock:!0,isDraft:!1},{name:"IPA Craft Beer",ingredients:"Hops, malt, yeast, water",unitSize:"355ml",abv:6.2,price:5.99,imageUrl:"",category:"beer",inStock:!0,isDraft:!1},{name:"Premium Vodka",ingredients:"Premium grain alcohol",unitSize:"750ml",abv:40,price:32.99,imageUrl:"",category:"spirits",inStock:!0,isDraft:!1}];for(const n of r)await We.createMenuItem(n);console.log("Sample menu items created successfully!")}catch(r){throw console.error("Error creating sample menu items:",r),r}}static async testConnection(){try{const{error:r}=await ae.from("users").select("count").limit(1);return r?(console.error("Database connection test failed:",r),!1):(console.log("Database connection test successful!"),!0)}catch(r){return console.error("Database connection test failed:",r),!1}}static async checkTablesExist(){try{const{error:r}=await ae.from("menu_items").select("count").limit(1),{error:n}=await ae.from("user_menus").select("count").limit(1),{error:i}=await ae.from("shopping_carts").select("count").limit(1);return r||n||i?(console.log("Some tables do not exist yet"),!1):(console.log("All required tables exist!"),!0)}catch(r){return console.error("Error checking tables:",r),!1}}}function jw(){const[c,r]=_.useState([]),[n,i]=_.useState({totalOrders:0,paidOrders:0,processedOrders:0,deliveredOrders:0,totalRevenue:0,averageOrderValue:0}),[o,u]=_.useState([]),[m,f]=_.useState(""),[g,x]=_.useState(""),[y,v]=_.useState(!1);_.useEffect(()=>{try{const A=JSON.parse(localStorage.getItem("orders")||"[]");r(A);const te=A.length,G=A.filter(he=>he.status==="paid").length,ie=A.filter(he=>he.status==="processed").length,V=A.filter(he=>he.status==="delivered").length,ue=A.reduce((he,re)=>he+re.total,0),oe=te>0?ue/te:0;i({totalOrders:te,paidOrders:G,processedOrders:ie,deliveredOrders:V,totalRevenue:ue,averageOrderValue:oe})}catch(A){console.error("Failed to load orders:",A)}},[]),_.useEffect(()=>{const A=localStorage.getItem("supportTickets");if(A)try{const te=JSON.parse(A);u(te)}catch(te){console.error("Failed to load support tickets:",te)}},[]),_.useEffect(()=>{(async()=>{try{const te=await Gt.getSettings();f(te.displayName)}catch(te){console.error("Failed to load admin settings:",te)}})()},[]);const w=c.filter(A=>A.status==="paid").slice(0,5),j=o.filter(A=>A.status==="open"&&new Date(A.createdAt)>new Date(Date.now()-10080*60*1e3)).length,S=o.filter(A=>A.status==="in_progress").length,D=async()=>{v(!0),x("Testing database connection...");try{const A=await wi.testConnection();x(A?" Database connection successful!":" Database connection failed")}catch(A){x(" Database connection failed: "+A)}finally{v(!1)}},C=async()=>{v(!0),x("Checking if tables exist...");try{const A=await wi.checkTablesExist();x(A?" All tables exist!":" Some tables are missing")}catch(A){x(" Error checking tables: "+A)}finally{v(!1)}},q=async()=>{v(!0),x("Migrating menu items from localStorage to Supabase...");try{await wi.migrateMenuItems(),x(" Migration completed successfully!")}catch(A){x(" Migration failed: "+A)}finally{v(!1)}},K=async()=>{v(!0),x("Creating sample menu items...");try{await wi.createSampleMenuItems(),x(" Sample data created successfully!")}catch(A){x(" Failed to create sample data: "+A)}finally{v(!1)}},R=A=>new Date(A).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),E=A=>{switch(A){case"paid":return s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full",children:"Paid"});case"processed":return s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:"Processed"});case"delivered":return s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-emerald-100 text-emerald-800 rounded-full",children:"Delivered"});default:return s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded-full",children:A})}};return s.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6 pb-safe-bottom",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg p-4 sm:p-6 text-white",children:s.jsx("div",{className:"flex justify-between items-start",children:s.jsxs("div",{children:[s.jsxs("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold mb-2",children:["Welcome, ",m,"!"]}),s.jsx("p",{className:"text-blue-100 text-sm sm:text-base",children:"Manage admin operations and track customer orders"})]})})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3 sm:gap-4",children:[s.jsx("div",{className:"bg-white p-4 sm:p-5 rounded-lg shadow-md border border-gray-200 min-h-[80px] flex items-center touch-manipulation",children:s.jsxs("div",{className:"flex items-center w-full",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg flex-shrink-0",children:s.jsx(Os,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600 truncate",children:"Total Orders"}),s.jsx("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:n.totalOrders})]})]})}),s.jsx("div",{className:"bg-white p-4 sm:p-5 rounded-lg shadow-md border border-gray-200 min-h-[80px] flex items-center touch-manipulation",children:s.jsxs("div",{className:"flex items-center w-full",children:[s.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg flex-shrink-0",children:s.jsx(Pr,{className:"w-5 h-5 text-yellow-600"})}),s.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600 truncate",children:"Pending Orders"}),s.jsx("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:n.paidOrders})]})]})}),s.jsx("div",{className:"bg-white p-4 sm:p-5 rounded-lg shadow-md border border-gray-200 min-h-[80px] flex items-center touch-manipulation",children:s.jsxs("div",{className:"flex items-center w-full",children:[s.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg flex-shrink-0",children:s.jsx(al,{className:"w-5 h-5 text-emerald-600"})}),s.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600 truncate",children:"Delivered"}),s.jsx("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:n.deliveredOrders})]})]})}),s.jsx("div",{className:"bg-white p-4 sm:p-5 rounded-lg shadow-md border border-gray-200 min-h-[80px] flex items-center touch-manipulation",children:s.jsxs("div",{className:"flex items-center w-full",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg flex-shrink-0",children:s.jsx(qa,{className:"w-5 h-5 text-purple-600"})}),s.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600 truncate",children:"New Support Tickets"}),s.jsx("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:j})]})]})}),s.jsx("div",{className:"bg-white p-4 sm:p-5 rounded-lg shadow-md border border-gray-200 min-h-[80px] flex items-center touch-manipulation",children:s.jsxs("div",{className:"flex items-center w-full",children:[s.jsx("div",{className:"p-2 bg-orange-100 rounded-lg flex-shrink-0",children:s.jsx(Di,{className:"w-5 h-5 text-orange-600"})}),s.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600 truncate",children:"In-Progress Tickets"}),s.jsx("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:S})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:[s.jsxs("div",{className:"px-4 sm:px-6 py-4 border-b border-gray-200",children:[s.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Quick Actions"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage your restaurant operations"})]}),s.jsx("div",{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[s.jsxs(we,{to:"/admin/inventory",className:"flex flex-col items-center p-4 sm:p-6 border border-gray-300 rounded-lg hover:bg-emerald-50 hover:border-emerald-300 transition-all duration-200 group touch-manipulation min-h-[120px] justify-center",children:[s.jsx("div",{className:"p-3 bg-emerald-100 rounded-lg mb-3 group-hover:bg-emerald-200 transition-colors",children:s.jsx(Ti,{className:"w-6 h-6 text-emerald-600"})}),s.jsx("span",{className:"font-medium text-gray-900 text-center text-sm sm:text-base",children:"Manage Menu"}),s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 text-center mt-1",children:"Update inventory"})]}),s.jsxs(we,{to:"/admin/orders",className:"flex flex-col items-center p-4 sm:p-6 border border-gray-300 rounded-lg hover:bg-blue-50 hover:border-blue-300 transition-all duration-200 group touch-manipulation min-h-[120px] justify-center",children:[s.jsx("div",{className:"p-3 bg-blue-100 rounded-lg mb-3 group-hover:bg-blue-200 transition-colors",children:s.jsx(Os,{className:"w-6 h-6 text-blue-600"})}),s.jsx("span",{className:"font-medium text-gray-900 text-center text-sm sm:text-base",children:"View Orders"}),s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 text-center mt-1",children:"Process orders"})]}),s.jsxs(we,{to:"/admin/users",className:"flex flex-col items-center p-4 sm:p-6 border border-gray-300 rounded-lg hover:bg-purple-50 hover:border-purple-300 transition-all duration-200 group touch-manipulation min-h-[120px] justify-center",children:[s.jsx("div",{className:"p-3 bg-purple-100 rounded-lg mb-3 group-hover:bg-purple-200 transition-colors",children:s.jsx(Zn,{className:"w-6 h-6 text-purple-600"})}),s.jsx("span",{className:"font-medium text-gray-900 text-center text-sm sm:text-base",children:"Manage Users"}),s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 text-center mt-1",children:"Customer accounts"})]}),s.jsxs(we,{to:"/admin/analytics",className:"flex flex-col items-center p-4 sm:p-6 border border-gray-300 rounded-lg hover:bg-orange-50 hover:border-orange-300 transition-all duration-200 group touch-manipulation min-h-[120px] justify-center",children:[s.jsx("div",{className:"p-3 bg-orange-100 rounded-lg mb-3 group-hover:bg-orange-200 transition-colors",children:s.jsx(dg,{className:"w-6 h-6 text-orange-600"})}),s.jsx("span",{className:"font-medium text-gray-900 text-center text-sm sm:text-base",children:"Analytics"}),s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 text-center mt-1",children:"View reports"})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:[s.jsxs("div",{className:"px-4 sm:px-6 py-4 border-b border-gray-200",children:[s.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Database Migration"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Migrate from localStorage to Supabase"})]}),s.jsxs("div",{className:"p-4 sm:p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[s.jsxs("button",{onClick:D,disabled:y,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(bi,{className:"w-4 h-4 inline mr-2"}),"Test Connection"]}),s.jsxs("button",{onClick:C,disabled:y,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(bi,{className:"w-4 h-4 inline mr-2"}),"Check Tables"]}),s.jsxs("button",{onClick:q,disabled:y,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(bi,{className:"w-4 h-4 inline mr-2"}),"Migrate Data"]}),s.jsxs("button",{onClick:K,disabled:y,className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(bi,{className:"w-4 h-4 inline mr-2"}),"Create Sample Data"]})]}),g&&s.jsx("div",{className:"mt-4 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:s.jsx("p",{className:"text-sm text-gray-800",children:g})})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:[s.jsxs("div",{className:"px-4 sm:px-6 py-4 border-b border-gray-200",children:[s.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"New Orders"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Orders waiting for processing"})]}),s.jsx("div",{className:"p-4 sm:p-6",children:w.length>0?s.jsx("div",{className:"space-y-3 sm:space-y-4",children:w.map(A=>s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 sm:p-4 bg-yellow-50 border border-yellow-200 rounded-lg space-y-3 sm:space-y-0",children:[s.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[s.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg flex-shrink-0",children:s.jsx(Ai,{className:"w-5 h-5 text-yellow-600"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("p",{className:"font-medium text-gray-900 text-sm sm:text-base",children:["Order #",A.id.slice(-5)]}),s.jsx("p",{className:"text-sm text-gray-600 truncate",children:A.userName}),s.jsx("p",{className:"text-xs text-gray-500",children:R(A.date)})]})]}),s.jsxs("div",{className:"flex items-center justify-between sm:justify-end space-x-3",children:[s.jsxs("div",{className:"text-left sm:text-right",children:[s.jsxs("p",{className:"font-medium text-gray-900 text-sm sm:text-base",children:["$",A.total.toFixed(2)]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[A.items.length," items"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[E(A.status),s.jsxs(we,{to:"/admin/orders",className:"px-3 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors touch-manipulation mobile-touch-target flex items-center justify-center",children:[s.jsx("span",{className:"hidden sm:inline",children:"Process"}),s.jsx("span",{className:"sm:hidden",children:"Go"})]})]})]})]},A.id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Os,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No new orders"}),s.jsx("p",{className:"text-sm text-gray-400",children:"All orders have been processed"})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Order Status Breakdown"})}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),s.jsx("span",{className:"text-gray-700",children:"Paid"})]}),s.jsx("span",{className:"font-medium",children:n.paidOrders})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),s.jsx("span",{className:"text-gray-700",children:"Processed"})]}),s.jsx("span",{className:"font-medium",children:n.processedOrders})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-3 h-3 bg-emerald-500 rounded-full"}),s.jsx("span",{className:"text-gray-700",children:"Delivered"})]}),s.jsx("span",{className:"font-medium",children:n.deliveredOrders})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Revenue Overview"})}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-700",children:"Total Revenue"}),s.jsxs("span",{className:"font-medium text-lg",children:["$",n.totalRevenue.toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-700",children:"Average Order Value"}),s.jsxs("span",{className:"font-medium text-lg",children:["$",n.averageOrderValue.toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-700",children:"Total Orders"}),s.jsx("span",{className:"font-medium text-lg",children:n.totalOrders})]}),n.totalOrders>0&&s.jsx("div",{className:"mt-4 pt-4 border-t",children:s.jsx(we,{to:"/admin/analytics",className:"text-emerald-600 hover:text-emerald-700 text-sm font-medium",children:"View detailed analytics "})})]})})]})]})]})}const S0=c=>(c??"").toString().toLowerCase();function ww(){const{users:c,createUser:r,deleteUser:n}=Yt(),{user:i}=cs(),[o,u]=_.useState(""),[m,f]=_.useState("all"),[g,x]=_.useState(!1),[y,v]=_.useState(!1),[w,j]=_.useState(!1),[S,D]=_.useState(!1),[C,q]=_.useState(null),[K,R]=_.useState({show:!1,message:"",type:"success"}),[E,A]=_.useState({name:"",username:"",password:"",confirmPassword:"",email:"",address:"",phoneNumber:"",role:"user"}),te=Y=>{const T=Y.replace(/\D/g,"");if(T.length===0)return"";if(T.length<=3)return T;if(T.length<=6)return`${T.slice(0,3)}-${T.slice(3)}`;if(T.length<=10)return`${T.slice(0,3)}-${T.slice(3,6)}-${T.slice(6)}`;if(T.length===11)return`${T.slice(0,1)}-${T.slice(1,4)}-${T.slice(4,7)}-${T.slice(7)}`;if(T.length===12)return`${T.slice(0,2)}-${T.slice(2,5)}-${T.slice(5,8)}-${T.slice(8)}`;if(T.length===13)return`${T.slice(0,3)}-${T.slice(3,6)}-${T.slice(6,9)}-${T.slice(9)}`;{const W=T.slice(0,T.length-10),le=T.slice(T.length-10);return`${W}-${le.slice(0,3)}-${le.slice(3,6)}-${le.slice(6)}`}},G=Y=>Y.replace(/\D/g,""),ie=_.useMemo(()=>{const Y=i?c.filter(W=>W.id!==i.id):c,T=o.trim().toLowerCase();return T?Y.filter(W=>m==="all"?[W.name,W.username,W.email,W.address,W.phoneNumber,W.role].some(le=>S0(le).includes(T)):S0(W[m]).includes(T)):Y},[c,o,m,i]),V=(Y,T="error")=>{R({show:!0,message:Y,type:T})},ue=()=>{R({show:!1,message:"",type:"success"})},oe=async Y=>{if(Y.preventDefault(),!(!E.name||!E.username||!E.password||!E.email||!E.address||!E.phoneNumber)){if(E.password.length<6){V("Password must be at least 6 characters long.");return}if(E.password!==E.confirmPassword){V("Passwords do not match. Please try again.");return}try{const T={...E,phoneNumber:G(E.phoneNumber),role:"user"},{confirmPassword:W,...le}=T;await r(le),A({name:"",username:"",password:"",confirmPassword:"",email:"",address:"",phoneNumber:"",role:"user"}),x(!1),V("User created successfully!","success")}catch(T){const W=T?.message||"Failed to create user";W.includes("already exists")?V(W):W.includes("User already registered")?V("This email is already registered. Please use a different email address."):W.includes("duplicate key")?V("This email or username is already taken. Please choose different values."):V(W)}}},he=async Y=>{if(i&&Y===i.id){V("You cannot delete your own account.");return}const T=c.find(W=>W.id===Y);T&&(q(T),D(!0))},re=async()=>{if(C)try{await n(C.id),V("User deleted successfully!","success")}catch(Y){V(Y?.message||"Failed to delete user")}finally{D(!1),q(null)}},pe=[{value:"all",label:"All Fields"},{value:"name",label:"Name"},{value:"username",label:"Username"},{value:"email",label:"Email"},{value:"address",label:"Address"},{value:"phoneNumber",label:"Phone Number"},{value:"role",label:"Role"}];return s.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 pb-safe-bottom",children:[s.jsx("h1",{className:"mb-4 sm:mb-6 text-2xl sm:text-3xl font-bold",children:"Manage Users"}),s.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row gap-3 sm:gap-4",children:[s.jsxs("div",{className:"flex flex-1 gap-2",children:[s.jsx("select",{value:m,onChange:Y=>f(Y.target.value),className:"rounded border p-2 bg-white mobile-input",children:pe.map(Y=>s.jsx("option",{value:Y.value,children:Y.label},Y.value))}),s.jsx("input",{value:o,onChange:Y=>u(Y.target.value),placeholder:`Search ${m==="all"?"all fields":m}...`,className:"flex-1 rounded border p-2 mobile-input"})]}),s.jsx("button",{onClick:()=>x(Y=>!Y),className:"rounded bg-emerald-600 px-4 py-2 text-white hover:bg-emerald-700 mobile-button touch-manipulation",children:g?"Cancel":"New User"})]}),g&&s.jsxs("form",{onSubmit:oe,className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700 border-b pb-2",children:"Personal Information"}),s.jsx("input",{value:E.name,onChange:Y=>A(T=>({...T,name:Y.target.value})),placeholder:"Restaurant Name",className:"w-full rounded border p-2",required:!0,type:"text"}),s.jsx("input",{value:E.address,onChange:Y=>A(T=>({...T,address:Y.target.value})),placeholder:"Address",className:"w-full rounded border p-2",required:!0,type:"text"}),s.jsx("input",{value:E.phoneNumber,onChange:Y=>{const T=te(Y.target.value);A(W=>({...W,phoneNumber:T}))},placeholder:"Phone Number",className:"w-full rounded border p-2",required:!0,type:"tel"}),s.jsx("input",{value:E.email,onChange:Y=>A(T=>({...T,email:Y.target.value})),placeholder:"Email",className:"w-full rounded border p-2",required:!0,type:"email"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700 border-b pb-2",children:"Account Information"}),s.jsx("input",{value:E.username,onChange:Y=>A(T=>({...T,username:Y.target.value})),placeholder:"Username",className:"w-full rounded border p-2",required:!0,type:"text"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{value:E.password,onChange:Y=>{A(T=>({...T,password:Y.target.value}))},placeholder:"Password",className:"w-full rounded border p-2 pr-10",required:!0,type:y?"text":"password"}),s.jsx("button",{type:"button",onClick:()=>v(!y),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:y?"Hide":"Show"})]}),E.password&&s.jsx("div",{className:"-mt-2",children:s.jsxs("p",{className:`text-sm ${E.password.length<6?"text-red-600":E.password.length<8?"text-yellow-600":"text-green-600"}`,children:["Password length: ",E.password.length," characters",E.password.length<6&&" (minimum 6 required)",E.password.length>=6&&E.password.length<8&&" (good)",E.password.length>=8&&" (strong)"]})}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{value:E.confirmPassword,onChange:Y=>{A(T=>({...T,confirmPassword:Y.target.value}))},placeholder:"Confirm Password",className:`w-full rounded border p-2 pr-10 ${E.confirmPassword&&E.password!==E.confirmPassword?"border-red-400 bg-red-50":E.confirmPassword&&E.password===E.confirmPassword?"border-green-400 bg-green-50":""}`,required:!0,type:w?"text":"password"}),s.jsx("button",{type:"button",onClick:()=>j(!w),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:w?"Hide":"Show"})]}),E.confirmPassword&&s.jsx("div",{className:"-mt-2",children:E.password===E.confirmPassword?s.jsx("p",{className:"text-sm text-green-600",children:" Passwords match"}):s.jsx("p",{className:"text-sm text-red-600",children:" Passwords do not match"})})]}),s.jsx("div",{className:"md:col-span-2",children:s.jsx("button",{type:"submit",className:"w-full rounded bg-blue-600 py-3 text-white font-semibold hover:bg-blue-700 transition-colors",children:"Add User"})})]}),s.jsx("div",{className:"hidden lg:block mobile-table-container",children:s.jsxs("table",{className:"w-full table-auto border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-200 text-left",children:[s.jsx("th",{className:"px-3 py-2",children:"Name"}),s.jsx("th",{className:"px-3 py-2",children:"Username"}),s.jsx("th",{className:"px-3 py-2",children:"Email"}),s.jsx("th",{className:"px-3 py-2",children:"Phone"}),s.jsx("th",{className:"px-3 py-2",children:"Role"}),s.jsx("th",{className:"px-3 py-2",children:"Actions"})]})}),s.jsxs("tbody",{children:[ie.map(Y=>s.jsxs("tr",{className:"border-b last:border-0 hover:bg-gray-50",children:[s.jsx("td",{className:"px-3 py-2",children:Y.name}),s.jsx("td",{className:"px-3 py-2",children:Y.username}),s.jsx("td",{className:"px-3 py-2",children:Y.email}),s.jsx("td",{className:"px-3 py-2",children:Y.phoneNumber}),s.jsx("td",{className:"px-3 py-2",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Y.role==="admin"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:Y.role})}),s.jsx("td",{className:"px-3 py-2",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(we,{to:`/admin/users/${Y.id}`,className:"text-emerald-600 hover:text-emerald-700 hover:bg-emerald-50 text-sm font-medium px-2 py-1 rounded transition-colors",children:"View"}),s.jsx("button",{onClick:()=>he(Y.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 text-sm font-medium px-2 py-1 rounded transition-colors",children:"Delete"})]})})]},Y.id)),ie.length===0&&s.jsx("tr",{children:s.jsxs("td",{colSpan:6,className:"px-3 py-6 text-center text-gray-500",children:['No users match "',o,'".']})})]})]})}),s.jsxs("div",{className:"lg:hidden space-y-3",children:[ie.map(Y=>s.jsxs("div",{className:"mobile-table-card",children:[s.jsxs("div",{className:"mobile-table-card-header flex items-center justify-between",children:[s.jsx("span",{className:"font-semibold text-gray-900 truncate",children:Y.name}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Y.role==="admin"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:Y.role})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"mobile-table-card-row",children:[s.jsx("span",{className:"mobile-table-card-label",children:"Username:"}),s.jsx("span",{className:"mobile-table-card-value",children:Y.username})]}),s.jsxs("div",{className:"mobile-table-card-row",children:[s.jsx("span",{className:"mobile-table-card-label",children:"Email:"}),s.jsx("span",{className:"mobile-table-card-value truncate",children:Y.email})]}),s.jsxs("div",{className:"mobile-table-card-row",children:[s.jsx("span",{className:"mobile-table-card-label",children:"Phone:"}),s.jsx("span",{className:"mobile-table-card-value",children:Y.phoneNumber})]}),s.jsxs("div",{className:"flex space-x-3 pt-2 border-t border-gray-200",children:[s.jsx(we,{to:`/admin/users/${Y.id}`,className:"flex-1 text-center bg-emerald-600 text-white py-2 px-3 rounded-lg text-sm font-medium hover:bg-emerald-700 transition-colors touch-manipulation mobile-touch-target",children:"View Details"}),s.jsx("button",{onClick:()=>he(Y.id),className:"flex-1 text-center bg-red-600 text-white py-2 px-3 rounded-lg text-sm font-medium hover:bg-red-700 transition-colors touch-manipulation mobile-touch-target",children:"Delete"})]})]})]},Y.id)),ie.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx("div",{className:"mb-4",children:s.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),s.jsxs("p",{children:['No users match "',o,'".']})]})]}),K.show&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center mr-3 ${K.type==="success"?"bg-green-100":"bg-red-100"}`,children:K.type==="success"?s.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):s.jsx("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsx("h3",{className:`text-lg font-medium ${K.type==="success"?"text-green-800":"text-red-800"}`,children:K.type==="success"?"Success":"Error"})]}),s.jsx("p",{className:"text-gray-700 mb-6",children:K.message}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:ue,className:`px-4 py-2 rounded-lg font-medium transition-colors ${K.type==="success"?"bg-green-600 text-white hover:bg-green-700":"bg-red-600 text-white hover:bg-red-700"}`,children:"OK"})})]})}),S&&C&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-red-100 flex items-center justify-center mr-3",children:s.jsx("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Confirm Delete"})]}),s.jsx("p",{className:"text-gray-700 mb-2",children:"Are you sure you want to delete the user:"}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-6",children:[s.jsx("p",{className:"font-medium text-gray-900",children:C.name}),s.jsx("p",{className:"text-sm text-gray-600",children:C.email})]}),s.jsx("p",{className:"text-sm text-red-600 mb-6",children:"This action cannot be undone."}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>{D(!1),q(null)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:re,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete User"})]})]})})]})}function Nw(){const{id:c}=os(),{users:r,updateUser:n,deleteUser:i}=Yt(),o=Ft(),[u,m]=_.useState(null),[f,g]=_.useState(!1),[x,y]=_.useState({}),[v,w]=_.useState(!1),[j,S]=_.useState(!1),[D,C]=_.useState(!1),[q,K]=_.useState(!1),[R,E]=_.useState(""),[A,te]=_.useState(""),[G,ie]=_.useState(!1),[V,ue]=_.useState({show:!1,message:"",type:"success"});_.useEffect(()=>{if(c){const $=r.find(N=>N.id===c);$&&(m($),y($))}},[c,r]);const oe=($,N="error")=>{ue({show:!0,message:$,type:N})},he=()=>{ue({show:!1,message:"",type:"success"})},re=async()=>{if(u&&x)try{const $={name:x.name,address:x.address,username:x.username,email:x.email,phoneNumber:x.phoneNumber,role:x.role,comments:x.comments},N=Object.fromEntries(Object.entries($).filter(([I,J])=>J!==void 0));await n(u.id,N),m({...u,...x}),g(!1),oe("User updated successfully!","success")}catch($){console.error("Error updating user:",$),oe("Failed to update user. Please try again.")}},pe=()=>{u&&(y(u),g(!1))},Y=async()=>{if(u)try{await i(u.id),oe("User deleted successfully!","success"),setTimeout(()=>{o("/admin/users")},1500)}catch($){console.error("Error deleting user:",$),oe("Failed to delete user. Please try again.")}finally{w(!1)}},T=async()=>{if(!u||!R.trim()){oe("Please enter a new password.");return}if(R.length<6){oe("Password must be at least 6 characters long.");return}try{await n(u.id,{password:R}),oe("Password reset successfully!","success"),E(""),S(!1)}catch($){console.error("Error resetting password:",$),oe("Failed to reset password. Please try again.")}},W=()=>{const $="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let I="";I+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(Math.random()*26)],I+="abcdefghijklmnopqrstuvwxyz"[Math.floor(Math.random()*26)],I+="0123456789"[Math.floor(Math.random()*10)],I+="!@#$%^&*"[Math.floor(Math.random()*8)];for(let J=4;J<12;J++)I+=$.charAt(Math.floor(Math.random()*$.length));return I.split("").sort(()=>Math.random()-.5).join("")},le=async()=>{if(u)try{const $=W();await n(u.id,{password:$}),te($),ie(!0),C(!1),oe("Temporary password generated successfully! Please share this with the user and ask them to change it immediately.","success")}catch($){console.error("Error generating temporary password:",$),oe("Failed to generate temporary password. Please try again.")}};return u?s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"User Profile"}),s.jsx("p",{className:"text-gray-600",children:"Manage user information and settings"})]}),s.jsx(we,{to:"/admin/users",className:"text-emerald-600 hover:underline",children:" Back to Users"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-2xl font-bold text-emerald-600",children:u.name.charAt(0).toUpperCase()})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:u.name}),s.jsxs("p",{className:"text-gray-600",children:["@",u.username]})]})]}),s.jsx("div",{className:"flex space-x-2",children:f?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:re,className:"px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700",children:"Save Changes"}),s.jsx("button",{onClick:pe,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Cancel"})]}):s.jsx("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700",children:"Edit Profile"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Restaurant Name"}),f?s.jsx("input",{type:"text",value:x.name||"",onChange:$=>y({...x,name:$.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}):s.jsx("p",{className:"text-gray-900",children:u.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),f?s.jsx("input",{type:"text",value:x.username||"",onChange:$=>y({...x,username:$.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}):s.jsxs("p",{className:"text-gray-900",children:["@",u.username]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),f?s.jsx("input",{type:"email",value:x.email||"",onChange:$=>y({...x,email:$.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}):s.jsx("p",{className:"text-gray-900",children:u.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),f?s.jsx("input",{type:"tel",value:x.phoneNumber||"",onChange:$=>y({...x,phoneNumber:$.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}):s.jsx("p",{className:"text-gray-900",children:u.phoneNumber})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),f?s.jsx("textarea",{value:x.address||"",onChange:$=>y({...x,address:$.target.value}),rows:3,className:"w-full p-2 border rounded focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}):s.jsx("p",{className:"text-gray-900",children:u.address})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),f?s.jsxs("select",{value:x.role||"user",onChange:$=>y({...x,role:$.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[s.jsx("option",{value:"user",children:"User"}),s.jsx("option",{value:"admin",children:"Admin"}),s.jsx("option",{value:"manager",children:"Manager"})]}):s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800",children:u.role||"user"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comments & Notes"}),f?s.jsx("textarea",{value:x.comments||"",onChange:$=>y({...x,comments:$.target.value}),rows:4,placeholder:"Add notes about this restaurant user...",className:"w-full p-2 border rounded focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}):s.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded min-h-[100px]",children:u.comments||"No comments added"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User ID"}),s.jsx("p",{className:"text-gray-500 text-sm font-mono",children:u.id})]}),f&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),s.jsx("input",{type:"password",value:x.password||"",onChange:$=>y({...x,password:$.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter new password (leave blank to keep current)"})]})]})]}),!f&&s.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Account Actions"}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx("button",{onClick:()=>w(!0),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Delete User"}),s.jsx("button",{onClick:()=>K(!0),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors",children:"View Password"}),s.jsx("button",{onClick:()=>S(!0),className:"px-4 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700 transition-colors",children:"Reset Password"}),s.jsx("button",{onClick:()=>C(!0),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Generate Temp Password"})]}),G&&A&&s.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"font-semibold text-blue-800",children:"Temporary Password Generated"}),s.jsx("button",{onClick:()=>ie(!1),className:"text-blue-600 hover:text-blue-800",children:""})]}),s.jsx("div",{className:"bg-white p-3 rounded border font-mono text-sm break-all",children:A}),s.jsxs("p",{className:"text-sm text-blue-700 mt-2",children:[" ",s.jsx("strong",{children:"Security Notice:"})," Share this password securely with the user and ask them to change it immediately after login."]}),s.jsxs("div",{className:"flex gap-2 mt-3",children:[s.jsx("button",{onClick:()=>navigator.clipboard.writeText(A),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:"Copy to Clipboard"}),s.jsx("button",{onClick:()=>{te(""),ie(!1)},className:"px-3 py-1 bg-gray-500 text-white text-sm rounded hover:bg-gray-600",children:"Clear"})]})]})]})]}),V.show&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center mr-3 ${V.type==="success"?"bg-green-100":"bg-red-100"}`,children:V.type==="success"?s.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):s.jsx("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsx("h3",{className:`text-lg font-medium ${V.type==="success"?"text-green-800":"text-red-800"}`,children:V.type==="success"?"Success":"Error"})]}),s.jsx("p",{className:"text-gray-700 mb-6",children:V.message}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:he,className:`px-4 py-2 rounded-lg font-medium transition-colors ${V.type==="success"?"bg-green-600 text-white hover:bg-green-700":"bg-red-600 text-white hover:bg-red-700"}`,children:"OK"})})]})}),v&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-red-100 flex items-center justify-center mr-3",children:s.jsx("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Confirm Delete"})]}),s.jsx("p",{className:"text-gray-700 mb-2",children:"Are you sure you want to delete this user?"}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-6",children:[s.jsx("p",{className:"font-medium text-gray-900",children:u?.name}),s.jsx("p",{className:"text-sm text-gray-600",children:u?.email})]}),s.jsx("p",{className:"text-sm text-red-600 mb-6",children:"This action cannot be undone."}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:Y,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete User"})]})]})}),j&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-yellow-100 flex items-center justify-center mr-3",children:s.jsx("svg",{className:"w-4 h-4 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-3a1 1 0 011-1h2.586l4.707-4.707A6 6 0 1121 9z"})})}),s.jsx("h3",{className:"text-lg font-medium text-yellow-800",children:"Reset Password"})]}),s.jsxs("p",{className:"text-gray-700 mb-4",children:["Enter a new password for ",s.jsx("strong",{children:u?.name}),":"]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("input",{type:"password",value:R,onChange:$=>E($.target.value),placeholder:"Enter new password",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500",minLength:6}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Password must be at least 6 characters long."})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>{S(!1),E("")},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:T,className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors",disabled:!R.trim()||R.length<6,children:"Reset Password"})]})]})}),D&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center mr-3",children:s.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-3a1 1 0 011-1h2.586l4.707-4.707A6 6 0 1121 9z"})})}),s.jsx("h3",{className:"text-lg font-medium text-blue-800",children:"Generate Temporary Password"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("p",{className:"text-gray-700 mb-3",children:["This will generate a new temporary password for ",s.jsx("strong",{children:u?.name})," and replace their current password."]}),s.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("svg",{className:"w-5 h-5 text-orange-600 mt-0.5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-orange-800",children:"Security Warning"}),s.jsx("p",{className:"text-sm text-orange-700 mt-1",children:"The temporary password will be displayed only once. Make sure to share it securely with the user and ask them to change it immediately."})]})]})})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>C(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:le,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Generate Password"})]})]})}),q&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center mr-3",children:s.jsxs("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),s.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"View User Password"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("p",{className:"text-gray-700 mb-3",children:["Current password for ",s.jsx("strong",{children:u?.name}),":"]}),s.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:s.jsx("div",{className:"font-mono text-sm break-all",children:u?.password||"No password set"})}),s.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3 mt-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("svg",{className:"w-5 h-5 text-orange-600 mt-0.5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-orange-800",children:"Security Notice"}),s.jsx("p",{className:"text-sm text-orange-700 mt-1",children:"This password is shown for administrative purposes only. Handle this information securely and never share it inappropriately."})]})]})})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>navigator.clipboard.writeText(u?.password||""),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",disabled:!u?.password,children:"Copy Password"}),s.jsx("button",{onClick:()=>K(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Close"})]})]})})]}):s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-600 mb-4",children:"User Not Found"}),s.jsx(we,{to:"/admin/users",className:"text-emerald-600 hover:underline",children:" Back to Users"})]})})}function Sw(){const[c,r]=_.useState([]),[n,i]=_.useState("all"),[o,u]=_.useState(null),[m,f]=_.useState(!1);_.useEffect(()=>{g()},[]);const g=async()=>{try{const E=await Br.getAllOrders();r(E)}catch(E){console.error("Error loading orders:",E)}},x=c.filter(E=>n==="all"?!0:E.status===n),y=c.filter(E=>E.status==="paid"),v=c.filter(E=>E.status==="processing"||E.status==="confirmed"),w=c.filter(E=>E.status==="delivered"),j=c.length,S=async E=>{try{await Br.updateOrderStatus(E,"processing")&&await g()}catch(A){console.error("Error confirming order:",A)}},D=async E=>{try{await Br.updateOrderStatus(E,"delivered")&&await g()}catch(A){console.error("Error marking order as delivered:",A)}},C=E=>{u(E),f(!0)},q=()=>{f(!1),u(null)},K=E=>{switch(E){case"paid":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Paid"});case"confirmed":case"processing":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Processing"});case"out_for_delivery":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:"Out for Delivery"});case"delivered":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Delivered"});case"cancelled":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Cancelled"});default:return null}},R=E=>{switch(E){case"paid":return"Order has been paid and is waiting for confirmation.";case"processed":return"Order has been confirmed and is being prepared for delivery.";case"delivered":return"Order has been successfully delivered to the customer.";default:return""}};return s.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6 pb-safe-bottom",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Orders Management"}),s.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Manage customer orders and track delivery status"})]}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[s.jsxs("div",{className:"bg-white p-3 sm:p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-blue-600",children:y.length}),s.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Pending Confirmation"})]}),s.jsxs("div",{className:"bg-white p-3 sm:p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-yellow-600",children:v.length}),s.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Processing"})]}),s.jsxs("div",{className:"bg-white p-3 sm:p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-green-600",children:w.length}),s.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Delivered"})]}),s.jsxs("div",{className:"bg-white p-3 sm:p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-gray-600",children:j}),s.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Total Orders"})]})]}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Filter by Status:"}),s.jsxs("select",{value:n,onChange:E=>i(E.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 mobile-input",children:[s.jsx("option",{value:"all",children:"All Orders"}),s.jsx("option",{value:"paid",children:"Paid (Pending)"}),s.jsx("option",{value:"processed",children:"Processing"}),s.jsx("option",{value:"delivered",children:"Delivered"})]})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[s.jsx("div",{className:"px-4 sm:px-6 py-4 border-b border-gray-200",children:s.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Orders (",x.length,")"]})}),x.length===0?s.jsxs("div",{className:"p-6 sm:p-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Orders Found"}),s.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:n==="all"?"No orders have been placed yet.":`No orders with status "${n}" found.`})]}):s.jsx("div",{className:"divide-y divide-gray-200",children:x.map(E=>s.jsxs("div",{className:"p-4 sm:p-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 truncate",children:E.id}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Customer: ",E.userName]})]}),s.jsxs("div",{className:"text-left sm:text-right",children:[s.jsxs("p",{className:"text-lg font-medium text-gray-900",children:["$",E.total.toFixed(2)]}),K(E.status)]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4 text-sm text-gray-600 mb-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Order Date:"}),s.jsx("span",{className:"block sm:inline sm:ml-1",children:new Date(E.createdAt||"").toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Delivery Date:"}),s.jsx("span",{className:"block sm:inline sm:ml-1",children:new Date(E.deliveryDate).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Delivery Time:"}),s.jsx("span",{className:"block sm:inline sm:ml-1",children:E.deliveryTime})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Payment:"}),s.jsx("span",{className:"block sm:inline sm:ml-1",children:E.paymentMethod})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 sm:p-4 mb-4",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2 text-sm sm:text-base",children:"Order Items:"}),s.jsx("div",{className:"space-y-2",children:E.items.map(A=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"truncate pr-2",children:[A.menuItemName," (Qty: ",A.quantity,")"]}),s.jsxs("span",{className:"font-medium flex-shrink-0",children:["$",(A.price*A.quantity).toFixed(2)]})]},A.id))})]}),s.jsx("div",{className:"bg-blue-50 rounded-lg p-3 mb-4",children:s.jsx("p",{className:"text-sm text-gray-600",children:R(E.status)})}),s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[E.status==="paid"&&s.jsx("button",{onClick:()=>S(E.id),className:"px-4 py-2 bg-emerald-600 text-white text-sm rounded-lg hover:bg-emerald-700 transition-colors touch-manipulation mobile-touch-target",children:"Confirm Order"}),(E.status==="processing"||E.status==="confirmed")&&s.jsx("button",{onClick:()=>D(E.id),className:"px-4 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors touch-manipulation mobile-touch-target",children:"Mark as Delivered"}),s.jsx("button",{onClick:()=>C(E),className:"px-4 py-2 border border-gray-300 text-gray-700 text-sm rounded-lg hover:bg-gray-50 transition-colors touch-manipulation mobile-touch-target",children:"View Details"})]})]},E.id))})]}),s.jsx(pg,{order:o,isOpen:m,onClose:q})]})}function _w(){const{users:c}=Yt(),[r,n]=_.useState([]),[i,o]=_.useState([]),[u,m]=_.useState(!1),[f,g]=_.useState(null),[x,y]=_.useState(""),[v,w]=_.useState("all"),[j,S]=_.useState("draft"),[D,C]=_.useState({}),[q,K]=_.useState(!1),[R,E]=_.useState(""),[A,te]=_.useState(""),[G,ie]=_.useState(""),[V,ue]=_.useState([]),[oe,he]=_.useState(null),[re,pe]=_.useState(!1),[Y,T]=_.useState(null),[W,le]=_.useState(null),$=U=>{T(U),setTimeout(()=>T(null),5e3)},N=U=>{le(U),setTimeout(()=>le(null),5e3)},I=j==="draft"?i:j==="live"?r:[],[J,z]=_.useState({name:"",ingredients:"",unitSize:"",abv:0,price:0,imageUrl:"",category:"spirits",inStock:!0,assignmentType:"all_users"});_.useEffect(()=>{(async()=>{try{const[se,ve]=await Promise.all([We.getAllMenuItems(!1),We.getAllMenuItems(!0)]);n(se),o(ve)}catch(se){console.error("Error loading menu items:",se)}})()},[]),_.useEffect(()=>{j==="user-menus"&&(async()=>{const se=await Nd.getAllSpecializedDrinksWithUsers();C(se)})()},[j]);const Q=U=>{const se=U.target.files?.[0];if(se){const ve=new FileReader;ve.onload=ee=>{const ne=ee.target?.result;z(ke=>({...ke,imageUrl:ne}))},ve.readAsDataURL(se)}},ce=async U=>{if(U.preventDefault(),!J.name||!J.ingredients||!J.unitSize||J.price<=0){N("Please fill in all required fields");return}try{if(f){const se=await We.updateMenuItem(f.id,J);se&&o(ve=>ve.map(ee=>ee.id===f.id?se:ee)),g(null)}else{const se=await We.createMenuItem({...J,isDraft:!0});se&&o(ve=>[...ve,se])}z({name:"",ingredients:"",unitSize:"",abv:0,price:0,imageUrl:"",category:"spirits",inStock:!0,assignmentType:"all_users"}),m(!1)}catch(se){console.error("Error saving menu item:",se),N("Failed to save menu item")}},de=U=>{g(U),z({name:U.name,ingredients:U.ingredients,unitSize:U.unitSize,abv:U.abv,price:U.price,imageUrl:U.imageUrl,category:U.category,inStock:U.inStock,assignmentType:U.assignmentType}),m(!0)},Ee=async U=>{if(confirm("Are you sure you want to delete this item?"))try{await We.deleteMenuItem(U),o(se=>se.filter(ve=>ve.id!==U))}catch(se){console.error("Error deleting menu item:",se),N("Failed to delete menu item")}},Se=async U=>{try{const se=i.find(ve=>ve.id===U);if(se){const ve=await We.updateMenuItem(U,{inStock:!se.inStock});ve&&o(ee=>ee.map(ne=>ne.id===U?ve:ne))}}catch(se){console.error("Error updating stock status:",se),N("Failed to update stock status")}},nt=async()=>{if(confirm("This will update the live menu that customers can see. Continue?"))try{for(const ve of i)await We.updateMenuItem(ve.id,{isDraft:!1});const[U,se]=await Promise.all([We.getAllMenuItems(!1),We.getAllMenuItems(!0)]);n(U),o(se),$("Live menu updated successfully!")}catch(U){console.error("Error updating live menu:",U),N("Failed to update live menu")}},Vt=async()=>{if(!R){N("Please select a user first");return}if(V.length===0){N("Please select at least one specialized drink");return}try{for(const se of V){const ve=await We.getUsersForDrink(se);ve.includes(R)||await We.assignDrinkToUsers(se,[...ve,R])}const U=await Nd.getAllSpecializedDrinksWithUsers();C(U),E(""),ue([]),te(""),ie(""),K(!1),$("Custom menu created successfully!")}catch(U){console.error("Error creating custom menu:",U),N("Failed to create custom menu")}},Wt=(U,se)=>{ue(se?ve=>[...ve,U]:ve=>ve.filter(ee=>ee!==U))},Us=r.filter(U=>U.assignmentType==="specific_users").filter(U=>{const se=G.toLowerCase();return U.name.toLowerCase().includes(se)||U.ingredients.toLowerCase().includes(se)||U.category.toLowerCase().includes(se)}),es=(()=>{const U=[];return c.filter(se=>se.role!=="admin").forEach(se=>{const ve=[];Object.entries(D).forEach(([ee,{drink:ne,userIds:ke}])=>{ke.includes(se.id)&&ve.push(ne)}),ve.length>0&&U.push({user:se,customDrinks:ve})}),U})(),Vr=c.filter(U=>U.role!=="admin").filter(U=>{const se=A.toLowerCase();return U.name.toLowerCase().includes(se)||U.email.toLowerCase().includes(se)||U.username.toLowerCase().includes(se)}),jt=i.filter(U=>!r.some(se=>se.id===U.id)).length,ma=I.filter(U=>{const se=U.name.toLowerCase().includes(x.toLowerCase())||U.ingredients.toLowerCase().includes(x.toLowerCase()),ve=v==="all"||U.category===v;return se&&ve}),Ms=[{value:"all",label:"All Categories"},{value:"spirits",label:"Spirits"},{value:"wine",label:"Wine"},{value:"beer",label:"Beer"},{value:"cocktails",label:"Cocktails"},{value:"mixers",label:"Mixers"}],ds=(()=>{if(i.length===0)return!1;if(r.length===0&&i.length>0)return!0;const U=ee=>({name:String(ee.name||"").trim(),ingredients:String(ee.ingredients||"").trim(),unitSize:String(ee.unitSize||"").trim(),abv:Number(ee.abv||0),price:Number(ee.price||0),imageUrl:String(ee.imageUrl||"").trim(),category:String(ee.category||"").trim(),inStock:!!ee.inStock,assignmentType:String(ee.assignmentType||"all_users")}),se=new Map,ve=new Map;i.forEach(ee=>{se.set(ee.id,U(ee))}),r.forEach(ee=>{ve.set(ee.id,U(ee))});for(const[ee]of se)if(!ve.has(ee))return!0;for(const[ee]of ve)if(!se.has(ee))return!0;for(const[ee,ne]of se){const ke=ve.get(ee);if(ke){const be=JSON.stringify(ne),qe=JSON.stringify(ke);if(be!==qe)return!0}}return!1})();return s.jsxs("div",{className:"w-full",children:[Y&&s.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg shadow-lg flex items-center space-x-2",children:[s.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),s.jsx("span",{children:Y}),s.jsx("button",{onClick:()=>T(null),className:"ml-2 text-green-500 hover:text-green-700",children:s.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),W&&s.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg shadow-lg flex items-center space-x-2",children:[s.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),s.jsx("span",{children:W}),s.jsx("button",{onClick:()=>le(null),className:"ml-2 text-red-500 hover:text-red-700",children:s.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),j==="draft"&&s.jsxs("div",{className:"w-full px-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Draft Menu"}),s.jsx("p",{className:"text-gray-600",children:"Make your changes here before they go live."})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>S("draft"),className:"px-3 py-2 rounded-lg text-sm font-medium bg-emerald-600 text-white",children:"Draft Menu"}),s.jsx("button",{onClick:()=>{S("live"),m(!1),g(null)},className:"px-3 py-2 rounded-lg text-sm font-medium bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Live Menu"}),s.jsx("button",{onClick:()=>{S("user-menus"),m(!1),g(null)},className:"px-3 py-2 rounded-lg text-sm font-medium bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Drink Assignments"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6",children:[s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:jt}),s.jsx("div",{className:"text-sm text-gray-600",children:"Draft Items"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.filter(U=>U.inStock).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"In Stock"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:i.filter(U=>!U.inStock).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Out of Stock"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center flex flex-col items-center",children:[s.jsx("div",{className:"text-xs font-small text-gray-700",children:ds?" Draft changes detected":" Up to Date"}),s.jsx("button",{onClick:nt,disabled:!ds,className:`px-4 py-2 rounded-lg text-xs font-medium transition-colors ${ds?"bg-yellow-600 text-white hover:bg-yellow-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Update Live Menu"})]})]}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md mt-6 mb-6",children:s.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[s.jsx("input",{type:"text",placeholder:"Search items...",value:x,onChange:U=>y(U.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}),s.jsx("select",{value:v,onChange:U=>w(U.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:Ms.map(U=>s.jsx("option",{value:U.value,children:U.label},U.value))}),s.jsx("button",{onClick:()=>{m(!0),g(null),z({name:"",ingredients:"",unitSize:"",abv:0,price:0,imageUrl:"",category:"spirits",inStock:!0,assignmentType:"all_users"})},className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Add New Item"})]})})]}),j==="live"&&s.jsxs("div",{className:"w-full px-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Live Menu Preview"}),s.jsx("p",{className:"text-gray-600",children:"Customers will see these items."})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>S("draft"),className:"px-3 py-2 rounded-lg text-sm font-medium bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Draft Menu"}),s.jsx("button",{onClick:()=>S("live"),className:"px-3 py-2 rounded-lg text-sm font-medium bg-blue-600 text-white",children:"Live Menu"}),s.jsx("button",{onClick:()=>S("user-menus"),className:"px-3 py-2 rounded-lg text-sm font-medium bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Drink Assignments"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Live Items"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.filter(U=>U.inStock).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"In Stock"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:r.filter(U=>!U.inStock).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Out of Stock"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center flex flex-col items-center",children:[s.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:"LIVE"}),s.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Status"})]})]}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md mb-6",children:s.jsxs("div",{className:"flex flex-wrap gap-4",children:[s.jsx("input",{type:"text",placeholder:"Search items...",value:x,onChange:U=>y(U.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}),s.jsx("select",{value:v,onChange:U=>w(U.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:Ms.map(U=>s.jsx("option",{value:U.value,children:U.label},U.value))})]})})]}),j==="user-menus"&&s.jsxs("div",{className:"w-full px-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Restaurant Profiles"}),s.jsx("p",{className:"text-gray-600",children:"View restaurant profiles and their custom drink access"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>S("draft"),className:"px-3 py-2 rounded-lg text-sm font-medium bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Draft Menu"}),s.jsx("button",{onClick:()=>S("live"),className:"px-3 py-2 rounded-lg text-sm font-medium bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Live Menu"}),s.jsx("button",{onClick:()=>S("user-menus"),className:"px-3 py-2 rounded-lg text-sm font-medium bg-purple-600 text-white",children:"Restaurant Profiles"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:Object.keys(D).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Specialized Drinks"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:Object.values(D).reduce((U,se)=>U+se.userIds.length,0)}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Assignments"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-600",children:c.filter(U=>U.role!=="admin").length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Users"})]}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md text-center flex flex-col items-center justify-center",children:s.jsx("button",{onClick:()=>K(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm font-medium",children:"Create Custom Menu"})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md mb-6",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-xl font-semibold",children:"Restaurant Profiles"})}),s.jsx("div",{className:"p-6",children:es.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"text-gray-500",children:"No restaurant profiles found"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Create custom menus for users to see their profiles here"})]}):s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:es.map(({user:U,customDrinks:se})=>s.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-4 hover:border-purple-400 hover:shadow-md cursor-pointer transition-all duration-200 aspect-square flex flex-col items-center justify-center text-center",onClick:()=>{he(U.id),pe(!0)},children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-blue-600 rounded-lg flex items-center justify-center mb-3",children:s.jsx("span",{className:"text-white font-bold text-xl",children:U.name.charAt(0).toUpperCase()})}),s.jsx("h3",{className:"font-medium text-gray-900 text-sm mb-1 line-clamp-2",children:U.name}),s.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-1",children:U.email}),s.jsxs("div",{className:"text-xs text-purple-600 font-medium",children:[se.length," drink",se.length!==1?"s":""]})]},U.id))})})]})]}),u&&s.jsx("div",{className:"w-full px-4 mb-6",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:f?"Edit Menu Item":"Add New Menu Item"}),s.jsxs("form",{onSubmit:ce,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Name"}),s.jsx("input",{type:"text",value:J.name,onChange:U=>z(se=>({...se,name:U.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),s.jsxs("select",{value:J.category,onChange:U=>z(se=>({...se,category:U.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[s.jsx("option",{value:"spirits",children:"Spirits"}),s.jsx("option",{value:"wine",children:"Wine"}),s.jsx("option",{value:"beer",children:"Beer"}),s.jsx("option",{value:"cocktails",children:"Cocktails"}),s.jsx("option",{value:"mixers",children:"Mixers"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assignment Type"}),s.jsxs("select",{value:J.assignmentType,onChange:U=>z(se=>({...se,assignmentType:U.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[s.jsx("option",{value:"all_users",children:"Available to All Users"}),s.jsx("option",{value:"specific_users",children:"Specialized (Assign to Specific Users)"})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:J.assignmentType==="all_users"?"This drink will be available to all users on their menu.":"This drink will only be available to users you specifically assign it to."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),s.jsx("textarea",{value:J.ingredients,onChange:U=>z(se=>({...se,ingredients:U.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"List the ingredients...",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Size"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"number",value:J.unitSize.split(" ")[0]||"",onChange:U=>{const se=J.unitSize.split(" ")[1]||"ml";z(ve=>({...ve,unitSize:`${U.target.value} ${se}`}))},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"750",required:!0}),s.jsxs("select",{value:J.unitSize.split(" ")[1]||"ml",onChange:U=>{const se=J.unitSize.split(" ")[0]||"";z(ve=>({...ve,unitSize:`${se} ${U.target.value}`}))},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[s.jsx("option",{value:"ml",children:"ml"}),s.jsx("option",{value:"oz",children:"oz"}),s.jsx("option",{value:"cl",children:"cl"}),s.jsx("option",{value:"l",children:"L"}),s.jsx("option",{value:"gal",children:"gal"}),s.jsx("option",{value:"pint",children:"pint"}),s.jsx("option",{value:"shot",children:"shot"}),s.jsx("option",{value:"serving",children:"serving"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ABV (%)"}),s.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:J.abv,onChange:U=>z(se=>({...se,abv:parseFloat(U.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price ($)"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:J.price,onChange:U=>z(se=>({...se,price:parseFloat(U.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image Thumbnail"}),s.jsx("input",{type:"file",accept:"image/*",onChange:Q,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}),J.imageUrl&&s.jsx("div",{className:"mt-2",children:s.jsx("img",{src:J.imageUrl,alt:"Preview",className:"w-20 h-20 object-cover rounded border"})})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"inStock",checked:J.inStock,onChange:U=>z(se=>({...se,inStock:U.target.checked})),className:"mr-2"}),s.jsx("label",{htmlFor:"inStock",className:"text-sm text-gray-700",children:"In Stock"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{type:"submit",className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:f?"Update Item":"Add Item"}),s.jsx("button",{type:"button",onClick:()=>{m(!1),g(null)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})]})}),j!=="user-menus"&&s.jsx("div",{className:"w-full",children:s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4 px-4",children:ma.map(U=>s.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[s.jsxs("div",{className:"h-40 bg-gray-200 flex items-center justify-center overflow-hidden relative",children:[j==="draft"&&!r.some(se=>se.id===U.id)&&s.jsx("div",{className:"absolute top-2 left-2 z-10",children:s.jsx("span",{className:"px-2 py-1 bg-orange-500 text-white text-xs font-medium rounded-full",children:"Draft Only"})}),U.assignmentType==="specific_users"&&s.jsx("div",{className:"absolute top-2 right-2 z-10",children:s.jsx("span",{className:"px-2 py-1 bg-purple-500 text-white text-xs font-medium rounded-full",children:"Specialized"})}),U.imageUrl?s.jsx("img",{src:U.imageUrl,alt:U.name,className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-gray-500",children:"No Image"})]}),s.jsxs("div",{className:"p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:U.name}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${U.inStock?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:U.inStock?"In Stock":"Out of Stock"})]}),s.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:U.ingredients}),s.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[s.jsxs("div",{children:["Size: ",U.unitSize]}),U.abv>0&&s.jsxs("div",{children:["ABV: ",U.abv,"%"]}),s.jsxs("div",{className:"font-medium text-gray-900",children:["$",U.price.toFixed(2)]}),s.jsx("div",{className:`text-xs ${U.assignmentType==="all_users"?"text-blue-600":"text-purple-600"}`,children:U.assignmentType==="all_users"?"All Users":"Specialized"})]}),j==="draft"&&s.jsxs("div",{className:"mt-4 flex space-x-2",children:[s.jsx("button",{onClick:()=>de(U),className:"text-emerald-600 hover:text-emerald-700 text-sm font-medium",children:"Edit"}),s.jsx("button",{onClick:()=>Se(U.id),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:U.inStock?"Mark Out of Stock":"Mark In Stock"}),s.jsx("button",{onClick:()=>Ee(U.id),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Delete"})]})]})]},U.id))})}),j!=="user-menus"&&ma.length===0&&s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:j==="draft"?"No draft items found.":"No live items found."})}),q&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create Custom Menu"}),s.jsx("button",{onClick:()=>{K(!1),E(""),ue([]),te(""),ie("")},className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"1. Select User"}),s.jsx("div",{className:"mb-4",children:s.jsx("input",{type:"text",placeholder:"Search users by name, email, or username...",value:A,onChange:U=>te(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})}),s.jsx("div",{className:"max-h-64 overflow-y-auto border border-gray-200 rounded-lg",children:Vr.length===0?s.jsx("div",{className:"p-4 text-center text-gray-500",children:A?"No users found matching your search":"No users available"}):Vr.map(U=>s.jsx("div",{onClick:()=>E(U.id),className:`p-3 border-b border-gray-200 cursor-pointer hover:bg-gray-50 ${R===U.id?"bg-purple-50 border-purple-200":""}`,children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${R===U.id?"bg-purple-600":"bg-gray-300"}`}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:U.name}),s.jsx("div",{className:"text-sm text-gray-600",children:U.email})]})]})},U.id))}),R&&s.jsx("div",{className:"mt-3 p-3 bg-purple-50 rounded-lg",children:s.jsxs("div",{className:"text-sm text-purple-800",children:["Selected: ",c.find(U=>U.id===R)?.name]})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"2. Select Specialized Drinks"}),s.jsx("div",{className:"mb-4",children:s.jsx("input",{type:"text",placeholder:"Search drinks by name, ingredients, or category...",value:G,onChange:U=>ie(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})}),s.jsx("div",{className:"max-h-80 overflow-y-auto border border-gray-200 rounded-lg",children:Us.length===0?s.jsx("div",{className:"p-4 text-center text-gray-500",children:G?"No drinks found matching your search":'No specialized drinks available. Create drinks with "Specialized" assignment type first.'}):Us.map(U=>s.jsx("div",{className:"p-3 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",checked:V.includes(U.id),onChange:se=>Wt(U.id,se.target.checked),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center overflow-hidden",children:U.imageUrl?s.jsx("img",{src:U.imageUrl,alt:U.name,className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-gray-500 text-xs",children:"No Image"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:U.name}),s.jsxs("div",{className:"text-sm text-gray-600",children:[U.category,"  $",U.price.toFixed(2)]}),s.jsx("div",{className:"text-xs text-gray-500 truncate max-w-xs",children:U.ingredients})]})]})})]})},U.id))}),V.length>0&&s.jsx("div",{className:"mt-3 p-3 bg-purple-50 rounded-lg",children:s.jsxs("div",{className:"text-sm text-purple-800",children:[V.length," drink",V.length!==1?"s":""," selected"]})})]})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-4 mt-6 pt-6 border-t border-gray-200",children:[s.jsx("button",{onClick:()=>{K(!1),E(""),ue([]),te(""),ie("")},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:Vt,disabled:!R||V.length===0,className:`px-6 py-2 rounded-lg font-medium transition-colors ${R&&V.length>0?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Create Custom Menu"})]})]})}),re&&oe&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:(()=>{const U=es.find(se=>se.user.id===oe);return U?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-semibold",children:[U.user.name,"'s Custom Menu"]}),s.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Specialized drinks assigned to this restaurant"})]}),s.jsx("button",{onClick:()=>{pe(!1),he(null)},className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-blue-600 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-xl",children:U.user.name.charAt(0).toUpperCase()})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900 text-lg",children:U.user.name}),s.jsx("div",{className:"text-sm text-gray-600",children:U.user.email}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Username: ",U.user.username]}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[U.user.address&&` ${U.user.address}`,U.user.phone&&`   ${U.user.phone}`]})]}),s.jsxs("div",{className:"ml-auto text-right",children:[s.jsxs("div",{className:"text-lg font-semibold text-purple-600",children:[U.customDrinks.length," drink",U.customDrinks.length!==1?"s":""]}),s.jsx("div",{className:"text-sm text-gray-600",children:"custom access"})]})]})}),s.jsx("div",{className:"divide-y divide-gray-200",children:U.customDrinks.length===0?s.jsx("div",{className:"p-6 text-center text-gray-500",children:"No custom drinks assigned to this restaurant yet."}):U.customDrinks.map(se=>s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center overflow-hidden",children:se.imageUrl?s.jsx("img",{src:se.imageUrl,alt:se.name,className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-gray-500 text-xs",children:"No Image"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-lg font-medium text-gray-900",children:se.name}),s.jsx("p",{className:"text-sm text-gray-600",children:se.ingredients}),s.jsxs("div",{className:"flex items-center mt-2 space-x-4",children:[s.jsx("span",{className:"text-sm text-gray-500",children:se.category}),s.jsx("span",{className:"text-sm text-gray-500",children:se.unitSize}),se.abv>0&&s.jsxs("span",{className:"text-sm text-gray-500",children:[se.abv,"% ABV"]}),s.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["$",se.price.toFixed(2)]}),s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${se.inStock?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:se.inStock?"In Stock":"Out of Stock"})]})]})]})},se.id))})]}):null})()})})]})}function Ew({isOpen:c,onClose:r,ticket:n,onUpdateStatus:i,onAddResponse:o}){const[u,m]=_.useState(""),[f,g]=_.useState(!1),x=async v=>{if(v.preventDefault(),!(!n||!u.trim())){g(!0);try{await o(n.id,u.trim()),m("")}finally{g(!1)}}},y=v=>{n&&i(n.id,v)};return!c||!n?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Support Ticket #",n.id.slice(-8)]}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["From: ",n.userName," (",n.userEmail,")"]})]}),s.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(Ai,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Subject"}),s.jsx("p",{className:"text-gray-700",children:n.subject})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Category"}),s.jsx("p",{className:"text-gray-700 capitalize",children:n.category})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Priority"}),s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${n.priority==="urgent"?"bg-red-100 text-red-800":n.priority==="high"?"bg-orange-100 text-orange-800":n.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:n.priority})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Description"}),s.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:s.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:n.description})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Status"}),s.jsx("div",{className:"flex space-x-2",children:["open","in_progress","resolved","closed"].map(v=>s.jsx("button",{onClick:()=>y(v),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${n.status===v?"bg-emerald-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:v.replace("_"," ")},v))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Admin Response"}),n.adminResponse?s.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(al,{className:"w-4 h-4 text-emerald-600"}),s.jsx("span",{className:"text-sm font-medium text-emerald-900",children:"Response"})]}),s.jsx("p",{className:"text-emerald-800 whitespace-pre-wrap",children:n.adminResponse}),n.adminResponseDate&&s.jsxs("p",{className:"text-xs text-emerald-600 mt-2",children:["Replied: ",new Date(n.adminResponseDate).toLocaleString()]})]}):s.jsxs("form",{onSubmit:x,className:"space-y-4",children:[s.jsx("textarea",{value:u,onChange:v=>m(v.target.value),rows:4,placeholder:"Type your response to the user...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none",disabled:f}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"submit",disabled:f||!u.trim(),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:f?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Sending..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Uj,{className:"w-4 h-4"}),s.jsx("span",{children:"Send Response"})]})})})]})]})]})]})})}function kw(){const[c,r]=_.useState([]),[n,i]=_.useState([]),[o,u]=_.useState(null),[m,f]=_.useState(!1),[g,x]=_.useState("all"),[y,v]=_.useState(""),[w,j]=_.useState(!0);_.useEffect(()=>{const G=localStorage.getItem("supportTickets");if(G){const ie=JSON.parse(G);r(ie.sort((V,ue)=>new Date(ue.createdAt).getTime()-new Date(V.createdAt).getTime()))}j(!1)},[]),_.useEffect(()=>{let G=c;g!=="all"&&(G=G.filter(ie=>ie.status===g)),y&&(G=G.filter(ie=>ie.subject.toLowerCase().includes(y.toLowerCase())||ie.userName.toLowerCase().includes(y.toLowerCase())||ie.userEmail.toLowerCase().includes(y.toLowerCase())||ie.description.toLowerCase().includes(y.toLowerCase()))),i(G)},[c,g,y]);const S=(G,ie)=>{const V=c.map(ue=>ue.id===G?{...ue,status:ie}:ue);r(V),localStorage.setItem("supportTickets",JSON.stringify(V)),o&&o.id===G&&u({...o,status:ie})},D=async(G,ie)=>{const V=c.map(ue=>ue.id===G?{...ue,adminResponse:ie,adminResponseDate:new Date().toISOString(),status:"resolved"}:ue);r(V),localStorage.setItem("supportTickets",JSON.stringify(V)),o&&o.id===G&&u({...o,adminResponse:ie,adminResponseDate:new Date().toISOString(),status:"resolved"})},C=G=>{u(G),f(!0)},q=()=>{u(null),f(!1)},K=G=>{switch(G){case"open":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Open"});case"in_progress":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"In Progress"});case"resolved":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Resolved"});case"closed":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Closed"});default:return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:G})}},R=G=>{switch(G){case"urgent":return s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800",children:"Urgent"});case"high":return s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-orange-100 text-orange-800",children:"High"});case"medium":return s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-yellow-100 text-yellow-800",children:"Medium"});case"low":return s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800",children:"Low"});default:return s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800",children:G})}},E=G=>new Date(G).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),A=G=>{if(G.status!=="open")return!1;const ie=new Date(G.createdAt),V=new Date;return V.setDate(V.getDate()-3),ie<V},te={total:c.length,newTickets:c.filter(G=>G.status==="open").length,urgentTickets:c.filter(G=>A(G)).length,inProgress:c.filter(G=>G.status==="in_progress").length};return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Support Tickets"}),s.jsx("p",{className:"text-gray-600",children:"Manage customer support requests and provide assistance"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:s.jsx(qa,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tickets"}),s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"New / Urgent / In-Progress"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:te.total})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:s.jsx(Di,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"New Tickets"}),s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Just received"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:te.newTickets})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:s.jsx(Ai,{className:"w-6 h-6 text-red-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Urgent Tickets"}),s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Open for 3+ days"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:te.urgentTickets})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:s.jsx(Pr,{className:"w-6 h-6 text-yellow-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"In-Progress"}),s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Being worked on"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:te.inProgress})]})]})})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Nj,{className:"w-5 h-5 text-gray-500"}),s.jsxs("select",{value:g,onChange:G=>x(G.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"open",children:"Open"}),s.jsx("option",{value:"in_progress",children:"In Progress"}),s.jsx("option",{value:"resolved",children:"Resolved"}),s.jsx("option",{value:"closed",children:"Closed"})]})]})}),s.jsxs("div",{className:"relative",children:[s.jsx(Lj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search tickets...",value:y,onChange:G=>v(G.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 w-full md:w-64"})]})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Support Tickets (",n.length,")"]})}),s.jsx("div",{className:"divide-y divide-gray-200",children:w?s.jsxs("div",{className:"p-6 text-center",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-emerald-600 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500",children:"Loading tickets..."})]}):n.length>0?n.map(G=>s.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:G.subject}),K(G.status),R(G.priority)]}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-2",children:[s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx(gg,{className:"w-4 h-4"}),s.jsx("span",{children:G.userName})]}),s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx(mg,{className:"w-4 h-4"}),s.jsx("span",{children:G.userEmail})]}),s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx(Pr,{className:"w-4 h-4"}),s.jsx("span",{children:E(G.createdAt)})]})]}),s.jsx("p",{className:"text-gray-600 line-clamp-2",children:G.description}),G.adminResponse&&s.jsxs("div",{className:"mt-3 flex items-center space-x-2 text-sm text-emerald-600",children:[s.jsx(al,{className:"w-4 h-4"}),s.jsx("span",{children:"Admin responded"})]})]}),s.jsxs("button",{onClick:()=>C(G),className:"ml-4 px-3 py-1 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors flex items-center space-x-2",children:[s.jsx(Ni,{className:"w-4 h-4"}),s.jsx("span",{children:"View"})]})]})},G.id)):s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(qa,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500 mb-2",children:"No support tickets found"}),s.jsx("p",{className:"text-sm text-gray-400",children:y||g!=="all"?"Try adjusting your search or filter criteria":"Support tickets from users will appear here"})]})})]}),s.jsx(Ew,{isOpen:m,onClose:q,ticket:o,onUpdateStatus:S,onAddResponse:D})]})}function Tw(){const c=La(),[r,n]=_.useState(c),[i,o]=_.useState(c),[u,m]=_.useState(!1),[f,g]=_.useState(null),[x,y]=_.useState(null),[v,w]=_.useState(null),[j,S]=_.useState({newEmail:"",newUsername:"",newPassword:"",confirmPassword:""}),[D,C]=_.useState({newPassword:!1,confirmPassword:!1}),[q,K]=_.useState(!1),[R,E]=_.useState("save"),[A,te]=_.useState(""),[G,ie]=_.useState(!1),V=JSON.stringify(r)!==JSON.stringify(i)||j.newEmail.length>0||j.newUsername.length>0||j.newPassword.length>0,ue=(z,Q,ce)=>{n(de=>({...de,businessHours:{...de.businessHours,[z]:{...de.businessHours[z],[Q]:ce}}}))},oe=(z,Q)=>{n(ce=>({...ce,deliverySettings:{...ce.deliverySettings,[z]:Q}}))},he=z=>{const Q=z.target.files?.[0];if(Q){const ce=new FileReader;ce.onload=de=>{const Ee=de.target?.result;re("profileImage",Ee)},ce.readAsDataURL(Q)}};_.useEffect(()=>{(async()=>{try{await Gt.initializeSettings();const Q=await Gt.getSettings();n(Q),o(Q);const ce=await Gt.getCurrentAdminUser();w(ce),ce&&S(de=>({...de,newEmail:"",newUsername:""})),g(new Date)}catch(Q){console.error("Failed to load settings:",Q),y({type:"error",text:"Failed to load settings from database"});const ce=La();n(ce),o(ce)}})()},[]);const re=(z,Q)=>{n(ce=>({...ce,[z]:Q}))},pe=z=>{const Q=z.replace(/\D/g,"");if(Q.length<=3)return Q;if(Q.length<=6)return`${Q.slice(0,3)}-${Q.slice(3)}`;if(Q.length<=10)return`${Q.slice(0,3)}-${Q.slice(3,6)}-${Q.slice(6)}`;{const de=Q.length-4;if(de<=3){const Ee=Q.slice(0,de),Se=Q.slice(de);return`${Ee}-${Se}`}else if(de<=6){const Ee=de-3,Se=Q.slice(0,Ee),nt=Q.slice(Ee,Ee+3),Vt=Q.slice(Ee+3);return`${Se}-${nt}-${Vt}`}else{const Ee=de-6,Se=Q.slice(0,Ee),nt=Q.slice(Ee,Ee+3),Vt=Q.slice(Ee+3,Ee+6),Wt=Q.slice(Ee+6);return`${Se}-${nt}-${Vt}-${Wt}`}}},Y=z=>{const Q=pe(z);re("phoneNumber",Q)},T=async()=>{const z=j.newUsername.length>0&&v&&j.newUsername!==v.username,Q=j.newPassword.length>0;if(z){if(j.newUsername.length<3){y({type:"error",text:"Username must be at least 3 characters long"});return}if(!/^[a-zA-Z0-9_]+$/.test(j.newUsername)){y({type:"error",text:"Username can only contain letters, numbers, and underscores"});return}}if(Q){if(j.newPassword.length<6){y({type:"error",text:"New password must be at least 6 characters long"});return}if(j.newPassword!==j.confirmPassword){y({type:"error",text:"New password and confirmation do not match"});return}}E("save"),K(!0)},W=async()=>{E("reset"),K(!0)},le=async()=>{if(!A){y({type:"error",text:"Current password is required"});return}m(!0),y(null);try{const z=await Gt.getCurrentAdminUser();if(!z)throw new Error("Failed to get current user");const{error:Q}=await ae.auth.signInWithPassword({email:z.email,password:A});if(Q)throw new Error("Current password is incorrect");R==="save"?await $():await N(),K(!1),te("")}catch(z){console.error("Failed to verify password:",z),y({type:"error",text:z.message||"Failed to verify password. Please try again."})}finally{m(!1)}},$=async()=>{const z=j.newEmail.length>0&&v&&j.newEmail!==v.email,Q=j.newUsername.length>0&&v&&j.newUsername!==v.username,ce=j.newPassword.length>0;if(await Gt.updateSettings(r),z||Q||ce){const Se={currentPassword:A};z&&(Se.newEmail=j.newEmail),Q&&(Se.newUsername=j.newUsername),ce&&(Se.newPassword=j.newPassword),await Gt.updateAdminAccount(Se);const nt=await Gt.getCurrentAdminUser();w(nt),S({newEmail:"",newUsername:"",newPassword:"",confirmPassword:""})}g(new Date),o(r),window.dispatchEvent(new CustomEvent("adminSettingsUpdated",{detail:r}));let Ee="Settings saved successfully!";z&&(Ee+=" Please check your new email for verification."),y({type:"success",text:Ee}),setTimeout(()=>y(null),3e3)},N=async()=>{await Gt.resetToDefaults();const z=La();n(z),o(z),y({type:"success",text:"Settings reset to defaults"}),setTimeout(()=>y(null),3e3),window.dispatchEvent(new CustomEvent("adminSettingsUpdated",{detail:z}))},I=(z,Q)=>{S(ce=>({...ce,[z]:Q}))},J=z=>{C(Q=>({...Q,[z]:!Q[z]}))};return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[s.jsx(wd,{className:"w-8 h-8 mr-3 text-emerald-600"}),"Admin Settings"]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Configure admin account settings"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[f&&s.jsxs("span",{className:"text-sm text-gray-500",children:["Last saved: ",f.toLocaleTimeString()]}),s.jsxs("button",{onClick:W,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[s.jsx(Aj,{className:"w-4 h-4"}),s.jsx("span",{children:"Reset"})]}),s.jsxs("button",{onClick:V?T:void 0,disabled:u||!V,className:`px-6 py-2 rounded-lg transition-colors flex items-center space-x-2 ${V?"bg-emerald-600 text-white hover:bg-emerald-700":"bg-gray-400 text-white cursor-not-allowed"} disabled:opacity-50`,children:[s.jsx(Rj,{className:"w-4 h-4"}),s.jsx("span",{children:u?"Saving...":V?"Save Changes":"No Changes"})]})]})]}),x&&s.jsx("div",{className:`p-4 rounded-lg border ${x.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:s.jsx("p",{className:"text-sm font-medium",children:x.text})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(jd,{className:"w-5 h-5 text-emerald-600 mr-2"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Contact Information"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Email"}),s.jsx("input",{type:"email",value:r.adminEmail,onChange:z=>re("adminEmail",z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),s.jsx("input",{type:"tel",value:r.phoneNumber,onChange:z=>Y(z.target.value),placeholder:"123-456-7890",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500"})]}),s.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-700",children:[s.jsx("strong",{children:"Note:"})," This information is used for the customer to contact support."]})})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(w0,{className:"w-5 h-5 text-emerald-600 mr-2"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Profile Management"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["New Display Name",r.displayName!==i.displayName&&s.jsx("span",{className:"ml-2 text-xs text-orange-600 font-medium",children:" Unsaved changes"})]}),s.jsx("input",{type:"text",value:r.displayName,onChange:z=>re("displayName",z.target.value),placeholder:"Enter new display name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This is the name that appears next to your profile picture"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Profile Picture",r.profileImage!==i.profileImage&&s.jsx("span",{className:"ml-2 text-xs text-orange-600 font-medium",children:" Unsaved changes"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:r.profileImage?s.jsx("img",{src:r.profileImage,alt:"Profile",className:"w-full h-full object-cover"}):s.jsx(gg,{className:"w-10 h-10 text-gray-400"})}),s.jsxs("div",{children:[s.jsx("input",{id:"profile-image-upload",type:"file",accept:"image/*",onChange:he,className:"hidden"}),s.jsxs("label",{htmlFor:"profile-image-upload",className:"cursor-pointer px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors inline-flex items-center space-x-2",children:[s.jsx(w0,{className:"w-4 h-4"}),s.jsx("span",{children:"Upload Picture"})]}),r.profileImage&&s.jsx("button",{onClick:()=>{re("profileImage","")},className:"ml-2 px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Remove"})]})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(ji,{className:"w-5 h-5 text-emerald-600 mr-2"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Account Management"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Current Username: ",v?.username||"Loading..."]}),s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Username"}),s.jsx("input",{type:"text",value:j.newUsername,onChange:z=>I("newUsername",z.target.value),placeholder:"Enter new username",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Username must be at least 3 characters and can only contain letters, numbers, and underscores"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Current Email: ",v?.email||"Loading..."]}),s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Email Address"}),s.jsx("input",{type:"email",value:j.newEmail,onChange:z=>I("newEmail",z.target.value),placeholder:"Enter new email address",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:D.newPassword?"text":"password",value:j.newPassword,onChange:z=>I("newPassword",z.target.value),placeholder:"Enter new password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500"}),s.jsx("button",{type:"button",onClick:()=>J("newPassword"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:D.newPassword?s.jsx(ld,{className:"h-4 w-4 text-gray-400"}):s.jsx(Ni,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 6 characters long"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:D.confirmPassword?"text":"password",value:j.confirmPassword,onChange:z=>I("confirmPassword",z.target.value),placeholder:"Confirm your new password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500",disabled:!j.newPassword}),s.jsx("button",{type:"button",onClick:()=>J("confirmPassword"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:!j.newPassword,children:D.confirmPassword?s.jsx(ld,{className:"h-4 w-4 text-gray-400"}):s.jsx(Ni,{className:"h-4 w-4 text-gray-400"})})]})]})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(ji,{className:"w-5 h-5 text-blue-700 mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Security Reminder"}),s.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"After updating your account information, make sure to write down your new credentials in a secure location. You'll need to use the new credentials for future logins."})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(j0,{className:"w-5 h-5 text-emerald-600 mr-2"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Notifications & Payment"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[s.jsx(j0,{className:"w-4 h-4 text-emerald-600 mr-2"}),"Notifications"]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notification Email"}),s.jsx("input",{type:"email",value:r.notificationEmail,onChange:z=>re("notificationEmail",z.target.value),placeholder:"notifications@restaurant.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Email address for receiving order and support ticket notifications"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email Notifications"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Receive order and system notifications via email"})]}),s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:r.enableEmailNotifications,onChange:z=>re("enableEmailNotifications",z.target.checked),className:"sr-only"}),s.jsx("div",{className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${r.enableEmailNotifications?"bg-emerald-600":"bg-gray-200"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.enableEmailNotifications?"translate-x-6":"translate-x-1"}`})})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"SMS Notifications"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Receive urgent notifications via SMS"})]}),s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:r.enableSMSNotifications,onChange:z=>re("enableSMSNotifications",z.target.checked),className:"sr-only"}),s.jsx("div",{className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${r.enableSMSNotifications?"bg-emerald-600":"bg-gray-200"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.enableSMSNotifications?"translate-x-6":"translate-x-1"}`})})]})]})]}),s.jsxs("div",{className:"space-y-4 border-t border-gray-200 pt-4",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[s.jsx(xj,{className:"w-4 h-4 text-emerald-600 mr-2"}),"Payment Settings"]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PayPal Business Email"}),s.jsx("input",{type:"email",value:r.paypalEmail,onChange:z=>re("paypalEmail",z.target.value),placeholder:"business@restaurant.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"PayPal email address for receiving customer payments. Leave empty to use pay-on-delivery only."})]}),r.paypalEmail?s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(mg,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"PayPal Integration Active"}),s.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Customers can pay online using credit/debit cards via PayPal. Make sure this is a verified PayPal business account."})]})]})}):s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("svg",{className:"w-5 h-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-yellow-900",children:"Pay on Delivery Mode"}),s.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:'No PayPal email configured. Customers will see "Pay on Delivery" option and pay with cash upon delivery.'})]})]})})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(Pr,{className:"w-5 h-5 text-emerald-600 mr-2"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Active Hours"})]}),s.jsx("div",{className:"space-y-4",children:Object.entries(r.businessHours).map(([z,Q])=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-24",children:s.jsx("span",{className:"text-sm font-medium text-gray-900 capitalize",children:z})}),s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:Q.isOpen,onChange:ce=>ue(z,"isOpen",ce.target.checked),className:"sr-only"}),s.jsx("div",{className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${Q.isOpen?"bg-emerald-600":"bg-gray-200"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${Q.isOpen?"translate-x-6":"translate-x-1"}`})}),s.jsx("span",{className:"ml-2 text-sm text-gray-600",children:Q.isOpen?"Open":"Closed"})]})]}),Q.isOpen&&s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Open"}),s.jsx("input",{type:"time",value:Q.openTime,onChange:ce=>ue(z,"openTime",ce.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm focus:ring-emerald-500 focus:border-emerald-500"})]}),s.jsx("span",{className:"text-gray-400",children:"-"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Close"}),s.jsx("input",{type:"time",value:Q.closeTime,onChange:ce=>ue(z,"closeTime",ce.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm focus:ring-emerald-500 focus:border-emerald-500"})]})]})]},z))}),s.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-700",children:[s.jsx("strong",{children:"Note:"})," These hours will be used to show customers when orders can be placed and for delivery scheduling."]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(wd,{className:"w-5 h-5 text-emerald-600 mr-2"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Delivery Settings"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Enable Delivery Service"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Turn delivery on or off for all customers"})]}),s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:r.deliverySettings.enabled,onChange:z=>oe("enabled",z.target.checked),className:"sr-only"}),s.jsx("div",{className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${r.deliverySettings.enabled?"bg-emerald-600":"bg-gray-200"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.deliverySettings.enabled?"translate-x-6":"translate-x-1"}`})}),s.jsx("span",{className:"ml-2 text-sm text-gray-600",children:r.deliverySettings.enabled?"Enabled":"Disabled"})]})]}),r.deliverySettings.enabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery Slot Duration (minutes)"}),s.jsxs("select",{value:r.deliverySettings.deliverySlotDuration,onChange:z=>oe("deliverySlotDuration",parseInt(z.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500",children:[s.jsx("option",{value:60,children:"1 hour"}),s.jsx("option",{value:120,children:"2 hours"}),s.jsx("option",{value:180,children:"3 hours"}),s.jsx("option",{value:240,children:"4 hours"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How long each delivery time slot lasts"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Advance Notice (hours)"}),s.jsxs("select",{value:r.deliverySettings.advanceNoticeHours,onChange:z=>oe("advanceNoticeHours",parseInt(z.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500",children:[s.jsx("option",{value:1,children:"1 hour"}),s.jsx("option",{value:4,children:"4 hours"}),s.jsx("option",{value:12,children:"12 hours"}),s.jsx("option",{value:24,children:"24 hours"}),s.jsx("option",{value:48,children:"48 hours"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum time customers must order in advance"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Days to Book in Advance"}),s.jsxs("select",{value:r.deliverySettings.maxDaysInAdvance,onChange:z=>oe("maxDaysInAdvance",parseInt(z.target.value)),className:"w-full md:w-1/2 px-3 py-2 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500",children:[s.jsx("option",{value:3,children:"3 days"}),s.jsx("option",{value:7,children:"1 week"}),s.jsx("option",{value:14,children:"2 weeks"}),s.jsx("option",{value:30,children:"1 month"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How far in advance customers can book deliveries"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unavailable Dates"}),s.jsxs("div",{className:"space-y-2",children:[r.deliverySettings.unavailableDates.map((z,Q)=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"date",value:z,onChange:ce=>{const de=[...r.deliverySettings.unavailableDates];de[Q]=ce.target.value,oe("unavailableDates",de)},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500"}),s.jsx("button",{onClick:()=>{const ce=r.deliverySettings.unavailableDates.filter((de,Ee)=>Ee!==Q);oe("unavailableDates",ce)},className:"px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Remove"})]},Q)),s.jsx("button",{onClick:()=>{const z=new Date().toISOString().split("T")[0];oe("unavailableDates",[...r.deliverySettings.unavailableDates,z])},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Add Unavailable Date"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Dates when delivery is not available (holidays, maintenance, etc.)"})]})]})]}),s.jsx("div",{className:"mt-4 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-amber-700",children:[s.jsx("strong",{children:"Note:"})," Delivery slots will be generated based on your business hours and these settings. Customers will only see available slots during your open hours."]})})]}),q&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(ji,{className:"w-6 h-6 text-emerald-600 mr-3"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Confirm Password"})]}),s.jsx("p",{className:"text-gray-600 mb-4",children:R==="save"?"Please enter your current password to save these settings:":"Please enter your current password to reset settings to defaults:"}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:G?"text":"password",value:A,onChange:z=>te(z.target.value),placeholder:"Enter your current password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500",autoFocus:!0}),s.jsx("button",{type:"button",onClick:()=>ie(!G),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:G?s.jsx(ld,{className:"h-4 w-4 text-gray-400"}):s.jsx(Ni,{className:"h-4 w-4 text-gray-400"})})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>{K(!1),te(""),ie(!1)},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",disabled:u,children:"Cancel"}),s.jsx("button",{onClick:le,disabled:u||!A,className:`px-4 py-2 rounded-lg transition-colors flex items-center space-x-2 ${u||!A?"bg-gray-400 text-white cursor-not-allowed":"bg-emerald-600 text-white hover:bg-emerald-700"}`,children:u?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),s.jsx("span",{children:"Processing..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(ji,{className:"w-4 h-4"}),s.jsx("span",{children:"Confirm"})]})})]})]})})]})}const _0=[{id:"1",name:"Premium Red Wine",ingredients:"Cabernet Sauvignon grapes, oak barrel aged",unitSize:"750 ml",abv:13.5,price:29.99,imageUrl:"",category:"wine",inStock:!0,createdAt:new Date},{id:"2",name:"Craft IPA Beer",ingredients:"Malted barley, hops, yeast, water",unitSize:"330 ml",abv:6.2,price:12.99,imageUrl:"",category:"beer",inStock:!0,createdAt:new Date},{id:"3",name:"Premium Vodka",ingredients:"Distilled grain, triple filtered",unitSize:"750 ml",abv:40,price:45.99,imageUrl:"",category:"spirits",inStock:!0,createdAt:new Date},{id:"4",name:"Whiskey Collection",ingredients:"Aged corn, rye, barley, oak barrel",unitSize:"750 ml",abv:43,price:125.99,imageUrl:"",category:"spirits",inStock:!0,createdAt:new Date},{id:"5",name:"Champagne Brut",ingredients:"Chardonnay, Pinot Noir, Pinot Meunier grapes",unitSize:"750 ml",abv:12,price:65.99,imageUrl:"",category:"wine",inStock:!0,createdAt:new Date},{id:"6",name:"Gin & Tonic Mix",ingredients:"Premium gin, tonic water, lime",unitSize:"1 L",abv:37.5,price:34.99,imageUrl:"",category:"cocktails",inStock:!0,createdAt:new Date},{id:"7",name:"Margarita Mix",ingredients:"Tequila, triple sec, lime juice, agave",unitSize:"750 ml",abv:15,price:42.99,imageUrl:"",category:"cocktails",inStock:!0,createdAt:new Date},{id:"8",name:"Cocktail Mixer Set",ingredients:"Various mixers, syrups, and garnishes",unitSize:"1 serving",abv:0,price:89.99,imageUrl:"",category:"mixers",inStock:!0,createdAt:new Date}],Cw=[{id:"user-1",name:"John Smith"},{id:"user-2",name:"Sarah Johnson"},{id:"user-3",name:"Mike Chen"},{id:"user-4",name:"Emily Davis"},{id:"user-5",name:"David Wilson"},{id:"user-6",name:"Lisa Anderson"},{id:"user-7",name:"Robert Taylor"},{id:"user-8",name:"Jennifer Brown"},{id:"user-9",name:"Michael Lee"},{id:"user-10",name:"Jessica Garcia"},{id:"user-11",name:"Christopher Martinez"},{id:"user-12",name:"Amanda Rodriguez"},{id:"user-13",name:"Daniel Thompson"},{id:"user-14",name:"Nicole White"},{id:"user-15",name:"Kevin Harris"}],Ow=["Credit Card","Debit Card"],Aw=["10:00","12:00","14:00","16:00","18:00","20:00"],Si=c=>c[Math.floor(Math.random()*c.length)],As=(c,r)=>Math.floor(Math.random()*(r-c+1))+c,E0=c=>{const r=new Date,n=new Date(r.getTime()-c*24*60*60*1e3),i=n.getTime()+Math.random()*(r.getTime()-n.getTime());return new Date(i)},Dw=c=>{const r=new Date(c);return r.setDate(r.getDate()+As(1,7)),r},k0=(c,r)=>{const n=`ORD-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,i=Math.random()<.7?As(1,3):As(4,5),o=[],u=new Set,m={wine:Math.random()*.4+.1,spirits:Math.random()*.3+.2,beer:Math.random()*.4+.1,cocktails:Math.random()*.5+.2,mixers:Math.random()*.2+.05};for(let w=0;w<i;w++){let j,S=0;do{const D=Math.random();let C=0,q="wine";for(const[R,E]of Object.entries(m))if(C+=E,D<=C){q=R;break}const K=_0.filter(R=>R.category===q);j=Si(K.length>0?K:_0),S++}while(u.has(j.id)&&S<10);if(!u.has(j.id)){u.add(j.id);const D=Math.random()<.8?As(1,2):As(3,4);o.push({...j,quantity:D})}}const f=o.reduce((w,j)=>w+j.price*j.quantity,0),g=Dw(r),x=Si(Aw),y=Math.floor((Date.now()-r.getTime())/(1440*60*1e3));let v;return y<1?v=Math.random()<.7?"paid":"processed":y<3?v=Math.random()<.3?"paid":Math.random()<.6?"processed":"delivered":v=Math.random()<.1?"processed":"delivered",{id:n,userId:c.id,userName:c.name,items:o,total:f,deliveryDate:g.toISOString().split("T")[0],deliveryTime:x,status:v,orderDate:r.toISOString(),paymentMethod:Si(Ow)}},Uw=(c=150)=>{const r=[];for(let n=0;n<c;n++){const i=Math.random()<.5?As(0,30):Math.random()<.7?As(31,90):As(91,180),o=E0(i),u=Si(Cw);if(Math.random()<.3&&Math.random()<.4){const f=E0(i+As(1,14));r.push(k0(u,f))}r.push(k0(u,o))}return r.sort((n,i)=>new Date(i.orderDate).getTime()-new Date(n.orderDate).getTime()),r},Mw=(c=150)=>{const r=Uw(c);try{const n=JSON.parse(localStorage.getItem("orders")||"[]"),i=new Set(n.map(m=>m.id)),o=r.filter(m=>!i.has(m.id)),u=[...n,...o];localStorage.setItem("orders",JSON.stringify(u)),console.log(`Added ${o.length} sample orders. Total orders: ${u.length}`)}catch(n){console.error("Error populating sample orders:",n)}},Rw=()=>{localStorage.removeItem("orders"),console.log("All orders cleared")},T0=()=>{try{return JSON.parse(localStorage.getItem("orders")||"[]")}catch{return[]}};function zw(){const[c,r]=_.useState(T0()),[n,i]=_.useState(null),[o,u]=_.useState("month"),[m,f]=_.useState(!0),[g,x]=_.useState(!1),y=()=>{if(confirm("This will add 150 sample orders to your existing data. Continue?")){Mw(150);const j=T0();r(j)}},v=()=>{confirm("This will permanently delete ALL order data. This cannot be undone. Continue?")&&(Rw(),r([]))};_.useEffect(()=>{(()=>{f(!0);const S=new Date,D=new Date;switch(o){case"week":D.setDate(S.getDate()-7);break;case"month":D.setMonth(S.getMonth()-1);break;case"quarter":D.setMonth(S.getMonth()-3);break;case"year":D.setFullYear(S.getFullYear()-1);break}const C=c.filter(ee=>new Date(ee.orderDate)>=D),q=new Map;C.forEach(ee=>{ee.items.forEach(ne=>{const ke=ne.name;q.has(ke)||q.set(ke,{name:ne.name,category:ne.category,totalOrdered:0,totalRevenue:0,averageOrderSize:0,uniqueCustomers:new Set,ordersCount:0});const be=q.get(ke);be.totalOrdered+=ne.quantity,be.totalRevenue+=ne.price*ne.quantity,be.uniqueCustomers.add(ee.userId),be.ordersCount++})});const R=Array.from(q.values()).map(ee=>({...ee,averageOrderSize:ee.totalOrdered/ee.ordersCount,uniqueCustomers:ee.uniqueCustomers})).sort((ee,ne)=>ne.totalOrdered-ee.totalOrdered).slice(0,10),E=new Map;C.forEach(ee=>{E.has(ee.userId)||E.set(ee.userId,{userId:ee.userId,userName:ee.userName,totalOrders:0,totalSpent:0,favoriteCategory:"",lastOrderDate:ee.orderDate,drinkPreferences:{}});const ne=E.get(ee.userId);ne.totalOrders++,ne.totalSpent+=ee.total,new Date(ee.orderDate)>new Date(ne.lastOrderDate)&&(ne.lastOrderDate=ee.orderDate),ee.items.forEach(ke=>{ne.drinkPreferences[ke.name]=(ne.drinkPreferences[ke.name]||0)+ke.quantity})});const te=Array.from(E.values()).map(ee=>{const ne={};C.filter(be=>be.userId===ee.userId).forEach(be=>{be.items.forEach(qe=>{ne[qe.category]=(ne[qe.category]||0)+qe.quantity})});const ke=Object.entries(ne).sort(([,be],[,qe])=>qe-be)[0]?.[0]||"N/A";return{...ee,favoriteCategory:ke}}).sort((ee,ne)=>ne.totalSpent-ee.totalSpent).slice(0,10),G={};C.forEach(ee=>{ee.items.forEach(ne=>{G[ne.category]||(G[ne.category]={orders:0,revenue:0}),G[ne.category].orders+=ne.quantity,G[ne.category].revenue+=ne.price*ne.quantity})});const ie=[];for(let ee=5;ee>=0;ee--){const ne=new Date;ne.setMonth(ne.getMonth()-ee);const ke=new Date(ne.getFullYear(),ne.getMonth(),1),be=new Date(ne.getFullYear(),ne.getMonth()+1,0),qe=c.filter(Ve=>{const ht=new Date(Ve.orderDate);return ht>=ke&&ht<=be});ie.push({month:ne.toLocaleDateString("en-US",{month:"short",year:"numeric"}),orders:qe.length,revenue:qe.reduce((Ve,ht)=>Ve+ht.total,0)})}const V=[];for(let ee=6;ee>=0;ee--){const ne=new Date;ne.setDate(ne.getDate()-ee);const ke=new Date(ne.getFullYear(),ne.getMonth(),ne.getDate()),be=new Date(ke);be.setDate(be.getDate()+1);const qe=c.filter(Ve=>{const ht=new Date(Ve.orderDate);return ht>=ke&&ht<be});V.push({date:ne.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),orders:qe.length,revenue:qe.reduce((Ve,ht)=>Ve+ht.total,0)})}const ue=C.reduce((ee,ne)=>ee+ne.total,0),oe=C.length,he=new Set(C.map(ee=>ee.userId)).size,re=oe>0?ue/oe:0,pe=[];for(let ee=0;ee<24;ee++){const ne=C.filter(ke=>new Date(ke.orderDate).getHours()===ee);pe.push({hour:`${ee.toString().padStart(2,"0")}:00`,orders:ne.length,revenue:ne.reduce((ke,be)=>ke+be.total,0)})}const T=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((ee,ne)=>{const ke=C.filter(be=>new Date(be.orderDate).getDay()===ne);return{day:ee,orders:ke.length,revenue:ke.reduce((be,qe)=>be+qe.total,0)}}),W=[],le=new Date,$=new Date(le.getTime()-10080*60*1e3),N=new Date(le.getTime()-336*60*60*1e3),I=c.filter(ee=>new Date(ee.orderDate)>=$),J=c.filter(ee=>{const ne=new Date(ee.orderDate);return ne>=N&&ne<$}),z=I.reduce((ee,ne)=>ee+ne.total,0),Q=J.reduce((ee,ne)=>ee+ne.total,0),ce=Q>0?(z-Q)/Q*100:0;W.push({period:"Week over Week",growth:ce});const de=new Date(le.getFullYear(),le.getMonth(),1),Ee=new Date(le.getFullYear(),le.getMonth()-1,1),Se=new Date(le.getFullYear(),le.getMonth(),0),nt=c.filter(ee=>new Date(ee.orderDate)>=de),Vt=c.filter(ee=>{const ne=new Date(ee.orderDate);return ne>=Ee&&ne<=Se}),Wt=nt.reduce((ee,ne)=>ee+ne.total,0),Ds=Vt.reduce((ee,ne)=>ee+ne.total,0),Us=Ds>0?(Wt-Ds)/Ds*100:0;W.push({period:"Month over Month",growth:Us});const ha=[],es=new Map;C.forEach(ee=>{es.has(ee.userId)||es.set(ee.userId,[]),es.get(ee.userId).push(new Date(ee.orderDate))}),[{name:"Last 30 Days",days:30},{name:"Last 90 Days",days:90}].forEach(ee=>{const ne=new Date(le.getTime()-ee.days*24*60*60*1e3),ke=C.filter(ht=>new Date(ht.orderDate)>=ne),be=new Set(ke.map(ht=>ht.userId));let qe=0,Ve=0;be.forEach(ht=>{(es.get(ht)||[]).filter($a=>$a<ne).length>0?Ve++:qe++}),ha.push({period:ee.name,returning:Ve,new:qe})});const jt=15,ma=C.reduce((ee,ne)=>ee+ne.items.reduce((ke,be)=>ke+be.quantity,0),0),Ms=ma*jt,ds=ue-Ms,U=ue>0?ds/ue*100:0,se=oe>0?ma/oe:0;i({totalRevenue:ue,totalOrders:oe,totalCustomers:he,averageOrderValue:re,topDrinks:R,topCustomers:te,categoryBreakdown:G,monthlyTrends:ie,recentActivity:V,hourlyPattern:pe,dayOfWeekPattern:T,salesTrends:W,customerRetention:ha,profitabilityMetrics:{totalCosts:Ms,grossProfit:ds,profitMargin:U,avgItemsPerOrder:se}}),f(!1)})()},[c,o]);const w=j=>`$${j.toFixed(2)}`;return m?s.jsx("div",{className:"p-6 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Calculating analytics..."})]})}):n?s.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6 pb-safe-bottom",children:[s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 flex items-center",children:[s.jsx(dg,{className:"w-6 sm:w-8 h-6 sm:h-8 mr-2 sm:mr-3 text-emerald-600"}),s.jsx("span",{className:"hidden sm:inline",children:"Analytics & Reports"}),s.jsx("span",{className:"sm:hidden",children:"Analytics"})]}),s.jsx("p",{className:"text-gray-600 mt-1 text-sm sm:text-base",children:"Track your business performance and customer insights"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-3 w-full sm:w-auto",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Time Range:"}),s.jsxs("select",{value:o,onChange:j=>u(j.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500 mobile-input w-full sm:w-auto",children:[s.jsx("option",{value:"week",children:"Last Week"}),s.jsx("option",{value:"month",children:"Last Month"}),s.jsx("option",{value:"quarter",children:"Last Quarter"}),s.jsx("option",{value:"year",children:"Last Year"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 w-full sm:w-auto",children:[s.jsx("button",{onClick:()=>x(!g),className:"px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors mobile-button-compact w-full sm:w-auto",children:"Sample Data"}),g&&s.jsxs("div",{className:"absolute top-full right-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-lg p-3 space-y-2 z-10",children:[s.jsx("button",{onClick:y,className:"block w-full px-3 py-2 text-sm text-left hover:bg-emerald-50 rounded",children:"Generate Sample Orders"}),s.jsx("button",{onClick:v,className:"block w-full px-3 py-2 text-sm text-left hover:bg-red-50 text-red-600 rounded",children:"Clear All Data"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-emerald-100 rounded-lg",children:s.jsx(N0,{className:"w-6 h-6 text-emerald-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w(n.totalRevenue)})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:s.jsx(Ti,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.totalOrders})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:s.jsx(Zn,{className:"w-6 h-6 text-purple-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Customers"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.totalCustomers})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:s.jsx(id,{className:"w-6 h-6 text-orange-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Order Value"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w(n.averageOrderValue)})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(id,{className:"w-5 h-5 text-emerald-600 mr-2"}),"Sales Growth"]}),s.jsx("div",{className:"space-y-4",children:n.salesTrends.map((j,S)=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsx("span",{className:"font-medium text-gray-900",children:j.period}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:`font-bold ${j.growth>=0?"text-green-600":"text-red-600"}`,children:[j.growth>=0?"+":"",j.growth.toFixed(1),"%"]}),j.growth>=0?s.jsx(id,{className:"w-4 h-4 text-green-600"}):s.jsx("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})]})]},S))})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(Zn,{className:"w-5 h-5 text-emerald-600 mr-2"}),"Customer Retention"]}),s.jsx("div",{className:"space-y-4",children:n.customerRetention.map((j,S)=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-medium text-gray-900",children:j.period}),s.jsxs("span",{className:"text-sm text-gray-600",children:[j.returning+j.new," total customers"]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-3",children:s.jsx("div",{className:"bg-emerald-600 h-3 rounded-l-full",style:{width:`${j.returning/(j.returning+j.new)*100}%`}})}),s.jsxs("div",{className:"text-sm text-gray-600 min-w-max",children:[s.jsx("span",{className:"text-emerald-600 font-medium",children:j.returning})," returning,"," ",s.jsx("span",{className:"text-blue-600 font-medium",children:j.new})," new"]})]})]},S))})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[s.jsx(N0,{className:"w-5 h-5 text-emerald-600 mr-2"}),"Profitability Analysis"]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Estimated profitability metrics based on industry averages"})]}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"text-center p-4 bg-emerald-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:w(n.profitabilityMetrics.grossProfit)}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Gross Profit"}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Revenue - Estimated Costs"})]}),s.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[s.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[n.profitabilityMetrics.profitMargin.toFixed(1),"%"]}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Profit Margin"}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Gross Profit / Revenue"})]}),s.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:n.profitabilityMetrics.avgItemsPerOrder.toFixed(1)}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Avg Items/Order"}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Items per customer order"})]}),s.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:w(n.profitabilityMetrics.totalCosts)}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Est. Total Costs"}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Based on 30% of revenue"})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Peak Hours Analysis"}),s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:n.hourlyPattern.filter(j=>j.orders>0).sort((j,S)=>S.orders-j.orders).slice(0,12).map((j,S)=>{const D=Math.max(...n.hourlyPattern.map(q=>q.orders)),C=D>0?j.orders/D*100:0;return s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"font-medium text-gray-900",children:j.hour}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-medium text-gray-900",children:[j.orders," orders"]}),s.jsx("div",{className:"text-xs text-gray-500",children:w(j.revenue)})]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-emerald-600 h-2 rounded-full transition-all duration-300",style:{width:`${C}%`}})})]},S)})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Weekly Patterns"}),s.jsx("div",{className:"space-y-3",children:n.dayOfWeekPattern.map((j,S)=>{const D=Math.max(...n.dayOfWeekPattern.map(q=>q.orders)),C=D>0?j.orders/D*100:0;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-medium text-gray-900",children:j.day}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[j.orders," orders"]}),s.jsx("div",{className:"text-xs text-gray-500",children:w(j.revenue)})]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:s.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:{width:`${C}%`}})})]},S)})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Category Performance"}),s.jsx("div",{className:"space-y-4",children:Object.entries(n.categoryBreakdown).sort(([,j],[,S])=>S.revenue-j.revenue).map(([j,S])=>{const D=Math.max(...Object.values(n.categoryBreakdown).map(q=>q.revenue)),C=S.revenue/D*100;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-medium text-gray-900 capitalize",children:j}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:w(S.revenue)}),s.jsxs("div",{className:"text-xs text-gray-500",children:[S.orders," items sold"]})]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:s.jsx("div",{className:"bg-emerald-600 h-3 rounded-full transition-all duration-300",style:{width:`${C}%`}})})]},j)})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Daily Activity (Last 7 Days)"}),s.jsx("div",{className:"space-y-3",children:n.recentActivity.map((j,S)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-2 h-2 bg-emerald-600 rounded-full"}),s.jsx("span",{className:"font-medium text-gray-900",children:j.date})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:w(j.revenue)}),s.jsxs("div",{className:"text-xs text-gray-500",children:[j.orders," orders"]})]})]},S))})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Os,{className:"w-5 h-5 text-emerald-600 mr-2"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Drink Performance Analytics"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Comprehensive analysis of drink sales and customer preferences"})]})]})})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 mb-4 sm:mb-6",children:[s.jsxs("div",{className:"bg-emerald-50 p-3 sm:p-4 rounded-lg text-center",children:[s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-emerald-600",children:n.topDrinks.length}),s.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Active Drinks"})]}),s.jsxs("div",{className:"bg-blue-50 p-3 sm:p-4 rounded-lg text-center",children:[s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-blue-600",children:n.topDrinks.reduce((j,S)=>j+S.totalOrdered,0)}),s.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Total Units Sold"})]}),s.jsxs("div",{className:"bg-purple-50 p-3 sm:p-4 rounded-lg text-center",children:[s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-purple-600",children:n.topDrinks[0]?.name.substring(0,15)+(n.topDrinks[0]?.name.length>15?"...":"")||"N/A"}),s.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Top Seller"})]})]}),s.jsx("div",{className:"hidden md:block mobile-table-container",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),s.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Drink Name"}),s.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),s.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Units Sold"}),s.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Revenue"}),s.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell",children:"Avg/Order"}),s.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell",children:"Customers"}),s.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Performance"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.topDrinks.map((j,S)=>{const D=j.totalRevenue/Math.max(...n.topDrinks.map(C=>C.totalRevenue))*100;return s.jsxs("tr",{className:S<3?"bg-yellow-50":"",children:[s.jsx("td",{className:"px-4 lg:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:S<3?s.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:["#",S+1]}):s.jsxs("span",{className:"text-gray-500",children:["#",S+1]})}),s.jsx("td",{className:"px-4 lg:px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm font-medium text-gray-900 truncate max-w-[120px] md:max-w-none",children:j.name})}),s.jsx("td",{className:"px-4 lg:px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 capitalize",children:j.category})}),s.jsxs("td",{className:"px-4 lg:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[s.jsx("div",{className:"font-medium",children:j.totalOrdered}),s.jsxs("div",{className:"text-xs text-gray-500",children:[j.ordersCount," orders"]})]}),s.jsx("td",{className:"px-4 lg:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:w(j.totalRevenue)}),s.jsx("td",{className:"px-4 lg:px-6 py-4 whitespace-nowrap text-sm text-gray-900 hidden lg:table-cell",children:j.averageOrderSize.toFixed(1)}),s.jsxs("td",{className:"px-4 lg:px-6 py-4 whitespace-nowrap text-sm text-gray-900 hidden lg:table-cell",children:[s.jsx("div",{className:"font-medium",children:j.uniqueCustomers.size}),s.jsxs("div",{className:"text-xs text-gray-500",children:[(j.uniqueCustomers.size/n.totalCustomers*100).toFixed(1),"% reach"]})]}),s.jsx("td",{className:"px-4 lg:px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-12 lg:w-16 bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-emerald-600 h-2 rounded-full",style:{width:`${D}%`}})}),s.jsxs("span",{className:"text-xs text-gray-500",children:[D.toFixed(0),"%"]})]})})]},j.name)})})]})}),s.jsx("div",{className:"md:hidden space-y-3",children:n.topDrinks.map((j,S)=>{const D=j.totalRevenue/Math.max(...n.topDrinks.map(C=>C.totalRevenue))*100;return s.jsxs("div",{className:`mobile-table-card ${S<3?"border-yellow-300 bg-yellow-50":""}`,children:[s.jsxs("div",{className:"mobile-table-card-header flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[S<3?s.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:["#",S+1]}):s.jsxs("span",{className:"text-gray-500 text-sm",children:["#",S+1]}),s.jsx("span",{className:"font-semibold text-gray-900 truncate",children:j.name})]}),s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 capitalize",children:j.category})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"mobile-table-card-row",children:[s.jsx("span",{className:"mobile-table-card-label",children:"Units Sold:"}),s.jsxs("span",{className:"mobile-table-card-value",children:[j.totalOrdered," (",j.ordersCount," orders)"]})]}),s.jsxs("div",{className:"mobile-table-card-row",children:[s.jsx("span",{className:"mobile-table-card-label",children:"Revenue:"}),s.jsx("span",{className:"mobile-table-card-value font-semibold",children:w(j.totalRevenue)})]}),s.jsxs("div",{className:"mobile-table-card-row",children:[s.jsx("span",{className:"mobile-table-card-label",children:"Avg/Order:"}),s.jsx("span",{className:"mobile-table-card-value",children:j.averageOrderSize.toFixed(1)})]}),s.jsxs("div",{className:"mobile-table-card-row",children:[s.jsx("span",{className:"mobile-table-card-label",children:"Customers:"}),s.jsxs("span",{className:"mobile-table-card-value",children:[j.uniqueCustomers.size," (",(j.uniqueCustomers.size/n.totalCustomers*100).toFixed(1),"% reach)"]})]}),s.jsxs("div",{className:"mobile-table-card-row",children:[s.jsx("span",{className:"mobile-table-card-label",children:"Performance:"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-emerald-600 h-2 rounded-full",style:{width:`${D}%`}})}),s.jsxs("span",{className:"text-xs text-gray-500",children:[D.toFixed(0),"%"]})]})]})]})]},j.name)})}),n.topDrinks.length===0&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Os,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No drink data available for the selected time period"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:[s.jsx("div",{className:"px-4 sm:px-6 py-4 border-b border-gray-200",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Zn,{className:"w-5 h-5 text-emerald-600 mr-2"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Customer Analysis & Preferences"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Top customers and their detailed drink preferences"})]})]})})}),s.jsxs("div",{className:"p-4 sm:p-6",children:[s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:n.topCustomers.map((j,S)=>{const D=Object.entries(j.drinkPreferences).sort(([,q],[,K])=>K-q).slice(0,5),C=Object.values(j.drinkPreferences).reduce((q,K)=>q+K,0);return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 space-y-3 sm:space-y-0",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:`w-10 sm:w-12 h-10 sm:h-12 rounded-full flex items-center justify-center text-white font-bold text-sm sm:text-base ${S===0?"bg-yellow-500":S===1?"bg-gray-400":S===2?"bg-orange-500":"bg-emerald-500"}`,children:["#",S+1]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 truncate",children:j.userName}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Customer since orders began"})]})]}),s.jsxs("div",{className:"text-left sm:text-right",children:[s.jsx("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:w(j.totalSpent)}),s.jsxs("p",{className:"text-sm text-gray-500",children:[j.totalOrders," orders"]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-3 mb-4",children:[s.jsxs("div",{className:"bg-blue-50 p-2 sm:p-3 rounded-lg text-center",children:[s.jsx("div",{className:"text-sm sm:text-lg font-bold text-blue-600",children:w(j.totalSpent/j.totalOrders)}),s.jsx("div",{className:"text-xs text-gray-600",children:"Avg Order"})]}),s.jsxs("div",{className:"bg-purple-50 p-2 sm:p-3 rounded-lg text-center",children:[s.jsx("div",{className:"text-sm sm:text-lg font-bold text-purple-600 capitalize truncate",children:j.favoriteCategory}),s.jsx("div",{className:"text-xs text-gray-600",children:"Fav Category"})]}),s.jsxs("div",{className:"bg-emerald-50 p-2 sm:p-3 rounded-lg text-center",children:[s.jsx("div",{className:"text-sm sm:text-lg font-bold text-emerald-600",children:C}),s.jsx("div",{className:"text-xs text-gray-600",children:"Total Items"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h4",{className:"font-medium text-gray-900 flex items-center text-sm sm:text-base",children:[s.jsx(Ti,{className:"w-4 h-4 mr-2 text-emerald-600"}),"Drink Preferences"]}),D.length>0?s.jsx("div",{className:"space-y-2",children:D.map(([q,K],R)=>{const E=K/C*100;return s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-gray-700 truncate max-w-[120px] sm:max-w-[180px]",title:q,children:q}),s.jsxs("div",{className:"text-right",children:[s.jsxs("span",{className:"font-medium text-gray-900",children:[K,"x"]}),s.jsxs("span",{className:"text-gray-500 ml-1",children:["(",E.toFixed(1),"%)"]})]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full ${R===0?"bg-emerald-500":R===1?"bg-blue-500":R===2?"bg-purple-500":R===3?"bg-orange-500":"bg-gray-500"}`,style:{width:`${E}%`}})})]},q)})}):s.jsx("p",{className:"text-sm text-gray-500 italic",children:"No drink preference data available"})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Last Order:"}),s.jsx("span",{className:"font-medium text-gray-900",children:new Date(j.lastOrderDate).toLocaleDateString()})]})})]},j.userId)})}),n.topCustomers.length===0&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Zn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No customer data available for the selected time period"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Monthly Trends"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Order and revenue trends over the last 6 months"})]}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.monthlyTrends.map((j,S)=>s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:j.month}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:w(j.revenue)}),s.jsxs("p",{className:"text-sm text-gray-600",children:[j.orders," orders"]})]})]},S))})})]})]}):s.jsx("div",{className:"p-6 text-center",children:s.jsx("p",{className:"text-gray-600",children:"Unable to load analytics data."})})}Ip.createRoot(document.getElementById("root")).render(s.jsx(C0.StrictMode,{children:s.jsxs(tw,{children:["         ",s.jsxs(Wb,{children:["        ",s.jsx(Gy,{children:s.jsxs(zy,{children:[s.jsx(Ge,{path:"/",element:s.jsx(Ky,{})}),s.jsx(Ge,{path:"/sign-in",element:s.jsx(ej,{})}),s.jsx(Ge,{path:"/contact-admin",element:s.jsx(sj,{})}),s.jsx(Ge,{path:"/auth/reset-password",element:s.jsx(tj,{})}),s.jsxs(Ge,{path:"/user/:id",element:s.jsx(sw,{}),children:[s.jsx(Ge,{index:!0,element:s.jsx(Fc,{to:"dashboard",replace:!0})}),s.jsx(Ge,{path:"dashboard",element:s.jsx(rw,{})}),s.jsx(Ge,{path:"orders",element:s.jsx(lw,{})}),s.jsx(Ge,{path:"inventory",element:s.jsx(dw,{})}),s.jsx(Ge,{path:"support",element:s.jsx(hw,{})}),s.jsx(Ge,{path:"settings",element:s.jsx(mw,{})}),s.jsx(Ge,{path:"delivery-time",element:s.jsx(gw,{})}),s.jsx(Ge,{path:"payment",element:s.jsx(xw,{})}),s.jsx(Ge,{path:"order-success",element:s.jsx(pw,{})})]}),s.jsxs(Ge,{path:"/admin",element:s.jsx(bw,{}),children:[s.jsx(Ge,{index:!0,element:s.jsx(Fc,{to:"dashboard",replace:!0})}),s.jsx(Ge,{path:"dashboard",element:s.jsx(jw,{})}),s.jsx(Ge,{path:"users",element:s.jsx(ww,{})}),s.jsx(Ge,{path:"users/:id",element:s.jsx(Nw,{})}),s.jsx(Ge,{path:"orders",element:s.jsx(Sw,{})}),s.jsx(Ge,{path:"inventory",element:s.jsx(_w,{})}),s.jsx(Ge,{path:"analytics",element:s.jsx(zw,{})}),s.jsx(Ge,{path:"support",element:s.jsx(kw,{})}),s.jsx(Ge,{path:"settings",element:s.jsx(Tw,{})})]}),s.jsx(Ge,{path:"*",element:s.jsx(Fc,{to:"/",replace:!0})})]})})]})]})}));
