function qp(c,r){for(var n=0;n<r.length;n++){const i=r[n];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in c)){const u=Object.getOwnPropertyDescriptor(i,o);u&&Object.defineProperty(c,o,u.get?u:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const m of u.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function Dd(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}function Bp(c){if(Object.prototype.hasOwnProperty.call(c,"__esModule"))return c;var r=c.default;if(typeof r=="function"){var n=function i(){var o=!1;try{o=this instanceof i}catch{}return o?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};n.prototype=r.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(c).forEach(function(i){var o=Object.getOwnPropertyDescriptor(c,i);Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:function(){return c[i]}})}),n}var ed={exports:{}},tl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Af;function $p(){if(Af)return tl;Af=1;var c=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function n(i,o,u){var m=null;if(u!==void 0&&(m=""+u),o.key!==void 0&&(m=""+o.key),"key"in o){u={};for(var f in o)f!=="key"&&(u[f]=o[f])}else u=o;return o=u.ref,{$$typeof:c,type:i,key:m,ref:o!==void 0?o:null,props:u}}return tl.Fragment=r,tl.jsx=n,tl.jsxs=n,tl}var Df;function Pp(){return Df||(Df=1,ed.exports=$p()),ed.exports}var s=Pp(),td={exports:{}},ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uf;function Ip(){if(Uf)return ke;Uf=1;var c=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),m=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),j=Symbol.iterator;function k(N){return N===null||typeof N!="object"?null:(N=j&&N[j]||N["@@iterator"],typeof N=="function"?N:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,w={};function _(N,I,se){this.props=N,this.context=I,this.refs=w,this.updater=se||b}_.prototype.isReactComponent={},_.prototype.setState=function(N,I){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,I,"setState")},_.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function O(){}O.prototype=_.prototype;function P(N,I,se){this.props=N,this.context=I,this.refs=w,this.updater=se||b}var D=P.prototype=new O;D.constructor=P,S(D,_.prototype),D.isPureReactComponent=!0;var z=Array.isArray,U={H:null,A:null,T:null,S:null,V:null},V=Object.prototype.hasOwnProperty;function H(N,I,se,ae,he,we){return se=we.ref,{$$typeof:c,type:N,key:I,ref:se!==void 0?se:null,props:we}}function le(N,I){return H(N.type,I,void 0,void 0,void 0,N.props)}function W(N){return typeof N=="object"&&N!==null&&N.$$typeof===c}function ne(N){var I={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(se){return I[se]})}var ee=/\/+/g;function ie(N,I){return typeof N=="object"&&N!==null&&N.key!=null?ne(""+N.key):I.toString(36)}function fe(){}function Y(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(fe,fe):(N.status="pending",N.then(function(I){N.status==="pending"&&(N.status="fulfilled",N.value=I)},function(I){N.status==="pending"&&(N.status="rejected",N.reason=I)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function ce(N,I,se,ae,he){var we=typeof N;(we==="undefined"||we==="boolean")&&(N=null);var pe=!1;if(N===null)pe=!0;else switch(we){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(N.$$typeof){case c:case r:pe=!0;break;case y:return pe=N._init,ce(pe(N._payload),I,se,ae,he)}}if(pe)return he=he(N),pe=ae===""?"."+ie(N,0):ae,z(he)?(se="",pe!=null&&(se=pe.replace(ee,"$&/")+"/"),ce(he,I,se,"",function(ue){return ue})):he!=null&&(W(he)&&(he=le(he,se+(he.key==null||N&&N.key===he.key?"":(""+he.key).replace(ee,"$&/")+"/")+pe)),I.push(he)),1;pe=0;var Ze=ae===""?".":ae+":";if(z(N))for(var F=0;F<N.length;F++)ae=N[F],we=Ze+ie(ae,F),pe+=ce(ae,I,se,we,he);else if(F=k(N),typeof F=="function")for(N=F.call(N),F=0;!(ae=N.next()).done;)ae=ae.value,we=Ze+ie(ae,F++),pe+=ce(ae,I,se,we,he);else if(we==="object"){if(typeof N.then=="function")return ce(Y(N),I,se,ae,he);throw I=String(N),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return pe}function T(N,I,se){if(N==null)return N;var ae=[],he=0;return ce(N,ae,"","",function(we){return I.call(se,we,he++)}),ae}function L(N){if(N._status===-1){var I=N._result;I=I(),I.then(function(se){(N._status===0||N._status===-1)&&(N._status=1,N._result=se)},function(se){(N._status===0||N._status===-1)&&(N._status=2,N._result=se)}),N._status===-1&&(N._status=0,N._result=I)}if(N._status===1)return N._result.default;throw N._result}var X=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function Ne(){}return ke.Children={map:T,forEach:function(N,I,se){T(N,function(){I.apply(this,arguments)},se)},count:function(N){var I=0;return T(N,function(){I++}),I},toArray:function(N){return T(N,function(I){return I})||[]},only:function(N){if(!W(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},ke.Component=_,ke.Fragment=n,ke.Profiler=o,ke.PureComponent=P,ke.StrictMode=i,ke.Suspense=g,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,ke.__COMPILER_RUNTIME={__proto__:null,c:function(N){return U.H.useMemoCache(N)}},ke.cache=function(N){return function(){return N.apply(null,arguments)}},ke.cloneElement=function(N,I,se){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var ae=S({},N.props),he=N.key,we=void 0;if(I!=null)for(pe in I.ref!==void 0&&(we=void 0),I.key!==void 0&&(he=""+I.key),I)!V.call(I,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&I.ref===void 0||(ae[pe]=I[pe]);var pe=arguments.length-2;if(pe===1)ae.children=se;else if(1<pe){for(var Ze=Array(pe),F=0;F<pe;F++)Ze[F]=arguments[F+2];ae.children=Ze}return H(N.type,he,void 0,void 0,we,ae)},ke.createContext=function(N){return N={$$typeof:m,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:u,_context:N},N},ke.createElement=function(N,I,se){var ae,he={},we=null;if(I!=null)for(ae in I.key!==void 0&&(we=""+I.key),I)V.call(I,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(he[ae]=I[ae]);var pe=arguments.length-2;if(pe===1)he.children=se;else if(1<pe){for(var Ze=Array(pe),F=0;F<pe;F++)Ze[F]=arguments[F+2];he.children=Ze}if(N&&N.defaultProps)for(ae in pe=N.defaultProps,pe)he[ae]===void 0&&(he[ae]=pe[ae]);return H(N,we,void 0,void 0,null,he)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(N){return{$$typeof:f,render:N}},ke.isValidElement=W,ke.lazy=function(N){return{$$typeof:y,_payload:{_status:-1,_result:N},_init:L}},ke.memo=function(N,I){return{$$typeof:x,type:N,compare:I===void 0?null:I}},ke.startTransition=function(N){var I=U.T,se={};U.T=se;try{var ae=N(),he=U.S;he!==null&&he(se,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(Ne,X)}catch(we){X(we)}finally{U.T=I}},ke.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},ke.use=function(N){return U.H.use(N)},ke.useActionState=function(N,I,se){return U.H.useActionState(N,I,se)},ke.useCallback=function(N,I){return U.H.useCallback(N,I)},ke.useContext=function(N){return U.H.useContext(N)},ke.useDebugValue=function(){},ke.useDeferredValue=function(N,I){return U.H.useDeferredValue(N,I)},ke.useEffect=function(N,I,se){var ae=U.H;if(typeof se=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(N,I)},ke.useId=function(){return U.H.useId()},ke.useImperativeHandle=function(N,I,se){return U.H.useImperativeHandle(N,I,se)},ke.useInsertionEffect=function(N,I){return U.H.useInsertionEffect(N,I)},ke.useLayoutEffect=function(N,I){return U.H.useLayoutEffect(N,I)},ke.useMemo=function(N,I){return U.H.useMemo(N,I)},ke.useOptimistic=function(N,I){return U.H.useOptimistic(N,I)},ke.useReducer=function(N,I,se){return U.H.useReducer(N,I,se)},ke.useRef=function(N){return U.H.useRef(N)},ke.useState=function(N){return U.H.useState(N)},ke.useSyncExternalStore=function(N,I,se){return U.H.useSyncExternalStore(N,I,se)},ke.useTransition=function(){return U.H.useTransition()},ke.version="19.1.0",ke}var Mf;function Ud(){return Mf||(Mf=1,td.exports=Ip()),td.exports}var E=Ud();const zg=Dd(E),Hp=qp({__proto__:null,default:zg},[E]);var sd={exports:{}},sl={},ad={exports:{}},rd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rf;function Gp(){return Rf||(Rf=1,function(c){function r(T,L){var X=T.length;T.push(L);e:for(;0<X;){var Ne=X-1>>>1,N=T[Ne];if(0<o(N,L))T[Ne]=L,T[X]=N,X=Ne;else break e}}function n(T){return T.length===0?null:T[0]}function i(T){if(T.length===0)return null;var L=T[0],X=T.pop();if(X!==L){T[0]=X;e:for(var Ne=0,N=T.length,I=N>>>1;Ne<I;){var se=2*(Ne+1)-1,ae=T[se],he=se+1,we=T[he];if(0>o(ae,X))he<N&&0>o(we,ae)?(T[Ne]=we,T[he]=X,Ne=he):(T[Ne]=ae,T[se]=X,Ne=se);else if(he<N&&0>o(we,X))T[Ne]=we,T[he]=X,Ne=he;else break e}}return L}function o(T,L){var X=T.sortIndex-L.sortIndex;return X!==0?X:T.id-L.id}if(c.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;c.unstable_now=function(){return u.now()}}else{var m=Date,f=m.now();c.unstable_now=function(){return m.now()-f}}var g=[],x=[],y=1,j=null,k=3,b=!1,S=!1,w=!1,_=!1,O=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function z(T){for(var L=n(x);L!==null;){if(L.callback===null)i(x);else if(L.startTime<=T)i(x),L.sortIndex=L.expirationTime,r(g,L);else break;L=n(x)}}function U(T){if(w=!1,z(T),!S)if(n(g)!==null)S=!0,V||(V=!0,ie());else{var L=n(x);L!==null&&ce(U,L.startTime-T)}}var V=!1,H=-1,le=5,W=-1;function ne(){return _?!0:!(c.unstable_now()-W<le)}function ee(){if(_=!1,V){var T=c.unstable_now();W=T;var L=!0;try{e:{S=!1,w&&(w=!1,P(H),H=-1),b=!0;var X=k;try{t:{for(z(T),j=n(g);j!==null&&!(j.expirationTime>T&&ne());){var Ne=j.callback;if(typeof Ne=="function"){j.callback=null,k=j.priorityLevel;var N=Ne(j.expirationTime<=T);if(T=c.unstable_now(),typeof N=="function"){j.callback=N,z(T),L=!0;break t}j===n(g)&&i(g),z(T)}else i(g);j=n(g)}if(j!==null)L=!0;else{var I=n(x);I!==null&&ce(U,I.startTime-T),L=!1}}break e}finally{j=null,k=X,b=!1}L=void 0}}finally{L?ie():V=!1}}}var ie;if(typeof D=="function")ie=function(){D(ee)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,Y=fe.port2;fe.port1.onmessage=ee,ie=function(){Y.postMessage(null)}}else ie=function(){O(ee,0)};function ce(T,L){H=O(function(){T(c.unstable_now())},L)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(T){T.callback=null},c.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):le=0<T?Math.floor(1e3/T):5},c.unstable_getCurrentPriorityLevel=function(){return k},c.unstable_next=function(T){switch(k){case 1:case 2:case 3:var L=3;break;default:L=k}var X=k;k=L;try{return T()}finally{k=X}},c.unstable_requestPaint=function(){_=!0},c.unstable_runWithPriority=function(T,L){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var X=k;k=T;try{return L()}finally{k=X}},c.unstable_scheduleCallback=function(T,L,X){var Ne=c.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Ne+X:Ne):X=Ne,T){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=X+N,T={id:y++,callback:L,priorityLevel:T,startTime:X,expirationTime:N,sortIndex:-1},X>Ne?(T.sortIndex=X,r(x,T),n(g)===null&&T===n(x)&&(w?(P(H),H=-1):w=!0,ce(U,X-Ne))):(T.sortIndex=N,r(g,T),S||b||(S=!0,V||(V=!0,ie()))),T},c.unstable_shouldYield=ne,c.unstable_wrapCallback=function(T){var L=k;return function(){var X=k;k=L;try{return T.apply(this,arguments)}finally{k=X}}}}(rd)),rd}var zf;function Vp(){return zf||(zf=1,ad.exports=Gp()),ad.exports}var nd={exports:{}},_t={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lf;function Yp(){if(Lf)return _t;Lf=1;var c=Ud();function r(g){var x="https://react.dev/errors/"+g;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)x+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(r(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,x,y){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:j==null?null:""+j,children:g,containerInfo:x,implementation:y}}var m=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,x){if(g==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return _t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,_t.createPortal=function(g,x){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(r(299));return u(g,x,null,y)},_t.flushSync=function(g){var x=m.T,y=i.p;try{if(m.T=null,i.p=2,g)return g()}finally{m.T=x,i.p=y,i.d.f()}},_t.preconnect=function(g,x){typeof g=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,i.d.C(g,x))},_t.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},_t.preinit=function(g,x){if(typeof g=="string"&&x&&typeof x.as=="string"){var y=x.as,j=f(y,x.crossOrigin),k=typeof x.integrity=="string"?x.integrity:void 0,b=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;y==="style"?i.d.S(g,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:j,integrity:k,fetchPriority:b}):y==="script"&&i.d.X(g,{crossOrigin:j,integrity:k,fetchPriority:b,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},_t.preinitModule=function(g,x){if(typeof g=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var y=f(x.as,x.crossOrigin);i.d.M(g,{crossOrigin:y,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&i.d.M(g)},_t.preload=function(g,x){if(typeof g=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var y=x.as,j=f(y,x.crossOrigin);i.d.L(g,y,{crossOrigin:j,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},_t.preloadModule=function(g,x){if(typeof g=="string")if(x){var y=f(x.as,x.crossOrigin);i.d.m(g,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:y,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else i.d.m(g)},_t.requestFormReset=function(g){i.d.r(g)},_t.unstable_batchedUpdates=function(g,x){return g(x)},_t.useFormState=function(g,x,y){return m.H.useFormState(g,x,y)},_t.useFormStatus=function(){return m.H.useHostTransitionStatus()},_t.version="19.1.0",_t}var qf;function Lg(){if(qf)return nd.exports;qf=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(r){console.error(r)}}return c(),nd.exports=Yp(),nd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bf;function Qp(){if(Bf)return sl;Bf=1;var c=Vp(),r=Ud(),n=Lg();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function m(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function f(e){if(u(e)!==e)throw Error(i(188))}function g(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(i(188));return t!==e?null:e}for(var a=e,l=t;;){var d=a.return;if(d===null)break;var h=d.alternate;if(h===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===a)return f(d),e;if(h===l)return f(d),t;h=h.sibling}throw Error(i(188))}if(a.return!==l.return)a=d,l=h;else{for(var p=!1,v=d.child;v;){if(v===a){p=!0,a=d,l=h;break}if(v===l){p=!0,l=d,a=h;break}v=v.sibling}if(!p){for(v=h.child;v;){if(v===a){p=!0,a=h,l=d;break}if(v===l){p=!0,l=h,a=d;break}v=v.sibling}if(!p)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?e:t}function x(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=x(e),t!==null)return t;e=e.sibling}return null}var y=Object.assign,j=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),P=Symbol.for("react.consumer"),D=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),ne=Symbol.for("react.memo_cache_sentinel"),ee=Symbol.iterator;function ie(e){return e===null||typeof e!="object"?null:(e=ee&&e[ee]||e["@@iterator"],typeof e=="function"?e:null)}var fe=Symbol.for("react.client.reference");function Y(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===fe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case _:return"Profiler";case w:return"StrictMode";case U:return"Suspense";case V:return"SuspenseList";case W:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case b:return"Portal";case D:return(e.displayName||"Context")+".Provider";case P:return(e._context.displayName||"Context")+".Consumer";case z:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case H:return t=e.displayName||null,t!==null?t:Y(e.type)||"Memo";case le:t=e._payload,e=e._init;try{return Y(e(t))}catch{}}return null}var ce=Array.isArray,T=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},Ne=[],N=-1;function I(e){return{current:e}}function se(e){0>N||(e.current=Ne[N],Ne[N]=null,N--)}function ae(e,t){N++,Ne[N]=e.current,e.current=t}var he=I(null),we=I(null),pe=I(null),Ze=I(null);function F(e,t){switch(ae(pe,t),ae(we,e),ae(he,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?rf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=rf(t),e=nf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}se(he),ae(he,e)}function ue(){se(he),se(we),se(pe)}function Te(e){e.memoizedState!==null&&ae(Ze,e);var t=he.current,a=nf(t,e.type);t!==a&&(ae(we,e),ae(he,a))}function ye(e){we.current===e&&(se(he),se(we)),Ze.current===e&&(se(Ze),Jn._currentValue=X)}var Se=Object.prototype.hasOwnProperty,ht=c.unstable_scheduleCallback,Tt=c.unstable_cancelCallback,Yt=c.unstable_shouldYield,Fa=c.unstable_requestPaint,Ct=c.unstable_now,Wa=c.unstable_getCurrentPriorityLevel,wa=c.unstable_ImmediatePriority,Na=c.unstable_UserBlockingPriority,Ps=c.unstable_NormalPriority,Sa=c.unstable_LowPriority,an=c.unstable_IdlePriority,oe=c.log,de=c.unstable_setDisableYieldValue,Re=null,_e=null;function Ye(e){if(typeof oe=="function"&&de(e),_e&&typeof _e.setStrictMode=="function")try{_e.setStrictMode(Re,e)}catch{}}var Ie=Math.clz32?Math.clz32:rn,lt=Math.log,gl=Math.LN2;function rn(e){return e>>>=0,e===0?32:31-(lt(e)/gl|0)|0}var bs=256,Is=4194304;function M(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Z(e,t,a){var l=e.pendingLanes;if(l===0)return 0;var d=0,h=e.suspendedLanes,p=e.pingedLanes;e=e.warmLanes;var v=l&134217727;return v!==0?(l=v&~h,l!==0?d=M(l):(p&=v,p!==0?d=M(p):a||(a=v&~e,a!==0&&(d=M(a))))):(v=l&~h,v!==0?d=M(v):p!==0?d=M(p):a||(a=l&~e,a!==0&&(d=M(a)))),d===0?0:t!==0&&t!==d&&(t&h)===0&&(h=d&-d,a=t&-t,h>=a||h===32&&(a&4194048)!==0)?t:d}function re(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ge(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mt(){var e=bs;return bs<<=1,(bs&4194048)===0&&(bs=256),e}function Qt(){var e=Is;return Is<<=1,(Is&62914560)===0&&(Is=4194304),e}function nn(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function _a(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function E0(e,t,a,l,d,h){var p=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var v=e.entanglements,C=e.expirationTimes,B=e.hiddenUpdates;for(a=p&~a;0<a;){var Q=31-Ie(a),J=1<<Q;v[Q]=0,C[Q]=-1;var $=B[Q];if($!==null)for(B[Q]=null,Q=0;Q<$.length;Q++){var G=$[Q];G!==null&&(G.lane&=-536870913)}a&=~J}l!==0&&Hd(e,l,0),h!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=h&~(p&~t))}function Hd(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Ie(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|a&4194090}function Gd(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var l=31-Ie(a),d=1<<l;d&t|e[l]&t&&(e[l]|=t),a&=~d}}function Hi(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Gi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Vd(){var e=L.p;return e!==0?e:(e=window.event,e===void 0?32:_f(e.type))}function k0(e,t){var a=L.p;try{return L.p=e,t()}finally{L.p=a}}var Hs=Math.random().toString(36).slice(2),Nt="__reactFiber$"+Hs,Ot="__reactProps$"+Hs,er="__reactContainer$"+Hs,Vi="__reactEvents$"+Hs,T0="__reactListeners$"+Hs,C0="__reactHandles$"+Hs,Yd="__reactResources$"+Hs,ln="__reactMarker$"+Hs;function Yi(e){delete e[Nt],delete e[Ot],delete e[Vi],delete e[T0],delete e[C0]}function tr(e){var t=e[Nt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[er]||a[Nt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=df(e);e!==null;){if(a=e[Nt])return a;e=df(e)}return t}e=a,a=e.parentNode}return null}function sr(e){if(e=e[Nt]||e[er]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function on(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function ar(e){var t=e[Yd];return t||(t=e[Yd]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ft(e){e[ln]=!0}var Qd=new Set,Xd={};function Ea(e,t){rr(e,t),rr(e+"Capture",t)}function rr(e,t){for(Xd[e]=t,e=0;e<t.length;e++)Qd.add(t[e])}var O0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Kd={},Jd={};function A0(e){return Se.call(Jd,e)?!0:Se.call(Kd,e)?!1:O0.test(e)?Jd[e]=!0:(Kd[e]=!0,!1)}function xl(e,t,a){if(A0(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function pl(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function js(e,t,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+l)}}var Qi,Zd;function nr(e){if(Qi===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Qi=t&&t[1]||"",Zd=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qi+e+Zd}var Xi=!1;function Ki(e,t){if(!e||Xi)return"";Xi=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(G){var $=G}Reflect.construct(e,[],J)}else{try{J.call()}catch(G){$=G}e.call(J.prototype)}}else{try{throw Error()}catch(G){$=G}(J=e())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(G){if(G&&$&&typeof G.stack=="string")return[G.stack,$.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=l.DetermineComponentFrameRoot(),p=h[0],v=h[1];if(p&&v){var C=p.split(`
`),B=v.split(`
`);for(d=l=0;l<C.length&&!C[l].includes("DetermineComponentFrameRoot");)l++;for(;d<B.length&&!B[d].includes("DetermineComponentFrameRoot");)d++;if(l===C.length||d===B.length)for(l=C.length-1,d=B.length-1;1<=l&&0<=d&&C[l]!==B[d];)d--;for(;1<=l&&0<=d;l--,d--)if(C[l]!==B[d]){if(l!==1||d!==1)do if(l--,d--,0>d||C[l]!==B[d]){var Q=`
`+C[l].replace(" at new "," at ");return e.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",e.displayName)),Q}while(1<=l&&0<=d);break}}}finally{Xi=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?nr(a):""}function D0(e){switch(e.tag){case 26:case 27:case 5:return nr(e.type);case 16:return nr("Lazy");case 13:return nr("Suspense");case 19:return nr("SuspenseList");case 0:case 15:return Ki(e.type,!1);case 11:return Ki(e.type.render,!1);case 1:return Ki(e.type,!0);case 31:return nr("Activity");default:return""}}function Fd(e){try{var t="";do t+=D0(e),e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Xt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Wd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function U0(e){var t=Wd(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,h=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(p){l=""+p,h.call(this,p)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(p){l=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function yl(e){e._valueTracker||(e._valueTracker=U0(e))}function eu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),l="";return e&&(l=Wd(e)?e.checked?"true":"false":e.value),e=l,e!==a?(t.setValue(e),!0):!1}function vl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var M0=/[\n"\\]/g;function Kt(e){return e.replace(M0,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ji(e,t,a,l,d,h,p,v){e.name="",p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.type=p:e.removeAttribute("type"),t!=null?p==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Xt(t)):e.value!==""+Xt(t)&&(e.value=""+Xt(t)):p!=="submit"&&p!=="reset"||e.removeAttribute("value"),t!=null?Zi(e,p,Xt(t)):a!=null?Zi(e,p,Xt(a)):l!=null&&e.removeAttribute("value"),d==null&&h!=null&&(e.defaultChecked=!!h),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.name=""+Xt(v):e.removeAttribute("name")}function tu(e,t,a,l,d,h,p,v){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),t!=null||a!=null){if(!(h!=="submit"&&h!=="reset"||t!=null))return;a=a!=null?""+Xt(a):"",t=t!=null?""+Xt(t):a,v||t===e.value||(e.value=t),e.defaultValue=t}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=v?e.checked:!!l,e.defaultChecked=!!l,p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.name=p)}function Zi(e,t,a){t==="number"&&vl(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function lr(e,t,a,l){if(e=e.options,t){t={};for(var d=0;d<a.length;d++)t["$"+a[d]]=!0;for(a=0;a<e.length;a++)d=t.hasOwnProperty("$"+e[a].value),e[a].selected!==d&&(e[a].selected=d),d&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Xt(a),t=null,d=0;d<e.length;d++){if(e[d].value===a){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function su(e,t,a){if(t!=null&&(t=""+Xt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Xt(a):""}function au(e,t,a,l){if(t==null){if(l!=null){if(a!=null)throw Error(i(92));if(ce(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),t=a}a=Xt(t),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l)}function ir(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var R0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ru(e,t,a){var l=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,a):typeof a!="number"||a===0||R0.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function nu(e,t,a){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var d in t)l=t[d],t.hasOwnProperty(d)&&a[d]!==l&&ru(e,d,l)}else for(var h in t)t.hasOwnProperty(h)&&ru(e,h,t[h])}function Fi(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var z0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),L0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bl(e){return L0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Wi=null;function eo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var or=null,cr=null;function lu(e){var t=sr(e);if(t&&(e=t.stateNode)){var a=e[Ot]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ji(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Kt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var l=a[t];if(l!==e&&l.form===e.form){var d=l[Ot]||null;if(!d)throw Error(i(90));Ji(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(t=0;t<a.length;t++)l=a[t],l.form===e.form&&eu(l)}break e;case"textarea":su(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&lr(e,!!a.multiple,t,!1)}}}var to=!1;function iu(e,t,a){if(to)return e(t,a);to=!0;try{var l=e(t);return l}finally{if(to=!1,(or!==null||cr!==null)&&(ni(),or&&(t=or,e=cr,cr=or=null,lu(t),e)))for(t=0;t<e.length;t++)lu(e[t])}}function cn(e,t){var a=e.stateNode;if(a===null)return null;var l=a[Ot]||null;if(l===null)return null;a=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(i(231,t,typeof a));return a}var ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),so=!1;if(ws)try{var dn={};Object.defineProperty(dn,"passive",{get:function(){so=!0}}),window.addEventListener("test",dn,dn),window.removeEventListener("test",dn,dn)}catch{so=!1}var Gs=null,ao=null,jl=null;function ou(){if(jl)return jl;var e,t=ao,a=t.length,l,d="value"in Gs?Gs.value:Gs.textContent,h=d.length;for(e=0;e<a&&t[e]===d[e];e++);var p=a-e;for(l=1;l<=p&&t[a-l]===d[h-l];l++);return jl=d.slice(e,1<l?1-l:void 0)}function wl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Nl(){return!0}function cu(){return!1}function At(e){function t(a,l,d,h,p){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=h,this.target=p,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(a=e[v],this[v]=a?a(h):h[v]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Nl:cu,this.isPropagationStopped=cu,this}return y(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Nl)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Nl)},persist:function(){},isPersistent:Nl}),t}var ka={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sl=At(ka),un=y({},ka,{view:0,detail:0}),q0=At(un),ro,no,hn,_l=y({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:io,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hn&&(hn&&e.type==="mousemove"?(ro=e.screenX-hn.screenX,no=e.screenY-hn.screenY):no=ro=0,hn=e),ro)},movementY:function(e){return"movementY"in e?e.movementY:no}}),du=At(_l),B0=y({},_l,{dataTransfer:0}),$0=At(B0),P0=y({},un,{relatedTarget:0}),lo=At(P0),I0=y({},ka,{animationName:0,elapsedTime:0,pseudoElement:0}),H0=At(I0),G0=y({},ka,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),V0=At(G0),Y0=y({},ka,{data:0}),uu=At(Y0),Q0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},X0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},K0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function J0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=K0[e])?!!t[e]:!1}function io(){return J0}var Z0=y({},un,{key:function(e){if(e.key){var t=Q0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=wl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?X0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:io,charCode:function(e){return e.type==="keypress"?wl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),F0=At(Z0),W0=y({},_l,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hu=At(W0),ex=y({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:io}),tx=At(ex),sx=y({},ka,{propertyName:0,elapsedTime:0,pseudoElement:0}),ax=At(sx),rx=y({},_l,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),nx=At(rx),lx=y({},ka,{newState:0,oldState:0}),ix=At(lx),ox=[9,13,27,32],oo=ws&&"CompositionEvent"in window,mn=null;ws&&"documentMode"in document&&(mn=document.documentMode);var cx=ws&&"TextEvent"in window&&!mn,mu=ws&&(!oo||mn&&8<mn&&11>=mn),fu=" ",gu=!1;function xu(e,t){switch(e){case"keyup":return ox.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var dr=!1;function dx(e,t){switch(e){case"compositionend":return pu(t);case"keypress":return t.which!==32?null:(gu=!0,fu);case"textInput":return e=t.data,e===fu&&gu?null:e;default:return null}}function ux(e,t){if(dr)return e==="compositionend"||!oo&&xu(e,t)?(e=ou(),jl=ao=Gs=null,dr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return mu&&t.locale!=="ko"?null:t.data;default:return null}}var hx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!hx[e.type]:t==="textarea"}function vu(e,t,a,l){or?cr?cr.push(l):cr=[l]:or=l,t=ui(t,"onChange"),0<t.length&&(a=new Sl("onChange","change",null,a,l),e.push({event:a,listeners:t}))}var fn=null,gn=null;function mx(e){Wm(e,0)}function El(e){var t=on(e);if(eu(t))return e}function bu(e,t){if(e==="change")return t}var ju=!1;if(ws){var co;if(ws){var uo="oninput"in document;if(!uo){var wu=document.createElement("div");wu.setAttribute("oninput","return;"),uo=typeof wu.oninput=="function"}co=uo}else co=!1;ju=co&&(!document.documentMode||9<document.documentMode)}function Nu(){fn&&(fn.detachEvent("onpropertychange",Su),gn=fn=null)}function Su(e){if(e.propertyName==="value"&&El(gn)){var t=[];vu(t,gn,e,eo(e)),iu(mx,t)}}function fx(e,t,a){e==="focusin"?(Nu(),fn=t,gn=a,fn.attachEvent("onpropertychange",Su)):e==="focusout"&&Nu()}function gx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return El(gn)}function xx(e,t){if(e==="click")return El(t)}function px(e,t){if(e==="input"||e==="change")return El(t)}function yx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zt=typeof Object.is=="function"?Object.is:yx;function xn(e,t){if(zt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),l=Object.keys(t);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!Se.call(t,d)||!zt(e[d],t[d]))return!1}return!0}function _u(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Eu(e,t){var a=_u(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=t&&l>=t)return{node:a,offset:t-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=_u(a)}}function ku(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ku(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Tu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=vl(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=vl(e.document)}return t}function ho(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var vx=ws&&"documentMode"in document&&11>=document.documentMode,ur=null,mo=null,pn=null,fo=!1;function Cu(e,t,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;fo||ur==null||ur!==vl(l)||(l=ur,"selectionStart"in l&&ho(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),pn&&xn(pn,l)||(pn=l,l=ui(mo,"onSelect"),0<l.length&&(t=new Sl("onSelect","select",null,t,a),e.push({event:t,listeners:l}),t.target=ur)))}function Ta(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var hr={animationend:Ta("Animation","AnimationEnd"),animationiteration:Ta("Animation","AnimationIteration"),animationstart:Ta("Animation","AnimationStart"),transitionrun:Ta("Transition","TransitionRun"),transitionstart:Ta("Transition","TransitionStart"),transitioncancel:Ta("Transition","TransitionCancel"),transitionend:Ta("Transition","TransitionEnd")},go={},Ou={};ws&&(Ou=document.createElement("div").style,"AnimationEvent"in window||(delete hr.animationend.animation,delete hr.animationiteration.animation,delete hr.animationstart.animation),"TransitionEvent"in window||delete hr.transitionend.transition);function Ca(e){if(go[e])return go[e];if(!hr[e])return e;var t=hr[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Ou)return go[e]=t[a];return e}var Au=Ca("animationend"),Du=Ca("animationiteration"),Uu=Ca("animationstart"),bx=Ca("transitionrun"),jx=Ca("transitionstart"),wx=Ca("transitioncancel"),Mu=Ca("transitionend"),Ru=new Map,xo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xo.push("scrollEnd");function ls(e,t){Ru.set(e,t),Ea(t,[e])}var zu=new WeakMap;function Jt(e,t){if(typeof e=="object"&&e!==null){var a=zu.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Fd(t)},zu.set(e,t),t)}return{value:e,source:t,stack:Fd(t)}}var Zt=[],mr=0,po=0;function kl(){for(var e=mr,t=po=mr=0;t<e;){var a=Zt[t];Zt[t++]=null;var l=Zt[t];Zt[t++]=null;var d=Zt[t];Zt[t++]=null;var h=Zt[t];if(Zt[t++]=null,l!==null&&d!==null){var p=l.pending;p===null?d.next=d:(d.next=p.next,p.next=d),l.pending=d}h!==0&&Lu(a,d,h)}}function Tl(e,t,a,l){Zt[mr++]=e,Zt[mr++]=t,Zt[mr++]=a,Zt[mr++]=l,po|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function yo(e,t,a,l){return Tl(e,t,a,l),Cl(e)}function fr(e,t){return Tl(e,null,null,t),Cl(e)}function Lu(e,t,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var d=!1,h=e.return;h!==null;)h.childLanes|=a,l=h.alternate,l!==null&&(l.childLanes|=a),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(d=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,d&&t!==null&&(d=31-Ie(a),e=h.hiddenUpdates,l=e[d],l===null?e[d]=[t]:l.push(t),t.lane=a|536870912),h):null}function Cl(e){if(50<In)throw In=0,Sc=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var gr={};function Nx(e,t,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(e,t,a,l){return new Nx(e,t,a,l)}function vo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ns(e,t){var a=e.alternate;return a===null?(a=Lt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function qu(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ol(e,t,a,l,d,h){var p=0;if(l=e,typeof e=="function")vo(e)&&(p=1);else if(typeof e=="string")p=_p(e,a,he.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case W:return e=Lt(31,a,t,d),e.elementType=W,e.lanes=h,e;case S:return Oa(a.children,d,h,t);case w:p=8,d|=24;break;case _:return e=Lt(12,a,t,d|2),e.elementType=_,e.lanes=h,e;case U:return e=Lt(13,a,t,d),e.elementType=U,e.lanes=h,e;case V:return e=Lt(19,a,t,d),e.elementType=V,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case O:case D:p=10;break e;case P:p=9;break e;case z:p=11;break e;case H:p=14;break e;case le:p=16,l=null;break e}p=29,a=Error(i(130,e===null?"null":typeof e,"")),l=null}return t=Lt(p,a,t,d),t.elementType=e,t.type=l,t.lanes=h,t}function Oa(e,t,a,l){return e=Lt(7,e,l,t),e.lanes=a,e}function bo(e,t,a){return e=Lt(6,e,null,t),e.lanes=a,e}function jo(e,t,a){return t=Lt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var xr=[],pr=0,Al=null,Dl=0,Ft=[],Wt=0,Aa=null,Ss=1,_s="";function Da(e,t){xr[pr++]=Dl,xr[pr++]=Al,Al=e,Dl=t}function Bu(e,t,a){Ft[Wt++]=Ss,Ft[Wt++]=_s,Ft[Wt++]=Aa,Aa=e;var l=Ss;e=_s;var d=32-Ie(l)-1;l&=~(1<<d),a+=1;var h=32-Ie(t)+d;if(30<h){var p=d-d%5;h=(l&(1<<p)-1).toString(32),l>>=p,d-=p,Ss=1<<32-Ie(t)+d|a<<d|l,_s=h+e}else Ss=1<<h|a<<d|l,_s=e}function wo(e){e.return!==null&&(Da(e,1),Bu(e,1,0))}function No(e){for(;e===Al;)Al=xr[--pr],xr[pr]=null,Dl=xr[--pr],xr[pr]=null;for(;e===Aa;)Aa=Ft[--Wt],Ft[Wt]=null,_s=Ft[--Wt],Ft[Wt]=null,Ss=Ft[--Wt],Ft[Wt]=null}var kt=null,et=null,Le=!1,Ua=null,fs=!1,So=Error(i(519));function Ma(e){var t=Error(i(418,""));throw bn(Jt(t,e)),So}function $u(e){var t=e.stateNode,a=e.type,l=e.memoizedProps;switch(t[Nt]=e,t[Ot]=l,a){case"dialog":De("cancel",t),De("close",t);break;case"iframe":case"object":case"embed":De("load",t);break;case"video":case"audio":for(a=0;a<Gn.length;a++)De(Gn[a],t);break;case"source":De("error",t);break;case"img":case"image":case"link":De("error",t),De("load",t);break;case"details":De("toggle",t);break;case"input":De("invalid",t),tu(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),yl(t);break;case"select":De("invalid",t);break;case"textarea":De("invalid",t),au(t,l.value,l.defaultValue,l.children),yl(t)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||l.suppressHydrationWarning===!0||af(t.textContent,a)?(l.popover!=null&&(De("beforetoggle",t),De("toggle",t)),l.onScroll!=null&&De("scroll",t),l.onScrollEnd!=null&&De("scrollend",t),l.onClick!=null&&(t.onclick=hi),t=!0):t=!1,t||Ma(e)}function Pu(e){for(kt=e.return;kt;)switch(kt.tag){case 5:case 13:fs=!1;return;case 27:case 3:fs=!0;return;default:kt=kt.return}}function yn(e){if(e!==kt)return!1;if(!Le)return Pu(e),Le=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||$c(e.type,e.memoizedProps)),a=!a),a&&et&&Ma(e),Pu(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(t===0){et=os(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++;e=e.nextSibling}et=null}}else t===27?(t=et,la(e.type)?(e=Gc,Gc=null,et=e):et=t):et=kt?os(e.stateNode.nextSibling):null;return!0}function vn(){et=kt=null,Le=!1}function Iu(){var e=Ua;return e!==null&&(Mt===null?Mt=e:Mt.push.apply(Mt,e),Ua=null),e}function bn(e){Ua===null?Ua=[e]:Ua.push(e)}var _o=I(null),Ra=null,Es=null;function Vs(e,t,a){ae(_o,t._currentValue),t._currentValue=a}function ks(e){e._currentValue=_o.current,se(_o)}function Eo(e,t,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===a)break;e=e.return}}function ko(e,t,a,l){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var h=d.dependencies;if(h!==null){var p=d.child;h=h.firstContext;e:for(;h!==null;){var v=h;h=d;for(var C=0;C<t.length;C++)if(v.context===t[C]){h.lanes|=a,v=h.alternate,v!==null&&(v.lanes|=a),Eo(h.return,a,e),l||(p=null);break e}h=v.next}}else if(d.tag===18){if(p=d.return,p===null)throw Error(i(341));p.lanes|=a,h=p.alternate,h!==null&&(h.lanes|=a),Eo(p,a,e),p=null}else p=d.child;if(p!==null)p.return=d;else for(p=d;p!==null;){if(p===e){p=null;break}if(d=p.sibling,d!==null){d.return=p.return,p=d;break}p=p.return}d=p}}function jn(e,t,a,l){e=null;for(var d=t,h=!1;d!==null;){if(!h){if((d.flags&524288)!==0)h=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var p=d.alternate;if(p===null)throw Error(i(387));if(p=p.memoizedProps,p!==null){var v=d.type;zt(d.pendingProps.value,p.value)||(e!==null?e.push(v):e=[v])}}else if(d===Ze.current){if(p=d.alternate,p===null)throw Error(i(387));p.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Jn):e=[Jn])}d=d.return}e!==null&&ko(t,e,a,l),t.flags|=262144}function Ul(e){for(e=e.firstContext;e!==null;){if(!zt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function za(e){Ra=e,Es=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function St(e){return Hu(Ra,e)}function Ml(e,t){return Ra===null&&za(e),Hu(e,t)}function Hu(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Es===null){if(e===null)throw Error(i(308));Es=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Es=Es.next=t;return a}var Sx=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},_x=c.unstable_scheduleCallback,Ex=c.unstable_NormalPriority,dt={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function To(){return{controller:new Sx,data:new Map,refCount:0}}function wn(e){e.refCount--,e.refCount===0&&_x(Ex,function(){e.controller.abort()})}var Nn=null,Co=0,yr=0,vr=null;function kx(e,t){if(Nn===null){var a=Nn=[];Co=0,yr=Ac(),vr={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Co++,t.then(Gu,Gu),t}function Gu(){if(--Co===0&&Nn!==null){vr!==null&&(vr.status="fulfilled");var e=Nn;Nn=null,yr=0,vr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Tx(e,t){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var d=0;d<a.length;d++)(0,a[d])(t)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var Vu=T.S;T.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&kx(e,t),Vu!==null&&Vu(e,t)};var La=I(null);function Oo(){var e=La.current;return e!==null?e:Xe.pooledCache}function Rl(e,t){t===null?ae(La,La.current):ae(La,t.pool)}function Yu(){var e=Oo();return e===null?null:{parent:dt._currentValue,pool:e}}var Sn=Error(i(460)),Qu=Error(i(474)),zl=Error(i(542)),Ao={then:function(){}};function Xu(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ll(){}function Ku(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Ll,Ll),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Zu(e),e;default:if(typeof t.status=="string")t.then(Ll,Ll);else{if(e=Xe,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var d=t;d.status="fulfilled",d.value=l}},function(l){if(t.status==="pending"){var d=t;d.status="rejected",d.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Zu(e),e}throw _n=t,Sn}}var _n=null;function Ju(){if(_n===null)throw Error(i(459));var e=_n;return _n=null,e}function Zu(e){if(e===Sn||e===zl)throw Error(i(483))}var Ys=!1;function Do(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Qs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Xs(e,t,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,($e&2)!==0){var d=l.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),l.pending=t,t=Cl(e),Lu(e,null,a),t}return Tl(e,l,t,a),Cl(e)}function En(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,Gd(e,a)}}function Mo(e,t){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,h=null;if(a=a.firstBaseUpdate,a!==null){do{var p={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};h===null?d=h=p:h=h.next=p,a=a.next}while(a!==null);h===null?d=h=t:h=h.next=t}else d=h=t;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Ro=!1;function kn(){if(Ro){var e=vr;if(e!==null)throw e}}function Tn(e,t,a,l){Ro=!1;var d=e.updateQueue;Ys=!1;var h=d.firstBaseUpdate,p=d.lastBaseUpdate,v=d.shared.pending;if(v!==null){d.shared.pending=null;var C=v,B=C.next;C.next=null,p===null?h=B:p.next=B,p=C;var Q=e.alternate;Q!==null&&(Q=Q.updateQueue,v=Q.lastBaseUpdate,v!==p&&(v===null?Q.firstBaseUpdate=B:v.next=B,Q.lastBaseUpdate=C))}if(h!==null){var J=d.baseState;p=0,Q=B=C=null,v=h;do{var $=v.lane&-536870913,G=$!==v.lane;if(G?(Me&$)===$:(l&$)===$){$!==0&&$===yr&&(Ro=!0),Q!==null&&(Q=Q.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var je=e,ve=v;$=t;var Ve=a;switch(ve.tag){case 1:if(je=ve.payload,typeof je=="function"){J=je.call(Ve,J,$);break e}J=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=ve.payload,$=typeof je=="function"?je.call(Ve,J,$):je,$==null)break e;J=y({},J,$);break e;case 2:Ys=!0}}$=v.callback,$!==null&&(e.flags|=64,G&&(e.flags|=8192),G=d.callbacks,G===null?d.callbacks=[$]:G.push($))}else G={lane:$,tag:v.tag,payload:v.payload,callback:v.callback,next:null},Q===null?(B=Q=G,C=J):Q=Q.next=G,p|=$;if(v=v.next,v===null){if(v=d.shared.pending,v===null)break;G=v,v=G.next,G.next=null,d.lastBaseUpdate=G,d.shared.pending=null}}while(!0);Q===null&&(C=J),d.baseState=C,d.firstBaseUpdate=B,d.lastBaseUpdate=Q,h===null&&(d.shared.lanes=0),sa|=p,e.lanes=p,e.memoizedState=J}}function Fu(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function Wu(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Fu(a[e],t)}var br=I(null),ql=I(0);function eh(e,t){e=Ms,ae(ql,e),ae(br,t),Ms=e|t.baseLanes}function zo(){ae(ql,Ms),ae(br,br.current)}function Lo(){Ms=ql.current,se(br),se(ql)}var Ks=0,Ce=null,He=null,it=null,Bl=!1,jr=!1,qa=!1,$l=0,Cn=0,wr=null,Cx=0;function st(){throw Error(i(321))}function qo(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!zt(e[a],t[a]))return!1;return!0}function Bo(e,t,a,l,d,h){return Ks=h,Ce=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,T.H=e===null||e.memoizedState===null?Lh:qh,qa=!1,h=a(l,d),qa=!1,jr&&(h=sh(t,a,l,d)),th(e),h}function th(e){T.H=Yl;var t=He!==null&&He.next!==null;if(Ks=0,it=He=Ce=null,Bl=!1,Cn=0,wr=null,t)throw Error(i(300));e===null||gt||(e=e.dependencies,e!==null&&Ul(e)&&(gt=!0))}function sh(e,t,a,l){Ce=e;var d=0;do{if(jr&&(wr=null),Cn=0,jr=!1,25<=d)throw Error(i(301));if(d+=1,it=He=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}T.H=zx,h=t(a,l)}while(jr);return h}function Ox(){var e=T.H,t=e.useState()[0];return t=typeof t.then=="function"?On(t):t,e=e.useState()[0],(He!==null?He.memoizedState:null)!==e&&(Ce.flags|=1024),t}function $o(){var e=$l!==0;return $l=0,e}function Po(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Io(e){if(Bl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Bl=!1}Ks=0,it=He=Ce=null,jr=!1,Cn=$l=0,wr=null}function Dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Ce.memoizedState=it=e:it=it.next=e,it}function ot(){if(He===null){var e=Ce.alternate;e=e!==null?e.memoizedState:null}else e=He.next;var t=it===null?Ce.memoizedState:it.next;if(t!==null)it=t,He=e;else{if(e===null)throw Ce.alternate===null?Error(i(467)):Error(i(310));He=e,e={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},it===null?Ce.memoizedState=it=e:it=it.next=e}return it}function Ho(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function On(e){var t=Cn;return Cn+=1,wr===null&&(wr=[]),e=Ku(wr,e,t),t=Ce,(it===null?t.memoizedState:it.next)===null&&(t=t.alternate,T.H=t===null||t.memoizedState===null?Lh:qh),e}function Pl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return On(e);if(e.$$typeof===D)return St(e)}throw Error(i(438,String(e)))}function Go(e){var t=null,a=Ce.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var l=Ce.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(d){return d.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Ho(),Ce.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),l=0;l<e;l++)a[l]=ne;return t.index++,a}function Ts(e,t){return typeof t=="function"?t(e):t}function Il(e){var t=ot();return Vo(t,He,e)}function Vo(e,t,a){var l=e.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var d=e.baseQueue,h=l.pending;if(h!==null){if(d!==null){var p=d.next;d.next=h.next,h.next=p}t.baseQueue=d=h,l.pending=null}if(h=e.baseState,d===null)e.memoizedState=h;else{t=d.next;var v=p=null,C=null,B=t,Q=!1;do{var J=B.lane&-536870913;if(J!==B.lane?(Me&J)===J:(Ks&J)===J){var $=B.revertLane;if($===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),J===yr&&(Q=!0);else if((Ks&$)===$){B=B.next,$===yr&&(Q=!0);continue}else J={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},C===null?(v=C=J,p=h):C=C.next=J,Ce.lanes|=$,sa|=$;J=B.action,qa&&a(h,J),h=B.hasEagerState?B.eagerState:a(h,J)}else $={lane:J,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},C===null?(v=C=$,p=h):C=C.next=$,Ce.lanes|=J,sa|=J;B=B.next}while(B!==null&&B!==t);if(C===null?p=h:C.next=v,!zt(h,e.memoizedState)&&(gt=!0,Q&&(a=vr,a!==null)))throw a;e.memoizedState=h,e.baseState=p,e.baseQueue=C,l.lastRenderedState=h}return d===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Yo(e){var t=ot(),a=t.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=e;var l=a.dispatch,d=a.pending,h=t.memoizedState;if(d!==null){a.pending=null;var p=d=d.next;do h=e(h,p.action),p=p.next;while(p!==d);zt(h,t.memoizedState)||(gt=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),a.lastRenderedState=h}return[h,l]}function ah(e,t,a){var l=Ce,d=ot(),h=Le;if(h){if(a===void 0)throw Error(i(407));a=a()}else a=t();var p=!zt((He||d).memoizedState,a);p&&(d.memoizedState=a,gt=!0),d=d.queue;var v=lh.bind(null,l,d,e);if(An(2048,8,v,[e]),d.getSnapshot!==t||p||it!==null&&it.memoizedState.tag&1){if(l.flags|=2048,Nr(9,Hl(),nh.bind(null,l,d,a,t),null),Xe===null)throw Error(i(349));h||(Ks&124)!==0||rh(l,t,a)}return a}function rh(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=Ce.updateQueue,t===null?(t=Ho(),Ce.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function nh(e,t,a,l){t.value=a,t.getSnapshot=l,ih(t)&&oh(e)}function lh(e,t,a){return a(function(){ih(t)&&oh(e)})}function ih(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!zt(e,a)}catch{return!0}}function oh(e){var t=fr(e,2);t!==null&&It(t,e,2)}function Qo(e){var t=Dt();if(typeof e=="function"){var a=e;if(e=a(),qa){Ye(!0);try{a()}finally{Ye(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:e},t}function ch(e,t,a,l){return e.baseState=a,Vo(e,He,typeof l=="function"?l:Ts)}function Ax(e,t,a,l,d){if(Vl(e))throw Error(i(485));if(e=t.action,e!==null){var h={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){h.listeners.push(p)}};T.T!==null?a(!0):h.isTransition=!1,l(h),a=t.pending,a===null?(h.next=t.pending=h,dh(t,h)):(h.next=a.next,t.pending=a.next=h)}}function dh(e,t){var a=t.action,l=t.payload,d=e.state;if(t.isTransition){var h=T.T,p={};T.T=p;try{var v=a(d,l),C=T.S;C!==null&&C(p,v),uh(e,t,v)}catch(B){Xo(e,t,B)}finally{T.T=h}}else try{h=a(d,l),uh(e,t,h)}catch(B){Xo(e,t,B)}}function uh(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){hh(e,t,l)},function(l){return Xo(e,t,l)}):hh(e,t,a)}function hh(e,t,a){t.status="fulfilled",t.value=a,mh(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,dh(e,a)))}function Xo(e,t,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=a,mh(t),t=t.next;while(t!==l)}e.action=null}function mh(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function fh(e,t){return t}function gh(e,t){if(Le){var a=Xe.formState;if(a!==null){e:{var l=Ce;if(Le){if(et){t:{for(var d=et,h=fs;d.nodeType!==8;){if(!h){d=null;break t}if(d=os(d.nextSibling),d===null){d=null;break t}}h=d.data,d=h==="F!"||h==="F"?d:null}if(d){et=os(d.nextSibling),l=d.data==="F!";break e}}Ma(l)}l=!1}l&&(t=a[0])}}return a=Dt(),a.memoizedState=a.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fh,lastRenderedState:t},a.queue=l,a=Mh.bind(null,Ce,l),l.dispatch=a,l=Qo(!1),h=Wo.bind(null,Ce,!1,l.queue),l=Dt(),d={state:t,dispatch:null,action:e,pending:null},l.queue=d,a=Ax.bind(null,Ce,d,h,a),d.dispatch=a,l.memoizedState=e,[t,a,!1]}function xh(e){var t=ot();return ph(t,He,e)}function ph(e,t,a){if(t=Vo(e,t,fh)[0],e=Il(Ts)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=On(t)}catch(p){throw p===Sn?zl:p}else l=t;t=ot();var d=t.queue,h=d.dispatch;return a!==t.memoizedState&&(Ce.flags|=2048,Nr(9,Hl(),Dx.bind(null,d,a),null)),[l,h,e]}function Dx(e,t){e.action=t}function yh(e){var t=ot(),a=He;if(a!==null)return ph(t,a,e);ot(),t=t.memoizedState,a=ot();var l=a.queue.dispatch;return a.memoizedState=e,[t,l,!1]}function Nr(e,t,a,l){return e={tag:e,create:a,deps:l,inst:t,next:null},t=Ce.updateQueue,t===null&&(t=Ho(),Ce.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,t.lastEffect=e),e}function Hl(){return{destroy:void 0,resource:void 0}}function vh(){return ot().memoizedState}function Gl(e,t,a,l){var d=Dt();l=l===void 0?null:l,Ce.flags|=e,d.memoizedState=Nr(1|t,Hl(),a,l)}function An(e,t,a,l){var d=ot();l=l===void 0?null:l;var h=d.memoizedState.inst;He!==null&&l!==null&&qo(l,He.memoizedState.deps)?d.memoizedState=Nr(t,h,a,l):(Ce.flags|=e,d.memoizedState=Nr(1|t,h,a,l))}function bh(e,t){Gl(8390656,8,e,t)}function jh(e,t){An(2048,8,e,t)}function wh(e,t){return An(4,2,e,t)}function Nh(e,t){return An(4,4,e,t)}function Sh(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _h(e,t,a){a=a!=null?a.concat([e]):null,An(4,4,Sh.bind(null,t,e),a)}function Ko(){}function Eh(e,t){var a=ot();t=t===void 0?null:t;var l=a.memoizedState;return t!==null&&qo(t,l[1])?l[0]:(a.memoizedState=[e,t],e)}function kh(e,t){var a=ot();t=t===void 0?null:t;var l=a.memoizedState;if(t!==null&&qo(t,l[1]))return l[0];if(l=e(),qa){Ye(!0);try{e()}finally{Ye(!1)}}return a.memoizedState=[l,t],l}function Jo(e,t,a){return a===void 0||(Ks&1073741824)!==0?e.memoizedState=t:(e.memoizedState=a,e=Om(),Ce.lanes|=e,sa|=e,a)}function Th(e,t,a,l){return zt(a,t)?a:br.current!==null?(e=Jo(e,a,l),zt(e,t)||(gt=!0),e):(Ks&42)===0?(gt=!0,e.memoizedState=a):(e=Om(),Ce.lanes|=e,sa|=e,t)}function Ch(e,t,a,l,d){var h=L.p;L.p=h!==0&&8>h?h:8;var p=T.T,v={};T.T=v,Wo(e,!1,t,a);try{var C=d(),B=T.S;if(B!==null&&B(v,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var Q=Tx(C,l);Dn(e,t,Q,Pt(e))}else Dn(e,t,l,Pt(e))}catch(J){Dn(e,t,{then:function(){},status:"rejected",reason:J},Pt())}finally{L.p=h,T.T=p}}function Ux(){}function Zo(e,t,a,l){if(e.tag!==5)throw Error(i(476));var d=Oh(e).queue;Ch(e,d,t,X,a===null?Ux:function(){return Ah(e),a(l)})}function Oh(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:X},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Ah(e){var t=Oh(e).next.queue;Dn(e,t,{},Pt())}function Fo(){return St(Jn)}function Dh(){return ot().memoizedState}function Uh(){return ot().memoizedState}function Mx(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Pt();e=Qs(a);var l=Xs(t,e,a);l!==null&&(It(l,t,a),En(l,t,a)),t={cache:To()},e.payload=t;return}t=t.return}}function Rx(e,t,a){var l=Pt();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Vl(e)?Rh(t,a):(a=yo(e,t,a,l),a!==null&&(It(a,e,l),zh(a,t,l)))}function Mh(e,t,a){var l=Pt();Dn(e,t,a,l)}function Dn(e,t,a,l){var d={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Vl(e))Rh(t,d);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var p=t.lastRenderedState,v=h(p,a);if(d.hasEagerState=!0,d.eagerState=v,zt(v,p))return Tl(e,t,d,0),Xe===null&&kl(),!1}catch{}finally{}if(a=yo(e,t,d,l),a!==null)return It(a,e,l),zh(a,t,l),!0}return!1}function Wo(e,t,a,l){if(l={lane:2,revertLane:Ac(),action:l,hasEagerState:!1,eagerState:null,next:null},Vl(e)){if(t)throw Error(i(479))}else t=yo(e,a,l,2),t!==null&&It(t,e,2)}function Vl(e){var t=e.alternate;return e===Ce||t!==null&&t===Ce}function Rh(e,t){jr=Bl=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function zh(e,t,a){if((a&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,Gd(e,a)}}var Yl={readContext:St,use:Pl,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useLayoutEffect:st,useInsertionEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useSyncExternalStore:st,useId:st,useHostTransitionStatus:st,useFormState:st,useActionState:st,useOptimistic:st,useMemoCache:st,useCacheRefresh:st},Lh={readContext:St,use:Pl,useCallback:function(e,t){return Dt().memoizedState=[e,t===void 0?null:t],e},useContext:St,useEffect:bh,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Gl(4194308,4,Sh.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Gl(4194308,4,e,t)},useInsertionEffect:function(e,t){Gl(4,2,e,t)},useMemo:function(e,t){var a=Dt();t=t===void 0?null:t;var l=e();if(qa){Ye(!0);try{e()}finally{Ye(!1)}}return a.memoizedState=[l,t],l},useReducer:function(e,t,a){var l=Dt();if(a!==void 0){var d=a(t);if(qa){Ye(!0);try{a(t)}finally{Ye(!1)}}}else d=t;return l.memoizedState=l.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},l.queue=e,e=e.dispatch=Rx.bind(null,Ce,e),[l.memoizedState,e]},useRef:function(e){var t=Dt();return e={current:e},t.memoizedState=e},useState:function(e){e=Qo(e);var t=e.queue,a=Mh.bind(null,Ce,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Ko,useDeferredValue:function(e,t){var a=Dt();return Jo(a,e,t)},useTransition:function(){var e=Qo(!1);return e=Ch.bind(null,Ce,e.queue,!0,!1),Dt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var l=Ce,d=Dt();if(Le){if(a===void 0)throw Error(i(407));a=a()}else{if(a=t(),Xe===null)throw Error(i(349));(Me&124)!==0||rh(l,t,a)}d.memoizedState=a;var h={value:a,getSnapshot:t};return d.queue=h,bh(lh.bind(null,l,h,e),[e]),l.flags|=2048,Nr(9,Hl(),nh.bind(null,l,h,a,t),null),a},useId:function(){var e=Dt(),t=Xe.identifierPrefix;if(Le){var a=_s,l=Ss;a=(l&~(1<<32-Ie(l)-1)).toString(32)+a,t=""+t+"R"+a,a=$l++,0<a&&(t+="H"+a.toString(32)),t+=""}else a=Cx++,t=""+t+"r"+a.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:Fo,useFormState:gh,useActionState:gh,useOptimistic:function(e){var t=Dt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Wo.bind(null,Ce,!0,a),a.dispatch=t,[e,t]},useMemoCache:Go,useCacheRefresh:function(){return Dt().memoizedState=Mx.bind(null,Ce)}},qh={readContext:St,use:Pl,useCallback:Eh,useContext:St,useEffect:jh,useImperativeHandle:_h,useInsertionEffect:wh,useLayoutEffect:Nh,useMemo:kh,useReducer:Il,useRef:vh,useState:function(){return Il(Ts)},useDebugValue:Ko,useDeferredValue:function(e,t){var a=ot();return Th(a,He.memoizedState,e,t)},useTransition:function(){var e=Il(Ts)[0],t=ot().memoizedState;return[typeof e=="boolean"?e:On(e),t]},useSyncExternalStore:ah,useId:Dh,useHostTransitionStatus:Fo,useFormState:xh,useActionState:xh,useOptimistic:function(e,t){var a=ot();return ch(a,He,e,t)},useMemoCache:Go,useCacheRefresh:Uh},zx={readContext:St,use:Pl,useCallback:Eh,useContext:St,useEffect:jh,useImperativeHandle:_h,useInsertionEffect:wh,useLayoutEffect:Nh,useMemo:kh,useReducer:Yo,useRef:vh,useState:function(){return Yo(Ts)},useDebugValue:Ko,useDeferredValue:function(e,t){var a=ot();return He===null?Jo(a,e,t):Th(a,He.memoizedState,e,t)},useTransition:function(){var e=Yo(Ts)[0],t=ot().memoizedState;return[typeof e=="boolean"?e:On(e),t]},useSyncExternalStore:ah,useId:Dh,useHostTransitionStatus:Fo,useFormState:yh,useActionState:yh,useOptimistic:function(e,t){var a=ot();return He!==null?ch(a,He,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Go,useCacheRefresh:Uh},Sr=null,Un=0;function Ql(e){var t=Un;return Un+=1,Sr===null&&(Sr=[]),Ku(Sr,e,t)}function Mn(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Xl(e,t){throw t.$$typeof===j?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Bh(e){var t=e._init;return t(e._payload)}function $h(e){function t(R,A){if(e){var q=R.deletions;q===null?(R.deletions=[A],R.flags|=16):q.push(A)}}function a(R,A){if(!e)return null;for(;A!==null;)t(R,A),A=A.sibling;return null}function l(R){for(var A=new Map;R!==null;)R.key!==null?A.set(R.key,R):A.set(R.index,R),R=R.sibling;return A}function d(R,A){return R=Ns(R,A),R.index=0,R.sibling=null,R}function h(R,A,q){return R.index=q,e?(q=R.alternate,q!==null?(q=q.index,q<A?(R.flags|=67108866,A):q):(R.flags|=67108866,A)):(R.flags|=1048576,A)}function p(R){return e&&R.alternate===null&&(R.flags|=67108866),R}function v(R,A,q,K){return A===null||A.tag!==6?(A=bo(q,R.mode,K),A.return=R,A):(A=d(A,q),A.return=R,A)}function C(R,A,q,K){var me=q.type;return me===S?Q(R,A,q.props.children,K,q.key):A!==null&&(A.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===le&&Bh(me)===A.type)?(A=d(A,q.props),Mn(A,q),A.return=R,A):(A=Ol(q.type,q.key,q.props,null,R.mode,K),Mn(A,q),A.return=R,A)}function B(R,A,q,K){return A===null||A.tag!==4||A.stateNode.containerInfo!==q.containerInfo||A.stateNode.implementation!==q.implementation?(A=jo(q,R.mode,K),A.return=R,A):(A=d(A,q.children||[]),A.return=R,A)}function Q(R,A,q,K,me){return A===null||A.tag!==7?(A=Oa(q,R.mode,K,me),A.return=R,A):(A=d(A,q),A.return=R,A)}function J(R,A,q){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=bo(""+A,R.mode,q),A.return=R,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case k:return q=Ol(A.type,A.key,A.props,null,R.mode,q),Mn(q,A),q.return=R,q;case b:return A=jo(A,R.mode,q),A.return=R,A;case le:var K=A._init;return A=K(A._payload),J(R,A,q)}if(ce(A)||ie(A))return A=Oa(A,R.mode,q,null),A.return=R,A;if(typeof A.then=="function")return J(R,Ql(A),q);if(A.$$typeof===D)return J(R,Ml(R,A),q);Xl(R,A)}return null}function $(R,A,q,K){var me=A!==null?A.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return me!==null?null:v(R,A,""+q,K);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case k:return q.key===me?C(R,A,q,K):null;case b:return q.key===me?B(R,A,q,K):null;case le:return me=q._init,q=me(q._payload),$(R,A,q,K)}if(ce(q)||ie(q))return me!==null?null:Q(R,A,q,K,null);if(typeof q.then=="function")return $(R,A,Ql(q),K);if(q.$$typeof===D)return $(R,A,Ml(R,q),K);Xl(R,q)}return null}function G(R,A,q,K,me){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return R=R.get(q)||null,v(A,R,""+K,me);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case k:return R=R.get(K.key===null?q:K.key)||null,C(A,R,K,me);case b:return R=R.get(K.key===null?q:K.key)||null,B(A,R,K,me);case le:var Oe=K._init;return K=Oe(K._payload),G(R,A,q,K,me)}if(ce(K)||ie(K))return R=R.get(q)||null,Q(A,R,K,me,null);if(typeof K.then=="function")return G(R,A,q,Ql(K),me);if(K.$$typeof===D)return G(R,A,q,Ml(A,K),me);Xl(A,K)}return null}function je(R,A,q,K){for(var me=null,Oe=null,xe=A,be=A=0,pt=null;xe!==null&&be<q.length;be++){xe.index>be?(pt=xe,xe=null):pt=xe.sibling;var ze=$(R,xe,q[be],K);if(ze===null){xe===null&&(xe=pt);break}e&&xe&&ze.alternate===null&&t(R,xe),A=h(ze,A,be),Oe===null?me=ze:Oe.sibling=ze,Oe=ze,xe=pt}if(be===q.length)return a(R,xe),Le&&Da(R,be),me;if(xe===null){for(;be<q.length;be++)xe=J(R,q[be],K),xe!==null&&(A=h(xe,A,be),Oe===null?me=xe:Oe.sibling=xe,Oe=xe);return Le&&Da(R,be),me}for(xe=l(xe);be<q.length;be++)pt=G(xe,R,be,q[be],K),pt!==null&&(e&&pt.alternate!==null&&xe.delete(pt.key===null?be:pt.key),A=h(pt,A,be),Oe===null?me=pt:Oe.sibling=pt,Oe=pt);return e&&xe.forEach(function(ua){return t(R,ua)}),Le&&Da(R,be),me}function ve(R,A,q,K){if(q==null)throw Error(i(151));for(var me=null,Oe=null,xe=A,be=A=0,pt=null,ze=q.next();xe!==null&&!ze.done;be++,ze=q.next()){xe.index>be?(pt=xe,xe=null):pt=xe.sibling;var ua=$(R,xe,ze.value,K);if(ua===null){xe===null&&(xe=pt);break}e&&xe&&ua.alternate===null&&t(R,xe),A=h(ua,A,be),Oe===null?me=ua:Oe.sibling=ua,Oe=ua,xe=pt}if(ze.done)return a(R,xe),Le&&Da(R,be),me;if(xe===null){for(;!ze.done;be++,ze=q.next())ze=J(R,ze.value,K),ze!==null&&(A=h(ze,A,be),Oe===null?me=ze:Oe.sibling=ze,Oe=ze);return Le&&Da(R,be),me}for(xe=l(xe);!ze.done;be++,ze=q.next())ze=G(xe,R,be,ze.value,K),ze!==null&&(e&&ze.alternate!==null&&xe.delete(ze.key===null?be:ze.key),A=h(ze,A,be),Oe===null?me=ze:Oe.sibling=ze,Oe=ze);return e&&xe.forEach(function(Lp){return t(R,Lp)}),Le&&Da(R,be),me}function Ve(R,A,q,K){if(typeof q=="object"&&q!==null&&q.type===S&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case k:e:{for(var me=q.key;A!==null;){if(A.key===me){if(me=q.type,me===S){if(A.tag===7){a(R,A.sibling),K=d(A,q.props.children),K.return=R,R=K;break e}}else if(A.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===le&&Bh(me)===A.type){a(R,A.sibling),K=d(A,q.props),Mn(K,q),K.return=R,R=K;break e}a(R,A);break}else t(R,A);A=A.sibling}q.type===S?(K=Oa(q.props.children,R.mode,K,q.key),K.return=R,R=K):(K=Ol(q.type,q.key,q.props,null,R.mode,K),Mn(K,q),K.return=R,R=K)}return p(R);case b:e:{for(me=q.key;A!==null;){if(A.key===me)if(A.tag===4&&A.stateNode.containerInfo===q.containerInfo&&A.stateNode.implementation===q.implementation){a(R,A.sibling),K=d(A,q.children||[]),K.return=R,R=K;break e}else{a(R,A);break}else t(R,A);A=A.sibling}K=jo(q,R.mode,K),K.return=R,R=K}return p(R);case le:return me=q._init,q=me(q._payload),Ve(R,A,q,K)}if(ce(q))return je(R,A,q,K);if(ie(q)){if(me=ie(q),typeof me!="function")throw Error(i(150));return q=me.call(q),ve(R,A,q,K)}if(typeof q.then=="function")return Ve(R,A,Ql(q),K);if(q.$$typeof===D)return Ve(R,A,Ml(R,q),K);Xl(R,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,A!==null&&A.tag===6?(a(R,A.sibling),K=d(A,q),K.return=R,R=K):(a(R,A),K=bo(q,R.mode,K),K.return=R,R=K),p(R)):a(R,A)}return function(R,A,q,K){try{Un=0;var me=Ve(R,A,q,K);return Sr=null,me}catch(xe){if(xe===Sn||xe===zl)throw xe;var Oe=Lt(29,xe,null,R.mode);return Oe.lanes=K,Oe.return=R,Oe}finally{}}}var _r=$h(!0),Ph=$h(!1),es=I(null),gs=null;function Js(e){var t=e.alternate;ae(ut,ut.current&1),ae(es,e),gs===null&&(t===null||br.current!==null||t.memoizedState!==null)&&(gs=e)}function Ih(e){if(e.tag===22){if(ae(ut,ut.current),ae(es,e),gs===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(gs=e)}}else Zs()}function Zs(){ae(ut,ut.current),ae(es,es.current)}function Cs(e){se(es),gs===e&&(gs=null),se(ut)}var ut=I(0);function Kl(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Hc(a)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ec(e,t,a,l){t=e.memoizedState,a=a(l,t),a=a==null?t:y({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var tc={enqueueSetState:function(e,t,a){e=e._reactInternals;var l=Pt(),d=Qs(l);d.payload=t,a!=null&&(d.callback=a),t=Xs(e,d,l),t!==null&&(It(t,e,l),En(t,e,l))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var l=Pt(),d=Qs(l);d.tag=1,d.payload=t,a!=null&&(d.callback=a),t=Xs(e,d,l),t!==null&&(It(t,e,l),En(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Pt(),l=Qs(a);l.tag=2,t!=null&&(l.callback=t),t=Xs(e,l,a),t!==null&&(It(t,e,a),En(t,e,a))}};function Hh(e,t,a,l,d,h,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,h,p):t.prototype&&t.prototype.isPureReactComponent?!xn(a,l)||!xn(d,h):!0}function Gh(e,t,a,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,l),t.state!==e&&tc.enqueueReplaceState(t,t.state,null)}function Ba(e,t){var a=t;if("ref"in t){a={};for(var l in t)l!=="ref"&&(a[l]=t[l])}if(e=e.defaultProps){a===t&&(a=y({},a));for(var d in e)a[d]===void 0&&(a[d]=e[d])}return a}var Jl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Vh(e){Jl(e)}function Yh(e){console.error(e)}function Qh(e){Jl(e)}function Zl(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function Xh(e,t,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function sc(e,t,a){return a=Qs(a),a.tag=3,a.payload={element:null},a.callback=function(){Zl(e,t)},a}function Kh(e){return e=Qs(e),e.tag=3,e}function Jh(e,t,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var h=l.value;e.payload=function(){return d(h)},e.callback=function(){Xh(t,a,l)}}var p=a.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(e.callback=function(){Xh(t,a,l),typeof d!="function"&&(aa===null?aa=new Set([this]):aa.add(this));var v=l.stack;this.componentDidCatch(l.value,{componentStack:v!==null?v:""})})}function Lx(e,t,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=a.alternate,t!==null&&jn(t,a,d,!0),a=es.current,a!==null){switch(a.tag){case 13:return gs===null?Ec():a.alternate===null&&tt===0&&(tt=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===Ao?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([l]):t.add(l),Tc(e,l,d)),!1;case 22:return a.flags|=65536,l===Ao?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([l]):a.add(l)),Tc(e,l,d)),!1}throw Error(i(435,a.tag))}return Tc(e,l,d),Ec(),!1}if(Le)return t=es.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=d,l!==So&&(e=Error(i(422),{cause:l}),bn(Jt(e,a)))):(l!==So&&(t=Error(i(423),{cause:l}),bn(Jt(t,a))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,l=Jt(l,a),d=sc(e.stateNode,l,d),Mo(e,d),tt!==4&&(tt=2)),!1;var h=Error(i(520),{cause:l});if(h=Jt(h,a),Pn===null?Pn=[h]:Pn.push(h),tt!==4&&(tt=2),t===null)return!0;l=Jt(l,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=d&-d,a.lanes|=e,e=sc(a.stateNode,l,e),Mo(a,e),!1;case 1:if(t=a.type,h=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(aa===null||!aa.has(h))))return a.flags|=65536,d&=-d,a.lanes|=d,d=Kh(d),Jh(d,e,a,l),Mo(a,d),!1}a=a.return}while(a!==null);return!1}var Zh=Error(i(461)),gt=!1;function bt(e,t,a,l){t.child=e===null?Ph(t,null,a,l):_r(t,e.child,a,l)}function Fh(e,t,a,l,d){a=a.render;var h=t.ref;if("ref"in l){var p={};for(var v in l)v!=="ref"&&(p[v]=l[v])}else p=l;return za(t),l=Bo(e,t,a,p,h,d),v=$o(),e!==null&&!gt?(Po(e,t,d),Os(e,t,d)):(Le&&v&&wo(t),t.flags|=1,bt(e,t,l,d),t.child)}function Wh(e,t,a,l,d){if(e===null){var h=a.type;return typeof h=="function"&&!vo(h)&&h.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=h,em(e,t,h,l,d)):(e=Ol(a.type,null,l,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!dc(e,d)){var p=h.memoizedProps;if(a=a.compare,a=a!==null?a:xn,a(p,l)&&e.ref===t.ref)return Os(e,t,d)}return t.flags|=1,e=Ns(h,l),e.ref=t.ref,e.return=t,t.child=e}function em(e,t,a,l,d){if(e!==null){var h=e.memoizedProps;if(xn(h,l)&&e.ref===t.ref)if(gt=!1,t.pendingProps=l=h,dc(e,d))(e.flags&131072)!==0&&(gt=!0);else return t.lanes=e.lanes,Os(e,t,d)}return ac(e,t,a,l,d)}function tm(e,t,a){var l=t.pendingProps,d=l.children,h=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((t.flags&128)!==0){if(l=h!==null?h.baseLanes|a:a,e!==null){for(d=t.child=e.child,h=0;d!==null;)h=h|d.lanes|d.childLanes,d=d.sibling;t.childLanes=h&~l}else t.childLanes=0,t.child=null;return sm(e,t,l,a)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Rl(t,h!==null?h.cachePool:null),h!==null?eh(t,h):zo(),Ih(t);else return t.lanes=t.childLanes=536870912,sm(e,t,h!==null?h.baseLanes|a:a,a)}else h!==null?(Rl(t,h.cachePool),eh(t,h),Zs(),t.memoizedState=null):(e!==null&&Rl(t,null),zo(),Zs());return bt(e,t,d,a),t.child}function sm(e,t,a,l){var d=Oo();return d=d===null?null:{parent:dt._currentValue,pool:d},t.memoizedState={baseLanes:a,cachePool:d},e!==null&&Rl(t,null),zo(),Ih(t),e!==null&&jn(e,t,l,!0),null}function Fl(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function ac(e,t,a,l,d){return za(t),a=Bo(e,t,a,l,void 0,d),l=$o(),e!==null&&!gt?(Po(e,t,d),Os(e,t,d)):(Le&&l&&wo(t),t.flags|=1,bt(e,t,a,d),t.child)}function am(e,t,a,l,d,h){return za(t),t.updateQueue=null,a=sh(t,l,a,d),th(e),l=$o(),e!==null&&!gt?(Po(e,t,h),Os(e,t,h)):(Le&&l&&wo(t),t.flags|=1,bt(e,t,a,h),t.child)}function rm(e,t,a,l,d){if(za(t),t.stateNode===null){var h=gr,p=a.contextType;typeof p=="object"&&p!==null&&(h=St(p)),h=new a(l,h),t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=tc,t.stateNode=h,h._reactInternals=t,h=t.stateNode,h.props=l,h.state=t.memoizedState,h.refs={},Do(t),p=a.contextType,h.context=typeof p=="object"&&p!==null?St(p):gr,h.state=t.memoizedState,p=a.getDerivedStateFromProps,typeof p=="function"&&(ec(t,a,p,l),h.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(p=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),p!==h.state&&tc.enqueueReplaceState(h,h.state,null),Tn(t,l,h,d),kn(),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){h=t.stateNode;var v=t.memoizedProps,C=Ba(a,v);h.props=C;var B=h.context,Q=a.contextType;p=gr,typeof Q=="object"&&Q!==null&&(p=St(Q));var J=a.getDerivedStateFromProps;Q=typeof J=="function"||typeof h.getSnapshotBeforeUpdate=="function",v=t.pendingProps!==v,Q||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(v||B!==p)&&Gh(t,h,l,p),Ys=!1;var $=t.memoizedState;h.state=$,Tn(t,l,h,d),kn(),B=t.memoizedState,v||$!==B||Ys?(typeof J=="function"&&(ec(t,a,J,l),B=t.memoizedState),(C=Ys||Hh(t,a,C,l,$,B,p))?(Q||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=B),h.props=l,h.state=B,h.context=p,l=C):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{h=t.stateNode,Uo(e,t),p=t.memoizedProps,Q=Ba(a,p),h.props=Q,J=t.pendingProps,$=h.context,B=a.contextType,C=gr,typeof B=="object"&&B!==null&&(C=St(B)),v=a.getDerivedStateFromProps,(B=typeof v=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(p!==J||$!==C)&&Gh(t,h,l,C),Ys=!1,$=t.memoizedState,h.state=$,Tn(t,l,h,d),kn();var G=t.memoizedState;p!==J||$!==G||Ys||e!==null&&e.dependencies!==null&&Ul(e.dependencies)?(typeof v=="function"&&(ec(t,a,v,l),G=t.memoizedState),(Q=Ys||Hh(t,a,Q,l,$,G,C)||e!==null&&e.dependencies!==null&&Ul(e.dependencies))?(B||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(l,G,C),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(l,G,C)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||p===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=G),h.props=l,h.state=G,h.context=C,l=Q):(typeof h.componentDidUpdate!="function"||p===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),l=!1)}return h=l,Fl(e,t),l=(t.flags&128)!==0,h||l?(h=t.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:h.render(),t.flags|=1,e!==null&&l?(t.child=_r(t,e.child,null,d),t.child=_r(t,null,a,d)):bt(e,t,a,d),t.memoizedState=h.state,e=t.child):e=Os(e,t,d),e}function nm(e,t,a,l){return vn(),t.flags|=256,bt(e,t,a,l),t.child}var rc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function nc(e){return{baseLanes:e,cachePool:Yu()}}function lc(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=ts),e}function lm(e,t,a){var l=t.pendingProps,d=!1,h=(t.flags&128)!==0,p;if((p=h)||(p=e!==null&&e.memoizedState===null?!1:(ut.current&2)!==0),p&&(d=!0,t.flags&=-129),p=(t.flags&32)!==0,t.flags&=-33,e===null){if(Le){if(d?Js(t):Zs(),Le){var v=et,C;if(C=v){e:{for(C=v,v=fs;C.nodeType!==8;){if(!v){v=null;break e}if(C=os(C.nextSibling),C===null){v=null;break e}}v=C}v!==null?(t.memoizedState={dehydrated:v,treeContext:Aa!==null?{id:Ss,overflow:_s}:null,retryLane:536870912,hydrationErrors:null},C=Lt(18,null,null,0),C.stateNode=v,C.return=t,t.child=C,kt=t,et=null,C=!0):C=!1}C||Ma(t)}if(v=t.memoizedState,v!==null&&(v=v.dehydrated,v!==null))return Hc(v)?t.lanes=32:t.lanes=536870912,null;Cs(t)}return v=l.children,l=l.fallback,d?(Zs(),d=t.mode,v=Wl({mode:"hidden",children:v},d),l=Oa(l,d,a,null),v.return=t,l.return=t,v.sibling=l,t.child=v,d=t.child,d.memoizedState=nc(a),d.childLanes=lc(e,p,a),t.memoizedState=rc,l):(Js(t),ic(t,v))}if(C=e.memoizedState,C!==null&&(v=C.dehydrated,v!==null)){if(h)t.flags&256?(Js(t),t.flags&=-257,t=oc(e,t,a)):t.memoizedState!==null?(Zs(),t.child=e.child,t.flags|=128,t=null):(Zs(),d=l.fallback,v=t.mode,l=Wl({mode:"visible",children:l.children},v),d=Oa(d,v,a,null),d.flags|=2,l.return=t,d.return=t,l.sibling=d,t.child=l,_r(t,e.child,null,a),l=t.child,l.memoizedState=nc(a),l.childLanes=lc(e,p,a),t.memoizedState=rc,t=d);else if(Js(t),Hc(v)){if(p=v.nextSibling&&v.nextSibling.dataset,p)var B=p.dgst;p=B,l=Error(i(419)),l.stack="",l.digest=p,bn({value:l,source:null,stack:null}),t=oc(e,t,a)}else if(gt||jn(e,t,a,!1),p=(a&e.childLanes)!==0,gt||p){if(p=Xe,p!==null&&(l=a&-a,l=(l&42)!==0?1:Hi(l),l=(l&(p.suspendedLanes|a))!==0?0:l,l!==0&&l!==C.retryLane))throw C.retryLane=l,fr(e,l),It(p,e,l),Zh;v.data==="$?"||Ec(),t=oc(e,t,a)}else v.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=C.treeContext,et=os(v.nextSibling),kt=t,Le=!0,Ua=null,fs=!1,e!==null&&(Ft[Wt++]=Ss,Ft[Wt++]=_s,Ft[Wt++]=Aa,Ss=e.id,_s=e.overflow,Aa=t),t=ic(t,l.children),t.flags|=4096);return t}return d?(Zs(),d=l.fallback,v=t.mode,C=e.child,B=C.sibling,l=Ns(C,{mode:"hidden",children:l.children}),l.subtreeFlags=C.subtreeFlags&65011712,B!==null?d=Ns(B,d):(d=Oa(d,v,a,null),d.flags|=2),d.return=t,l.return=t,l.sibling=d,t.child=l,l=d,d=t.child,v=e.child.memoizedState,v===null?v=nc(a):(C=v.cachePool,C!==null?(B=dt._currentValue,C=C.parent!==B?{parent:B,pool:B}:C):C=Yu(),v={baseLanes:v.baseLanes|a,cachePool:C}),d.memoizedState=v,d.childLanes=lc(e,p,a),t.memoizedState=rc,l):(Js(t),a=e.child,e=a.sibling,a=Ns(a,{mode:"visible",children:l.children}),a.return=t,a.sibling=null,e!==null&&(p=t.deletions,p===null?(t.deletions=[e],t.flags|=16):p.push(e)),t.child=a,t.memoizedState=null,a)}function ic(e,t){return t=Wl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Wl(e,t){return e=Lt(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function oc(e,t,a){return _r(t,e.child,null,a),e=ic(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function im(e,t,a){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Eo(e.return,t,a)}function cc(e,t,a,l,d){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=l,h.tail=a,h.tailMode=d)}function om(e,t,a){var l=t.pendingProps,d=l.revealOrder,h=l.tail;if(bt(e,t,l.children,a),l=ut.current,(l&2)!==0)l=l&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&im(e,a,t);else if(e.tag===19)im(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(ae(ut,l),d){case"forwards":for(a=t.child,d=null;a!==null;)e=a.alternate,e!==null&&Kl(e)===null&&(d=a),a=a.sibling;a=d,a===null?(d=t.child,t.child=null):(d=a.sibling,a.sibling=null),cc(t,!1,d,a,h);break;case"backwards":for(a=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&Kl(e)===null){t.child=d;break}e=d.sibling,d.sibling=a,a=d,d=e}cc(t,!0,a,null,h);break;case"together":cc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Os(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),sa|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(jn(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,a=Ns(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Ns(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function dc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Ul(e)))}function qx(e,t,a){switch(t.tag){case 3:F(t,t.stateNode.containerInfo),Vs(t,dt,e.memoizedState.cache),vn();break;case 27:case 5:Te(t);break;case 4:F(t,t.stateNode.containerInfo);break;case 10:Vs(t,t.type,t.memoizedProps.value);break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Js(t),t.flags|=128,null):(a&t.child.childLanes)!==0?lm(e,t,a):(Js(t),e=Os(e,t,a),e!==null?e.sibling:null);Js(t);break;case 19:var d=(e.flags&128)!==0;if(l=(a&t.childLanes)!==0,l||(jn(e,t,a,!1),l=(a&t.childLanes)!==0),d){if(l)return om(e,t,a);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ae(ut,ut.current),l)break;return null;case 22:case 23:return t.lanes=0,tm(e,t,a);case 24:Vs(t,dt,e.memoizedState.cache)}return Os(e,t,a)}function cm(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)gt=!0;else{if(!dc(e,a)&&(t.flags&128)===0)return gt=!1,qx(e,t,a);gt=(e.flags&131072)!==0}else gt=!1,Le&&(t.flags&1048576)!==0&&Bu(t,Dl,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var l=t.elementType,d=l._init;if(l=d(l._payload),t.type=l,typeof l=="function")vo(l)?(e=Ba(l,e),t.tag=1,t=rm(null,t,l,e,a)):(t.tag=0,t=ac(null,t,l,e,a));else{if(l!=null){if(d=l.$$typeof,d===z){t.tag=11,t=Fh(null,t,l,e,a);break e}else if(d===H){t.tag=14,t=Wh(null,t,l,e,a);break e}}throw t=Y(l)||l,Error(i(306,t,""))}}return t;case 0:return ac(e,t,t.type,t.pendingProps,a);case 1:return l=t.type,d=Ba(l,t.pendingProps),rm(e,t,l,d,a);case 3:e:{if(F(t,t.stateNode.containerInfo),e===null)throw Error(i(387));l=t.pendingProps;var h=t.memoizedState;d=h.element,Uo(e,t),Tn(t,l,null,a);var p=t.memoizedState;if(l=p.cache,Vs(t,dt,l),l!==h.cache&&ko(t,[dt],a,!0),kn(),l=p.element,h.isDehydrated)if(h={element:l,isDehydrated:!1,cache:p.cache},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){t=nm(e,t,l,a);break e}else if(l!==d){d=Jt(Error(i(424)),t),bn(d),t=nm(e,t,l,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(et=os(e.firstChild),kt=t,Le=!0,Ua=null,fs=!0,a=Ph(t,null,l,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(vn(),l===d){t=Os(e,t,a);break e}bt(e,t,l,a)}t=t.child}return t;case 26:return Fl(e,t),e===null?(a=ff(t.type,null,t.pendingProps,null))?t.memoizedState=a:Le||(a=t.type,e=t.pendingProps,l=mi(pe.current).createElement(a),l[Nt]=t,l[Ot]=e,wt(l,a,e),ft(l),t.stateNode=l):t.memoizedState=ff(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Te(t),e===null&&Le&&(l=t.stateNode=uf(t.type,t.pendingProps,pe.current),kt=t,fs=!0,d=et,la(t.type)?(Gc=d,et=os(l.firstChild)):et=d),bt(e,t,t.pendingProps.children,a),Fl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Le&&((d=l=et)&&(l=hp(l,t.type,t.pendingProps,fs),l!==null?(t.stateNode=l,kt=t,et=os(l.firstChild),fs=!1,d=!0):d=!1),d||Ma(t)),Te(t),d=t.type,h=t.pendingProps,p=e!==null?e.memoizedProps:null,l=h.children,$c(d,h)?l=null:p!==null&&$c(d,p)&&(t.flags|=32),t.memoizedState!==null&&(d=Bo(e,t,Ox,null,null,a),Jn._currentValue=d),Fl(e,t),bt(e,t,l,a),t.child;case 6:return e===null&&Le&&((e=a=et)&&(a=mp(a,t.pendingProps,fs),a!==null?(t.stateNode=a,kt=t,et=null,e=!0):e=!1),e||Ma(t)),null;case 13:return lm(e,t,a);case 4:return F(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=_r(t,null,l,a):bt(e,t,l,a),t.child;case 11:return Fh(e,t,t.type,t.pendingProps,a);case 7:return bt(e,t,t.pendingProps,a),t.child;case 8:return bt(e,t,t.pendingProps.children,a),t.child;case 12:return bt(e,t,t.pendingProps.children,a),t.child;case 10:return l=t.pendingProps,Vs(t,t.type,l.value),bt(e,t,l.children,a),t.child;case 9:return d=t.type._context,l=t.pendingProps.children,za(t),d=St(d),l=l(d),t.flags|=1,bt(e,t,l,a),t.child;case 14:return Wh(e,t,t.type,t.pendingProps,a);case 15:return em(e,t,t.type,t.pendingProps,a);case 19:return om(e,t,a);case 31:return l=t.pendingProps,a=t.mode,l={mode:l.mode,children:l.children},e===null?(a=Wl(l,a),a.ref=t.ref,t.child=a,a.return=t,t=a):(a=Ns(e.child,l),a.ref=t.ref,t.child=a,a.return=t,t=a),t;case 22:return tm(e,t,a);case 24:return za(t),l=St(dt),e===null?(d=Oo(),d===null&&(d=Xe,h=To(),d.pooledCache=h,h.refCount++,h!==null&&(d.pooledCacheLanes|=a),d=h),t.memoizedState={parent:l,cache:d},Do(t),Vs(t,dt,d)):((e.lanes&a)!==0&&(Uo(e,t),Tn(t,null,null,a),kn()),d=e.memoizedState,h=t.memoizedState,d.parent!==l?(d={parent:l,cache:l},t.memoizedState=d,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=d),Vs(t,dt,l)):(l=h.cache,Vs(t,dt,l),l!==d.cache&&ko(t,[dt],a,!0))),bt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function As(e){e.flags|=4}function dm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!vf(t)){if(t=es.current,t!==null&&((Me&4194048)===Me?gs!==null:(Me&62914560)!==Me&&(Me&536870912)===0||t!==gs))throw _n=Ao,Qu;e.flags|=8192}}function ei(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Qt():536870912,e.lanes|=t,Cr|=t)}function Rn(e,t){if(!Le)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function We(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(t)for(var d=e.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=a,t}function Bx(e,t,a){var l=t.pendingProps;switch(No(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(t),null;case 1:return We(t),null;case 3:return a=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),ks(dt),ue(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(yn(t)?As(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Iu())),We(t),null;case 26:return a=t.memoizedState,e===null?(As(t),a!==null?(We(t),dm(t,a)):(We(t),t.flags&=-16777217)):a?a!==e.memoizedState?(As(t),We(t),dm(t,a)):(We(t),t.flags&=-16777217):(e.memoizedProps!==l&&As(t),We(t),t.flags&=-16777217),null;case 27:ye(t),a=pe.current;var d=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==l&&As(t);else{if(!l){if(t.stateNode===null)throw Error(i(166));return We(t),null}e=he.current,yn(t)?$u(t):(e=uf(d,l,a),t.stateNode=e,As(t))}return We(t),null;case 5:if(ye(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&As(t);else{if(!l){if(t.stateNode===null)throw Error(i(166));return We(t),null}if(e=he.current,yn(t))$u(t);else{switch(d=mi(pe.current),e){case 1:e=d.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=d.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?d.createElement("select",{is:l.is}):d.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?d.createElement(a,{is:l.is}):d.createElement(a)}}e[Nt]=t,e[Ot]=l;e:for(d=t.child;d!==null;){if(d.tag===5||d.tag===6)e.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}t.stateNode=e;e:switch(wt(e,a,l),a){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&As(t)}}return We(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&As(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(i(166));if(e=pe.current,yn(t)){if(e=t.stateNode,a=t.memoizedProps,l=null,d=kt,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}e[Nt]=t,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||af(e.nodeValue,a)),e||Ma(t)}else e=mi(e).createTextNode(l),e[Nt]=t,t.stateNode=e}return We(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=yn(t),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(i(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[Nt]=t}else vn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;We(t),d=!1}else d=Iu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return t.flags&256?(Cs(t),t):(Cs(t),null)}if(Cs(t),(t.flags&128)!==0)return t.lanes=a,t;if(a=l!==null,e=e!==null&&e.memoizedState!==null,a){l=t.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool);var h=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==d&&(l.flags|=2048)}return a!==e&&a&&(t.child.flags|=8192),ei(t,t.updateQueue),We(t),null;case 4:return ue(),e===null&&Rc(t.stateNode.containerInfo),We(t),null;case 10:return ks(t.type),We(t),null;case 19:if(se(ut),d=t.memoizedState,d===null)return We(t),null;if(l=(t.flags&128)!==0,h=d.rendering,h===null)if(l)Rn(d,!1);else{if(tt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=Kl(e),h!==null){for(t.flags|=128,Rn(d,!1),e=h.updateQueue,t.updateQueue=e,ei(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)qu(a,e),a=a.sibling;return ae(ut,ut.current&1|2),t.child}e=e.sibling}d.tail!==null&&Ct()>ai&&(t.flags|=128,l=!0,Rn(d,!1),t.lanes=4194304)}else{if(!l)if(e=Kl(h),e!==null){if(t.flags|=128,l=!0,e=e.updateQueue,t.updateQueue=e,ei(t,e),Rn(d,!0),d.tail===null&&d.tailMode==="hidden"&&!h.alternate&&!Le)return We(t),null}else 2*Ct()-d.renderingStartTime>ai&&a!==536870912&&(t.flags|=128,l=!0,Rn(d,!1),t.lanes=4194304);d.isBackwards?(h.sibling=t.child,t.child=h):(e=d.last,e!==null?e.sibling=h:t.child=h,d.last=h)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=Ct(),t.sibling=null,e=ut.current,ae(ut,l?e&1|2:e&1),t):(We(t),null);case 22:case 23:return Cs(t),Lo(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(a&536870912)!==0&&(t.flags&128)===0&&(We(t),t.subtreeFlags&6&&(t.flags|=8192)):We(t),a=t.updateQueue,a!==null&&ei(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==a&&(t.flags|=2048),e!==null&&se(La),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),ks(dt),We(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function $x(e,t){switch(No(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ks(dt),ue(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ye(t),null;case 13:if(Cs(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));vn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return se(ut),null;case 4:return ue(),null;case 10:return ks(t.type),null;case 22:case 23:return Cs(t),Lo(),e!==null&&se(La),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ks(dt),null;case 25:return null;default:return null}}function um(e,t){switch(No(t),t.tag){case 3:ks(dt),ue();break;case 26:case 27:case 5:ye(t);break;case 4:ue();break;case 13:Cs(t);break;case 19:se(ut);break;case 10:ks(t.type);break;case 22:case 23:Cs(t),Lo(),e!==null&&se(La);break;case 24:ks(dt)}}function zn(e,t){try{var a=t.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&e)===e){l=void 0;var h=a.create,p=a.inst;l=h(),p.destroy=l}a=a.next}while(a!==d)}}catch(v){Qe(t,t.return,v)}}function Fs(e,t,a){try{var l=t.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var h=d.next;l=h;do{if((l.tag&e)===e){var p=l.inst,v=p.destroy;if(v!==void 0){p.destroy=void 0,d=t;var C=a,B=v;try{B()}catch(Q){Qe(d,C,Q)}}}l=l.next}while(l!==h)}}catch(Q){Qe(t,t.return,Q)}}function hm(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Wu(t,a)}catch(l){Qe(e,e.return,l)}}}function mm(e,t,a){a.props=Ba(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){Qe(e,t,l)}}function Ln(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(d){Qe(e,t,d)}}function xs(e,t){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){Qe(e,t,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){Qe(e,t,d)}else a.current=null}function fm(e){var t=e.type,a=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){Qe(e,e.return,d)}}function uc(e,t,a){try{var l=e.stateNode;ip(l,e.type,a,t),l[Ot]=t}catch(d){Qe(e,e.return,d)}}function gm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&la(e.type)||e.tag===4}function hc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&la(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function mc(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=hi));else if(l!==4&&(l===27&&la(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(mc(e,t,a),e=e.sibling;e!==null;)mc(e,t,a),e=e.sibling}function ti(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(l!==4&&(l===27&&la(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(ti(e,t,a),e=e.sibling;e!==null;)ti(e,t,a),e=e.sibling}function xm(e){var t=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,d=t.attributes;d.length;)t.removeAttributeNode(d[0]);wt(t,l,a),t[Nt]=e,t[Ot]=a}catch(h){Qe(e,e.return,h)}}var Ds=!1,at=!1,fc=!1,pm=typeof WeakSet=="function"?WeakSet:Set,xt=null;function Px(e,t){if(e=e.containerInfo,qc=vi,e=Tu(e),ho(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{a.nodeType,h.nodeType}catch{a=null;break e}var p=0,v=-1,C=-1,B=0,Q=0,J=e,$=null;t:for(;;){for(var G;J!==a||d!==0&&J.nodeType!==3||(v=p+d),J!==h||l!==0&&J.nodeType!==3||(C=p+l),J.nodeType===3&&(p+=J.nodeValue.length),(G=J.firstChild)!==null;)$=J,J=G;for(;;){if(J===e)break t;if($===a&&++B===d&&(v=p),$===h&&++Q===l&&(C=p),(G=J.nextSibling)!==null)break;J=$,$=J.parentNode}J=G}a=v===-1||C===-1?null:{start:v,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(Bc={focusedElem:e,selectionRange:a},vi=!1,xt=t;xt!==null;)if(t=xt,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,xt=e;else for(;xt!==null;){switch(t=xt,h=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,a=t,d=h.memoizedProps,h=h.memoizedState,l=a.stateNode;try{var je=Ba(a.type,d,a.elementType===a.type);e=l.getSnapshotBeforeUpdate(je,h),l.__reactInternalSnapshotBeforeUpdate=e}catch(ve){Qe(a,a.return,ve)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Ic(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ic(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,xt=e;break}xt=t.return}}function ym(e,t,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ws(e,a),l&4&&zn(5,a);break;case 1:if(Ws(e,a),l&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(p){Qe(a,a.return,p)}else{var d=Ba(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(d,t,e.__reactInternalSnapshotBeforeUpdate)}catch(p){Qe(a,a.return,p)}}l&64&&hm(a),l&512&&Ln(a,a.return);break;case 3:if(Ws(e,a),l&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Wu(e,t)}catch(p){Qe(a,a.return,p)}}break;case 27:t===null&&l&4&&xm(a);case 26:case 5:Ws(e,a),t===null&&l&4&&fm(a),l&512&&Ln(a,a.return);break;case 12:Ws(e,a);break;case 13:Ws(e,a),l&4&&jm(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Jx.bind(null,a),fp(e,a))));break;case 22:if(l=a.memoizedState!==null||Ds,!l){t=t!==null&&t.memoizedState!==null||at,d=Ds;var h=at;Ds=l,(at=t)&&!h?ea(e,a,(a.subtreeFlags&8772)!==0):Ws(e,a),Ds=d,at=h}break;case 30:break;default:Ws(e,a)}}function vm(e){var t=e.alternate;t!==null&&(e.alternate=null,vm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Yi(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Fe=null,Ut=!1;function Us(e,t,a){for(a=a.child;a!==null;)bm(e,t,a),a=a.sibling}function bm(e,t,a){if(_e&&typeof _e.onCommitFiberUnmount=="function")try{_e.onCommitFiberUnmount(Re,a)}catch{}switch(a.tag){case 26:at||xs(a,t),Us(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:at||xs(a,t);var l=Fe,d=Ut;la(a.type)&&(Fe=a.stateNode,Ut=!1),Us(e,t,a),Yn(a.stateNode),Fe=l,Ut=d;break;case 5:at||xs(a,t);case 6:if(l=Fe,d=Ut,Fe=null,Us(e,t,a),Fe=l,Ut=d,Fe!==null)if(Ut)try{(Fe.nodeType===9?Fe.body:Fe.nodeName==="HTML"?Fe.ownerDocument.body:Fe).removeChild(a.stateNode)}catch(h){Qe(a,t,h)}else try{Fe.removeChild(a.stateNode)}catch(h){Qe(a,t,h)}break;case 18:Fe!==null&&(Ut?(e=Fe,cf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),el(e)):cf(Fe,a.stateNode));break;case 4:l=Fe,d=Ut,Fe=a.stateNode.containerInfo,Ut=!0,Us(e,t,a),Fe=l,Ut=d;break;case 0:case 11:case 14:case 15:at||Fs(2,a,t),at||Fs(4,a,t),Us(e,t,a);break;case 1:at||(xs(a,t),l=a.stateNode,typeof l.componentWillUnmount=="function"&&mm(a,t,l)),Us(e,t,a);break;case 21:Us(e,t,a);break;case 22:at=(l=at)||a.memoizedState!==null,Us(e,t,a),at=l;break;default:Us(e,t,a)}}function jm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{el(e)}catch(a){Qe(t,t.return,a)}}function Ix(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new pm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new pm),t;default:throw Error(i(435,e.tag))}}function gc(e,t){var a=Ix(e);t.forEach(function(l){var d=Zx.bind(null,e,l);a.has(l)||(a.add(l),l.then(d,d))})}function qt(e,t){var a=t.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],h=e,p=t,v=p;e:for(;v!==null;){switch(v.tag){case 27:if(la(v.type)){Fe=v.stateNode,Ut=!1;break e}break;case 5:Fe=v.stateNode,Ut=!1;break e;case 3:case 4:Fe=v.stateNode.containerInfo,Ut=!0;break e}v=v.return}if(Fe===null)throw Error(i(160));bm(h,p,d),Fe=null,Ut=!1,h=d.alternate,h!==null&&(h.return=null),d.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)wm(t,e),t=t.sibling}var is=null;function wm(e,t){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:qt(t,e),Bt(e),l&4&&(Fs(3,e,e.return),zn(3,e),Fs(5,e,e.return));break;case 1:qt(t,e),Bt(e),l&512&&(at||a===null||xs(a,a.return)),l&64&&Ds&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=is;if(qt(t,e),Bt(e),l&512&&(at||a===null||xs(a,a.return)),l&4){var h=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){e:{l=e.type,a=e.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":h=d.getElementsByTagName("title")[0],(!h||h[ln]||h[Nt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=d.createElement(l),d.head.insertBefore(h,d.querySelector("head > title"))),wt(h,l,a),h[Nt]=e,ft(h),l=h;break e;case"link":var p=pf("link","href",d).get(l+(a.href||""));if(p){for(var v=0;v<p.length;v++)if(h=p[v],h.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&h.getAttribute("rel")===(a.rel==null?null:a.rel)&&h.getAttribute("title")===(a.title==null?null:a.title)&&h.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){p.splice(v,1);break t}}h=d.createElement(l),wt(h,l,a),d.head.appendChild(h);break;case"meta":if(p=pf("meta","content",d).get(l+(a.content||""))){for(v=0;v<p.length;v++)if(h=p[v],h.getAttribute("content")===(a.content==null?null:""+a.content)&&h.getAttribute("name")===(a.name==null?null:a.name)&&h.getAttribute("property")===(a.property==null?null:a.property)&&h.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&h.getAttribute("charset")===(a.charSet==null?null:a.charSet)){p.splice(v,1);break t}}h=d.createElement(l),wt(h,l,a),d.head.appendChild(h);break;default:throw Error(i(468,l))}h[Nt]=e,ft(h),l=h}e.stateNode=l}else yf(d,e.type,e.stateNode);else e.stateNode=xf(d,l,e.memoizedProps);else h!==l?(h===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):h.count--,l===null?yf(d,e.type,e.stateNode):xf(d,l,e.memoizedProps)):l===null&&e.stateNode!==null&&uc(e,e.memoizedProps,a.memoizedProps)}break;case 27:qt(t,e),Bt(e),l&512&&(at||a===null||xs(a,a.return)),a!==null&&l&4&&uc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(qt(t,e),Bt(e),l&512&&(at||a===null||xs(a,a.return)),e.flags&32){d=e.stateNode;try{ir(d,"")}catch(G){Qe(e,e.return,G)}}l&4&&e.stateNode!=null&&(d=e.memoizedProps,uc(e,d,a!==null?a.memoizedProps:d)),l&1024&&(fc=!0);break;case 6:if(qt(t,e),Bt(e),l&4){if(e.stateNode===null)throw Error(i(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(G){Qe(e,e.return,G)}}break;case 3:if(xi=null,d=is,is=fi(t.containerInfo),qt(t,e),is=d,Bt(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{el(t.containerInfo)}catch(G){Qe(e,e.return,G)}fc&&(fc=!1,Nm(e));break;case 4:l=is,is=fi(e.stateNode.containerInfo),qt(t,e),Bt(e),is=l;break;case 12:qt(t,e),Bt(e);break;case 13:qt(t,e),Bt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(jc=Ct()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,gc(e,l)));break;case 22:d=e.memoizedState!==null;var C=a!==null&&a.memoizedState!==null,B=Ds,Q=at;if(Ds=B||d,at=Q||C,qt(t,e),at=Q,Ds=B,Bt(e),l&8192)e:for(t=e.stateNode,t._visibility=d?t._visibility&-2:t._visibility|1,d&&(a===null||C||Ds||at||$a(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){C=a=t;try{if(h=C.stateNode,d)p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{v=C.stateNode;var J=C.memoizedProps.style,$=J!=null&&J.hasOwnProperty("display")?J.display:null;v.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(G){Qe(C,C.return,G)}}}else if(t.tag===6){if(a===null){C=t;try{C.stateNode.nodeValue=d?"":C.memoizedProps}catch(G){Qe(C,C.return,G)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,gc(e,a))));break;case 19:qt(t,e),Bt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,gc(e,l)));break;case 30:break;case 21:break;default:qt(t,e),Bt(e)}}function Bt(e){var t=e.flags;if(t&2){try{for(var a,l=e.return;l!==null;){if(gm(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var d=a.stateNode,h=hc(e);ti(e,h,d);break;case 5:var p=a.stateNode;a.flags&32&&(ir(p,""),a.flags&=-33);var v=hc(e);ti(e,v,p);break;case 3:case 4:var C=a.stateNode.containerInfo,B=hc(e);mc(e,B,C);break;default:throw Error(i(161))}}catch(Q){Qe(e,e.return,Q)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Nm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Nm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ws(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)ym(e,t.alternate,t),t=t.sibling}function $a(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Fs(4,t,t.return),$a(t);break;case 1:xs(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&mm(t,t.return,a),$a(t);break;case 27:Yn(t.stateNode);case 26:case 5:xs(t,t.return),$a(t);break;case 22:t.memoizedState===null&&$a(t);break;case 30:$a(t);break;default:$a(t)}e=e.sibling}}function ea(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,d=e,h=t,p=h.flags;switch(h.tag){case 0:case 11:case 15:ea(d,h,a),zn(4,h);break;case 1:if(ea(d,h,a),l=h,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(B){Qe(l,l.return,B)}if(l=h,d=l.updateQueue,d!==null){var v=l.stateNode;try{var C=d.shared.hiddenCallbacks;if(C!==null)for(d.shared.hiddenCallbacks=null,d=0;d<C.length;d++)Fu(C[d],v)}catch(B){Qe(l,l.return,B)}}a&&p&64&&hm(h),Ln(h,h.return);break;case 27:xm(h);case 26:case 5:ea(d,h,a),a&&l===null&&p&4&&fm(h),Ln(h,h.return);break;case 12:ea(d,h,a);break;case 13:ea(d,h,a),a&&p&4&&jm(d,h);break;case 22:h.memoizedState===null&&ea(d,h,a),Ln(h,h.return);break;case 30:break;default:ea(d,h,a)}t=t.sibling}}function xc(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&wn(a))}function pc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&wn(e))}function ps(e,t,a,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Sm(e,t,a,l),t=t.sibling}function Sm(e,t,a,l){var d=t.flags;switch(t.tag){case 0:case 11:case 15:ps(e,t,a,l),d&2048&&zn(9,t);break;case 1:ps(e,t,a,l);break;case 3:ps(e,t,a,l),d&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&wn(e)));break;case 12:if(d&2048){ps(e,t,a,l),e=t.stateNode;try{var h=t.memoizedProps,p=h.id,v=h.onPostCommit;typeof v=="function"&&v(p,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(C){Qe(t,t.return,C)}}else ps(e,t,a,l);break;case 13:ps(e,t,a,l);break;case 23:break;case 22:h=t.stateNode,p=t.alternate,t.memoizedState!==null?h._visibility&2?ps(e,t,a,l):qn(e,t):h._visibility&2?ps(e,t,a,l):(h._visibility|=2,Er(e,t,a,l,(t.subtreeFlags&10256)!==0)),d&2048&&xc(p,t);break;case 24:ps(e,t,a,l),d&2048&&pc(t.alternate,t);break;default:ps(e,t,a,l)}}function Er(e,t,a,l,d){for(d=d&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var h=e,p=t,v=a,C=l,B=p.flags;switch(p.tag){case 0:case 11:case 15:Er(h,p,v,C,d),zn(8,p);break;case 23:break;case 22:var Q=p.stateNode;p.memoizedState!==null?Q._visibility&2?Er(h,p,v,C,d):qn(h,p):(Q._visibility|=2,Er(h,p,v,C,d)),d&&B&2048&&xc(p.alternate,p);break;case 24:Er(h,p,v,C,d),d&&B&2048&&pc(p.alternate,p);break;default:Er(h,p,v,C,d)}t=t.sibling}}function qn(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,l=t,d=l.flags;switch(l.tag){case 22:qn(a,l),d&2048&&xc(l.alternate,l);break;case 24:qn(a,l),d&2048&&pc(l.alternate,l);break;default:qn(a,l)}t=t.sibling}}var Bn=8192;function kr(e){if(e.subtreeFlags&Bn)for(e=e.child;e!==null;)_m(e),e=e.sibling}function _m(e){switch(e.tag){case 26:kr(e),e.flags&Bn&&e.memoizedState!==null&&kp(is,e.memoizedState,e.memoizedProps);break;case 5:kr(e);break;case 3:case 4:var t=is;is=fi(e.stateNode.containerInfo),kr(e),is=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Bn,Bn=16777216,kr(e),Bn=t):kr(e));break;default:kr(e)}}function Em(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function $n(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];xt=l,Tm(l,e)}Em(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)km(e),e=e.sibling}function km(e){switch(e.tag){case 0:case 11:case 15:$n(e),e.flags&2048&&Fs(9,e,e.return);break;case 3:$n(e);break;case 12:$n(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,si(e)):$n(e);break;default:$n(e)}}function si(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];xt=l,Tm(l,e)}Em(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Fs(8,t,t.return),si(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,si(t));break;default:si(t)}e=e.sibling}}function Tm(e,t){for(;xt!==null;){var a=xt;switch(a.tag){case 0:case 11:case 15:Fs(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:wn(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,xt=l;else e:for(a=e;xt!==null;){l=xt;var d=l.sibling,h=l.return;if(vm(l),l===a){xt=null;break e}if(d!==null){d.return=h,xt=d;break e}xt=h}}}var Hx={getCacheForType:function(e){var t=St(dt),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a}},Gx=typeof WeakMap=="function"?WeakMap:Map,$e=0,Xe=null,Ae=null,Me=0,Pe=0,$t=null,ta=!1,Tr=!1,yc=!1,Ms=0,tt=0,sa=0,Pa=0,vc=0,ts=0,Cr=0,Pn=null,Mt=null,bc=!1,jc=0,ai=1/0,ri=null,aa=null,jt=0,ra=null,Or=null,Ar=0,wc=0,Nc=null,Cm=null,In=0,Sc=null;function Pt(){if(($e&2)!==0&&Me!==0)return Me&-Me;if(T.T!==null){var e=yr;return e!==0?e:Ac()}return Vd()}function Om(){ts===0&&(ts=(Me&536870912)===0||Le?mt():536870912);var e=es.current;return e!==null&&(e.flags|=32),ts}function It(e,t,a){(e===Xe&&(Pe===2||Pe===9)||e.cancelPendingCommit!==null)&&(Dr(e,0),na(e,Me,ts,!1)),_a(e,a),(($e&2)===0||e!==Xe)&&(e===Xe&&(($e&2)===0&&(Pa|=a),tt===4&&na(e,Me,ts,!1)),ys(e))}function Am(e,t,a){if(($e&6)!==0)throw Error(i(327));var l=!a&&(t&124)===0&&(t&e.expiredLanes)===0||re(e,t),d=l?Qx(e,t):kc(e,t,!0),h=l;do{if(d===0){Tr&&!l&&na(e,t,0,!1);break}else{if(a=e.current.alternate,h&&!Vx(a)){d=kc(e,t,!1),h=!1;continue}if(d===2){if(h=t,e.errorRecoveryDisabledLanes&h)var p=0;else p=e.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){t=p;e:{var v=e;d=Pn;var C=v.current.memoizedState.isDehydrated;if(C&&(Dr(v,p).flags|=256),p=kc(v,p,!1),p!==2){if(yc&&!C){v.errorRecoveryDisabledLanes|=h,Pa|=h,d=4;break e}h=Mt,Mt=d,h!==null&&(Mt===null?Mt=h:Mt.push.apply(Mt,h))}d=p}if(h=!1,d!==2)continue}}if(d===1){Dr(e,0),na(e,t,0,!0);break}e:{switch(l=e,h=d,h){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:na(l,t,ts,!ta);break e;case 2:Mt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(d=jc+300-Ct(),10<d)){if(na(l,t,ts,!ta),Z(l,0,!0)!==0)break e;l.timeoutHandle=lf(Dm.bind(null,l,a,Mt,ri,bc,t,ts,Pa,Cr,ta,h,2,-0,0),d);break e}Dm(l,a,Mt,ri,bc,t,ts,Pa,Cr,ta,h,0,-0,0)}}break}while(!0);ys(e)}function Dm(e,t,a,l,d,h,p,v,C,B,Q,J,$,G){if(e.timeoutHandle=-1,J=t.subtreeFlags,(J&8192||(J&16785408)===16785408)&&(Kn={stylesheets:null,count:0,unsuspend:Ep},_m(t),J=Tp(),J!==null)){e.cancelPendingCommit=J(Bm.bind(null,e,t,h,a,l,d,p,v,C,Q,1,$,G)),na(e,h,p,!B);return}Bm(e,t,h,a,l,d,p,v,C)}function Vx(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],h=d.getSnapshot;d=d.value;try{if(!zt(h(),d))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function na(e,t,a,l){t&=~vc,t&=~Pa,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var d=t;0<d;){var h=31-Ie(d),p=1<<h;l[h]=-1,d&=~p}a!==0&&Hd(e,a,t)}function ni(){return($e&6)===0?(Hn(0),!1):!0}function _c(){if(Ae!==null){if(Pe===0)var e=Ae.return;else e=Ae,Es=Ra=null,Io(e),Sr=null,Un=0,e=Ae;for(;e!==null;)um(e.alternate,e),e=e.return;Ae=null}}function Dr(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,cp(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),_c(),Xe=e,Ae=a=Ns(e.current,null),Me=t,Pe=0,$t=null,ta=!1,Tr=re(e,t),yc=!1,Cr=ts=vc=Pa=sa=tt=0,Mt=Pn=null,bc=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var d=31-Ie(l),h=1<<d;t|=e[d],l&=~h}return Ms=t,kl(),a}function Um(e,t){Ce=null,T.H=Yl,t===Sn||t===zl?(t=Ju(),Pe=3):t===Qu?(t=Ju(),Pe=4):Pe=t===Zh?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,$t=t,Ae===null&&(tt=1,Zl(e,Jt(t,e.current)))}function Mm(){var e=T.H;return T.H=Yl,e===null?Yl:e}function Rm(){var e=T.A;return T.A=Hx,e}function Ec(){tt=4,ta||(Me&4194048)!==Me&&es.current!==null||(Tr=!0),(sa&134217727)===0&&(Pa&134217727)===0||Xe===null||na(Xe,Me,ts,!1)}function kc(e,t,a){var l=$e;$e|=2;var d=Mm(),h=Rm();(Xe!==e||Me!==t)&&(ri=null,Dr(e,t)),t=!1;var p=tt;e:do try{if(Pe!==0&&Ae!==null){var v=Ae,C=$t;switch(Pe){case 8:_c(),p=6;break e;case 3:case 2:case 9:case 6:es.current===null&&(t=!0);var B=Pe;if(Pe=0,$t=null,Ur(e,v,C,B),a&&Tr){p=0;break e}break;default:B=Pe,Pe=0,$t=null,Ur(e,v,C,B)}}Yx(),p=tt;break}catch(Q){Um(e,Q)}while(!0);return t&&e.shellSuspendCounter++,Es=Ra=null,$e=l,T.H=d,T.A=h,Ae===null&&(Xe=null,Me=0,kl()),p}function Yx(){for(;Ae!==null;)zm(Ae)}function Qx(e,t){var a=$e;$e|=2;var l=Mm(),d=Rm();Xe!==e||Me!==t?(ri=null,ai=Ct()+500,Dr(e,t)):Tr=re(e,t);e:do try{if(Pe!==0&&Ae!==null){t=Ae;var h=$t;t:switch(Pe){case 1:Pe=0,$t=null,Ur(e,t,h,1);break;case 2:case 9:if(Xu(h)){Pe=0,$t=null,Lm(t);break}t=function(){Pe!==2&&Pe!==9||Xe!==e||(Pe=7),ys(e)},h.then(t,t);break e;case 3:Pe=7;break e;case 4:Pe=5;break e;case 7:Xu(h)?(Pe=0,$t=null,Lm(t)):(Pe=0,$t=null,Ur(e,t,h,7));break;case 5:var p=null;switch(Ae.tag){case 26:p=Ae.memoizedState;case 5:case 27:var v=Ae;if(!p||vf(p)){Pe=0,$t=null;var C=v.sibling;if(C!==null)Ae=C;else{var B=v.return;B!==null?(Ae=B,li(B)):Ae=null}break t}}Pe=0,$t=null,Ur(e,t,h,5);break;case 6:Pe=0,$t=null,Ur(e,t,h,6);break;case 8:_c(),tt=6;break e;default:throw Error(i(462))}}Xx();break}catch(Q){Um(e,Q)}while(!0);return Es=Ra=null,T.H=l,T.A=d,$e=a,Ae!==null?0:(Xe=null,Me=0,kl(),tt)}function Xx(){for(;Ae!==null&&!Yt();)zm(Ae)}function zm(e){var t=cm(e.alternate,e,Ms);e.memoizedProps=e.pendingProps,t===null?li(e):Ae=t}function Lm(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=am(a,t,t.pendingProps,t.type,void 0,Me);break;case 11:t=am(a,t,t.pendingProps,t.type.render,t.ref,Me);break;case 5:Io(t);default:um(a,t),t=Ae=qu(t,Ms),t=cm(a,t,Ms)}e.memoizedProps=e.pendingProps,t===null?li(e):Ae=t}function Ur(e,t,a,l){Es=Ra=null,Io(t),Sr=null,Un=0;var d=t.return;try{if(Lx(e,d,t,a,Me)){tt=1,Zl(e,Jt(a,e.current)),Ae=null;return}}catch(h){if(d!==null)throw Ae=d,h;tt=1,Zl(e,Jt(a,e.current)),Ae=null;return}t.flags&32768?(Le||l===1?e=!0:Tr||(Me&536870912)!==0?e=!1:(ta=e=!0,(l===2||l===9||l===3||l===6)&&(l=es.current,l!==null&&l.tag===13&&(l.flags|=16384))),qm(t,e)):li(t)}function li(e){var t=e;do{if((t.flags&32768)!==0){qm(t,ta);return}e=t.return;var a=Bx(t.alternate,t,Ms);if(a!==null){Ae=a;return}if(t=t.sibling,t!==null){Ae=t;return}Ae=t=e}while(t!==null);tt===0&&(tt=5)}function qm(e,t){do{var a=$x(e.alternate,e);if(a!==null){a.flags&=32767,Ae=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Ae=e;return}Ae=e=a}while(e!==null);tt=6,Ae=null}function Bm(e,t,a,l,d,h,p,v,C){e.cancelPendingCommit=null;do ii();while(jt!==0);if(($e&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(h=t.lanes|t.childLanes,h|=po,E0(e,a,h,p,v,C),e===Xe&&(Ae=Xe=null,Me=0),Or=t,ra=e,Ar=a,wc=h,Nc=d,Cm=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Fx(Ps,function(){return Gm(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=T.T,T.T=null,d=L.p,L.p=2,p=$e,$e|=4;try{Px(e,t,a)}finally{$e=p,L.p=d,T.T=l}}jt=1,$m(),Pm(),Im()}}function $m(){if(jt===1){jt=0;var e=ra,t=Or,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=T.T,T.T=null;var l=L.p;L.p=2;var d=$e;$e|=4;try{wm(t,e);var h=Bc,p=Tu(e.containerInfo),v=h.focusedElem,C=h.selectionRange;if(p!==v&&v&&v.ownerDocument&&ku(v.ownerDocument.documentElement,v)){if(C!==null&&ho(v)){var B=C.start,Q=C.end;if(Q===void 0&&(Q=B),"selectionStart"in v)v.selectionStart=B,v.selectionEnd=Math.min(Q,v.value.length);else{var J=v.ownerDocument||document,$=J&&J.defaultView||window;if($.getSelection){var G=$.getSelection(),je=v.textContent.length,ve=Math.min(C.start,je),Ve=C.end===void 0?ve:Math.min(C.end,je);!G.extend&&ve>Ve&&(p=Ve,Ve=ve,ve=p);var R=Eu(v,ve),A=Eu(v,Ve);if(R&&A&&(G.rangeCount!==1||G.anchorNode!==R.node||G.anchorOffset!==R.offset||G.focusNode!==A.node||G.focusOffset!==A.offset)){var q=J.createRange();q.setStart(R.node,R.offset),G.removeAllRanges(),ve>Ve?(G.addRange(q),G.extend(A.node,A.offset)):(q.setEnd(A.node,A.offset),G.addRange(q))}}}}for(J=[],G=v;G=G.parentNode;)G.nodeType===1&&J.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<J.length;v++){var K=J[v];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}vi=!!qc,Bc=qc=null}finally{$e=d,L.p=l,T.T=a}}e.current=t,jt=2}}function Pm(){if(jt===2){jt=0;var e=ra,t=Or,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=T.T,T.T=null;var l=L.p;L.p=2;var d=$e;$e|=4;try{ym(e,t.alternate,t)}finally{$e=d,L.p=l,T.T=a}}jt=3}}function Im(){if(jt===4||jt===3){jt=0,Fa();var e=ra,t=Or,a=Ar,l=Cm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?jt=5:(jt=0,Or=ra=null,Hm(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(aa=null),Gi(a),t=t.stateNode,_e&&typeof _e.onCommitFiberRoot=="function")try{_e.onCommitFiberRoot(Re,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=T.T,d=L.p,L.p=2,T.T=null;try{for(var h=e.onRecoverableError,p=0;p<l.length;p++){var v=l[p];h(v.value,{componentStack:v.stack})}}finally{T.T=t,L.p=d}}(Ar&3)!==0&&ii(),ys(e),d=e.pendingLanes,(a&4194090)!==0&&(d&42)!==0?e===Sc?In++:(In=0,Sc=e):In=0,Hn(0)}}function Hm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,wn(t)))}function ii(e){return $m(),Pm(),Im(),Gm()}function Gm(){if(jt!==5)return!1;var e=ra,t=wc;wc=0;var a=Gi(Ar),l=T.T,d=L.p;try{L.p=32>a?32:a,T.T=null,a=Nc,Nc=null;var h=ra,p=Ar;if(jt=0,Or=ra=null,Ar=0,($e&6)!==0)throw Error(i(331));var v=$e;if($e|=4,km(h.current),Sm(h,h.current,p,a),$e=v,Hn(0,!1),_e&&typeof _e.onPostCommitFiberRoot=="function")try{_e.onPostCommitFiberRoot(Re,h)}catch{}return!0}finally{L.p=d,T.T=l,Hm(e,t)}}function Vm(e,t,a){t=Jt(a,t),t=sc(e.stateNode,t,2),e=Xs(e,t,2),e!==null&&(_a(e,2),ys(e))}function Qe(e,t,a){if(e.tag===3)Vm(e,e,a);else for(;t!==null;){if(t.tag===3){Vm(t,e,a);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(aa===null||!aa.has(l))){e=Jt(a,e),a=Kh(2),l=Xs(t,a,2),l!==null&&(Jh(a,l,t,e),_a(l,2),ys(l));break}}t=t.return}}function Tc(e,t,a){var l=e.pingCache;if(l===null){l=e.pingCache=new Gx;var d=new Set;l.set(t,d)}else d=l.get(t),d===void 0&&(d=new Set,l.set(t,d));d.has(a)||(yc=!0,d.add(a),e=Kx.bind(null,e,t,a),t.then(e,e))}function Kx(e,t,a){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Xe===e&&(Me&a)===a&&(tt===4||tt===3&&(Me&62914560)===Me&&300>Ct()-jc?($e&2)===0&&Dr(e,0):vc|=a,Cr===Me&&(Cr=0)),ys(e)}function Ym(e,t){t===0&&(t=Qt()),e=fr(e,t),e!==null&&(_a(e,t),ys(e))}function Jx(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Ym(e,a)}function Zx(e,t){var a=0;switch(e.tag){case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(t),Ym(e,a)}function Fx(e,t){return ht(e,t)}var oi=null,Mr=null,Cc=!1,ci=!1,Oc=!1,Ia=0;function ys(e){e!==Mr&&e.next===null&&(Mr===null?oi=Mr=e:Mr=Mr.next=e),ci=!0,Cc||(Cc=!0,ep())}function Hn(e,t){if(!Oc&&ci){Oc=!0;do for(var a=!1,l=oi;l!==null;){if(e!==0){var d=l.pendingLanes;if(d===0)var h=0;else{var p=l.suspendedLanes,v=l.pingedLanes;h=(1<<31-Ie(42|e)+1)-1,h&=d&~(p&~v),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(a=!0,Jm(l,h))}else h=Me,h=Z(l,l===Xe?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(h&3)===0||re(l,h)||(a=!0,Jm(l,h));l=l.next}while(a);Oc=!1}}function Wx(){Qm()}function Qm(){ci=Cc=!1;var e=0;Ia!==0&&(op()&&(e=Ia),Ia=0);for(var t=Ct(),a=null,l=oi;l!==null;){var d=l.next,h=Xm(l,t);h===0?(l.next=null,a===null?oi=d:a.next=d,d===null&&(Mr=a)):(a=l,(e!==0||(h&3)!==0)&&(ci=!0)),l=d}Hn(e)}function Xm(e,t){for(var a=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var p=31-Ie(h),v=1<<p,C=d[p];C===-1?((v&a)===0||(v&l)!==0)&&(d[p]=ge(v,t)):C<=t&&(e.expiredLanes|=v),h&=~v}if(t=Xe,a=Me,a=Z(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===t&&(Pe===2||Pe===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Tt(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||re(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(l!==null&&Tt(l),Gi(a)){case 2:case 8:a=Na;break;case 32:a=Ps;break;case 268435456:a=an;break;default:a=Ps}return l=Km.bind(null,e),a=ht(a,l),e.callbackPriority=t,e.callbackNode=a,t}return l!==null&&l!==null&&Tt(l),e.callbackPriority=2,e.callbackNode=null,2}function Km(e,t){if(jt!==0&&jt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(ii()&&e.callbackNode!==a)return null;var l=Me;return l=Z(e,e===Xe?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Am(e,l,t),Xm(e,Ct()),e.callbackNode!=null&&e.callbackNode===a?Km.bind(null,e):null)}function Jm(e,t){if(ii())return null;Am(e,t,!0)}function ep(){dp(function(){($e&6)!==0?ht(wa,Wx):Qm()})}function Ac(){return Ia===0&&(Ia=mt()),Ia}function Zm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:bl(""+e)}function Fm(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function tp(e,t,a,l,d){if(t==="submit"&&a&&a.stateNode===d){var h=Zm((d[Ot]||null).action),p=l.submitter;p&&(t=(t=p[Ot]||null)?Zm(t.formAction):p.getAttribute("formAction"),t!==null&&(h=t,p=null));var v=new Sl("action","action",null,l,d);e.push({event:v,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ia!==0){var C=p?Fm(d,p):new FormData(d);Zo(a,{pending:!0,data:C,method:d.method,action:h},null,C)}}else typeof h=="function"&&(v.preventDefault(),C=p?Fm(d,p):new FormData(d),Zo(a,{pending:!0,data:C,method:d.method,action:h},h,C))},currentTarget:d}]})}}for(var Dc=0;Dc<xo.length;Dc++){var Uc=xo[Dc],sp=Uc.toLowerCase(),ap=Uc[0].toUpperCase()+Uc.slice(1);ls(sp,"on"+ap)}ls(Au,"onAnimationEnd"),ls(Du,"onAnimationIteration"),ls(Uu,"onAnimationStart"),ls("dblclick","onDoubleClick"),ls("focusin","onFocus"),ls("focusout","onBlur"),ls(bx,"onTransitionRun"),ls(jx,"onTransitionStart"),ls(wx,"onTransitionCancel"),ls(Mu,"onTransitionEnd"),rr("onMouseEnter",["mouseout","mouseover"]),rr("onMouseLeave",["mouseout","mouseover"]),rr("onPointerEnter",["pointerout","pointerover"]),rr("onPointerLeave",["pointerout","pointerover"]),Ea("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ea("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ea("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ea("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ea("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ea("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gn));function Wm(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],d=l.event;l=l.listeners;e:{var h=void 0;if(t)for(var p=l.length-1;0<=p;p--){var v=l[p],C=v.instance,B=v.currentTarget;if(v=v.listener,C!==h&&d.isPropagationStopped())break e;h=v,d.currentTarget=B;try{h(d)}catch(Q){Jl(Q)}d.currentTarget=null,h=C}else for(p=0;p<l.length;p++){if(v=l[p],C=v.instance,B=v.currentTarget,v=v.listener,C!==h&&d.isPropagationStopped())break e;h=v,d.currentTarget=B;try{h(d)}catch(Q){Jl(Q)}d.currentTarget=null,h=C}}}}function De(e,t){var a=t[Vi];a===void 0&&(a=t[Vi]=new Set);var l=e+"__bubble";a.has(l)||(ef(t,e,2,!1),a.add(l))}function Mc(e,t,a){var l=0;t&&(l|=4),ef(a,e,l,t)}var di="_reactListening"+Math.random().toString(36).slice(2);function Rc(e){if(!e[di]){e[di]=!0,Qd.forEach(function(a){a!=="selectionchange"&&(rp.has(a)||Mc(a,!1,e),Mc(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[di]||(t[di]=!0,Mc("selectionchange",!1,t))}}function ef(e,t,a,l){switch(_f(t)){case 2:var d=Ap;break;case 8:d=Dp;break;default:d=Kc}a=d.bind(null,t,a,e),d=void 0,!so||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(t,a,{capture:!0,passive:d}):e.addEventListener(t,a,!0):d!==void 0?e.addEventListener(t,a,{passive:d}):e.addEventListener(t,a,!1)}function zc(e,t,a,l,d){var h=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var p=l.tag;if(p===3||p===4){var v=l.stateNode.containerInfo;if(v===d)break;if(p===4)for(p=l.return;p!==null;){var C=p.tag;if((C===3||C===4)&&p.stateNode.containerInfo===d)return;p=p.return}for(;v!==null;){if(p=tr(v),p===null)return;if(C=p.tag,C===5||C===6||C===26||C===27){l=h=p;continue e}v=v.parentNode}}l=l.return}iu(function(){var B=h,Q=eo(a),J=[];e:{var $=Ru.get(e);if($!==void 0){var G=Sl,je=e;switch(e){case"keypress":if(wl(a)===0)break e;case"keydown":case"keyup":G=F0;break;case"focusin":je="focus",G=lo;break;case"focusout":je="blur",G=lo;break;case"beforeblur":case"afterblur":G=lo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=du;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=$0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=tx;break;case Au:case Du:case Uu:G=H0;break;case Mu:G=ax;break;case"scroll":case"scrollend":G=q0;break;case"wheel":G=nx;break;case"copy":case"cut":case"paste":G=V0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=hu;break;case"toggle":case"beforetoggle":G=ix}var ve=(t&4)!==0,Ve=!ve&&(e==="scroll"||e==="scrollend"),R=ve?$!==null?$+"Capture":null:$;ve=[];for(var A=B,q;A!==null;){var K=A;if(q=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||q===null||R===null||(K=cn(A,R),K!=null&&ve.push(Vn(A,K,q))),Ve)break;A=A.return}0<ve.length&&($=new G($,je,null,a,Q),J.push({event:$,listeners:ve}))}}if((t&7)===0){e:{if($=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",$&&a!==Wi&&(je=a.relatedTarget||a.fromElement)&&(tr(je)||je[er]))break e;if((G||$)&&($=Q.window===Q?Q:($=Q.ownerDocument)?$.defaultView||$.parentWindow:window,G?(je=a.relatedTarget||a.toElement,G=B,je=je?tr(je):null,je!==null&&(Ve=u(je),ve=je.tag,je!==Ve||ve!==5&&ve!==27&&ve!==6)&&(je=null)):(G=null,je=B),G!==je)){if(ve=du,K="onMouseLeave",R="onMouseEnter",A="mouse",(e==="pointerout"||e==="pointerover")&&(ve=hu,K="onPointerLeave",R="onPointerEnter",A="pointer"),Ve=G==null?$:on(G),q=je==null?$:on(je),$=new ve(K,A+"leave",G,a,Q),$.target=Ve,$.relatedTarget=q,K=null,tr(Q)===B&&(ve=new ve(R,A+"enter",je,a,Q),ve.target=q,ve.relatedTarget=Ve,K=ve),Ve=K,G&&je)t:{for(ve=G,R=je,A=0,q=ve;q;q=Rr(q))A++;for(q=0,K=R;K;K=Rr(K))q++;for(;0<A-q;)ve=Rr(ve),A--;for(;0<q-A;)R=Rr(R),q--;for(;A--;){if(ve===R||R!==null&&ve===R.alternate)break t;ve=Rr(ve),R=Rr(R)}ve=null}else ve=null;G!==null&&tf(J,$,G,ve,!1),je!==null&&Ve!==null&&tf(J,Ve,je,ve,!0)}}e:{if($=B?on(B):window,G=$.nodeName&&$.nodeName.toLowerCase(),G==="select"||G==="input"&&$.type==="file")var me=bu;else if(yu($))if(ju)me=px;else{me=gx;var Oe=fx}else G=$.nodeName,!G||G.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?B&&Fi(B.elementType)&&(me=bu):me=xx;if(me&&(me=me(e,B))){vu(J,me,a,Q);break e}Oe&&Oe(e,$,B),e==="focusout"&&B&&$.type==="number"&&B.memoizedProps.value!=null&&Zi($,"number",$.value)}switch(Oe=B?on(B):window,e){case"focusin":(yu(Oe)||Oe.contentEditable==="true")&&(ur=Oe,mo=B,pn=null);break;case"focusout":pn=mo=ur=null;break;case"mousedown":fo=!0;break;case"contextmenu":case"mouseup":case"dragend":fo=!1,Cu(J,a,Q);break;case"selectionchange":if(vx)break;case"keydown":case"keyup":Cu(J,a,Q)}var xe;if(oo)e:{switch(e){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else dr?xu(e,a)&&(be="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(be="onCompositionStart");be&&(mu&&a.locale!=="ko"&&(dr||be!=="onCompositionStart"?be==="onCompositionEnd"&&dr&&(xe=ou()):(Gs=Q,ao="value"in Gs?Gs.value:Gs.textContent,dr=!0)),Oe=ui(B,be),0<Oe.length&&(be=new uu(be,e,null,a,Q),J.push({event:be,listeners:Oe}),xe?be.data=xe:(xe=pu(a),xe!==null&&(be.data=xe)))),(xe=cx?dx(e,a):ux(e,a))&&(be=ui(B,"onBeforeInput"),0<be.length&&(Oe=new uu("onBeforeInput","beforeinput",null,a,Q),J.push({event:Oe,listeners:be}),Oe.data=xe)),tp(J,e,B,a,Q)}Wm(J,t)})}function Vn(e,t,a){return{instance:e,listener:t,currentTarget:a}}function ui(e,t){for(var a=t+"Capture",l=[];e!==null;){var d=e,h=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||h===null||(d=cn(e,a),d!=null&&l.unshift(Vn(e,d,h)),d=cn(e,t),d!=null&&l.push(Vn(e,d,h))),e.tag===3)return l;e=e.return}return[]}function Rr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function tf(e,t,a,l,d){for(var h=t._reactName,p=[];a!==null&&a!==l;){var v=a,C=v.alternate,B=v.stateNode;if(v=v.tag,C!==null&&C===l)break;v!==5&&v!==26&&v!==27||B===null||(C=B,d?(B=cn(a,h),B!=null&&p.unshift(Vn(a,B,C))):d||(B=cn(a,h),B!=null&&p.push(Vn(a,B,C)))),a=a.return}p.length!==0&&e.push({event:t,listeners:p})}var np=/\r\n?/g,lp=/\u0000|\uFFFD/g;function sf(e){return(typeof e=="string"?e:""+e).replace(np,`
`).replace(lp,"")}function af(e,t){return t=sf(t),sf(e)===t}function hi(){}function Ge(e,t,a,l,d,h){switch(a){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||ir(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&ir(e,""+l);break;case"className":pl(e,"class",l);break;case"tabIndex":pl(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":pl(e,a,l);break;case"style":nu(e,l,h);break;case"data":if(t!=="object"){pl(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=bl(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(a==="formAction"?(t!=="input"&&Ge(e,t,"name",d.name,d,null),Ge(e,t,"formEncType",d.formEncType,d,null),Ge(e,t,"formMethod",d.formMethod,d,null),Ge(e,t,"formTarget",d.formTarget,d,null)):(Ge(e,t,"encType",d.encType,d,null),Ge(e,t,"method",d.method,d,null),Ge(e,t,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=bl(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=hi);break;case"onScroll":l!=null&&De("scroll",e);break;case"onScrollEnd":l!=null&&De("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=bl(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":De("beforetoggle",e),De("toggle",e),xl(e,"popover",l);break;case"xlinkActuate":js(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":js(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":js(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":js(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":js(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":js(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":js(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":js(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":js(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":xl(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=z0.get(a)||a,xl(e,a,l))}}function Lc(e,t,a,l,d,h){switch(a){case"style":nu(e,l,h);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"children":typeof l=="string"?ir(e,l):(typeof l=="number"||typeof l=="bigint")&&ir(e,""+l);break;case"onScroll":l!=null&&De("scroll",e);break;case"onScrollEnd":l!=null&&De("scrollend",e);break;case"onClick":l!=null&&(e.onclick=hi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xd.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),t=a.slice(2,d?a.length-7:void 0),h=e[Ot]||null,h=h!=null?h[a]:null,typeof h=="function"&&e.removeEventListener(t,h,d),typeof l=="function")){typeof h!="function"&&h!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,l,d);break e}a in e?e[a]=l:l===!0?e.setAttribute(a,""):xl(e,a,l)}}}function wt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":De("error",e),De("load",e);var l=!1,d=!1,h;for(h in a)if(a.hasOwnProperty(h)){var p=a[h];if(p!=null)switch(h){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Ge(e,t,h,p,a,null)}}d&&Ge(e,t,"srcSet",a.srcSet,a,null),l&&Ge(e,t,"src",a.src,a,null);return;case"input":De("invalid",e);var v=h=p=d=null,C=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var Q=a[l];if(Q!=null)switch(l){case"name":d=Q;break;case"type":p=Q;break;case"checked":C=Q;break;case"defaultChecked":B=Q;break;case"value":h=Q;break;case"defaultValue":v=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,t));break;default:Ge(e,t,l,Q,a,null)}}tu(e,h,v,C,B,p,d,!1),yl(e);return;case"select":De("invalid",e),l=p=h=null;for(d in a)if(a.hasOwnProperty(d)&&(v=a[d],v!=null))switch(d){case"value":h=v;break;case"defaultValue":p=v;break;case"multiple":l=v;default:Ge(e,t,d,v,a,null)}t=h,a=p,e.multiple=!!l,t!=null?lr(e,!!l,t,!1):a!=null&&lr(e,!!l,a,!0);return;case"textarea":De("invalid",e),h=d=l=null;for(p in a)if(a.hasOwnProperty(p)&&(v=a[p],v!=null))switch(p){case"value":l=v;break;case"defaultValue":d=v;break;case"children":h=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:Ge(e,t,p,v,a,null)}au(e,l,d,h),yl(e);return;case"option":for(C in a)if(a.hasOwnProperty(C)&&(l=a[C],l!=null))switch(C){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ge(e,t,C,l,a,null)}return;case"dialog":De("beforetoggle",e),De("toggle",e),De("cancel",e),De("close",e);break;case"iframe":case"object":De("load",e);break;case"video":case"audio":for(l=0;l<Gn.length;l++)De(Gn[l],e);break;case"image":De("error",e),De("load",e);break;case"details":De("toggle",e);break;case"embed":case"source":case"link":De("error",e),De("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Ge(e,t,B,l,a,null)}return;default:if(Fi(t)){for(Q in a)a.hasOwnProperty(Q)&&(l=a[Q],l!==void 0&&Lc(e,t,Q,l,a,void 0));return}}for(v in a)a.hasOwnProperty(v)&&(l=a[v],l!=null&&Ge(e,t,v,l,a,null))}function ip(e,t,a,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,h=null,p=null,v=null,C=null,B=null,Q=null;for(G in a){var J=a[G];if(a.hasOwnProperty(G)&&J!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":C=J;default:l.hasOwnProperty(G)||Ge(e,t,G,null,l,J)}}for(var $ in l){var G=l[$];if(J=a[$],l.hasOwnProperty($)&&(G!=null||J!=null))switch($){case"type":h=G;break;case"name":d=G;break;case"checked":B=G;break;case"defaultChecked":Q=G;break;case"value":p=G;break;case"defaultValue":v=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,t));break;default:G!==J&&Ge(e,t,$,G,l,J)}}Ji(e,p,v,C,B,Q,h,d);return;case"select":G=p=v=$=null;for(h in a)if(C=a[h],a.hasOwnProperty(h)&&C!=null)switch(h){case"value":break;case"multiple":G=C;default:l.hasOwnProperty(h)||Ge(e,t,h,null,l,C)}for(d in l)if(h=l[d],C=a[d],l.hasOwnProperty(d)&&(h!=null||C!=null))switch(d){case"value":$=h;break;case"defaultValue":v=h;break;case"multiple":p=h;default:h!==C&&Ge(e,t,d,h,l,C)}t=v,a=p,l=G,$!=null?lr(e,!!a,$,!1):!!l!=!!a&&(t!=null?lr(e,!!a,t,!0):lr(e,!!a,a?[]:"",!1));return;case"textarea":G=$=null;for(v in a)if(d=a[v],a.hasOwnProperty(v)&&d!=null&&!l.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:Ge(e,t,v,null,l,d)}for(p in l)if(d=l[p],h=a[p],l.hasOwnProperty(p)&&(d!=null||h!=null))switch(p){case"value":$=d;break;case"defaultValue":G=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==h&&Ge(e,t,p,d,l,h)}su(e,$,G);return;case"option":for(var je in a)if($=a[je],a.hasOwnProperty(je)&&$!=null&&!l.hasOwnProperty(je))switch(je){case"selected":e.selected=!1;break;default:Ge(e,t,je,null,l,$)}for(C in l)if($=l[C],G=a[C],l.hasOwnProperty(C)&&$!==G&&($!=null||G!=null))switch(C){case"selected":e.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:Ge(e,t,C,$,l,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in a)$=a[ve],a.hasOwnProperty(ve)&&$!=null&&!l.hasOwnProperty(ve)&&Ge(e,t,ve,null,l,$);for(B in l)if($=l[B],G=a[B],l.hasOwnProperty(B)&&$!==G&&($!=null||G!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,t));break;default:Ge(e,t,B,$,l,G)}return;default:if(Fi(t)){for(var Ve in a)$=a[Ve],a.hasOwnProperty(Ve)&&$!==void 0&&!l.hasOwnProperty(Ve)&&Lc(e,t,Ve,void 0,l,$);for(Q in l)$=l[Q],G=a[Q],!l.hasOwnProperty(Q)||$===G||$===void 0&&G===void 0||Lc(e,t,Q,$,l,G);return}}for(var R in a)$=a[R],a.hasOwnProperty(R)&&$!=null&&!l.hasOwnProperty(R)&&Ge(e,t,R,null,l,$);for(J in l)$=l[J],G=a[J],!l.hasOwnProperty(J)||$===G||$==null&&G==null||Ge(e,t,J,$,l,G)}var qc=null,Bc=null;function mi(e){return e.nodeType===9?e:e.ownerDocument}function rf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nf(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function $c(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Pc=null;function op(){var e=window.event;return e&&e.type==="popstate"?e===Pc?!1:(Pc=e,!0):(Pc=null,!1)}var lf=typeof setTimeout=="function"?setTimeout:void 0,cp=typeof clearTimeout=="function"?clearTimeout:void 0,of=typeof Promise=="function"?Promise:void 0,dp=typeof queueMicrotask=="function"?queueMicrotask:typeof of<"u"?function(e){return of.resolve(null).then(e).catch(up)}:lf;function up(e){setTimeout(function(){throw e})}function la(e){return e==="head"}function cf(e,t){var a=t,l=0,d=0;do{var h=a.nextSibling;if(e.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(0<l&&8>l){a=l;var p=e.ownerDocument;if(a&1&&Yn(p.documentElement),a&2&&Yn(p.body),a&4)for(a=p.head,Yn(a),p=a.firstChild;p;){var v=p.nextSibling,C=p.nodeName;p[ln]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&p.rel.toLowerCase()==="stylesheet"||a.removeChild(p),p=v}}if(d===0){e.removeChild(h),el(t);return}d--}else a==="$"||a==="$?"||a==="$!"?d++:l=a.charCodeAt(0)-48;else l=0;a=h}while(a);el(t)}function Ic(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ic(a),Yi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function hp(e,t,a,l){for(;e.nodeType===1;){var d=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[ln])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var h=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=os(e.nextSibling),e===null)break}return null}function mp(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=os(e.nextSibling),e===null))return null;return e}function Hc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function fp(e,t){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")t();else{var l=function(){t(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function os(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Gc=null;function df(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}function uf(e,t,a){switch(t=mi(a),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Yn(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Yi(e)}var ss=new Map,hf=new Set;function fi(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Rs=L.d;L.d={f:gp,r:xp,D:pp,C:yp,L:vp,m:bp,X:wp,S:jp,M:Np};function gp(){var e=Rs.f(),t=ni();return e||t}function xp(e){var t=sr(e);t!==null&&t.tag===5&&t.type==="form"?Ah(t):Rs.r(e)}var zr=typeof document>"u"?null:document;function mf(e,t,a){var l=zr;if(l&&typeof t=="string"&&t){var d=Kt(t);d='link[rel="'+e+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),hf.has(d)||(hf.add(d),e={rel:e,crossOrigin:a,href:t},l.querySelector(d)===null&&(t=l.createElement("link"),wt(t,"link",e),ft(t),l.head.appendChild(t)))}}function pp(e){Rs.D(e),mf("dns-prefetch",e,null)}function yp(e,t){Rs.C(e,t),mf("preconnect",e,t)}function vp(e,t,a){Rs.L(e,t,a);var l=zr;if(l&&e&&t){var d='link[rel="preload"][as="'+Kt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+Kt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+Kt(a.imageSizes)+'"]')):d+='[href="'+Kt(e)+'"]';var h=d;switch(t){case"style":h=Lr(e);break;case"script":h=qr(e)}ss.has(h)||(e=y({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),ss.set(h,e),l.querySelector(d)!==null||t==="style"&&l.querySelector(Qn(h))||t==="script"&&l.querySelector(Xn(h))||(t=l.createElement("link"),wt(t,"link",e),ft(t),l.head.appendChild(t)))}}function bp(e,t){Rs.m(e,t);var a=zr;if(a&&e){var l=t&&typeof t.as=="string"?t.as:"script",d='link[rel="modulepreload"][as="'+Kt(l)+'"][href="'+Kt(e)+'"]',h=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=qr(e)}if(!ss.has(h)&&(e=y({rel:"modulepreload",href:e},t),ss.set(h,e),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Xn(h)))return}l=a.createElement("link"),wt(l,"link",e),ft(l),a.head.appendChild(l)}}}function jp(e,t,a){Rs.S(e,t,a);var l=zr;if(l&&e){var d=ar(l).hoistableStyles,h=Lr(e);t=t||"default";var p=d.get(h);if(!p){var v={loading:0,preload:null};if(p=l.querySelector(Qn(h)))v.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":t},a),(a=ss.get(h))&&Vc(e,a);var C=p=l.createElement("link");ft(C),wt(C,"link",e),C._p=new Promise(function(B,Q){C.onload=B,C.onerror=Q}),C.addEventListener("load",function(){v.loading|=1}),C.addEventListener("error",function(){v.loading|=2}),v.loading|=4,gi(p,t,l)}p={type:"stylesheet",instance:p,count:1,state:v},d.set(h,p)}}}function wp(e,t){Rs.X(e,t);var a=zr;if(a&&e){var l=ar(a).hoistableScripts,d=qr(e),h=l.get(d);h||(h=a.querySelector(Xn(d)),h||(e=y({src:e,async:!0},t),(t=ss.get(d))&&Yc(e,t),h=a.createElement("script"),ft(h),wt(h,"link",e),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(d,h))}}function Np(e,t){Rs.M(e,t);var a=zr;if(a&&e){var l=ar(a).hoistableScripts,d=qr(e),h=l.get(d);h||(h=a.querySelector(Xn(d)),h||(e=y({src:e,async:!0,type:"module"},t),(t=ss.get(d))&&Yc(e,t),h=a.createElement("script"),ft(h),wt(h,"link",e),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(d,h))}}function ff(e,t,a,l){var d=(d=pe.current)?fi(d):null;if(!d)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Lr(a.href),a=ar(d).hoistableStyles,l=a.get(t),l||(l={type:"style",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Lr(a.href);var h=ar(d).hoistableStyles,p=h.get(e);if(p||(d=d.ownerDocument||d,p={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,p),(h=d.querySelector(Qn(e)))&&!h._p&&(p.instance=h,p.state.loading=5),ss.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ss.set(e,a),h||Sp(d,e,a,p.state))),t&&l===null)throw Error(i(528,""));return p}if(t&&l!==null)throw Error(i(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=qr(a),a=ar(d).hoistableScripts,l=a.get(t),l||(l={type:"script",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Lr(e){return'href="'+Kt(e)+'"'}function Qn(e){return'link[rel="stylesheet"]['+e+"]"}function gf(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function Sp(e,t,a,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),wt(t,"link",a),ft(t),e.head.appendChild(t))}function qr(e){return'[src="'+Kt(e)+'"]'}function Xn(e){return"script[async]"+e}function xf(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+Kt(a.href)+'"]');if(l)return t.instance=l,ft(l),l;var d=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),ft(l),wt(l,"style",d),gi(l,a.precedence,e),t.instance=l;case"stylesheet":d=Lr(a.href);var h=e.querySelector(Qn(d));if(h)return t.state.loading|=4,t.instance=h,ft(h),h;l=gf(a),(d=ss.get(d))&&Vc(l,d),h=(e.ownerDocument||e).createElement("link"),ft(h);var p=h;return p._p=new Promise(function(v,C){p.onload=v,p.onerror=C}),wt(h,"link",l),t.state.loading|=4,gi(h,a.precedence,e),t.instance=h;case"script":return h=qr(a.src),(d=e.querySelector(Xn(h)))?(t.instance=d,ft(d),d):(l=a,(d=ss.get(h))&&(l=y({},a),Yc(l,d)),e=e.ownerDocument||e,d=e.createElement("script"),ft(d),wt(d,"link",l),e.head.appendChild(d),t.instance=d);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,gi(l,a.precedence,e));return t.instance}function gi(e,t,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,h=d,p=0;p<l.length;p++){var v=l[p];if(v.dataset.precedence===t)h=v;else if(h!==d)break}h?h.parentNode.insertBefore(e,h.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Vc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Yc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var xi=null;function pf(e,t,a){if(xi===null){var l=new Map,d=xi=new Map;d.set(a,l)}else d=xi,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),d=0;d<a.length;d++){var h=a[d];if(!(h[ln]||h[Nt]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var p=h.getAttribute(t)||"";p=e+p;var v=l.get(p);v?v.push(h):l.set(p,[h])}}return l}function yf(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function _p(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function vf(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Kn=null;function Ep(){}function kp(e,t,a){if(Kn===null)throw Error(i(475));var l=Kn;if(t.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var d=Lr(a.href),h=e.querySelector(Qn(d));if(h){e=h._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=pi.bind(l),e.then(l,l)),t.state.loading|=4,t.instance=h,ft(h);return}h=e.ownerDocument||e,a=gf(a),(d=ss.get(d))&&Vc(a,d),h=h.createElement("link"),ft(h);var p=h;p._p=new Promise(function(v,C){p.onload=v,p.onerror=C}),wt(h,"link",a),t.instance=h}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(l.count++,t=pi.bind(l),e.addEventListener("load",t),e.addEventListener("error",t))}}function Tp(){if(Kn===null)throw Error(i(475));var e=Kn;return e.stylesheets&&e.count===0&&Qc(e,e.stylesheets),0<e.count?function(t){var a=setTimeout(function(){if(e.stylesheets&&Qc(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(a)}}:null}function pi(){if(this.count--,this.count===0){if(this.stylesheets)Qc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var yi=null;function Qc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,yi=new Map,t.forEach(Cp,e),yi=null,pi.call(e))}function Cp(e,t){if(!(t.state.loading&4)){var a=yi.get(e);if(a)var l=a.get(null);else{a=new Map,yi.set(e,a);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<d.length;h++){var p=d[h];(p.nodeName==="LINK"||p.getAttribute("media")!=="not all")&&(a.set(p.dataset.precedence,p),l=p)}l&&a.set(null,l)}d=t.instance,p=d.getAttribute("data-precedence"),h=a.get(p)||l,h===l&&a.set(null,d),a.set(p,d),this.count++,l=pi.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),h?h.parentNode.insertBefore(d,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),t.state.loading|=4}}var Jn={$$typeof:D,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function Op(e,t,a,l,d,h,p,v){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=nn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nn(0),this.hiddenUpdates=nn(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=h,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=v,this.incompleteTransitions=new Map}function bf(e,t,a,l,d,h,p,v,C,B,Q,J){return e=new Op(e,t,a,p,v,C,B,J),t=1,h===!0&&(t|=24),h=Lt(3,null,null,t),e.current=h,h.stateNode=e,t=To(),t.refCount++,e.pooledCache=t,t.refCount++,h.memoizedState={element:l,isDehydrated:a,cache:t},Do(h),e}function jf(e){return e?(e=gr,e):gr}function wf(e,t,a,l,d,h){d=jf(d),l.context===null?l.context=d:l.pendingContext=d,l=Qs(t),l.payload={element:a},h=h===void 0?null:h,h!==null&&(l.callback=h),a=Xs(e,l,t),a!==null&&(It(a,e,t),En(a,e,t))}function Nf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Xc(e,t){Nf(e,t),(e=e.alternate)&&Nf(e,t)}function Sf(e){if(e.tag===13){var t=fr(e,67108864);t!==null&&It(t,e,67108864),Xc(e,67108864)}}var vi=!0;function Ap(e,t,a,l){var d=T.T;T.T=null;var h=L.p;try{L.p=2,Kc(e,t,a,l)}finally{L.p=h,T.T=d}}function Dp(e,t,a,l){var d=T.T;T.T=null;var h=L.p;try{L.p=8,Kc(e,t,a,l)}finally{L.p=h,T.T=d}}function Kc(e,t,a,l){if(vi){var d=Jc(l);if(d===null)zc(e,t,l,bi,a),Ef(e,l);else if(Mp(d,e,t,a,l))l.stopPropagation();else if(Ef(e,l),t&4&&-1<Up.indexOf(e)){for(;d!==null;){var h=sr(d);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var p=M(h.pendingLanes);if(p!==0){var v=h;for(v.pendingLanes|=2,v.entangledLanes|=2;p;){var C=1<<31-Ie(p);v.entanglements[1]|=C,p&=~C}ys(h),($e&6)===0&&(ai=Ct()+500,Hn(0))}}break;case 13:v=fr(h,2),v!==null&&It(v,h,2),ni(),Xc(h,2)}if(h=Jc(l),h===null&&zc(e,t,l,bi,a),h===d)break;d=h}d!==null&&l.stopPropagation()}else zc(e,t,l,null,a)}}function Jc(e){return e=eo(e),Zc(e)}var bi=null;function Zc(e){if(bi=null,e=tr(e),e!==null){var t=u(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=m(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return bi=e,null}function _f(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wa()){case wa:return 2;case Na:return 8;case Ps:case Sa:return 32;case an:return 268435456;default:return 32}default:return 32}}var Fc=!1,ia=null,oa=null,ca=null,Zn=new Map,Fn=new Map,da=[],Up="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ef(e,t){switch(e){case"focusin":case"focusout":ia=null;break;case"dragenter":case"dragleave":oa=null;break;case"mouseover":case"mouseout":ca=null;break;case"pointerover":case"pointerout":Zn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fn.delete(t.pointerId)}}function Wn(e,t,a,l,d,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:a,eventSystemFlags:l,nativeEvent:h,targetContainers:[d]},t!==null&&(t=sr(t),t!==null&&Sf(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function Mp(e,t,a,l,d){switch(t){case"focusin":return ia=Wn(ia,e,t,a,l,d),!0;case"dragenter":return oa=Wn(oa,e,t,a,l,d),!0;case"mouseover":return ca=Wn(ca,e,t,a,l,d),!0;case"pointerover":var h=d.pointerId;return Zn.set(h,Wn(Zn.get(h)||null,e,t,a,l,d)),!0;case"gotpointercapture":return h=d.pointerId,Fn.set(h,Wn(Fn.get(h)||null,e,t,a,l,d)),!0}return!1}function kf(e){var t=tr(e.target);if(t!==null){var a=u(t);if(a!==null){if(t=a.tag,t===13){if(t=m(a),t!==null){e.blockedOn=t,k0(e.priority,function(){if(a.tag===13){var l=Pt();l=Hi(l);var d=fr(a,l);d!==null&&It(d,a,l),Xc(a,l)}});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ji(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Jc(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Wi=l,a.target.dispatchEvent(l),Wi=null}else return t=sr(a),t!==null&&Sf(t),e.blockedOn=a,!1;t.shift()}return!0}function Tf(e,t,a){ji(e)&&a.delete(t)}function Rp(){Fc=!1,ia!==null&&ji(ia)&&(ia=null),oa!==null&&ji(oa)&&(oa=null),ca!==null&&ji(ca)&&(ca=null),Zn.forEach(Tf),Fn.forEach(Tf)}function wi(e,t){e.blockedOn===t&&(e.blockedOn=null,Fc||(Fc=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,Rp)))}var Ni=null;function Cf(e){Ni!==e&&(Ni=e,c.unstable_scheduleCallback(c.unstable_NormalPriority,function(){Ni===e&&(Ni=null);for(var t=0;t<e.length;t+=3){var a=e[t],l=e[t+1],d=e[t+2];if(typeof l!="function"){if(Zc(l||a)===null)continue;break}var h=sr(a);h!==null&&(e.splice(t,3),t-=3,Zo(h,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function el(e){function t(C){return wi(C,e)}ia!==null&&wi(ia,e),oa!==null&&wi(oa,e),ca!==null&&wi(ca,e),Zn.forEach(t),Fn.forEach(t);for(var a=0;a<da.length;a++){var l=da[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<da.length&&(a=da[0],a.blockedOn===null);)kf(a),a.blockedOn===null&&da.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],h=a[l+1],p=d[Ot]||null;if(typeof h=="function")p||Cf(a);else if(p){var v=null;if(h&&h.hasAttribute("formAction")){if(d=h,p=h[Ot]||null)v=p.formAction;else if(Zc(d)!==null)continue}else v=p.action;typeof v=="function"?a[l+1]=v:(a.splice(l,3),l-=3),Cf(a)}}}function Wc(e){this._internalRoot=e}Si.prototype.render=Wc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var a=t.current,l=Pt();wf(a,l,e,t,null,null)},Si.prototype.unmount=Wc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;wf(e.current,2,null,e,null,null),ni(),t[er]=null}};function Si(e){this._internalRoot=e}Si.prototype.unstable_scheduleHydration=function(e){if(e){var t=Vd();e={blockedOn:null,target:e,priority:t};for(var a=0;a<da.length&&t!==0&&t<da[a].priority;a++);da.splice(a,0,e),a===0&&kf(e)}};var Of=r.version;if(Of!=="19.1.0")throw Error(i(527,Of,"19.1.0"));L.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=g(t),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var zp={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:T,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _i=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_i.isDisabled&&_i.supportsFiber)try{Re=_i.inject(zp),_e=_i}catch{}}return sl.createRoot=function(e,t){if(!o(e))throw Error(i(299));var a=!1,l="",d=Vh,h=Yh,p=Qh,v=null;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(d=t.onUncaughtError),t.onCaughtError!==void 0&&(h=t.onCaughtError),t.onRecoverableError!==void 0&&(p=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(v=t.unstable_transitionCallbacks)),t=bf(e,1,!1,null,null,a,l,d,h,p,v,null),e[er]=t.current,Rc(e),new Wc(t)},sl.hydrateRoot=function(e,t,a){if(!o(e))throw Error(i(299));var l=!1,d="",h=Vh,p=Yh,v=Qh,C=null,B=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(h=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(C=a.unstable_transitionCallbacks),a.formState!==void 0&&(B=a.formState)),t=bf(e,1,!0,t,a??null,l,d,h,p,v,C,B),t.context=jf(null),a=t.current,l=Pt(),l=Hi(l),d=Qs(l),d.callback=null,Xs(a,d,l),a=l,t.current.lanes=a,_a(t,a),ys(t),e[er]=t.current,Rc(e),new Si(t)},sl.version="19.1.0",sl}var $f;function Xp(){if($f)return sd.exports;$f=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(r){console.error(r)}}return c(),sd.exports=Qp(),sd.exports}var Kp=Xp();const Jp=Dd(Kp);Lg();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dl(){return dl=Object.assign?Object.assign.bind():function(c){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(c[i]=n[i])}return c},dl.apply(this,arguments)}var xa;(function(c){c.Pop="POP",c.Push="PUSH",c.Replace="REPLACE"})(xa||(xa={}));const Pf="popstate";function Zp(c){c===void 0&&(c={});function r(i,o){let{pathname:u,search:m,hash:f}=i.location;return xd("",{pathname:u,search:m,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){return typeof o=="string"?o:Mi(o)}return Wp(r,n,null,c)}function nt(c,r){if(c===!1||c===null||typeof c>"u")throw new Error(r)}function qg(c,r){if(!c){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function Fp(){return Math.random().toString(36).substr(2,8)}function If(c,r){return{usr:c.state,key:c.key,idx:r}}function xd(c,r,n,i){return n===void 0&&(n=null),dl({pathname:typeof c=="string"?c:c.pathname,search:"",hash:""},typeof r=="string"?en(r):r,{state:n,key:r&&r.key||i||Fp()})}function Mi(c){let{pathname:r="/",search:n="",hash:i=""}=c;return n&&n!=="?"&&(r+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(r+=i.charAt(0)==="#"?i:"#"+i),r}function en(c){let r={};if(c){let n=c.indexOf("#");n>=0&&(r.hash=c.substr(n),c=c.substr(0,n));let i=c.indexOf("?");i>=0&&(r.search=c.substr(i),c=c.substr(0,i)),c&&(r.pathname=c)}return r}function Wp(c,r,n,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:u=!1}=i,m=o.history,f=xa.Pop,g=null,x=y();x==null&&(x=0,m.replaceState(dl({},m.state,{idx:x}),""));function y(){return(m.state||{idx:null}).idx}function j(){f=xa.Pop;let _=y(),O=_==null?null:_-x;x=_,g&&g({action:f,location:w.location,delta:O})}function k(_,O){f=xa.Push;let P=xd(w.location,_,O);x=y()+1;let D=If(P,x),z=w.createHref(P);try{m.pushState(D,"",z)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;o.location.assign(z)}u&&g&&g({action:f,location:w.location,delta:1})}function b(_,O){f=xa.Replace;let P=xd(w.location,_,O);x=y();let D=If(P,x),z=w.createHref(P);m.replaceState(D,"",z),u&&g&&g({action:f,location:w.location,delta:0})}function S(_){let O=o.location.origin!=="null"?o.location.origin:o.location.href,P=typeof _=="string"?_:Mi(_);return P=P.replace(/ $/,"%20"),nt(O,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,O)}let w={get action(){return f},get location(){return c(o,m)},listen(_){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Pf,j),g=_,()=>{o.removeEventListener(Pf,j),g=null}},createHref(_){return r(o,_)},createURL:S,encodeLocation(_){let O=S(_);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:k,replace:b,go(_){return m.go(_)}};return w}var Hf;(function(c){c.data="data",c.deferred="deferred",c.redirect="redirect",c.error="error"})(Hf||(Hf={}));function ey(c,r,n){return n===void 0&&(n="/"),ty(c,r,n)}function ty(c,r,n,i){let o=typeof r=="string"?en(r):r,u=Md(o.pathname||"/",n);if(u==null)return null;let m=Bg(c);sy(m);let f=null;for(let g=0;f==null&&g<m.length;++g){let x=fy(u);f=uy(m[g],x)}return f}function Bg(c,r,n,i){r===void 0&&(r=[]),n===void 0&&(n=[]),i===void 0&&(i="");let o=(u,m,f)=>{let g={relativePath:f===void 0?u.path||"":f,caseSensitive:u.caseSensitive===!0,childrenIndex:m,route:u};g.relativePath.startsWith("/")&&(nt(g.relativePath.startsWith(i),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(i.length));let x=va([i,g.relativePath]),y=n.concat(g);u.children&&u.children.length>0&&(nt(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+x+'".')),Bg(u.children,r,y,x)),!(u.path==null&&!u.index)&&r.push({path:x,score:cy(x,u.index),routesMeta:y})};return c.forEach((u,m)=>{var f;if(u.path===""||!((f=u.path)!=null&&f.includes("?")))o(u,m);else for(let g of $g(u.path))o(u,m,g)}),r}function $g(c){let r=c.split("/");if(r.length===0)return[];let[n,...i]=r,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return o?[u,""]:[u];let m=$g(i.join("/")),f=[];return f.push(...m.map(g=>g===""?u:[u,g].join("/"))),o&&f.push(...m),f.map(g=>c.startsWith("/")&&g===""?"/":g)}function sy(c){c.sort((r,n)=>r.score!==n.score?n.score-r.score:dy(r.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const ay=/^:[\w-]+$/,ry=3,ny=2,ly=1,iy=10,oy=-2,Gf=c=>c==="*";function cy(c,r){let n=c.split("/"),i=n.length;return n.some(Gf)&&(i+=oy),r&&(i+=ny),n.filter(o=>!Gf(o)).reduce((o,u)=>o+(ay.test(u)?ry:u===""?ly:iy),i)}function dy(c,r){return c.length===r.length&&c.slice(0,-1).every((i,o)=>i===r[o])?c[c.length-1]-r[r.length-1]:0}function uy(c,r,n){let{routesMeta:i}=c,o={},u="/",m=[];for(let f=0;f<i.length;++f){let g=i[f],x=f===i.length-1,y=u==="/"?r:r.slice(u.length)||"/",j=hy({path:g.relativePath,caseSensitive:g.caseSensitive,end:x},y),k=g.route;if(!j)return null;Object.assign(o,j.params),m.push({params:o,pathname:va([u,j.pathname]),pathnameBase:yy(va([u,j.pathnameBase])),route:k}),j.pathnameBase!=="/"&&(u=va([u,j.pathnameBase]))}return m}function hy(c,r){typeof c=="string"&&(c={path:c,caseSensitive:!1,end:!0});let[n,i]=my(c.path,c.caseSensitive,c.end),o=r.match(n);if(!o)return null;let u=o[0],m=u.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:i.reduce((x,y,j)=>{let{paramName:k,isOptional:b}=y;if(k==="*"){let w=f[j]||"";m=u.slice(0,u.length-w.length).replace(/(.)\/+$/,"$1")}const S=f[j];return b&&!S?x[k]=void 0:x[k]=(S||"").replace(/%2F/g,"/"),x},{}),pathname:u,pathnameBase:m,pattern:c}}function my(c,r,n){r===void 0&&(r=!1),n===void 0&&(n=!0),qg(c==="*"||!c.endsWith("*")||c.endsWith("/*"),'Route path "'+c+'" will be treated as if it were '+('"'+c.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+c.replace(/\*$/,"/*")+'".'));let i=[],o="^"+c.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,f,g)=>(i.push({paramName:f,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return c.endsWith("*")?(i.push({paramName:"*"}),o+=c==="*"||c==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":c!==""&&c!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,r?void 0:"i"),i]}function fy(c){try{return c.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return qg(!1,'The URL path "'+c+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),c}}function Md(c,r){if(r==="/")return c;if(!c.toLowerCase().startsWith(r.toLowerCase()))return null;let n=r.endsWith("/")?r.length-1:r.length,i=c.charAt(n);return i&&i!=="/"?null:c.slice(n)||"/"}function gy(c,r){r===void 0&&(r="/");let{pathname:n,search:i="",hash:o=""}=typeof c=="string"?en(c):c;return{pathname:n?n.startsWith("/")?n:xy(n,r):r,search:vy(i),hash:by(o)}}function xy(c,r){let n=r.replace(/\/+$/,"").split("/");return c.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function ld(c,r,n,i){return"Cannot include a '"+c+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function py(c){return c.filter((r,n)=>n===0||r.route.path&&r.route.path.length>0)}function Rd(c,r){let n=py(c);return r?n.map((i,o)=>o===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function zd(c,r,n,i){i===void 0&&(i=!1);let o;typeof c=="string"?o=en(c):(o=dl({},c),nt(!o.pathname||!o.pathname.includes("?"),ld("?","pathname","search",o)),nt(!o.pathname||!o.pathname.includes("#"),ld("#","pathname","hash",o)),nt(!o.search||!o.search.includes("#"),ld("#","search","hash",o)));let u=c===""||o.pathname==="",m=u?"/":o.pathname,f;if(m==null)f=n;else{let j=r.length-1;if(!i&&m.startsWith("..")){let k=m.split("/");for(;k[0]==="..";)k.shift(),j-=1;o.pathname=k.join("/")}f=j>=0?r[j]:"/"}let g=gy(o,f),x=m&&m!=="/"&&m.endsWith("/"),y=(u||m===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(x||y)&&(g.pathname+="/"),g}const va=c=>c.join("/").replace(/\/\/+/g,"/"),yy=c=>c.replace(/\/+$/,"").replace(/^\/*/,"/"),vy=c=>!c||c==="?"?"":c.startsWith("?")?c:"?"+c,by=c=>!c||c==="#"?"":c.startsWith("#")?c:"#"+c;function jy(c){return c!=null&&typeof c.status=="number"&&typeof c.statusText=="string"&&typeof c.internal=="boolean"&&"data"in c}const Pg=["post","put","patch","delete"];new Set(Pg);const wy=["get",...Pg];new Set(wy);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ul(){return ul=Object.assign?Object.assign.bind():function(c){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(c[i]=n[i])}return c},ul.apply(this,arguments)}const Ld=E.createContext(null),Ny=E.createContext(null),ba=E.createContext(null),Bi=E.createContext(null),vs=E.createContext({outlet:null,matches:[],isDataRoute:!1}),Ig=E.createContext(null);function Sy(c,r){let{relative:n}=r===void 0?{}:r;tn()||nt(!1);let{basename:i,navigator:o}=E.useContext(ba),{hash:u,pathname:m,search:f}=Gg(c,{relative:n}),g=m;return i!=="/"&&(g=m==="/"?i:va([i,m])),o.createHref({pathname:g,search:f,hash:u})}function tn(){return E.useContext(Bi)!=null}function us(){return tn()||nt(!1),E.useContext(Bi).location}function Hg(c){E.useContext(ba).static||E.useLayoutEffect(c)}function hs(){let{isDataRoute:c}=E.useContext(vs);return c?By():_y()}function _y(){tn()||nt(!1);let c=E.useContext(Ld),{basename:r,future:n,navigator:i}=E.useContext(ba),{matches:o}=E.useContext(vs),{pathname:u}=us(),m=JSON.stringify(Rd(o,n.v7_relativeSplatPath)),f=E.useRef(!1);return Hg(()=>{f.current=!0}),E.useCallback(function(x,y){if(y===void 0&&(y={}),!f.current)return;if(typeof x=="number"){i.go(x);return}let j=zd(x,JSON.parse(m),u,y.relative==="path");c==null&&r!=="/"&&(j.pathname=j.pathname==="/"?r:va([r,j.pathname])),(y.replace?i.replace:i.push)(j,y.state,y)},[r,i,m,u,c])}const Ey=E.createContext(null);function ky(c){let r=E.useContext(vs).outlet;return r&&E.createElement(Ey.Provider,{value:c},r)}function ms(){let{matches:c}=E.useContext(vs),r=c[c.length-1];return r?r.params:{}}function Gg(c,r){let{relative:n}=r===void 0?{}:r,{future:i}=E.useContext(ba),{matches:o}=E.useContext(vs),{pathname:u}=us(),m=JSON.stringify(Rd(o,i.v7_relativeSplatPath));return E.useMemo(()=>zd(c,JSON.parse(m),u,n==="path"),[c,m,u,n])}function Ty(c,r){return Cy(c,r)}function Cy(c,r,n,i){tn()||nt(!1);let{navigator:o}=E.useContext(ba),{matches:u}=E.useContext(vs),m=u[u.length-1],f=m?m.params:{};m&&m.pathname;let g=m?m.pathnameBase:"/";m&&m.route;let x=us(),y;if(r){var j;let _=typeof r=="string"?en(r):r;g==="/"||(j=_.pathname)!=null&&j.startsWith(g)||nt(!1),y=_}else y=x;let k=y.pathname||"/",b=k;if(g!=="/"){let _=g.replace(/^\//,"").split("/");b="/"+k.replace(/^\//,"").split("/").slice(_.length).join("/")}let S=ey(c,{pathname:b}),w=My(S&&S.map(_=>Object.assign({},_,{params:Object.assign({},f,_.params),pathname:va([g,o.encodeLocation?o.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?g:va([g,o.encodeLocation?o.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),u,n,i);return r&&w?E.createElement(Bi.Provider,{value:{location:ul({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:xa.Pop}},w):w}function Oy(){let c=qy(),r=jy(c)?c.status+" "+c.statusText:c instanceof Error?c.message:JSON.stringify(c),n=c instanceof Error?c.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},r),n?E.createElement("pre",{style:o},n):null,null)}const Ay=E.createElement(Oy,null);class Dy extends E.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,n){return n.location!==r.location||n.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:n.error,location:n.location,revalidation:r.revalidation||n.revalidation}}componentDidCatch(r,n){console.error("React Router caught the following error during render",r,n)}render(){return this.state.error!==void 0?E.createElement(vs.Provider,{value:this.props.routeContext},E.createElement(Ig.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Uy(c){let{routeContext:r,match:n,children:i}=c,o=E.useContext(Ld);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),E.createElement(vs.Provider,{value:r},i)}function My(c,r,n,i){var o;if(r===void 0&&(r=[]),n===void 0&&(n=null),i===void 0&&(i=null),c==null){var u;if(!n)return null;if(n.errors)c=n.matches;else if((u=i)!=null&&u.v7_partialHydration&&r.length===0&&!n.initialized&&n.matches.length>0)c=n.matches;else return null}let m=c,f=(o=n)==null?void 0:o.errors;if(f!=null){let y=m.findIndex(j=>j.route.id&&f?.[j.route.id]!==void 0);y>=0||nt(!1),m=m.slice(0,Math.min(m.length,y+1))}let g=!1,x=-1;if(n&&i&&i.v7_partialHydration)for(let y=0;y<m.length;y++){let j=m[y];if((j.route.HydrateFallback||j.route.hydrateFallbackElement)&&(x=y),j.route.id){let{loaderData:k,errors:b}=n,S=j.route.loader&&k[j.route.id]===void 0&&(!b||b[j.route.id]===void 0);if(j.route.lazy||S){g=!0,x>=0?m=m.slice(0,x+1):m=[m[0]];break}}}return m.reduceRight((y,j,k)=>{let b,S=!1,w=null,_=null;n&&(b=f&&j.route.id?f[j.route.id]:void 0,w=j.route.errorElement||Ay,g&&(x<0&&k===0?($y("route-fallback"),S=!0,_=null):x===k&&(S=!0,_=j.route.hydrateFallbackElement||null)));let O=r.concat(m.slice(0,k+1)),P=()=>{let D;return b?D=w:S?D=_:j.route.Component?D=E.createElement(j.route.Component,null):j.route.element?D=j.route.element:D=y,E.createElement(Uy,{match:j,routeContext:{outlet:y,matches:O,isDataRoute:n!=null},children:D})};return n&&(j.route.ErrorBoundary||j.route.errorElement||k===0)?E.createElement(Dy,{location:n.location,revalidation:n.revalidation,component:w,error:b,children:P(),routeContext:{outlet:null,matches:O,isDataRoute:!0}}):P()},null)}var Vg=function(c){return c.UseBlocker="useBlocker",c.UseRevalidator="useRevalidator",c.UseNavigateStable="useNavigate",c}(Vg||{}),Yg=function(c){return c.UseBlocker="useBlocker",c.UseLoaderData="useLoaderData",c.UseActionData="useActionData",c.UseRouteError="useRouteError",c.UseNavigation="useNavigation",c.UseRouteLoaderData="useRouteLoaderData",c.UseMatches="useMatches",c.UseRevalidator="useRevalidator",c.UseNavigateStable="useNavigate",c.UseRouteId="useRouteId",c}(Yg||{});function Ry(c){let r=E.useContext(Ld);return r||nt(!1),r}function zy(c){let r=E.useContext(Ny);return r||nt(!1),r}function Ly(c){let r=E.useContext(vs);return r||nt(!1),r}function Qg(c){let r=Ly(),n=r.matches[r.matches.length-1];return n.route.id||nt(!1),n.route.id}function qy(){var c;let r=E.useContext(Ig),n=zy(),i=Qg();return r!==void 0?r:(c=n.errors)==null?void 0:c[i]}function By(){let{router:c}=Ry(Vg.UseNavigateStable),r=Qg(Yg.UseNavigateStable),n=E.useRef(!1);return Hg(()=>{n.current=!0}),E.useCallback(function(o,u){u===void 0&&(u={}),n.current&&(typeof o=="number"?c.navigate(o):c.navigate(o,ul({fromRouteId:r},u)))},[c,r])}const Vf={};function $y(c,r,n){Vf[c]||(Vf[c]=!0)}function Py(c,r){c?.v7_startTransition,c?.v7_relativeSplatPath}function Ka(c){let{to:r,replace:n,state:i,relative:o}=c;tn()||nt(!1);let{future:u,static:m}=E.useContext(ba),{matches:f}=E.useContext(vs),{pathname:g}=us(),x=hs(),y=zd(r,Rd(f,u.v7_relativeSplatPath),g,o==="path"),j=JSON.stringify(y);return E.useEffect(()=>x(JSON.parse(j),{replace:n,state:i,relative:o}),[x,j,o,n,i]),null}function Xg(c){return ky(c.context)}function Ke(c){nt(!1)}function Iy(c){let{basename:r="/",children:n=null,location:i,navigationType:o=xa.Pop,navigator:u,static:m=!1,future:f}=c;tn()&&nt(!1);let g=r.replace(/^\/*/,"/"),x=E.useMemo(()=>({basename:g,navigator:u,static:m,future:ul({v7_relativeSplatPath:!1},f)}),[g,f,u,m]);typeof i=="string"&&(i=en(i));let{pathname:y="/",search:j="",hash:k="",state:b=null,key:S="default"}=i,w=E.useMemo(()=>{let _=Md(y,g);return _==null?null:{location:{pathname:_,search:j,hash:k,state:b,key:S},navigationType:o}},[g,y,j,k,b,S,o]);return w==null?null:E.createElement(ba.Provider,{value:x},E.createElement(Bi.Provider,{children:n,value:w}))}function Hy(c){let{children:r,location:n}=c;return Ty(pd(r),n)}new Promise(()=>{});function pd(c,r){r===void 0&&(r=[]);let n=[];return E.Children.forEach(c,(i,o)=>{if(!E.isValidElement(i))return;let u=[...r,o];if(i.type===E.Fragment){n.push.apply(n,pd(i.props.children,u));return}i.type!==Ke&&nt(!1),!i.props.index||!i.props.children||nt(!1);let m={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(m.children=pd(i.props.children,u)),n.push(m)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yd(){return yd=Object.assign?Object.assign.bind():function(c){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(c[i]=n[i])}return c},yd.apply(this,arguments)}function Gy(c,r){if(c==null)return{};var n={},i=Object.keys(c),o,u;for(u=0;u<i.length;u++)o=i[u],!(r.indexOf(o)>=0)&&(n[o]=c[o]);return n}function Vy(c){return!!(c.metaKey||c.altKey||c.ctrlKey||c.shiftKey)}function Yy(c,r){return c.button===0&&(!r||r==="_self")&&!Vy(c)}function vd(c){return c===void 0&&(c=""),new URLSearchParams(typeof c=="string"||Array.isArray(c)||c instanceof URLSearchParams?c:Object.keys(c).reduce((r,n)=>{let i=c[n];return r.concat(Array.isArray(i)?i.map(o=>[n,o]):[[n,i]])},[]))}function Qy(c,r){let n=vd(c);return r&&r.forEach((i,o)=>{n.has(o)||r.getAll(o).forEach(u=>{n.append(o,u)})}),n}const Xy=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ky="6";try{window.__reactRouterVersion=Ky}catch{}const Jy="startTransition",Yf=Hp[Jy];function Zy(c){let{basename:r,children:n,future:i,window:o}=c,u=E.useRef();u.current==null&&(u.current=Zp({window:o,v5Compat:!0}));let m=u.current,[f,g]=E.useState({action:m.action,location:m.location}),{v7_startTransition:x}=i||{},y=E.useCallback(j=>{x&&Yf?Yf(()=>g(j)):g(j)},[g,x]);return E.useLayoutEffect(()=>m.listen(y),[m,y]),E.useEffect(()=>Py(i),[i]),E.createElement(Iy,{basename:r,children:n,location:f.location,navigationType:f.action,navigator:m,future:i})}const Fy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Wy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gt=E.forwardRef(function(r,n){let{onClick:i,relative:o,reloadDocument:u,replace:m,state:f,target:g,to:x,preventScrollReset:y,viewTransition:j}=r,k=Gy(r,Xy),{basename:b}=E.useContext(ba),S,w=!1;if(typeof x=="string"&&Wy.test(x)&&(S=x,Fy))try{let D=new URL(window.location.href),z=x.startsWith("//")?new URL(D.protocol+x):new URL(x),U=Md(z.pathname,b);z.origin===D.origin&&U!=null?x=U+z.search+z.hash:w=!0}catch{}let _=Sy(x,{relative:o}),O=ev(x,{replace:m,state:f,target:g,preventScrollReset:y,relative:o,viewTransition:j});function P(D){i&&i(D),D.defaultPrevented||O(D)}return E.createElement("a",yd({},k,{href:S||_,onClick:w||u?i:P,ref:n,target:g}))});var Qf;(function(c){c.UseScrollRestoration="useScrollRestoration",c.UseSubmit="useSubmit",c.UseSubmitFetcher="useSubmitFetcher",c.UseFetcher="useFetcher",c.useViewTransitionState="useViewTransitionState"})(Qf||(Qf={}));var Xf;(function(c){c.UseFetcher="useFetcher",c.UseFetchers="useFetchers",c.UseScrollRestoration="useScrollRestoration"})(Xf||(Xf={}));function ev(c,r){let{target:n,replace:i,state:o,preventScrollReset:u,relative:m,viewTransition:f}=r===void 0?{}:r,g=hs(),x=us(),y=Gg(c,{relative:m});return E.useCallback(j=>{if(Yy(j,n)){j.preventDefault();let k=i!==void 0?i:Mi(x)===Mi(y);g(c,{replace:k,state:o,preventScrollReset:u,relative:m,viewTransition:f})}},[x,g,y,i,o,n,c,u,m,f])}function tv(c){let r=E.useRef(vd(c)),n=E.useRef(!1),i=us(),o=E.useMemo(()=>Qy(i.search,n.current?null:r.current),[i.search]),u=hs(),m=E.useCallback((f,g)=>{const x=vd(typeof f=="function"?f(o):f);n.current=!0,u("?"+x,g)},[u,o]);return[o,m]}const Kg="/assets/TWC_Logo_Horiztonal_White-CRSZNtYs.png",sv="/assets/TWC_Logo_Vertical_White-khxOFf2z.png",av="modulepreload",rv=function(c){return"/"+c},Kf={},rt=function(r,n,i){let o=Promise.resolve();if(n&&n.length>0){let x=function(y){return Promise.all(y.map(j=>Promise.resolve(j).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};var m=x;document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),g=f?.nonce||f?.getAttribute("nonce");o=x(n.map(y=>{if(y=rv(y),y in Kf)return;Kf[y]=!0;const j=y.endsWith(".css"),k=j?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${k}`))return;const b=document.createElement("link");if(b.rel=j?"stylesheet":av,j||(b.as="script"),b.crossOrigin="",b.href=y,g&&b.setAttribute("nonce",g),document.head.appendChild(b),j)return new Promise((S,w)=>{b.addEventListener("load",S),b.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(f){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=f,window.dispatchEvent(g),!g.defaultPrevented)throw f}return o.then(f=>{for(const g of f||[])g.status==="rejected"&&u(g.reason);return r().catch(u)})},Jg=E.createContext(void 0),rs=()=>{const c=E.useContext(Jg);if(c===void 0)throw new Error("useNavigationProgress must be used within a NavigationProgressProvider");return c},nv=({children:c})=>{const[r,n]=E.useState(!1),[i,o]=E.useState({}),u=hs(),m=b=>i[b],f=(b,S)=>{o(w=>({...w,[b]:S}))},g=b=>!!(b==="/admin"||b==="/admin/"||b==="/admin/dashboard"||b.startsWith("/admin/users")||b.startsWith("/admin/orders")||b.startsWith("/admin/inventory")||b.startsWith("/admin/analytics")||b.startsWith("/admin/support")||b.startsWith("/admin/settings")||b.startsWith("/user/")&&(b.includes("/orders")||b.includes("/inventory"))||b.startsWith("/user/")&&b.includes("/settings")),x=async b=>{n(!0);const S=Date.now(),w=g(b);await j(b);const _=w?800:400,O=Date.now()-S;if(O<_){const P=_-O;await new Promise(D=>setTimeout(D,P))}u(b),setTimeout(()=>{n(!1)},200)},y=()=>{n(!1)},j=async b=>{try{if(!g(b))return;if(b==="/admin"||b==="/admin/"||b==="/admin/dashboard"){console.log("Preloading admin dashboard data...");try{const[w,{supabase:_}]=await Promise.all([rt(()=>Promise.resolve().then(()=>Cg),void 0),rt(()=>Promise.resolve().then(()=>zs),void 0)]),[O,P,D,z]=await Promise.all([w.AdminSettingsService.getSettings(),_.from("orders").select(`
                *,
                users!inner(username, email)
              `).order("created_at",{ascending:!1}).limit(10),_.from("users").select("id, role, created_at").limit(100),_.from("menu_items").select("id, name, in_stock").limit(50)]),U=(P.data||[]).map(V=>({...V,userName:V.users?.username||V.users?.email||"Unknown User",date:V.created_at||new Date().toISOString(),items:V.items||[],total:V.total||0,status:V.status==="confirmed"?"paid":V.status==="processing"?"processed":V.status==="delivered"?"delivered":"paid"}));f("admin-dashboard-settings",O),f("admin-dashboard-orders",U),f("admin-dashboard-users",D.data||[]),f("admin-dashboard-inventory",z.data||[])}catch(w){console.log("Preload admin dashboard error (non-critical):",w)}}else if(b.startsWith("/admin/users")){console.log("Preloading users data...");try{const{supabase:w}=await rt(async()=>{const{supabase:_}=await Promise.resolve().then(()=>zs);return{supabase:_}},void 0);if(b.includes("/users/")&&b.split("/").length>3){const _=b.split("/")[3],[O,P,D]=await Promise.all([w.from("users").select("*").eq("id",_).single(),w.from("orders").select("*").eq("user_id",_).order("created_at",{ascending:!1}).limit(20),w.from("support_tickets").select("*").eq("user_id",_).order("created_at",{ascending:!1}).limit(10)]);f(`admin-user-detail-${_}`,O.data),f(`admin-user-orders-${_}`,P.data||[]),f(`admin-user-activity-${_}`,D.data||[])}else{const[_,O]=await Promise.all([w.from("users").select("*").order("created_at",{ascending:!1}),w.from("orders").select("user_id, total, status, created_at")]);f("admin-users-list",_.data||[]),f("admin-users-stats",O.data||[])}}catch(w){console.log("Preload users error (non-critical):",w)}}else if(b.startsWith("/admin/orders")){console.log("Preloading orders data...");try{const[w,{supabase:_}]=await Promise.all([rt(()=>Promise.resolve().then(()=>Tg),void 0),rt(()=>Promise.resolve().then(()=>zs),void 0)]),[O,P,D]=await Promise.all([w.orderService.getAllOrders(),_.from("orders").select("status, total, created_at, payment_method"),_.from("orders").select("*, users(name)").order("created_at",{ascending:!1}).limit(50)]);f("admin-orders-list",O),f("admin-orders-stats",P.data||[]),f("admin-orders-activity",D.data||[])}catch(w){console.log("Preload orders error (non-critical):",w);try{const{supabase:_}=await rt(async()=>{const{supabase:P}=await Promise.resolve().then(()=>zs);return{supabase:P}},void 0),{data:O}=await _.from("orders").select("*").order("created_at",{ascending:!1}).limit(100);f("admin-orders-fallback",O||[])}catch(_){console.log("Preload orders fallback error:",_)}}}else if(b.startsWith("/admin/inventory")){console.log("Preloading inventory data...");try{const[w,{supabase:_}]=await Promise.all([rt(()=>Promise.resolve().then(()=>Ad),void 0),rt(()=>Promise.resolve().then(()=>zs),void 0)]),[O,P,D]=await Promise.all([w.menuService.getAllMenuItems(),_.from("menu_items").select("id, name, in_stock, category"),_.from("menu_items").select("*").order("updated_at",{ascending:!1}).limit(20)]);f("admin-inventory-items",O),f("admin-inventory-stock",P.data||[]),f("admin-inventory-recent",D.data||[])}catch(w){console.log("Preload inventory error (non-critical):",w);try{const{supabase:_}=await rt(async()=>{const{supabase:P}=await Promise.resolve().then(()=>zs);return{supabase:P}},void 0),{data:O}=await _.from("menu_items").select("*");f("admin-inventory-fallback",O||[])}catch(_){console.log("Preload inventory fallback error:",_)}}}else if(b.startsWith("/admin/analytics")){console.log("Preloading analytics data...");try{const{supabase:w}=await rt(async()=>{const{supabase:U}=await Promise.resolve().then(()=>zs);return{supabase:U}},void 0),[_,O,P,D,z]=await Promise.all([w.from("orders").select("total, status, created_at, payment_method").order("created_at",{ascending:!1}).limit(200),w.from("users").select("id, role, created_at").order("created_at",{ascending:!1}).limit(200),w.from("orders").select("total, created_at").eq("status","paid"),w.from("menu_items").select("id, name, category, in_stock"),w.from("orders").select("id, created_at, delivery_date, status, total").order("created_at",{ascending:!1}).limit(100)]);f("admin-analytics-orders",_.data||[]),f("admin-analytics-users",O.data||[]),f("admin-analytics-revenue",P.data||[]),f("admin-analytics-inventory",D.data||[]),f("admin-analytics-performance",z.data||[])}catch(w){console.log("Preload analytics error (non-critical):",w)}}else if(b.startsWith("/admin/support")){console.log("Preloading support data...");try{const{supabase:w}=await rt(async()=>{const{supabase:_}=await Promise.resolve().then(()=>zs);return{supabase:_}},void 0);try{const[_,O,P,D]=await Promise.all([w.from("support_tickets").select("*").order("created_at",{ascending:!1}),w.from("support_tickets").select("*, users(name)").order("created_at",{ascending:!1}).limit(50),w.from("support_tickets").select("status, priority, created_at"),w.from("support_tickets").select("user_id, subject, status").order("created_at",{ascending:!1}).limit(100)]);f("admin-support-tickets",_.data||[]),f("admin-support-recent",O.data||[]),f("admin-support-stats",P.data||[]),f("admin-support-users",D.data||[])}catch(_){console.log("Support tickets table not found, using empty data:",_),f("admin-support-tickets",[]),f("admin-support-recent",[]),f("admin-support-stats",[]),f("admin-support-users",[])}}catch(w){console.log("Preload support error (non-critical):",w)}}else if(b.startsWith("/admin/settings"))try{const _=await(await rt(()=>Promise.resolve().then(()=>Cg),void 0)).AdminSettingsService.getSettings();f("admin-settings-page",_)}catch(w){console.log("Preload admin settings error (non-critical):",w)}else if(b.startsWith("/user/")){const w=b.split("/")[2];if(b.includes("/orders"))try{const O=await(await rt(()=>Promise.resolve().then(()=>Tg),void 0)).orderService.getUserOrders(w);f(`user-orders-${w}`,O)}catch(_){console.log("Preload user orders error (non-critical):",_)}else if(b.includes("/inventory"))try{const O=await(await rt(()=>Promise.resolve().then(()=>Ad),void 0)).menuService.getAllMenuItems();f(`user-inventory-${w}`,O)}catch(_){console.log("Preload user inventory error (non-critical):",_)}else if(b.includes("/settings"))try{const{supabase:_}=await rt(async()=>{const{supabase:z}=await Promise.resolve().then(()=>zs);return{supabase:z}},void 0),{data:O,error:P}=await _.from("users").select("*").eq("id",w).single();!P&&O&&f(`user-settings-${w}`,O);const{data:D}=await _.from("user_preferences").select("*").eq("user_id",w).maybeSingle();D&&f(`user-preferences-${w}`,D)}catch(_){console.log("Preload user settings error (non-critical):",_)}}await new Promise(w=>setTimeout(w,300))}catch(S){console.log("Data preloading error (non-critical):",S)}},k={isNavigating:r,startNavigation:x,finishNavigation:y,getPreloadedData:m,setPreloadedData:f};return s.jsx(Jg.Provider,{value:k,children:c})},Be=({children:c,onClick:r,to:n,...i})=>{const{startNavigation:o}=rs(),u=async m=>{m.preventDefault(),window.location.pathname!==n&&await o(n),r&&r(m)};return s.jsx("a",{href:n,onClick:u,className:i.className,...i,children:c})};function lv(){return s.jsx(s.Fragment,{children:s.jsxs("section",{className:"relative w-full",children:[s.jsx("img",{src:"/cocktails.webp",alt:"Cocktails background",className:"block w-full h-auto select-none pointer-events-none"}),s.jsxs("header",{className:`
            absolute top-0 left-0 w-full h-16 sm:h-20 md:h-24
            flex items-center justify-between
            px-4 sm:px-6
            z-10
          `,children:[s.jsxs("h1",{className:"flex items-center gap-3 flex-1 mr-4 text-black",children:[s.jsx("span",{className:"block sm:hidden text-lg font-extrabold tracking-tight",children:"Cocktails"}),s.jsx("img",{src:Kg,alt:"TWC logo",className:"h-14 sm:h-16 md:h-20 lg:h-24 xl:h-28 w-auto"})]}),s.jsx(Be,{to:"/sign-in",className:`
              rounded-full border border-white bg-white
              px-4 py-2 sm:px-6 sm:py-2 text-sm sm:text-lg font-medium
              text-black hover:bg-white hover:text-black transition
              whitespace-nowrap flex-shrink-0
              min-h-[44px] flex items-center justify-center
            `,children:"SignIn"})]}),s.jsx("div",{className:"absolute inset-x-0 bottom-0 h-1/2 bg-gradient-to-t from-black/50 via-black/25 to-transparent"}),s.jsxs("div",{className:"absolute inset-0 flex flex-col justify-end items-center gap-6 pb-14 px-6",children:[s.jsxs("div",{className:"w-full max-w-3xl mx-auto text-white",children:[s.jsx("h2",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl font-bold drop-shadow-[0_1px_2px_rgba(0,0,0,0.6)]",children:"Premium Cocktail Delivery Service"}),s.jsx("p",{className:"mt-3 text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl leading-relaxed drop-shadow-[0_1px_2px_rgba(0,0,0,0.6)]",children:"Order from our curated selection of premium cocktails and alcoholic beverages. Fresh ingredients, expertly crafted, delivered to your door."})]}),s.jsxs("div",{className:"w-full max-w-md mx-auto mt-2 text-center text-white/95",children:[s.jsx("img",{src:sv,alt:"TWC vertical logo",className:"mx-auto h-24 sm:h-28 md:h-32 lg:h-36 xl:h-40 w-auto drop-shadow-[0_2px_6px_rgba(0,0,0,0.5)]"}),s.jsxs("div",{className:"mt-3 text-xs sm:text-sm md:text-base lg:text-lg font-medium drop-shadow-[0_1px_2px_rgba(0,0,0,0.6)]",children:[s.jsx("p",{children:"312-204-7222"}),s.jsx("p",{children:"info@twccocktail.com"}),s.jsx("p",{children:"@twccocktailcollective"})]})]})]})]})})}const iv=c=>{let r;return c?r=c:typeof fetch>"u"?r=(...n)=>rt(async()=>{const{default:i}=await Promise.resolve().then(()=>sn);return{default:i}},void 0).then(({default:i})=>i(...n)):r=fetch,(...n)=>r(...n)};class qd extends Error{constructor(r,n="FunctionsError",i){super(r),this.name=n,this.context=i}}class ov extends qd{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class Jf extends qd{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class Zf extends qd{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var bd;(function(c){c.Any="any",c.ApNortheast1="ap-northeast-1",c.ApNortheast2="ap-northeast-2",c.ApSouth1="ap-south-1",c.ApSoutheast1="ap-southeast-1",c.ApSoutheast2="ap-southeast-2",c.CaCentral1="ca-central-1",c.EuCentral1="eu-central-1",c.EuWest1="eu-west-1",c.EuWest2="eu-west-2",c.EuWest3="eu-west-3",c.SaEast1="sa-east-1",c.UsEast1="us-east-1",c.UsWest1="us-west-1",c.UsWest2="us-west-2"})(bd||(bd={}));var cv=function(c,r,n,i){function o(u){return u instanceof n?u:new n(function(m){m(u)})}return new(n||(n=Promise))(function(u,m){function f(y){try{x(i.next(y))}catch(j){m(j)}}function g(y){try{x(i.throw(y))}catch(j){m(j)}}function x(y){y.done?u(y.value):o(y.value).then(f,g)}x((i=i.apply(c,r||[])).next())})};class dv{constructor(r,{headers:n={},customFetch:i,region:o=bd.Any}={}){this.url=r,this.headers=n,this.region=o,this.fetch=iv(i)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r,n={}){var i;return cv(this,void 0,void 0,function*(){try{const{headers:o,method:u,body:m}=n;let f={},{region:g}=n;g||(g=this.region);const x=new URL(`${this.url}/${r}`);g&&g!=="any"&&(f["x-region"]=g,x.searchParams.set("forceFunctionRegion",g));let y;m&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",y=m):typeof m=="string"?(f["Content-Type"]="text/plain",y=m):typeof FormData<"u"&&m instanceof FormData?y=m:(f["Content-Type"]="application/json",y=JSON.stringify(m)));const j=yield this.fetch(x.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:y}).catch(w=>{throw new ov(w)}),k=j.headers.get("x-relay-error");if(k&&k==="true")throw new Jf(j);if(!j.ok)throw new Zf(j);let b=((i=j.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),S;return b==="application/json"?S=yield j.json():b==="application/octet-stream"?S=yield j.blob():b==="text/event-stream"?S=j:b==="multipart/form-data"?S=yield j.formData():S=yield j.text(),{data:S,error:null,response:j}}catch(o){return{data:null,error:o,response:o instanceof Zf||o instanceof Jf?o.context:void 0}}})}}var yt={},Br={},$r={},Pr={},Ir={},Hr={},uv=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Fr=uv();const hv=Fr.fetch,Zg=Fr.fetch.bind(Fr),Fg=Fr.Headers,mv=Fr.Request,fv=Fr.Response,sn=Object.freeze(Object.defineProperty({__proto__:null,Headers:Fg,Request:mv,Response:fv,default:Zg,fetch:hv},Symbol.toStringTag,{value:"Module"})),gv=Bp(sn);var Ei={},Ff;function Wg(){if(Ff)return Ei;Ff=1,Object.defineProperty(Ei,"__esModule",{value:!0});class c extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Ei.default=c,Ei}var Wf;function e0(){if(Wf)return Hr;Wf=1;var c=Hr&&Hr.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Hr,"__esModule",{value:!0});const r=c(gv),n=c(Wg());class i{constructor(u){this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=u.headers,this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=u.shouldThrowOnError,this.signal=u.signal,this.isMaybeSingle=u.isMaybeSingle,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=r.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,m){return this.headers=Object.assign({},this.headers),this.headers[u]=m,this}then(u,m){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const f=this.fetch;let g=f(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async x=>{var y,j,k;let b=null,S=null,w=null,_=x.status,O=x.statusText;if(x.ok){if(this.method!=="HEAD"){const U=await x.text();U===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?S=U:S=JSON.parse(U))}const D=(y=this.headers.Prefer)===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),z=(j=x.headers.get("content-range"))===null||j===void 0?void 0:j.split("/");D&&z&&z.length>1&&(w=parseInt(z[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(b={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,w=null,_=406,O="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const D=await x.text();try{b=JSON.parse(D),Array.isArray(b)&&x.status===404&&(S=[],b=null,_=200,O="OK")}catch{x.status===404&&D===""?(_=204,O="No Content"):b={message:D}}if(b&&this.isMaybeSingle&&(!((k=b?.details)===null||k===void 0)&&k.includes("0 rows"))&&(b=null,_=200,O="OK"),b&&this.shouldThrowOnError)throw new n.default(b)}return{error:b,data:S,count:w,status:_,statusText:O}});return this.shouldThrowOnError||(g=g.catch(x=>{var y,j,k;return{error:{message:`${(y=x?.name)!==null&&y!==void 0?y:"FetchError"}: ${x?.message}`,details:`${(j=x?.stack)!==null&&j!==void 0?j:""}`,hint:"",code:`${(k=x?.code)!==null&&k!==void 0?k:""}`},data:null,count:null,status:0,statusText:""}})),g.then(u,m)}returns(){return this}overrideTypes(){return this}}return Hr.default=i,Hr}var eg;function t0(){if(eg)return Ir;eg=1;var c=Ir&&Ir.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ir,"__esModule",{value:!0});const r=c(e0());class n extends r.default{select(o){let u=!1;const m=(o??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join("");return this.url.searchParams.set("select",m),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(o,{ascending:u=!0,nullsFirst:m,foreignTable:f,referencedTable:g=f}={}){const x=g?`${g}.order`:"order",y=this.url.searchParams.get(x);return this.url.searchParams.set(x,`${y?`${y},`:""}${o}.${u?"asc":"desc"}${m===void 0?"":m?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:u,referencedTable:m=u}={}){const f=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(f,`${o}`),this}range(o,u,{foreignTable:m,referencedTable:f=m}={}){const g=typeof f>"u"?"offset":`${f}.offset`,x=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(g,`${o}`),this.url.searchParams.set(x,`${u-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:o=!1,verbose:u=!1,settings:m=!1,buffers:f=!1,wal:g=!1,format:x="text"}={}){var y;const j=[o?"analyze":null,u?"verbose":null,m?"settings":null,f?"buffers":null,g?"wal":null].filter(Boolean).join("|"),k=(y=this.headers.Accept)!==null&&y!==void 0?y:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${x}; for="${k}"; options=${j};`,x==="json"?this:this}rollback(){var o;return((o=this.headers.Prefer)!==null&&o!==void 0?o:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Ir.default=n,Ir}var tg;function Bd(){if(tg)return Pr;tg=1;var c=Pr&&Pr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Pr,"__esModule",{value:!0});const r=c(t0());class n extends r.default{eq(o,u){return this.url.searchParams.append(o,`eq.${u}`),this}neq(o,u){return this.url.searchParams.append(o,`neq.${u}`),this}gt(o,u){return this.url.searchParams.append(o,`gt.${u}`),this}gte(o,u){return this.url.searchParams.append(o,`gte.${u}`),this}lt(o,u){return this.url.searchParams.append(o,`lt.${u}`),this}lte(o,u){return this.url.searchParams.append(o,`lte.${u}`),this}like(o,u){return this.url.searchParams.append(o,`like.${u}`),this}likeAllOf(o,u){return this.url.searchParams.append(o,`like(all).{${u.join(",")}}`),this}likeAnyOf(o,u){return this.url.searchParams.append(o,`like(any).{${u.join(",")}}`),this}ilike(o,u){return this.url.searchParams.append(o,`ilike.${u}`),this}ilikeAllOf(o,u){return this.url.searchParams.append(o,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(o,u){return this.url.searchParams.append(o,`ilike(any).{${u.join(",")}}`),this}is(o,u){return this.url.searchParams.append(o,`is.${u}`),this}in(o,u){const m=Array.from(new Set(u)).map(f=>typeof f=="string"&&new RegExp("[,()]").test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(o,`in.(${m})`),this}contains(o,u){return typeof u=="string"?this.url.searchParams.append(o,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(o,`cs.{${u.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(u)}`),this}containedBy(o,u){return typeof u=="string"?this.url.searchParams.append(o,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(o,`cd.{${u.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(u)}`),this}rangeGt(o,u){return this.url.searchParams.append(o,`sr.${u}`),this}rangeGte(o,u){return this.url.searchParams.append(o,`nxl.${u}`),this}rangeLt(o,u){return this.url.searchParams.append(o,`sl.${u}`),this}rangeLte(o,u){return this.url.searchParams.append(o,`nxr.${u}`),this}rangeAdjacent(o,u){return this.url.searchParams.append(o,`adj.${u}`),this}overlaps(o,u){return typeof u=="string"?this.url.searchParams.append(o,`ov.${u}`):this.url.searchParams.append(o,`ov.{${u.join(",")}}`),this}textSearch(o,u,{config:m,type:f}={}){let g="";f==="plain"?g="pl":f==="phrase"?g="ph":f==="websearch"&&(g="w");const x=m===void 0?"":`(${m})`;return this.url.searchParams.append(o,`${g}fts${x}.${u}`),this}match(o){return Object.entries(o).forEach(([u,m])=>{this.url.searchParams.append(u,`eq.${m}`)}),this}not(o,u,m){return this.url.searchParams.append(o,`not.${u}.${m}`),this}or(o,{foreignTable:u,referencedTable:m=u}={}){const f=m?`${m}.or`:"or";return this.url.searchParams.append(f,`(${o})`),this}filter(o,u,m){return this.url.searchParams.append(o,`${u}.${m}`),this}}return Pr.default=n,Pr}var sg;function s0(){if(sg)return $r;sg=1;var c=$r&&$r.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty($r,"__esModule",{value:!0});const r=c(Bd());class n{constructor(o,{headers:u={},schema:m,fetch:f}){this.url=o,this.headers=u,this.schema=m,this.fetch=f}select(o,{head:u=!1,count:m}={}){const f=u?"HEAD":"GET";let g=!1;const x=(o??"*").split("").map(y=>/\s/.test(y)&&!g?"":(y==='"'&&(g=!g),y)).join("");return this.url.searchParams.set("select",x),m&&(this.headers.Prefer=`count=${m}`),new r.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(o,{count:u,defaultToNull:m=!0}={}){const f="POST",g=[];if(this.headers.Prefer&&g.push(this.headers.Prefer),u&&g.push(`count=${u}`),m||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(o)){const x=o.reduce((y,j)=>y.concat(Object.keys(j)),[]);if(x.length>0){const y=[...new Set(x)].map(j=>`"${j}"`);this.url.searchParams.set("columns",y.join(","))}}return new r.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}upsert(o,{onConflict:u,ignoreDuplicates:m=!1,count:f,defaultToNull:g=!0}={}){const x="POST",y=[`resolution=${m?"ignore":"merge"}-duplicates`];if(u!==void 0&&this.url.searchParams.set("on_conflict",u),this.headers.Prefer&&y.push(this.headers.Prefer),f&&y.push(`count=${f}`),g||y.push("missing=default"),this.headers.Prefer=y.join(","),Array.isArray(o)){const j=o.reduce((k,b)=>k.concat(Object.keys(b)),[]);if(j.length>0){const k=[...new Set(j)].map(b=>`"${b}"`);this.url.searchParams.set("columns",k.join(","))}}return new r.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}update(o,{count:u}={}){const m="PATCH",f=[];return this.headers.Prefer&&f.push(this.headers.Prefer),u&&f.push(`count=${u}`),this.headers.Prefer=f.join(","),new r.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}delete({count:o}={}){const u="DELETE",m=[];return o&&m.push(`count=${o}`),this.headers.Prefer&&m.unshift(this.headers.Prefer),this.headers.Prefer=m.join(","),new r.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return $r.default=n,$r}var al={},rl={},ag;function xv(){return ag||(ag=1,Object.defineProperty(rl,"__esModule",{value:!0}),rl.version=void 0,rl.version="0.0.0-automated"),rl}var rg;function pv(){if(rg)return al;rg=1,Object.defineProperty(al,"__esModule",{value:!0}),al.DEFAULT_HEADERS=void 0;const c=xv();return al.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${c.version}`},al}var ng;function yv(){if(ng)return Br;ng=1;var c=Br&&Br.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Br,"__esModule",{value:!0});const r=c(s0()),n=c(Bd()),i=pv();class o{constructor(m,{headers:f={},schema:g,fetch:x}={}){this.url=m,this.headers=Object.assign(Object.assign({},i.DEFAULT_HEADERS),f),this.schemaName=g,this.fetch=x}from(m){const f=new URL(`${this.url}/${m}`);return new r.default(f,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(m){return new o(this.url,{headers:this.headers,schema:m,fetch:this.fetch})}rpc(m,f={},{head:g=!1,get:x=!1,count:y}={}){let j;const k=new URL(`${this.url}/rpc/${m}`);let b;g||x?(j=g?"HEAD":"GET",Object.entries(f).filter(([w,_])=>_!==void 0).map(([w,_])=>[w,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([w,_])=>{k.searchParams.append(w,_)})):(j="POST",b=f);const S=Object.assign({},this.headers);return y&&(S.Prefer=`count=${y}`),new n.default({method:j,url:k,headers:S,schema:this.schemaName,body:b,fetch:this.fetch,allowEmpty:!1})}}return Br.default=o,Br}var lg;function vv(){if(lg)return yt;lg=1;var c=yt&&yt.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(yt,"__esModule",{value:!0}),yt.PostgrestError=yt.PostgrestBuilder=yt.PostgrestTransformBuilder=yt.PostgrestFilterBuilder=yt.PostgrestQueryBuilder=yt.PostgrestClient=void 0;const r=c(yv());yt.PostgrestClient=r.default;const n=c(s0());yt.PostgrestQueryBuilder=n.default;const i=c(Bd());yt.PostgrestFilterBuilder=i.default;const o=c(t0());yt.PostgrestTransformBuilder=o.default;const u=c(e0());yt.PostgrestBuilder=u.default;const m=c(Wg());return yt.PostgrestError=m.default,yt.default={PostgrestClient:r.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:u.default,PostgrestError:m.default},yt}var bv=vv();const jv=Dd(bv),{PostgrestClient:wv,PostgrestQueryBuilder:Qw,PostgrestFilterBuilder:Xw,PostgrestTransformBuilder:Kw,PostgrestBuilder:Jw,PostgrestError:Zw}=jv;function Nv(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Sv=Nv(),_v="2.11.15",Ev=`realtime-js/${_v}`,kv="1.0.0",a0=1e4,Tv=1e3;var ol;(function(c){c[c.connecting=0]="connecting",c[c.open=1]="open",c[c.closing=2]="closing",c[c.closed=3]="closed"})(ol||(ol={}));var Et;(function(c){c.closed="closed",c.errored="errored",c.joined="joined",c.joining="joining",c.leaving="leaving"})(Et||(Et={}));var ds;(function(c){c.close="phx_close",c.error="phx_error",c.join="phx_join",c.reply="phx_reply",c.leave="phx_leave",c.access_token="access_token"})(ds||(ds={}));var jd;(function(c){c.websocket="websocket"})(jd||(jd={}));var Qa;(function(c){c.Connecting="connecting",c.Open="open",c.Closing="closing",c.Closed="closed"})(Qa||(Qa={}));class Cv{constructor(){this.HEADER_LENGTH=1}decode(r,n){return r.constructor===ArrayBuffer?n(this._binaryDecode(r)):n(typeof r=="string"?JSON.parse(r):{})}_binaryDecode(r){const n=new DataView(r),i=new TextDecoder;return this._decodeBroadcast(r,n,i)}_decodeBroadcast(r,n,i){const o=n.getUint8(1),u=n.getUint8(2);let m=this.HEADER_LENGTH+2;const f=i.decode(r.slice(m,m+o));m=m+o;const g=i.decode(r.slice(m,m+u));m=m+u;const x=JSON.parse(i.decode(r.slice(m,r.byteLength)));return{ref:null,topic:f,event:g,payload:x}}}class r0{constructor(r,n){this.callback=r,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Je;(function(c){c.abstime="abstime",c.bool="bool",c.date="date",c.daterange="daterange",c.float4="float4",c.float8="float8",c.int2="int2",c.int4="int4",c.int4range="int4range",c.int8="int8",c.int8range="int8range",c.json="json",c.jsonb="jsonb",c.money="money",c.numeric="numeric",c.oid="oid",c.reltime="reltime",c.text="text",c.time="time",c.timestamp="timestamp",c.timestamptz="timestamptz",c.timetz="timetz",c.tsrange="tsrange",c.tstzrange="tstzrange"})(Je||(Je={}));const ig=(c,r,n={})=>{var i;const o=(i=n.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(r).reduce((u,m)=>(u[m]=Ov(m,c,r,o),u),{})},Ov=(c,r,n,i)=>{const o=r.find(f=>f.name===c),u=o?.type,m=n[c];return u&&!i.includes(u)?n0(u,m):wd(m)},n0=(c,r)=>{if(c.charAt(0)==="_"){const n=c.slice(1,c.length);return Mv(r,n)}switch(c){case Je.bool:return Av(r);case Je.float4:case Je.float8:case Je.int2:case Je.int4:case Je.int8:case Je.numeric:case Je.oid:return Dv(r);case Je.json:case Je.jsonb:return Uv(r);case Je.timestamp:return Rv(r);case Je.abstime:case Je.date:case Je.daterange:case Je.int4range:case Je.int8range:case Je.money:case Je.reltime:case Je.text:case Je.time:case Je.timestamptz:case Je.timetz:case Je.tsrange:case Je.tstzrange:return wd(r);default:return wd(r)}},wd=c=>c,Av=c=>{switch(c){case"t":return!0;case"f":return!1;default:return c}},Dv=c=>{if(typeof c=="string"){const r=parseFloat(c);if(!Number.isNaN(r))return r}return c},Uv=c=>{if(typeof c=="string")try{return JSON.parse(c)}catch(r){return console.log(`JSON parse error: ${r}`),c}return c},Mv=(c,r)=>{if(typeof c!="string")return c;const n=c.length-1,i=c[n];if(c[0]==="{"&&i==="}"){let u;const m=c.slice(1,n);try{u=JSON.parse("["+m+"]")}catch{u=m?m.split(","):[]}return u.map(f=>n0(r,f))}return c},Rv=c=>typeof c=="string"?c.replace(" ","T"):c,l0=c=>{let r=c;return r=r.replace(/^ws/i,"http"),r=r.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),r.replace(/\/+$/,"")};class id{constructor(r,n,i={},o=a0){this.channel=r,this.event=n,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,n){var i;return this._hasReceived(r)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:r,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:n}){this.recHooks.filter(i=>i.status===r).forEach(i=>i.callback(n))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var og;(function(c){c.SYNC="sync",c.JOIN="join",c.LEAVE="leave"})(og||(og={}));class cl{constructor(r,n){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:u,onLeave:m,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=cl.syncState(this.state,o,u,m),this.pendingDiffs.forEach(g=>{this.state=cl.syncDiff(this.state,g,u,m)}),this.pendingDiffs=[],f()}),this.channel._on(i.diff,{},o=>{const{onJoin:u,onLeave:m,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=cl.syncDiff(this.state,o,u,m),f())}),this.onJoin((o,u,m)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:u,newPresences:m})}),this.onLeave((o,u,m)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:u,leftPresences:m})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,n,i,o){const u=this.cloneDeep(r),m=this.transformState(n),f={},g={};return this.map(u,(x,y)=>{m[x]||(g[x]=y)}),this.map(m,(x,y)=>{const j=u[x];if(j){const k=y.map(_=>_.presence_ref),b=j.map(_=>_.presence_ref),S=y.filter(_=>b.indexOf(_.presence_ref)<0),w=j.filter(_=>k.indexOf(_.presence_ref)<0);S.length>0&&(f[x]=S),w.length>0&&(g[x]=w)}else f[x]=y}),this.syncDiff(u,{joins:f,leaves:g},i,o)}static syncDiff(r,n,i,o){const{joins:u,leaves:m}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(u,(f,g)=>{var x;const y=(x=r[f])!==null&&x!==void 0?x:[];if(r[f]=this.cloneDeep(g),y.length>0){const j=r[f].map(b=>b.presence_ref),k=y.filter(b=>j.indexOf(b.presence_ref)<0);r[f].unshift(...k)}i(f,y,g)}),this.map(m,(f,g)=>{let x=r[f];if(!x)return;const y=g.map(j=>j.presence_ref);x=x.filter(j=>y.indexOf(j.presence_ref)<0),r[f]=x,o(f,x,g),x.length===0&&delete r[f]}),r}static map(r,n){return Object.getOwnPropertyNames(r).map(i=>n(i,r[i]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((n,i)=>{const o=r[i];return"metas"in o?n[i]=o.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):n[i]=o,n},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var cg;(function(c){c.ALL="*",c.INSERT="INSERT",c.UPDATE="UPDATE",c.DELETE="DELETE"})(cg||(cg={}));var dg;(function(c){c.BROADCAST="broadcast",c.PRESENCE="presence",c.POSTGRES_CHANGES="postgres_changes",c.SYSTEM="system"})(dg||(dg={}));var qs;(function(c){c.SUBSCRIBED="SUBSCRIBED",c.TIMED_OUT="TIMED_OUT",c.CLOSED="CLOSED",c.CHANNEL_ERROR="CHANNEL_ERROR"})(qs||(qs={}));class $d{constructor(r,n={config:{}},i){this.topic=r,this.params=n,this.socket=i,this.bindings={},this.state=Et.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new id(this,ds.join,this.params,this.timeout),this.rejoinTimer=new r0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Et.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Et.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Et.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ds.reply,{},(o,u)=>{this._trigger(this._replyEventName(u),o)}),this.presence=new cl(this),this.broadcastEndpointURL=l0(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(r,n=this.timeout){var i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Et.closed){const{config:{broadcast:u,presence:m,private:f}}=this.params;this._onError(y=>r?.(qs.CHANNEL_ERROR,y)),this._onClose(()=>r?.(qs.CLOSED));const g={},x={broadcast:u,presence:m,postgres_changes:(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(y=>y.filter))!==null&&o!==void 0?o:[],private:f};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:x},g)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:y})=>{var j;if(this.socket.setAuth(),y===void 0){r?.(qs.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,b=(j=k?.length)!==null&&j!==void 0?j:0,S=[];for(let w=0;w<b;w++){const _=k[w],{filter:{event:O,schema:P,table:D,filter:z}}=_,U=y&&y[w];if(U&&U.event===O&&U.schema===P&&U.table===D&&U.filter===z)S.push(Object.assign(Object.assign({},_),{id:U.id}));else{this.unsubscribe(),this.state=Et.errored,r?.(qs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,r&&r(qs.SUBSCRIBED);return}}).receive("error",y=>{this.state=Et.errored,r?.(qs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{r?.(qs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,n={}){return await this.send({type:"presence",event:"track",payload:r},n.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,n,i){return this._on(r,n,i)}async send(r,n={}){var i,o;if(!this._canPush()&&r.type==="broadcast"){const{event:u,payload:m}=r,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:m,private:this.private}]})};try{const x=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=x.body)===null||o===void 0?void 0:o.cancel()),x.ok?"ok":"error"}catch(x){return x.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var m,f,g;const x=this._push(r.type,r,n.timeout||this.timeout);r.type==="broadcast"&&!(!((g=(f=(m=this.params)===null||m===void 0?void 0:m.config)===null||f===void 0?void 0:f.broadcast)===null||g===void 0)&&g.ack)&&u("ok"),x.receive("ok",()=>u("ok")),x.receive("error",()=>u("error")),x.receive("timeout",()=>u("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=Et.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ds.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new id(this,ds.leave,{},r),i.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(r,n,i){const o=new AbortController,u=setTimeout(()=>o.abort(),i),m=await this.socket.fetch(r,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(u),m}_push(r,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new id(this,r,n,i);return this._canPush()?o.send():(o.startTimeout(),this.pushBuffer.push(o)),o}_onMessage(r,n,i){return n}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,n,i){var o,u;const m=r.toLocaleLowerCase(),{close:f,error:g,leave:x,join:y}=ds;if(i&&[f,g,x,y].indexOf(m)>=0&&i!==this._joinRef())return;let k=this._onMessage(m,n,i);if(n&&!k)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(m)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(b=>{var S,w,_;return((S=b.filter)===null||S===void 0?void 0:S.event)==="*"||((_=(w=b.filter)===null||w===void 0?void 0:w.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===m}).map(b=>b.callback(k,i)):(u=this.bindings[m])===null||u===void 0||u.filter(b=>{var S,w,_,O,P,D;if(["broadcast","presence","postgres_changes"].includes(m))if("id"in b){const z=b.id,U=(S=b.filter)===null||S===void 0?void 0:S.event;return z&&((w=n.ids)===null||w===void 0?void 0:w.includes(z))&&(U==="*"||U?.toLocaleLowerCase()===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const z=(P=(O=b?.filter)===null||O===void 0?void 0:O.event)===null||P===void 0?void 0:P.toLocaleLowerCase();return z==="*"||z===((D=n?.event)===null||D===void 0?void 0:D.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===m}).map(b=>{if(typeof k=="object"&&"ids"in k){const S=k.data,{schema:w,table:_,commit_timestamp:O,type:P,errors:D}=S;k=Object.assign(Object.assign({},{schema:w,table:_,commit_timestamp:O,eventType:P,new:{},old:{},errors:D}),this._getPayloadRecords(S))}b.callback(k,i)})}_isClosed(){return this.state===Et.closed}_isJoined(){return this.state===Et.joined}_isJoining(){return this.state===Et.joining}_isLeaving(){return this.state===Et.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,n,i){const o=r.toLocaleLowerCase(),u={type:o,filter:n,callback:i};return this.bindings[o]?this.bindings[o].push(u):this.bindings[o]=[u],this}_off(r,n){const i=r.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(o=>{var u;return!(((u=o.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===i&&$d.isEqual(o.filter,n))}),this}static isEqual(r,n){if(Object.keys(r).length!==Object.keys(n).length)return!1;for(const i in r)if(r[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(ds.close,{},r)}_onError(r){this._on(ds.error,{},n=>r(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Et.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const n={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(n.new=ig(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(n.old=ig(r.columns,r.old_record)),n}}const ug=()=>{},zv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Lv{constructor(r,n){var i;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=a0,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ug,this.ref=0,this.logger=ug,this.conn=null,this.sendBuffer=[],this.serializer=new Cv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=u=>{let m;return u?m=u:typeof fetch>"u"?m=(...f)=>rt(async()=>{const{default:g}=await Promise.resolve().then(()=>sn);return{default:g}},void 0).then(({default:g})=>g(...f)):m=fetch,(...f)=>m(...f)},this.endPoint=`${r}/${jd.websocket}`,this.httpEndpoint=l0(r),n?.transport?this.transport=n.transport:this.transport=null,n?.params&&(this.params=n.params),n?.timeout&&(this.timeout=n.timeout),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const o=(i=n?.params)===null||i===void 0?void 0:i.apikey;if(o&&(this.accessTokenValue=o,this.apiKey=o),this.reconnectAfterMs=n?.reconnectAfterMs?n.reconnectAfterMs:u=>[1e3,2e3,5e3,1e4][u-1]||1e4,this.encode=n?.encode?n.encode:(u,m)=>m(JSON.stringify(u)),this.decode=n?.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new r0(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n?.fetch),n?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=n?.worker||!1,this.workerUrl=n?.workerUrl}this.accessToken=n?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=Sv),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:kv}))}disconnect(r,n){this.conn&&(this.conn.onclose=function(){},r?this.conn.close(r,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(i=>i.teardown()))}getChannels(){return this.channels}async removeChannel(r){const n=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const r=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,n,i){this.logger(r,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case ol.connecting:return Qa.Connecting;case ol.open:return Qa.Open;case ol.closing:return Qa.Closing;default:return Qa.Closed}}isConnected(){return this.connectionState()===Qa.Open}channel(r,n={config:{}}){const i=`realtime:${r}`,o=this.getChannels().find(u=>u.topic===i);if(o)return o;{const u=new $d(`realtime:${r}`,n,this);return this.channels.push(u),u}}push(r){const{topic:n,event:i,payload:o,ref:u}=r,m=()=>{this.encode(r,f=>{var g;(g=this.conn)===null||g===void 0||g.send(f)})};this.log("push",`${n} ${i} (${u})`,o),this.isConnected()?m():this.sendBuffer.push(m)}async setAuth(r=null){let n=r||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const o={access_token:n,version:Ev};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(ds.access_token,{access_token:n})}))}async sendHeartbeat(){var r;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(r=this.conn)===null||r===void 0||r.close(Tv,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let n=this.channels.find(i=>i.topic===r&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${r}"`),n.unsubscribe())}_remove(r){this.channels=this.channels.filter(n=>n.topic!==r.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r))}_onConnMessage(r){this.decode(r.data,n=>{let{topic:i,event:o,payload:u,ref:m}=n;i==="phoenix"&&o==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),m&&m===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${u.status||""} ${i} ${o} ${m&&"("+m+")"||""}`,u),Array.from(this.channels).filter(f=>f._isMember(i)).forEach(f=>f._trigger(o,u,m)),this.stateChangeCallbacks.message.forEach(f=>f(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(r=>r())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(r){this.log("transport","close",r),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(r))}_onConnError(r){this.log("transport",`${r}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(r))}_triggerChanError(){this.channels.forEach(r=>r._trigger(ds.error))}_appendParams(r,n){if(Object.keys(n).length===0)return r;const i=r.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${r}${i}${o}`}_workerObjectUrl(r){let n;if(r)n=r;else{const i=new Blob([zv],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}}class Pd extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}}function vt(c){return typeof c=="object"&&c!==null&&"__isStorageError"in c}class qv extends Pd{constructor(r,n){super(r),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Nd extends Pd{constructor(r,n){super(r),this.name="StorageUnknownError",this.originalError=n}}var Bv=function(c,r,n,i){function o(u){return u instanceof n?u:new n(function(m){m(u)})}return new(n||(n=Promise))(function(u,m){function f(y){try{x(i.next(y))}catch(j){m(j)}}function g(y){try{x(i.throw(y))}catch(j){m(j)}}function x(y){y.done?u(y.value):o(y.value).then(f,g)}x((i=i.apply(c,r||[])).next())})};const i0=c=>{let r;return c?r=c:typeof fetch>"u"?r=(...n)=>rt(async()=>{const{default:i}=await Promise.resolve().then(()=>sn);return{default:i}},void 0).then(({default:i})=>i(...n)):r=fetch,(...n)=>r(...n)},$v=()=>Bv(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield rt(()=>Promise.resolve().then(()=>sn),void 0)).Response:Response}),Sd=c=>{if(Array.isArray(c))return c.map(n=>Sd(n));if(typeof c=="function"||c!==Object(c))return c;const r={};return Object.entries(c).forEach(([n,i])=>{const o=n.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));r[o]=Sd(i)}),r};var Za=function(c,r,n,i){function o(u){return u instanceof n?u:new n(function(m){m(u)})}return new(n||(n=Promise))(function(u,m){function f(y){try{x(i.next(y))}catch(j){m(j)}}function g(y){try{x(i.throw(y))}catch(j){m(j)}}function x(y){y.done?u(y.value):o(y.value).then(f,g)}x((i=i.apply(c,r||[])).next())})};const od=c=>c.msg||c.message||c.error_description||c.error||JSON.stringify(c),Pv=(c,r,n)=>Za(void 0,void 0,void 0,function*(){const i=yield $v();c instanceof i&&!n?.noResolveJson?c.json().then(o=>{r(new qv(od(o),c.status||500))}).catch(o=>{r(new Nd(od(o),o))}):r(new Nd(od(c),c))}),Iv=(c,r,n,i)=>{const o={method:c,headers:r?.headers||{}};return c==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json"},r?.headers),i&&(o.body=JSON.stringify(i)),Object.assign(Object.assign({},o),n))};function ml(c,r,n,i,o,u){return Za(this,void 0,void 0,function*(){return new Promise((m,f)=>{c(n,Iv(r,i,o,u)).then(g=>{if(!g.ok)throw g;return i?.noResolveJson?g:g.json()}).then(g=>m(g)).catch(g=>Pv(g,f,i))})})}function Ri(c,r,n,i){return Za(this,void 0,void 0,function*(){return ml(c,"GET",r,n,i)})}function fa(c,r,n,i,o){return Za(this,void 0,void 0,function*(){return ml(c,"POST",r,i,o,n)})}function Hv(c,r,n,i,o){return Za(this,void 0,void 0,function*(){return ml(c,"PUT",r,i,o,n)})}function Gv(c,r,n,i){return Za(this,void 0,void 0,function*(){return ml(c,"HEAD",r,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function o0(c,r,n,i,o){return Za(this,void 0,void 0,function*(){return ml(c,"DELETE",r,i,o,n)})}var Rt=function(c,r,n,i){function o(u){return u instanceof n?u:new n(function(m){m(u)})}return new(n||(n=Promise))(function(u,m){function f(y){try{x(i.next(y))}catch(j){m(j)}}function g(y){try{x(i.throw(y))}catch(j){m(j)}}function x(y){y.done?u(y.value):o(y.value).then(f,g)}x((i=i.apply(c,r||[])).next())})};const Vv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},hg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Yv{constructor(r,n={},i,o){this.url=r,this.headers=n,this.bucketId=i,this.fetch=i0(o)}uploadOrUpdate(r,n,i,o){return Rt(this,void 0,void 0,function*(){try{let u;const m=Object.assign(Object.assign({},hg),o);let f=Object.assign(Object.assign({},this.headers),r==="POST"&&{"x-upsert":String(m.upsert)});const g=m.metadata;typeof Blob<"u"&&i instanceof Blob?(u=new FormData,u.append("cacheControl",m.cacheControl),g&&u.append("metadata",this.encodeMetadata(g)),u.append("",i)):typeof FormData<"u"&&i instanceof FormData?(u=i,u.append("cacheControl",m.cacheControl),g&&u.append("metadata",this.encodeMetadata(g))):(u=i,f["cache-control"]=`max-age=${m.cacheControl}`,f["content-type"]=m.contentType,g&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(g)))),o?.headers&&(f=Object.assign(Object.assign({},f),o.headers));const x=this._removeEmptyFolders(n),y=this._getFinalPath(x),j=yield this.fetch(`${this.url}/object/${y}`,Object.assign({method:r,body:u,headers:f},m?.duplex?{duplex:m.duplex}:{})),k=yield j.json();return j.ok?{data:{path:x,id:k.Id,fullPath:k.Key},error:null}:{data:null,error:k}}catch(u){if(vt(u))return{data:null,error:u};throw u}})}upload(r,n,i){return Rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",r,n,i)})}uploadToSignedUrl(r,n,i,o){return Rt(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(r),m=this._getFinalPath(u),f=new URL(this.url+`/object/upload/sign/${m}`);f.searchParams.set("token",n);try{let g;const x=Object.assign({upsert:hg.upsert},o),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(x.upsert)});typeof Blob<"u"&&i instanceof Blob?(g=new FormData,g.append("cacheControl",x.cacheControl),g.append("",i)):typeof FormData<"u"&&i instanceof FormData?(g=i,g.append("cacheControl",x.cacheControl)):(g=i,y["cache-control"]=`max-age=${x.cacheControl}`,y["content-type"]=x.contentType);const j=yield this.fetch(f.toString(),{method:"PUT",body:g,headers:y}),k=yield j.json();return j.ok?{data:{path:u,fullPath:k.Key},error:null}:{data:null,error:k}}catch(g){if(vt(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(r,n){return Rt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(r);const o=Object.assign({},this.headers);n?.upsert&&(o["x-upsert"]="true");const u=yield fa(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:o}),m=new URL(this.url+u.url),f=m.searchParams.get("token");if(!f)throw new Pd("No token returned by API");return{data:{signedUrl:m.toString(),path:r,token:f},error:null}}catch(i){if(vt(i))return{data:null,error:i};throw i}})}update(r,n,i){return Rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",r,n,i)})}move(r,n,i){return Rt(this,void 0,void 0,function*(){try{return{data:yield fa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:r,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(vt(o))return{data:null,error:o};throw o}})}copy(r,n,i){return Rt(this,void 0,void 0,function*(){try{return{data:{path:(yield fa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:r,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(vt(o))return{data:null,error:o};throw o}})}createSignedUrl(r,n,i){return Rt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(r),u=yield fa(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const m=i?.download?`&download=${i.download===!0?"":i.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${m}`)},{data:u,error:null}}catch(o){if(vt(o))return{data:null,error:o};throw o}})}createSignedUrls(r,n,i){return Rt(this,void 0,void 0,function*(){try{const o=yield fa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:r},{headers:this.headers}),u=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:o.map(m=>Object.assign(Object.assign({},m),{signedUrl:m.signedURL?encodeURI(`${this.url}${m.signedURL}${u}`):null})),error:null}}catch(o){if(vt(o))return{data:null,error:o};throw o}})}download(r,n){return Rt(this,void 0,void 0,function*(){const o=typeof n?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(n?.transform||{}),m=u?`?${u}`:"";try{const f=this._getFinalPath(r);return{data:yield(yield Ri(this.fetch,`${this.url}/${o}/${f}${m}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(f){if(vt(f))return{data:null,error:f};throw f}})}info(r){return Rt(this,void 0,void 0,function*(){const n=this._getFinalPath(r);try{const i=yield Ri(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Sd(i),error:null}}catch(i){if(vt(i))return{data:null,error:i};throw i}})}exists(r){return Rt(this,void 0,void 0,function*(){const n=this._getFinalPath(r);try{return yield Gv(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(vt(i)&&i instanceof Nd){const o=i.originalError;if([400,404].includes(o?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(r,n){const i=this._getFinalPath(r),o=[],u=n?.download?`download=${n.download===!0?"":n.download}`:"";u!==""&&o.push(u);const f=typeof n?.transform<"u"?"render/image":"object",g=this.transformOptsToQueryString(n?.transform||{});g!==""&&o.push(g);let x=o.join("&");return x!==""&&(x=`?${x}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${i}${x}`)}}}remove(r){return Rt(this,void 0,void 0,function*(){try{return{data:yield o0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:r},{headers:this.headers}),error:null}}catch(n){if(vt(n))return{data:null,error:n};throw n}})}list(r,n,i){return Rt(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},Vv),n),{prefix:r||""});return{data:yield fa(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(vt(o))return{data:null,error:o};throw o}})}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const n=[];return r.width&&n.push(`width=${r.width}`),r.height&&n.push(`height=${r.height}`),r.resize&&n.push(`resize=${r.resize}`),r.format&&n.push(`format=${r.format}`),r.quality&&n.push(`quality=${r.quality}`),n.join("&")}}const Qv="2.7.1",Xv={"X-Client-Info":`storage-js/${Qv}`};var Gr=function(c,r,n,i){function o(u){return u instanceof n?u:new n(function(m){m(u)})}return new(n||(n=Promise))(function(u,m){function f(y){try{x(i.next(y))}catch(j){m(j)}}function g(y){try{x(i.throw(y))}catch(j){m(j)}}function x(y){y.done?u(y.value):o(y.value).then(f,g)}x((i=i.apply(c,r||[])).next())})};class Kv{constructor(r,n={},i){this.url=r,this.headers=Object.assign(Object.assign({},Xv),n),this.fetch=i0(i)}listBuckets(){return Gr(this,void 0,void 0,function*(){try{return{data:yield Ri(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(r){if(vt(r))return{data:null,error:r};throw r}})}getBucket(r){return Gr(this,void 0,void 0,function*(){try{return{data:yield Ri(this.fetch,`${this.url}/bucket/${r}`,{headers:this.headers}),error:null}}catch(n){if(vt(n))return{data:null,error:n};throw n}})}createBucket(r,n={public:!1}){return Gr(this,void 0,void 0,function*(){try{return{data:yield fa(this.fetch,`${this.url}/bucket`,{id:r,name:r,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(vt(i))return{data:null,error:i};throw i}})}updateBucket(r,n){return Gr(this,void 0,void 0,function*(){try{return{data:yield Hv(this.fetch,`${this.url}/bucket/${r}`,{id:r,name:r,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(vt(i))return{data:null,error:i};throw i}})}emptyBucket(r){return Gr(this,void 0,void 0,function*(){try{return{data:yield fa(this.fetch,`${this.url}/bucket/${r}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(vt(n))return{data:null,error:n};throw n}})}deleteBucket(r){return Gr(this,void 0,void 0,function*(){try{return{data:yield o0(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(n){if(vt(n))return{data:null,error:n};throw n}})}}class Jv extends Kv{constructor(r,n={},i){super(r,n,i)}from(r){return new Yv(this.url,this.headers,r,this.fetch)}}const Zv="2.52.1";let ll="";typeof Deno<"u"?ll="deno":typeof document<"u"?ll="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ll="react-native":ll="node";const Fv={"X-Client-Info":`supabase-js-${ll}/${Zv}`},Wv={headers:Fv},eb={schema:"public"},tb={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},sb={};var ab=function(c,r,n,i){function o(u){return u instanceof n?u:new n(function(m){m(u)})}return new(n||(n=Promise))(function(u,m){function f(y){try{x(i.next(y))}catch(j){m(j)}}function g(y){try{x(i.throw(y))}catch(j){m(j)}}function x(y){y.done?u(y.value):o(y.value).then(f,g)}x((i=i.apply(c,r||[])).next())})};const rb=c=>{let r;return c?r=c:typeof fetch>"u"?r=Zg:r=fetch,(...n)=>r(...n)},nb=()=>typeof Headers>"u"?Fg:Headers,lb=(c,r,n)=>{const i=rb(n),o=nb();return(u,m)=>ab(void 0,void 0,void 0,function*(){var f;const g=(f=yield r())!==null&&f!==void 0?f:c;let x=new o(m?.headers);return x.has("apikey")||x.set("apikey",c),x.has("Authorization")||x.set("Authorization",`Bearer ${g}`),i(u,Object.assign(Object.assign({},m),{headers:x}))})};var ib=function(c,r,n,i){function o(u){return u instanceof n?u:new n(function(m){m(u)})}return new(n||(n=Promise))(function(u,m){function f(y){try{x(i.next(y))}catch(j){m(j)}}function g(y){try{x(i.throw(y))}catch(j){m(j)}}function x(y){y.done?u(y.value):o(y.value).then(f,g)}x((i=i.apply(c,r||[])).next())})};function ob(c){return c.endsWith("/")?c:c+"/"}function cb(c,r){var n,i;const{db:o,auth:u,realtime:m,global:f}=c,{db:g,auth:x,realtime:y,global:j}=r,k={db:Object.assign(Object.assign({},g),o),auth:Object.assign(Object.assign({},x),u),realtime:Object.assign(Object.assign({},y),m),global:Object.assign(Object.assign(Object.assign({},j),f),{headers:Object.assign(Object.assign({},(n=j?.headers)!==null&&n!==void 0?n:{}),(i=f?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>ib(this,void 0,void 0,function*(){return""})};return c.accessToken?k.accessToken=c.accessToken:delete k.accessToken,k}const c0="2.71.1",Kr=30*1e3,_d=3,cd=_d*Kr,db="http://localhost:9999",ub="supabase.auth.token",hb={"X-Client-Info":`gotrue-js/${c0}`},Ed="X-Supabase-Api-Version",d0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},mb=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,fb=600*1e3;class Id extends Error{constructor(r,n,i){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function Ee(c){return typeof c=="object"&&c!==null&&"__isAuthError"in c}class gb extends Id{constructor(r,n,i){super(r,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function xb(c){return Ee(c)&&c.name==="AuthApiError"}class u0 extends Id{constructor(r,n){super(r),this.name="AuthUnknownError",this.originalError=n}}class ja extends Id{constructor(r,n,i,o){super(r,i,o),this.name=n,this.status=i}}class ma extends ja{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function pb(c){return Ee(c)&&c.name==="AuthSessionMissingError"}class ki extends ja{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ti extends ja{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class Ci extends ja{constructor(r,n=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function yb(c){return Ee(c)&&c.name==="AuthImplicitGrantRedirectError"}class mg extends ja{constructor(r,n=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class kd extends ja{constructor(r,n){super(r,"AuthRetryableFetchError",n,void 0)}}function dd(c){return Ee(c)&&c.name==="AuthRetryableFetchError"}class fg extends ja{constructor(r,n,i){super(r,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class Td extends ja{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const zi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),gg=` 	
\r=`.split(""),vb=(()=>{const c=new Array(128);for(let r=0;r<c.length;r+=1)c[r]=-1;for(let r=0;r<gg.length;r+=1)c[gg[r].charCodeAt(0)]=-2;for(let r=0;r<zi.length;r+=1)c[zi[r].charCodeAt(0)]=r;return c})();function xg(c,r,n){if(c!==null)for(r.queue=r.queue<<8|c,r.queuedBits+=8;r.queuedBits>=6;){const i=r.queue>>r.queuedBits-6&63;n(zi[i]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const i=r.queue>>r.queuedBits-6&63;n(zi[i]),r.queuedBits-=6}}function h0(c,r,n){const i=vb[c];if(i>-1)for(r.queue=r.queue<<6|i,r.queuedBits+=6;r.queuedBits>=8;)n(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(c)}"`)}}function pg(c){const r=[],n=m=>{r.push(String.fromCodePoint(m))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},u=m=>{wb(m,i,n)};for(let m=0;m<c.length;m+=1)h0(c.charCodeAt(m),o,u);return r.join("")}function bb(c,r){if(c<=127){r(c);return}else if(c<=2047){r(192|c>>6),r(128|c&63);return}else if(c<=65535){r(224|c>>12),r(128|c>>6&63),r(128|c&63);return}else if(c<=1114111){r(240|c>>18),r(128|c>>12&63),r(128|c>>6&63),r(128|c&63);return}throw new Error(`Unrecognized Unicode codepoint: ${c.toString(16)}`)}function jb(c,r){for(let n=0;n<c.length;n+=1){let i=c.charCodeAt(n);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(c.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}bb(i,r)}}function wb(c,r,n){if(r.utf8seq===0){if(c<=127){n(c);return}for(let i=1;i<6;i+=1)if((c>>7-i&1)===0){r.utf8seq=i;break}if(r.utf8seq===2)r.codepoint=c&31;else if(r.utf8seq===3)r.codepoint=c&15;else if(r.utf8seq===4)r.codepoint=c&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(c<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|c&63,r.utf8seq-=1,r.utf8seq===0&&n(r.codepoint)}}function Nb(c){const r=[],n={queue:0,queuedBits:0},i=o=>{r.push(o)};for(let o=0;o<c.length;o+=1)h0(c.charCodeAt(o),n,i);return new Uint8Array(r)}function Sb(c){const r=[];return jb(c,n=>r.push(n)),new Uint8Array(r)}function _b(c){const r=[],n={queue:0,queuedBits:0},i=o=>{r.push(o)};return c.forEach(o=>xg(o,n,i)),xg(null,n,i),r.join("")}function Eb(c){return Math.round(Date.now()/1e3)+c}function kb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){const r=Math.random()*16|0;return(c=="x"?r:r&3|8).toString(16)})}const cs=()=>typeof window<"u"&&typeof document<"u",Ha={tested:!1,writable:!1},m0=()=>{if(!cs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ha.tested)return Ha.writable;const c=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(c,c),globalThis.localStorage.removeItem(c),Ha.tested=!0,Ha.writable=!0}catch{Ha.tested=!0,Ha.writable=!1}return Ha.writable};function Tb(c){const r={},n=new URL(c);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,u)=>{r[u]=o})}catch{}return n.searchParams.forEach((i,o)=>{r[o]=i}),r}const f0=c=>{let r;return c?r=c:typeof fetch>"u"?r=(...n)=>rt(async()=>{const{default:i}=await Promise.resolve().then(()=>sn);return{default:i}},void 0).then(({default:i})=>i(...n)):r=fetch,(...n)=>r(...n)},Cb=c=>typeof c=="object"&&c!==null&&"status"in c&&"ok"in c&&"json"in c&&typeof c.json=="function",Jr=async(c,r,n)=>{await c.setItem(r,JSON.stringify(n))},Ga=async(c,r)=>{const n=await c.getItem(r);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ha=async(c,r)=>{await c.removeItem(r)};class $i{constructor(){this.promise=new $i.promiseConstructor((r,n)=>{this.resolve=r,this.reject=n})}}$i.promiseConstructor=Promise;function ud(c){const r=c.split(".");if(r.length!==3)throw new Td("Invalid JWT structure");for(let i=0;i<r.length;i++)if(!mb.test(r[i]))throw new Td("JWT not in base64url format");return{header:JSON.parse(pg(r[0])),payload:JSON.parse(pg(r[1])),signature:Nb(r[2]),raw:{header:r[0],payload:r[1]}}}async function Ob(c){return await new Promise(r=>{setTimeout(()=>r(null),c)})}function Ab(c,r){return new Promise((i,o)=>{(async()=>{for(let u=0;u<1/0;u++)try{const m=await c(u);if(!r(u,null,m)){i(m);return}}catch(m){if(!r(u,m)){o(m);return}}})()})}function Db(c){return("0"+c.toString(16)).substr(-2)}function Ub(){const r=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let o="";for(let u=0;u<56;u++)o+=n.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(r),Array.from(r,Db).join("")}async function Mb(c){const n=new TextEncoder().encode(c),i=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(i);return Array.from(o).map(u=>String.fromCharCode(u)).join("")}async function Rb(c){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),c;const n=await Mb(c);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Vr(c,r,n=!1){const i=Ub();let o=i;n&&(o+="/PASSWORD_RECOVERY"),await Jr(c,`${r}-code-verifier`,o);const u=await Rb(i);return[u,i===u?"plain":"s256"]}const zb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Lb(c){const r=c.headers.get(Ed);if(!r||!r.match(zb))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function qb(c){if(!c)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(c<=r)throw new Error("JWT has expired")}function Bb(c){switch(c){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const $b=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Yr(c){if(!$b.test(c))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function hd(){const c={};return new Proxy(c,{get:(r,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function yg(c){return JSON.parse(JSON.stringify(c))}var Pb=function(c,r){var n={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&r.indexOf(i)<0&&(n[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(c);o<i.length;o++)r.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(c,i[o])&&(n[i[o]]=c[i[o]]);return n};const Ya=c=>c.msg||c.message||c.error_description||c.error||JSON.stringify(c),Ib=[502,503,504];async function vg(c){var r;if(!Cb(c))throw new kd(Ya(c),0);if(Ib.includes(c.status))throw new kd(Ya(c),c.status);let n;try{n=await c.json()}catch(u){throw new u0(Ya(u),u)}let i;const o=Lb(c);if(o&&o.getTime()>=d0["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new fg(Ya(n),c.status,((r=n.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(i==="session_not_found")throw new ma}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((u,m)=>u&&typeof m=="string",!0))throw new fg(Ya(n),c.status,n.weak_password.reasons);throw new gb(Ya(n),c.status||500,i)}const Hb=(c,r,n,i)=>{const o={method:c,headers:r?.headers||{}};return c==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),n))};async function Ue(c,r,n,i){var o;const u=Object.assign({},i?.headers);u[Ed]||(u[Ed]=d0["2024-01-01"].name),i?.jwt&&(u.Authorization=`Bearer ${i.jwt}`);const m=(o=i?.query)!==null&&o!==void 0?o:{};i?.redirectTo&&(m.redirect_to=i.redirectTo);const f=Object.keys(m).length?"?"+new URLSearchParams(m).toString():"",g=await Gb(c,r,n+f,{headers:u,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(g):{data:Object.assign({},g),error:null}}async function Gb(c,r,n,i,o,u){const m=Hb(r,i,o,u);let f;try{f=await c(n,Object.assign({},m))}catch(g){throw console.error(g),new kd(Ya(g),0)}if(f.ok||await vg(f),i?.noResolveJson)return f;try{return await f.json()}catch(g){await vg(g)}}function Ls(c){var r;let n=null;Xb(c)&&(n=Object.assign({},c),c.expires_at||(n.expires_at=Eb(c.expires_in)));const i=(r=c.user)!==null&&r!==void 0?r:c;return{data:{session:n,user:i},error:null}}function bg(c){const r=Ls(c);return!r.error&&c.weak_password&&typeof c.weak_password=="object"&&Array.isArray(c.weak_password.reasons)&&c.weak_password.reasons.length&&c.weak_password.message&&typeof c.weak_password.message=="string"&&c.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(r.data.weak_password=c.weak_password),r}function ga(c){var r;return{data:{user:(r=c.user)!==null&&r!==void 0?r:c},error:null}}function Vb(c){return{data:c,error:null}}function Yb(c){const{action_link:r,email_otp:n,hashed_token:i,redirect_to:o,verification_type:u}=c,m=Pb(c,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:r,email_otp:n,hashed_token:i,redirect_to:o,verification_type:u},g=Object.assign({},m);return{data:{properties:f,user:g},error:null}}function Qb(c){return c}function Xb(c){return c.access_token&&c.refresh_token&&c.expires_in}const md=["global","local","others"];var Kb=function(c,r){var n={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&r.indexOf(i)<0&&(n[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(c);o<i.length;o++)r.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(c,i[o])&&(n[i[o]]=c[i[o]]);return n};class Jb{constructor({url:r="",headers:n={},fetch:i}){this.url=r,this.headers=n,this.fetch=f0(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(r,n=md[0]){if(md.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${md.join(", ")}`);try{return await Ue(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Ee(i))return{data:null,error:i};throw i}}async inviteUserByEmail(r,n={}){try{return await Ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ga})}catch(i){if(Ee(i))return{data:{user:null},error:i};throw i}}async generateLink(r){try{const{options:n}=r,i=Kb(r,["options"]),o=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(o.new_email=i?.newEmail,delete o.newEmail),await Ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:Yb,redirectTo:n?.redirectTo})}catch(n){if(Ee(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(r){try{return await Ue(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:ga})}catch(n){if(Ee(n))return{data:{user:null},error:n};throw n}}async listUsers(r){var n,i,o,u,m,f,g;try{const x={nextPage:null,lastPage:0,total:0},y=await Ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=r?.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(u=(o=r?.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:Qb});if(y.error)throw y.error;const j=await y.json(),k=(m=y.headers.get("x-total-count"))!==null&&m!==void 0?m:0,b=(g=(f=y.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&g!==void 0?g:[];return b.length>0&&(b.forEach(S=>{const w=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(S.split(";")[1].split("=")[1]);x[`${_}Page`]=w}),x.total=parseInt(k)),{data:Object.assign(Object.assign({},j),x),error:null}}catch(x){if(Ee(x))return{data:{users:[]},error:x};throw x}}async getUserById(r){Yr(r);try{return await Ue(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:ga})}catch(n){if(Ee(n))return{data:{user:null},error:n};throw n}}async updateUserById(r,n){Yr(r);try{return await Ue(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:n,headers:this.headers,xform:ga})}catch(i){if(Ee(i))return{data:{user:null},error:i};throw i}}async deleteUser(r,n=!1){Yr(r);try{return await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:n},xform:ga})}catch(i){if(Ee(i))return{data:{user:null},error:i};throw i}}async _listFactors(r){Yr(r.userId);try{const{data:n,error:i}=await Ue(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:i}}catch(n){if(Ee(n))return{data:null,error:n};throw n}}async _deleteFactor(r){Yr(r.userId),Yr(r.id);try{return{data:await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(n){if(Ee(n))return{data:null,error:n};throw n}}}function jg(c={}){return{getItem:r=>c[r]||null,setItem:(r,n)=>{c[r]=n},removeItem:r=>{delete c[r]}}}function Zb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Qr={debug:!!(globalThis&&m0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class g0 extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class Fb extends g0{}async function Wb(c,r,n){Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",c,r);const i=new globalThis.AbortController;return r>0&&setTimeout(()=>{i.abort(),Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",c)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(c,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",c,o.name);try{return await n()}finally{Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",c,o.name)}}else{if(r===0)throw Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",c),new Fb(`Acquiring an exclusive Navigator LockManager lock "${c}" immediately failed`);if(Qr.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}Zb();const ej={url:db,storageKey:ub,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:hb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function wg(c,r,n){return await n()}const Xr={};class hl{constructor(r){var n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=hl.nextInstanceID,hl.nextInstanceID+=1,this.instanceID>0&&cs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},ej),r);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Jb({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=f0(o.fetch),this.lock=o.lock||wg,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:cs()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=Wb:this.lock=wg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:m0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=jg(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=jg(this.memoryStorage)),cs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}get jwks(){var r,n;return(n=(r=Xr[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(r){Xr[this.storageKey]=Object.assign(Object.assign({},Xr[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,n;return(n=(r=Xr[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){Xr[this.storageKey]=Object.assign(Object.assign({},Xr[this.storageKey]),{cachedAt:r})}_debug(...r){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${c0}) ${new Date().toISOString()}`,...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{const n=Tb(window.location.href);let i="none";if(this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce"),cs()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:u}=await this._getSessionFromURL(n,i);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),yb(u)){const g=(r=u.details)===null||r===void 0?void 0:r.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:m,redirectType:f}=o;return this._debug("#_initialize()","detected session in URL",m,"redirect type",f),await this._saveSession(m),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",m):await this._notifyAllSubscribers("SIGNED_IN",m)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ee(n)?{error:n}:{error:new u0("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var n,i,o;try{const u=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=r?.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=r?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Ls}),{data:m,error:f}=u;if(f||!m)return{data:{user:null,session:null},error:f};const g=m.session,x=m.user;return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:x,session:g},error:null}}catch(u){if(Ee(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(r){var n,i,o;try{let u;if("email"in r){const{email:y,password:j,options:k}=r;let b=null,S=null;this.flowType==="pkce"&&([b,S]=await Vr(this.storage,this.storageKey)),u=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:k?.emailRedirectTo,body:{email:y,password:j,data:(n=k?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:k?.captchaToken},code_challenge:b,code_challenge_method:S},xform:Ls})}else if("phone"in r){const{phone:y,password:j,options:k}=r;u=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:j,data:(i=k?.data)!==null&&i!==void 0?i:{},channel:(o=k?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:k?.captchaToken}},xform:Ls})}else throw new Ti("You must provide either an email or phone number and a password");const{data:m,error:f}=u;if(f||!m)return{data:{user:null,session:null},error:f};const g=m.session,x=m.user;return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:x,session:g},error:null}}catch(u){if(Ee(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(r){try{let n;if("email"in r){const{email:u,password:m,options:f}=r;n=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:m,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:bg})}else if("phone"in r){const{phone:u,password:m,options:f}=r;n=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:m,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:bg})}else throw new Ti("You must provide either an email or phone number and a password");const{data:i,error:o}=n;return o?{data:{user:null,session:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new ki}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(n){if(Ee(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(r){var n,i,o,u;return await this._handleProviderSignIn(r.provider,{redirectTo:(n=r.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=r.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=r.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(u=r.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:n}=r;if(n==="solana")return await this.signInWithSolana(r);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(r){var n,i,o,u,m,f,g,x,y,j,k,b;let S,w;if("message"in r)S=r.message,w=r.signature;else{const{chain:_,wallet:O,statement:P,options:D}=r;let z;if(cs())if(typeof O=="object")z=O;else{const V=window;if("solana"in V&&typeof V.solana=="object"&&("signIn"in V.solana&&typeof V.solana.signIn=="function"||"signMessage"in V.solana&&typeof V.solana.signMessage=="function"))z=V.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof O!="object"||!D?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");z=O}const U=new URL((n=D?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in z&&z.signIn){const V=await z.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},D?.signInWithSolana),{version:"1",domain:U.host,uri:U.href}),P?{statement:P}:null));let H;if(Array.isArray(V)&&V[0]&&typeof V[0]=="object")H=V[0];else if(V&&typeof V=="object"&&"signedMessage"in V&&"signature"in V)H=V;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in H&&"signature"in H&&(typeof H.signedMessage=="string"||H.signedMessage instanceof Uint8Array)&&H.signature instanceof Uint8Array)S=typeof H.signedMessage=="string"?H.signedMessage:new TextDecoder().decode(H.signedMessage),w=H.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in z)||typeof z.signMessage!="function"||!("publicKey"in z)||typeof z!="object"||!z.publicKey||!("toBase58"in z.publicKey)||typeof z.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${U.host} wants you to sign in with your Solana account:`,z.publicKey.toBase58(),...P?["",P,""]:[""],"Version: 1",`URI: ${U.href}`,`Issued At: ${(o=(i=D?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((u=D?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${D.signInWithSolana.notBefore}`]:[],...!((m=D?.signInWithSolana)===null||m===void 0)&&m.expirationTime?[`Expiration Time: ${D.signInWithSolana.expirationTime}`]:[],...!((f=D?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${D.signInWithSolana.chainId}`]:[],...!((g=D?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${D.signInWithSolana.nonce}`]:[],...!((x=D?.signInWithSolana)===null||x===void 0)&&x.requestId?[`Request ID: ${D.signInWithSolana.requestId}`]:[],...!((j=(y=D?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||j===void 0)&&j.length?["Resources",...D.signInWithSolana.resources.map(H=>`- ${H}`)]:[]].join(`
`);const V=await z.signMessage(new TextEncoder().encode(S),"utf8");if(!V||!(V instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=V}}try{const{data:_,error:O}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:_b(w)},!((k=r.options)===null||k===void 0)&&k.captchaToken?{gotrue_meta_security:{captcha_token:(b=r.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Ls});if(O)throw O;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new ki}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:O})}catch(_){if(Ee(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(r){const n=await Ga(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(n??"").split("/");try{const{data:u,error:m}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:i},xform:Ls});if(await ha(this.storage,`${this.storageKey}-code-verifier`),m)throw m;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new ki}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:o??null}),error:m})}catch(u){if(Ee(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(r){try{const{options:n,provider:i,token:o,access_token:u,nonce:m}=r,f=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:u,nonce:m,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Ls}),{data:g,error:x}=f;return x?{data:{user:null,session:null},error:x}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new ki}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:x})}catch(n){if(Ee(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(r){var n,i,o,u,m;try{if("email"in r){const{email:f,options:g}=r;let x=null,y=null;this.flowType==="pkce"&&([x,y]=await Vr(this.storage,this.storageKey));const{error:j}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(n=g?.data)!==null&&n!==void 0?n:{},create_user:(i=g?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:x,code_challenge_method:y},redirectTo:g?.emailRedirectTo});return{data:{user:null,session:null},error:j}}if("phone"in r){const{phone:f,options:g}=r,{data:x,error:y}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(o=g?.data)!==null&&o!==void 0?o:{},create_user:(u=g?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(m=g?.channel)!==null&&m!==void 0?m:"sms"}});return{data:{user:null,session:null,messageId:x?.message_id},error:y}}throw new Ti("You must provide either an email or phone number.")}catch(f){if(Ee(f))return{data:{user:null,session:null},error:f};throw f}}async verifyOtp(r){var n,i;try{let o,u;"options"in r&&(o=(n=r.options)===null||n===void 0?void 0:n.redirectTo,u=(i=r.options)===null||i===void 0?void 0:i.captchaToken);const{data:m,error:f}=await Ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:u}}),redirectTo:o,xform:Ls});if(f)throw f;if(!m)throw new Error("An error occurred on token verification.");const g=m.session,x=m.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),{data:{user:x,session:g},error:null}}catch(o){if(Ee(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(r){var n,i,o;try{let u=null,m=null;return this.flowType==="pkce"&&([u,m]=await Vr(this.storage,this.storageKey)),await Ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(i=(n=r.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=r?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:m}),headers:this.headers,xform:Vb})}catch(u){if(Ee(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;if(i)throw i;if(!n)throw new ma;const{error:o}=await Ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:o}})}catch(r){if(Ee(r))return{data:{user:null,session:null},error:r};throw r}}async resend(r){try{const n=`${this.url}/resend`;if("email"in r){const{email:i,type:o,options:u}=r,{error:m}=await Ue(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:m}}else if("phone"in r){const{phone:i,type:o,options:u}=r,{data:m,error:f}=await Ue(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return{data:{user:null,session:null,messageId:m?.message_id},error:f}}throw new Ti("You must provide either an email or phone number and a type")}catch(n){if(Ee(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(r,n){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await r(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const n=await Ga(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?r=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const i=r.expires_at?r.expires_at*1e3-Date.now()<cd:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",r.expires_at),!i){if(this.userStorage){const m=await Ga(this.userStorage,this.storageKey+"-user");m?.user?r.user=m.user:r.user=hd()}if(this.storage.isServer&&r.user){let m=this.suppressGetSessionWarning;r=new Proxy(r,{get:(g,x,y)=>(!m&&x==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),m=!0,this.suppressGetSessionWarning=!0),Reflect.get(g,x,y))})}return{data:{session:r},error:null}}const{session:o,error:u}=await this._callRefreshToken(r.refresh_token);return u?{data:{session:null},error:u}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(r){return r?await this._getUser(r):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(r){try{return r?await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:ga}):await this._useSession(async n=>{var i,o,u;const{data:m,error:f}=n;if(f)throw f;return!(!((i=m.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ma}:await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(o=m.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0,xform:ga})})}catch(n){if(Ee(n))return pb(n)&&(await this._removeSession(),await ha(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(r,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(r,n))}async _updateUser(r,n={}){try{return await this._useSession(async i=>{const{data:o,error:u}=i;if(u)throw u;if(!o.session)throw new ma;const m=o.session;let f=null,g=null;this.flowType==="pkce"&&r.email!=null&&([f,g]=await Vr(this.storage,this.storageKey));const{data:x,error:y}=await Ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:f,code_challenge_method:g}),jwt:m.access_token,xform:ga});if(y)throw y;return m.user=x.user,await this._saveSession(m),await this._notifyAllSubscribers("USER_UPDATED",m),{data:{user:m.user},error:null}})}catch(i){if(Ee(i))return{data:{user:null},error:i};throw i}}async setSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new ma;const n=Date.now()/1e3;let i=n,o=!0,u=null;const{payload:m}=ud(r.access_token);if(m.exp&&(i=m.exp,o=i<=n),o){const{session:f,error:g}=await this._callRefreshToken(r.refresh_token);if(g)return{data:{user:null,session:null},error:g};if(!f)return{data:{user:null,session:null},error:null};u=f}else{const{data:f,error:g}=await this._getUser(r.access_token);if(g)throw g;u={access_token:r.access_token,refresh_token:r.refresh_token,user:f.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(n){if(Ee(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async n=>{var i;if(!r){const{data:m,error:f}=n;if(f)throw f;r=(i=m.session)!==null&&i!==void 0?i:void 0}if(!r?.refresh_token)throw new ma;const{session:o,error:u}=await this._callRefreshToken(r.refresh_token);return u?{data:{user:null,session:null},error:u}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ee(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(r,n){try{if(!cs())throw new Ci("No browser detected.");if(r.error||r.error_description||r.error_code)throw new Ci(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new mg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ci("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new mg("No code detected.");const{data:P,error:D}=await this._exchangeCodeForSession(r.code);if(D)throw D;const z=new URL(window.location.href);return z.searchParams.delete("code"),window.history.replaceState(window.history.state,"",z.toString()),{data:{session:P.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:u,refresh_token:m,expires_in:f,expires_at:g,token_type:x}=r;if(!u||!f||!m||!x)throw new Ci("No session defined in URL");const y=Math.round(Date.now()/1e3),j=parseInt(f);let k=y+j;g&&(k=parseInt(g));const b=k-y;b*1e3<=Kr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${j}s`);const S=k-j;y-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,k,y):y-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,k,y);const{data:w,error:_}=await this._getUser(u);if(_)throw _;const O={provider_token:i,provider_refresh_token:o,access_token:u,expires_in:j,expires_at:k,refresh_token:m,token_type:x,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:O,redirectType:r.type},error:null}}catch(i){if(Ee(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(r){return!!(r.access_token||r.error_description)}async _isPKCECallback(r){const n=await Ga(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&n)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:o,error:u}=n;if(u)return{error:u};const m=(i=o.session)===null||i===void 0?void 0:i.access_token;if(m){const{error:f}=await this.admin.signOut(m,r);if(f&&!(xb(f)&&(f.status===404||f.status===401||f.status===403)))return{error:f}}return r!=="others"&&(await this._removeSession(),await ha(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(r){const n=kb(),i={id:n,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(r){return await this._useSession(async n=>{var i,o;try{const{data:{session:u},error:m}=n;if(m)throw m;await((i=this.stateChangeEmitters.get(r))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",r,"session",u)}catch(u){await((o=this.stateChangeEmitters.get(r))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",u),console.error(u)}})}async resetPasswordForEmail(r,n={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Vr(this.storage,this.storageKey,!0));try{return await Ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(u){if(Ee(u))return{data:null,error:u};throw u}}async getUserIdentities(){var r;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(r=n.user.identities)!==null&&r!==void 0?r:[]},error:null}}catch(n){if(Ee(n))return{data:null,error:n};throw n}}async linkIdentity(r){var n;try{const{data:i,error:o}=await this._useSession(async u=>{var m,f,g,x,y;const{data:j,error:k}=u;if(k)throw k;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(m=r.options)===null||m===void 0?void 0:m.redirectTo,scopes:(f=r.options)===null||f===void 0?void 0:f.scopes,queryParams:(g=r.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await Ue(this.fetch,"GET",b,{headers:this.headers,jwt:(y=(x=j.session)===null||x===void 0?void 0:x.access_token)!==null&&y!==void 0?y:void 0})});if(o)throw o;return cs()&&!(!((n=r.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:r.provider,url:i?.url},error:null}}catch(i){if(Ee(i))return{data:{provider:r.provider,url:null},error:i};throw i}}async unlinkIdentity(r){try{return await this._useSession(async n=>{var i,o;const{data:u,error:m}=n;if(m)throw m;return await Ue(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(o=(i=u.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(Ee(n))return{data:null,error:n};throw n}}async _refreshAccessToken(r){const n=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await Ab(async o=>(o>0&&await Ob(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await Ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:Ls})),(o,u)=>{const m=200*Math.pow(2,o);return u&&dd(u)&&Date.now()+m-i<Kr})}catch(i){if(this._debug(n,"error",i),Ee(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",n,"url",i),cs()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:r,url:i},error:null}}async _recoverAndRefresh(){var r,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await Ga(this.storage,this.storageKey);if(o&&this.userStorage){let m=await Ga(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!m&&(m={user:o.user},await Jr(this.userStorage,this.storageKey+"-user",m)),o.user=(r=m?.user)!==null&&r!==void 0?r:hd()}else if(o&&!o.user&&!o.user){const m=await Ga(this.storage,this.storageKey+"-user");m&&m?.user?(o.user=m.user,await ha(this.storage,this.storageKey+"-user"),await Jr(this.storage,this.storageKey,o)):o.user=hd()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const u=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<cd;if(this._debug(i,`session has${u?"":" not"} expired with margin of ${cd}s`),u){if(this.autoRefreshToken&&o.refresh_token){const{error:m}=await this._callRefreshToken(o.refresh_token);m&&(console.error(m),dd(m)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",m),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:m,error:f}=await this._getUser(o.access_token);!f&&m?.user?(o.user=m.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(m){console.error("Error getting user data:",m),this._debug(i,"error getting user data, skipping SIGNED_IN notification",m)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(r){var n,i;if(!r)throw new ma;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new $i;const{data:u,error:m}=await this._refreshAccessToken(r);if(m)throw m;if(!u.session)throw new ma;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const f={session:u.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(u){if(this._debug(o,"error",u),Ee(u)){const m={session:null,error:u};return dd(u)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(m),m}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(u),u}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(r,n,i=!0){const o=`#_notifyAllSubscribers(${r})`;this._debug(o,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:r,session:n});const u=[],m=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(r,n)}catch(g){u.push(g)}});if(await Promise.all(m),u.length>0){for(let f=0;f<u.length;f+=1)console.error(u[f]);throw u[0]}}finally{this._debug(o,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0;const n=Object.assign({},r),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await Jr(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const u=yg(o);await Jr(this.storage,this.storageKey,u)}else{const o=yg(n);await Jr(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await ha(this.storage,this.storageKey),await ha(this.storage,this.storageKey+"-code-verifier"),await ha(this.storage,this.storageKey+"-user"),this.userStorage&&await ha(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&cs()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),Kr);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-r)/Kr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Kr}ms, refresh threshold is ${_d} ticks`),o<=_d&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof g0)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!cs()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const n=`#_onVisibilityChanged(${r})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,n,i){const o=[`provider=${encodeURIComponent(n)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[u,m]=await Vr(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(m)}`});o.push(f.toString())}if(i?.queryParams){const u=new URLSearchParams(i.queryParams);o.push(u.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${r}?${o.join("&")}`}async _unenroll(r){try{return await this._useSession(async n=>{var i;const{data:o,error:u}=n;return u?{data:null,error:u}:await Ue(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Ee(n))return{data:null,error:n};throw n}}async _enroll(r){try{return await this._useSession(async n=>{var i,o;const{data:u,error:m}=n;if(m)return{data:null,error:m};const f=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:{issuer:r.issuer}),{data:g,error:x}=await Ue(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(i=u?.session)===null||i===void 0?void 0:i.access_token});return x?{data:null,error:x}:(r.factorType==="totp"&&(!((o=g?.totp)===null||o===void 0)&&o.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),{data:g,error:null})})}catch(n){if(Ee(n))return{data:null,error:n};throw n}}async _verify(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:u}=n;if(u)return{data:null,error:u};const{data:m,error:f}=await Ue(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:{code:r.code,challenge_id:r.challengeId},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),{data:m,error:f})})}catch(n){if(Ee(n))return{data:null,error:n};throw n}})}async _challenge(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:u}=n;return u?{data:null,error:u}:await Ue(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:{channel:r.channel},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Ee(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(r){const{data:n,error:i}=await this._challenge({factorId:r.factorId});return i?{data:null,error:i}:await this._verify({factorId:r.factorId,challengeId:n.id,code:r.code})}async _listFactors(){const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i=r?.factors||[],o=i.filter(m=>m.factor_type==="totp"&&m.status==="verified"),u=i.filter(m=>m.factor_type==="phone"&&m.status==="verified");return{data:{all:i,totp:o,phone:u},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async r=>{var n,i;const{data:{session:o},error:u}=r;if(u)return{data:null,error:u};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:m}=ud(o.access_token);let f=null;m.aal&&(f=m.aal);let g=f;((i=(n=o.user.factors)===null||n===void 0?void 0:n.filter(j=>j.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(g="aal2");const y=m.amr||[];return{data:{currentLevel:f,nextLevel:g,currentAuthenticationMethods:y},error:null}}))}async fetchJwk(r,n={keys:[]}){let i=n.keys.find(f=>f.kid===r);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(f=>f.kid===r),i&&this.jwks_cached_at+fb>o)return i;const{data:u,error:m}=await Ue(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(m)throw m;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=o,i=u.keys.find(f=>f.kid===r),!i)?null:i}async getClaims(r,n={}){try{let i=r;if(!i){const{data:b,error:S}=await this.getSession();if(S||!b.session)return{data:null,error:S};i=b.session.access_token}const{header:o,payload:u,signature:m,raw:{header:f,payload:g}}=ud(i);n?.allowExpired||qb(u.exp);const x=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!x){const{error:b}=await this.getUser(i);if(b)throw b;return{data:{claims:u,header:o,signature:m},error:null}}const y=Bb(o.alg),j=await crypto.subtle.importKey("jwk",x,y,!0,["verify"]);if(!await crypto.subtle.verify(y,j,m,Sb(`${f}.${g}`)))throw new Td("Invalid JWT signature");return{data:{claims:u,header:o,signature:m},error:null}}catch(i){if(Ee(i))return{data:null,error:i};throw i}}}hl.nextInstanceID=0;const tj=hl;class sj extends tj{constructor(r){super(r)}}var aj=function(c,r,n,i){function o(u){return u instanceof n?u:new n(function(m){m(u)})}return new(n||(n=Promise))(function(u,m){function f(y){try{x(i.next(y))}catch(j){m(j)}}function g(y){try{x(i.throw(y))}catch(j){m(j)}}function x(y){y.done?u(y.value):o(y.value).then(f,g)}x((i=i.apply(c,r||[])).next())})};class rj{constructor(r,n,i){var o,u,m;if(this.supabaseUrl=r,this.supabaseKey=n,!r)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const f=ob(r),g=new URL(f);this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const x=`sb-${g.hostname.split(".")[0]}-auth-token`,y={db:eb,realtime:sb,auth:Object.assign(Object.assign({},tb),{storageKey:x}),global:Wv},j=cb(i??{},y);this.storageKey=(o=j.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(u=j.global.headers)!==null&&u!==void 0?u:{},j.accessToken?(this.accessToken=j.accessToken,this.auth=new Proxy({},{get:(k,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((m=j.auth)!==null&&m!==void 0?m:{},this.headers,j.global.fetch),this.fetch=lb(n,this._getAccessToken.bind(this),j.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},j.realtime)),this.rest=new wv(new URL("rest/v1",g).href,{headers:this.headers,schema:j.db.schema,fetch:this.fetch}),j.accessToken||this._listenForAuthEvents()}get functions(){return new dv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Jv(this.storageUrl.href,this.headers,this.fetch)}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,n={},i={}){return this.rest.rpc(r,n,i)}channel(r,n={config:{}}){return this.realtime.channel(r,n)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var r,n;return aj(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:n,detectSessionInUrl:i,storage:o,storageKey:u,flowType:m,lock:f,debug:g},x,y){const j={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new sj({url:this.authUrl.href,headers:Object.assign(Object.assign({},j),x),storageKey:u,autoRefreshToken:r,persistSession:n,detectSessionInUrl:i,storage:o,flowType:m,lock:f,debug:g,fetch:y,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(r){return new Lv(this.realtimeUrl.href,Object.assign(Object.assign({},r),{params:Object.assign({apikey:this.supabaseKey},r?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i?.access_token)})}_handleTokenChanged(r,n,i){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:r==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const nj=(c,r,n)=>new rj(c,r,n);function lj(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const c=process.version.match(/^v(\d+)\./);return c?parseInt(c[1],10)<=18:!1}lj()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const x0="https://fktvtmolbvwtrxsgodaw.supabase.co",ij="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZrdHZ0bW9sYnZ3dHJ4c2dvZGF3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU2NjU1NjcsImV4cCI6MjA3MTI0MTU2N30._wbmrSyLPbfjg4W8mLhh0xmzfYGwg71XZl7IOH5d6yo";console.log(" Connected to Supabase:",x0);const te=nj(x0,ij),oj=!1,zs=Object.freeze(Object.defineProperty({__proto__:null,isDemoMode:oj,supabase:te},Symbol.toStringTag,{value:"Module"})),p0=E.createContext(null);function Ng(c){return{id:c.id,name:c.name,address:c.address,username:c.username,email:c.email,phoneNumber:c.phone_number,profileImage:c.profile_image??null,role:c.role}}function cj({children:c}){const[r,n]=E.useState(null),[i,o]=E.useState(!0);E.useEffect(()=>{let f=!0;const g=async y=>{if(y?.user?.id){const{data:j}=await te.from("users").select("*").eq("id",y.user.id).single();if(j&&f){const k=Ng(j);n(k),localStorage.setItem("currentUser",JSON.stringify(k))}}else f&&(n(null),localStorage.removeItem("currentUser"));f&&o(!1)};te.auth.getSession().then(({data:{session:y}})=>{g(y)});const{data:{subscription:x}}=te.auth.onAuthStateChange((y,j)=>{g(j)});return()=>{f=!1,x.unsubscribe()}},[]);const u=async(f,g)=>{const{data:x,error:y}=await te.auth.signInWithPassword({email:f,password:g});if(y)throw console.error("Supabase sign-in error:",y),new Error("Invalid email or password");if(!x.user)throw new Error("No user data returned");const{data:j,error:k}=await te.from("users").select("*").eq("id",x.user.id).single();if(k||!j)throw console.error("Failed to load user profile:",k),new Error("Failed to load user profile");const b=Ng(j);return n(b),localStorage.setItem("currentUser",JSON.stringify(b)),b},m=async()=>{await te.auth.signOut(),localStorage.removeItem("currentUser"),n(null)};return s.jsx(p0.Provider,{value:{user:r,login:u,logout:m,isLoading:i},children:c})}function Vt(){const c=E.useContext(p0);if(!c)throw new Error("useAuth must be used within an AuthProvider");return c}const dj=()=>{const{startNavigation:c}=rs();return async n=>{window.location.pathname!==n&&await c(n)}};function uj(){const[c,r]=E.useState(""),[n,i]=E.useState(""),[o,u]=E.useState(!1),[m,f]=E.useState(""),[g,x]=E.useState(!1),[y,j]=E.useState(""),[k,b]=E.useState(!1),[S,w]=E.useState(""),[_,O]=E.useState(!1),[P,D]=E.useState(""),[z,U]=E.useState(""),V=dj(),H=us(),{login:le}=Vt();E.useEffect(()=>{H.state?.message&&(j(H.state.message),window.history.replaceState({},document.title));const ee=sessionStorage.getItem("forgot-password-email");ee&&(w(ee),b(!0),sessionStorage.removeItem("forgot-password-email"))},[H]);const W=async ee=>{if(ee.preventDefault(),U(""),D(""),!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(S)){U("Please enter a valid email address.");return}O(!0);try{const{error:fe}=await te.auth.resetPasswordForEmail(S,{redirectTo:`${window.location.origin}/auth/reset-password`});fe?(U("Failed to send reset email. Please try again."),console.error("Password reset error:",fe)):(D("Password reset email sent! Check your inbox."),w(""),setTimeout(()=>{b(!1),D("")},3e3))}catch(fe){U("An unexpected error occurred. Please try again."),console.error("Unexpected error:",fe)}finally{O(!1)}},ne=async ee=>{ee.preventDefault(),f(""),x(!0);try{const ie=await le(c,n);ie.role==="admin"?await V("/admin/dashboard"):await V(`/user/${ie.id}`)}catch(ie){console.error("Authentication error:",ie);const fe=ie instanceof Error?ie.message:"Authentication failed. Please try again.";f(fe)}finally{x(!1)}};return s.jsxs("div",{className:"w-screen flex min-h-screen items-center justify-center bg-gray-50 px-4",children:[s.jsx("header",{className:"fixed top-0 left-0 w-screen h-20 flex items-center bg-slate-800 text-white px-6",children:s.jsx(Be,{to:"/",className:"text-white hover:text-white active:text-white visited:text-white",children:s.jsx("img",{src:Kg,alt:"TWC logo",className:"h-16 sm:h-20 md:h-24 w-auto"})})}),s.jsxs("form",{onSubmit:ne,className:"w-full max-w-sm rounded-lg bg-white p-8 shadow-md",children:[s.jsx("h2",{className:"mb-6 text-center text-2xl font-semibold",children:"Sign In"}),y&&s.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),s.jsx("p",{className:"text-sm text-green-600",children:y})]})}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Email"}),s.jsx("input",{type:"email",value:c,onChange:ee=>r(ee.target.value),className:"block w-full rounded-md border border-gray-300 p-2 focus:border-indigo-500 focus:ring-indigo-500",required:!0,disabled:g})]}),s.jsxs("label",{className:"mt-4 block",children:[s.jsx("span",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:o?"text":"password",value:n,onChange:ee=>i(ee.target.value),className:"block w-full rounded-md border border-gray-300 p-2 pr-20 focus:border-indigo-500 focus:ring-indigo-500",required:!0,disabled:g}),s.jsx("button",{type:"button",onClick:()=>u(!o),className:"absolute inset-y-0 right-0 mr-2 rounded px-2 text-sm text-gray-600 hover:underline focus:outline-none disabled:opacity-50",disabled:g,children:o?"Hide":"Show"})]})]}),s.jsx("div",{className:"mt-2 text-right",children:s.jsx("button",{type:"button",onClick:()=>b(!0),className:"text-sm text-emerald-600 hover:text-emerald-700 hover:underline focus:outline-none",children:"Forgot your password?"})}),m&&s.jsx("p",{className:"mt-3 text-sm text-red-600",children:m}),s.jsx("button",{type:"submit",disabled:g,className:"mt-6 w-full rounded bg-emerald-600 py-2 font-semibold text-white hover:bg-emerald-700 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:g?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Signing In..."})]}):s.jsx("span",{children:"Log In"})})]}),k&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 px-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Reset Password"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Enter your email address and we'll send you a link to reset your password."}),s.jsxs("form",{onSubmit:W,children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),s.jsx("input",{type:"email",value:S,onChange:ee=>w(ee.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter your email",required:!0,disabled:_})]}),P&&s.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:s.jsx("p",{className:"text-sm text-green-600",children:P})}),z&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:s.jsx("p",{className:"text-sm text-red-600",children:z})}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{type:"button",onClick:()=>{b(!1),w(""),D(""),U("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:_,children:"Cancel"}),s.jsx("button",{type:"submit",disabled:_||!S,className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:_?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Sending..."})]}):s.jsx("span",{children:"Send Reset Email"})})]})]})]})})]})}const Zr="/assets/TWC_Logo_Horiztonal_Black_Gold-SQmDXJYb.png";function hj(){const[c,r]=E.useState(""),[n,i]=E.useState(""),[o,u]=E.useState(!1),[m,f]=E.useState(!1),[g,x]=E.useState(""),[y,j]=E.useState(!1),[k,b]=E.useState(!1),[S,w]=E.useState(!0),_=hs(),[O]=tv();E.useEffect(()=>{(async()=>{console.log(" Reset password page loaded"),console.log(" Full URL:",window.location.href),console.log(" Search:",window.location.search),console.log(" Hash:",window.location.hash);const z=new URLSearchParams(window.location.hash.substring(1)),U=O.get("access_token")||z.get("access_token"),V=O.get("refresh_token")||z.get("refresh_token"),H=O.get("type")||z.get("type"),le=O.get("token_type")||z.get("token_type"),W=O.get("error")||z.get("error"),ne=O.get("error_description")||z.get("error_description"),ee=O.get("error_code")||z.get("error_code");if(console.log(" Token analysis:",{accessToken:U?"PRESENT":"MISSING",refreshToken:V?"PRESENT":"MISSING",type:H||"NOT SET",tokenType:le||"NOT SET",error:W||"NONE",errorDescription:ne||"NONE"}),W){let ie="Authentication error occurred.";W==="access_denied"?ne?.includes("expired")||ee==="otp_expired"?ie="This password reset link has expired. Please request a new password reset.":ne?.includes("invalid")?ie="This password reset link is invalid. Please request a new password reset.":ie=`Access denied: ${ne||"Please request a new password reset."}`:ie=ne||W,console.log(" Password reset error detected:",{error:W,errorDescription:ne,errorCode:ee}),x(ie),w(!1);return}try{const{data:{session:ie},error:fe}=await te.auth.getSession();if(console.log(" Current session check:",{session:ie?"EXISTS":"NONE",sessionError:fe}),ie&&!fe){console.log(" Valid session found, allowing password reset"),b(!0),w(!1);return}}catch(ie){console.log(" Session check failed:",ie)}if(!U&&!V){console.log(" No tokens found in URL and no existing session"),x("Invalid reset link. Please request a new password reset."),w(!1);return}if(H&&H!=="recovery"){console.log(" Wrong link type:",H),x(`Invalid reset link type: ${H}. Please request a new password reset.`),w(!1);return}try{console.log(" Attempting to set session with tokens...");const{data:ie,error:fe}=await te.auth.setSession({access_token:U,refresh_token:V});console.log(" Session setup result:",{data:ie?"SUCCESS":"NO_DATA",error:fe||"NONE"}),fe?(console.error(" Session error:",fe),x(`Invalid or expired reset link: ${fe.message}`)):ie?.session?(console.log(" Session established successfully"),b(!0),window.history.replaceState({},document.title,"/auth/reset-password")):(console.error(" No session data returned"),x("Failed to establish session. Please request a new password reset."))}catch(ie){console.error(" Token validation error:",ie),x("Invalid reset link. Please request a new password reset.")}finally{w(!1)}})()},[O]);const P=async D=>{if(D.preventDefault(),x(""),c.length<6){x("Password must be at least 6 characters long.");return}if(c!==n){x("Passwords do not match.");return}j(!0);try{const{error:z}=await te.auth.updateUser({password:c});z?x(z.message):(await te.auth.signOut(),_("/signin",{state:{message:"Password updated successfully! Please sign in with your new password."}}))}catch(z){console.error("Password update error:",z);const U=z instanceof Error?z.message:"Failed to update password. Please try again.";x(U)}finally{j(!1)}};return S?s.jsxs("div",{className:"w-screen flex min-h-screen items-center justify-center bg-gray-50 px-4",children:[s.jsx("header",{className:"fixed top-0 left-0 w-screen h-20 flex items-center bg-slate-800 text-white px-5",children:s.jsx(Be,{to:"/",className:"text-white hover:text-white active:text-white visited:text-white",children:s.jsx("img",{src:Zr,alt:"TWC logo",className:"h-16 sm:h-20 md:h-24 w-auto"})})}),s.jsx("div",{className:"w-full max-w-sm rounded-lg bg-white p-8 shadow-md",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-8 h-8 border-4 border-emerald-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"Verifying Reset Link..."}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Please wait while we validate your password reset link."})]})})]}):k?s.jsxs("div",{className:"w-screen flex min-h-screen items-center justify-center bg-gray-50 px-4",children:[s.jsx("header",{className:"fixed top-0 left-0 w-screen h-20 flex items-center bg-slate-800 text-white px-5",children:s.jsx(Be,{to:"/",className:"text-white hover:text-white active:text-white visited:text-white",children:s.jsx("img",{src:Zr,alt:"TWC logo",className:"h-16 sm:h-20 md:h-24 w-auto"})})}),s.jsxs("form",{onSubmit:P,className:"w-full max-w-sm rounded-lg bg-white p-8 shadow-md",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"w-12 h-12 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-6 h-6 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-3a1 1 0 011-1h2.586l4.707-4.707A6 6 0 1721 9z"})})}),s.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Reset Your Password"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Enter your new password below."})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"mb-1 block text-sm font-medium text-gray-700",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:o?"text":"password",value:c,onChange:D=>r(D.target.value),className:"block w-full rounded-md border border-gray-300 p-2 pr-20 focus:border-emerald-500 focus:ring-emerald-500",placeholder:"Enter new password",required:!0,disabled:y,minLength:6}),s.jsx("button",{type:"button",onClick:()=>u(!o),className:"absolute inset-y-0 right-0 mr-2 rounded px-2 text-sm text-gray-600 hover:underline focus:outline-none disabled:opacity-50",disabled:y,children:o?"Hide":"Show"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 6 characters long."})]}),s.jsxs("label",{className:"mt-4 block",children:[s.jsx("span",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Confirm New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:m?"text":"password",value:n,onChange:D=>i(D.target.value),className:`block w-full rounded-md border p-2 pr-20 focus:ring-emerald-500 ${n&&c!==n?"border-red-400 bg-red-50 focus:border-red-500":n&&c===n?"border-green-400 bg-green-50 focus:border-green-500":"border-gray-300 focus:border-emerald-500"}`,placeholder:"Confirm new password",required:!0,disabled:y}),s.jsx("button",{type:"button",onClick:()=>f(!m),className:"absolute inset-y-0 right-0 mr-2 rounded px-2 text-sm text-gray-600 hover:underline focus:outline-none disabled:opacity-50",disabled:y,children:m?"Hide":"Show"})]}),n&&s.jsx("p",{className:`text-xs mt-1 ${c===n?"text-green-600":"text-red-600"}`,children:c===n?" Passwords match":" Passwords do not match"})]}),g&&s.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md",children:s.jsx("p",{className:"text-sm text-red-600",children:g})}),s.jsx("button",{type:"submit",disabled:y||c!==n||c.length<6,className:"mt-6 w-full rounded bg-emerald-600 py-2 font-semibold text-white hover:bg-emerald-700 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:y?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Updating Password..."})]}):s.jsx("span",{children:"Update Password"})}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx(Gt,{to:"/signin",className:"text-sm text-emerald-600 hover:text-emerald-700 hover:underline",children:"Back to Sign In"})})]})]}):s.jsxs("div",{className:"w-screen flex min-h-screen items-center justify-center bg-gray-50 px-4",children:[s.jsx("header",{className:"fixed top-0 left-0 w-screen h-20 flex items-center bg-slate-800 text-white px-5",children:s.jsx(Be,{to:"/",className:"text-white hover:text-white active:text-white visited:text-white",children:s.jsx("img",{src:Zr,alt:"TWC logo",className:"h-16 sm:h-20 md:h-24 w-auto"})})}),s.jsx("div",{className:"w-full max-w-sm rounded-lg bg-white p-8 shadow-md",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsx("h2",{className:"text-xl font-semibold text-red-800 mb-2",children:"Invalid Reset Link"}),s.jsx("p",{className:"text-gray-600 mb-4",children:g}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(Gt,{to:"/sign-in",className:"inline-block w-full px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 transition-colors",children:"Request New Password Reset"}),s.jsx(Gt,{to:"/",className:"inline-block w-full px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors",children:"Back to Home"})]})]})})]})}function mj(){const c="twcoperations123@gmail.com",r=()=>{const o=`mailto:${c}?subject=${encodeURIComponent("Account Password Reset Request")}&body=${encodeURIComponent(`Hello Admin,

I need help with my account password reset. Please assist me with accessing my account.

Thank you,
[Your Name]`)}`;window.location.href=o};return s.jsxs("div",{className:"w-screen flex min-h-screen items-center justify-center bg-gray-50 px-4",children:[s.jsx("header",{className:"fixed top-0 left-0 w-screen h-20 flex items-center bg-slate-800 text-white px-5",children:s.jsx(Be,{to:"/",className:"text-white hover:text-white active:text-white visited:text-white",children:s.jsx("img",{src:Zr,alt:"TWC logo",className:"h-16 sm:h-20 md:h-24 w-auto"})})}),s.jsx("div",{className:"w-full max-w-md rounded-lg bg-white p-8 shadow-md",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 7.89a1 1 0 001.42 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),s.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Contact Admin"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"For password reset requests, please contact our administrator directly."}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Admin Email:"}),s.jsx("p",{className:"text-lg font-medium text-gray-800 break-all",children:c})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:r,className:"w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 7.89a1 1 0 001.42 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Send Email to Admin"]}),s.jsx(Be,{to:"/sign-in",className:"block w-full px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors text-center",children:"Back to Sign In"}),s.jsx(Be,{to:"/",className:"block w-full px-4 py-2 bg-gray-100 text-gray-600 rounded hover:bg-gray-200 transition-colors text-center",children:"Back to Home"})]})]})})]})}/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=c=>c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gj=c=>c.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,n,i)=>i?i.toUpperCase():n.toLowerCase()),Sg=c=>{const r=gj(c);return r.charAt(0).toUpperCase()+r.slice(1)},y0=(...c)=>c.filter((r,n,i)=>!!r&&r.trim()!==""&&i.indexOf(r)===n).join(" ").trim(),xj=c=>{for(const r in c)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=E.forwardRef(({color:c="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:o="",children:u,iconNode:m,...f},g)=>E.createElement("svg",{ref:g,...pj,width:r,height:r,stroke:c,strokeWidth:i?Number(n)*24/Number(r):n,className:y0("lucide",o),...!u&&!xj(f)&&{"aria-hidden":"true"},...f},[...m.map(([x,y])=>E.createElement(x,y)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=(c,r)=>{const n=E.forwardRef(({className:i,...o},u)=>E.createElement(yj,{ref:u,iconNode:r,className:y0(`lucide-${fj(Sg(c))}`,`lucide-${c}`,i),...o}));return n.displayName=Sg(c),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],_g=qe("bell",vj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Eg=qe("camera",bj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],v0=qe("chart-column",jj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Pi=qe("circle-alert",wj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],fl=qe("circle-check-big",Nj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],b0=qe("circle-question-mark",Sj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Wr=qe("clock",_j);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],kg=qe("dollar-sign",Ej);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],fd=qe("eye-off",kj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Di=qe("eye",Tj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ja=qe("file-text",Cj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Aj=qe("funnel",Oj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],j0=qe("log-out",Dj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Mj=qe("mail",Uj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],w0=qe("menu",Rj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Ii=qe("message-square",zj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Bs=qe("package",Lj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Cd=qe("phone",qj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],$j=qe("refresh-cw",Bj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]],Ij=qe("reply",Pj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Gj=qe("save",Hj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Yj=qe("search",Vj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Xj=qe("send",Qj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Od=qe("settings",Kj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Oi=qe("shield",Jj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Li=qe("shopping-cart",Zj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],gd=qe("trending-up",Fj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],ew=qe("truck",Wj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],N0=qe("user",tw);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],il=qe("users",sw);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],rw=qe("x",aw);function nw({onClick:c}){return s.jsx("button",{onClick:c,"aria-label":"Open menu",className:"p-3 rounded-lg hover:bg-gray-100 touch-manipulation min-h-[44px] min-w-[44px] flex items-center justify-center",children:s.jsx(w0,{className:"h-6 w-6"})})}function lw({open:c,onClose:r,user:n,userId:i}){const[o,u]=E.useState(null);return E.useEffect(()=>{const m=f=>f.key==="Escape"&&r();return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[r]),E.useEffect(()=>{if(n?.profileImage)u(n.profileImage);else{const m=localStorage.getItem("userProfileImage");m&&u(m)}},[n?.profileImage]),s.jsxs(s.Fragment,{children:[s.jsx("div",{onClick:r,className:`fixed inset-0 bg-black/50 transition-opacity z-40 ${c?"opacity-100":"opacity-0 pointer-events-none"}`}),s.jsxs("nav",{className:`fixed top-0 left-0 h-full w-72 sm:w-80 max-w-[85vw] bg-white shadow-lg transform transition-transform duration-300 ease-in-out z-50 ${c?"translate-x-0":"-translate-x-full"} flex flex-col pt-4 sm:pt-6 pb-safe-bottom`,children:[s.jsx("div",{className:"px-6 pb-6 border-b border-gray-200 mb-4 relative",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:o?s.jsx("img",{src:o,alt:"Profile",className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-8 h-8 bg-gray-400 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-sm font-medium",children:n?.name?.charAt(0).toUpperCase()||"U"})})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:n?.name||"User"}),s.jsx("p",{className:"text-sm text-gray-500",children:n?.email||"user@example.com"})]})]})}),s.jsxs("ul",{className:"px-4 sm:px-6 text-base sm:text-lg font-medium space-y-1",children:[s.jsx("li",{children:s.jsx(Be,{to:`/user/${i}/dashboard`,onClick:r,className:"block py-3 px-2 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors touch-manipulation min-h-[48px] flex items-center",children:"Dashboard"})}),s.jsx("li",{children:s.jsx(Be,{to:`/user/${i}/orders`,onClick:r,className:"block py-3 px-2 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors touch-manipulation min-h-[48px] flex items-center",children:"Orders"})}),s.jsx("li",{children:s.jsx(Be,{to:`/user/${i}/inventory`,onClick:r,className:"block py-3 px-2 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors touch-manipulation min-h-[48px] flex items-center",children:"Our Inventory"})}),s.jsx("li",{children:s.jsx(Be,{to:`/user/${i}/support`,onClick:r,className:"block py-3 px-2 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors touch-manipulation min-h-[48px] flex items-center",children:"Support"})}),s.jsx("li",{children:s.jsx(Be,{to:`/user/${i}/settings`,onClick:r,className:"block py-3 px-2 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors touch-manipulation min-h-[48px] flex items-center",children:"Settings"})})]}),s.jsx("div",{className:"mt-auto px-4 sm:px-6 pb-4 sm:pb-6",children:s.jsxs(Be,{to:"/",onClick:r,className:"flex items-center space-x-2 py-3 px-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors touch-manipulation min-h-[48px]",children:[s.jsx(j0,{className:"h-5 w-5"}),s.jsx("span",{children:"Sign Out"})]})})]})]})}const Ai=null,nl=!1;class iw{async getAllUsers(){try{const{data:r,error:n}=await te.from("users").select("*").order("created_at",{ascending:!1});if(n)throw console.error("Error fetching users:",n),n;return r?.map(this.mapDatabaseUserToAppUser)||[]}catch(r){return console.error("Error in getAllUsers:",r),[]}}async getUserById(r){try{const{data:n,error:i}=await te.from("users").select("*").eq("id",r).single();return i?(console.error("Error fetching user:",i),null):n?this.mapDatabaseUserToAppUser(n):null}catch(n){return console.error("Error in getUserById:",n),null}}async createUser(r){try{if(r.email==="hello@hello.com"){console.log(" EMERGENCY DEBUG MODE ACTIVATED for hello@hello.com"),console.log(" Starting comprehensive debugging..."),console.log(" Step 1: Direct auth.users check");try{const{data:w}=await te.rpc("get_auth_users_count",{target_email:r.email});console.log(" Direct auth users count:",w)}catch{console.log(" RPC not available, skipping direct auth check")}console.log(" Step 2: Direct users table check");const{data:k,error:b}=await te.from("users").select("*").eq("email",r.email);console.log(" Direct users check result:",{data:k,error:b,count:k?.length||0}),console.log(" Step 3: Case-insensitive check");const{data:S}=await te.from("users").select("*").ilike("email",r.email);console.log(" Case-insensitive check result:",{data:S,count:S?.length||0})}const{data:i}=await te.auth.getSession();console.log("Creating user with data:",r),console.log("Checking if email exists in custom users table:",r.email);const o=await this.checkEmailExists(r.email);if(console.log("Email exists in custom users check result:",o),o)throw new Error(`A user with email "${r.email}" already exists in the system`);console.log("Checking if username exists in custom users table:",r.username);const u=await this.checkUsernameExists(r.username);if(console.log("Username exists in custom users check result:",u),u)throw new Error(`A user with username "${r.username}" already exists`);console.log("Checking for existing auth user with this email...");let m=null;if(m){const{data:k}=await te.from("users").select("id").eq("id",m.id).single();if(k)throw new Error(`A user with email "${r.email}" already exists in the authentication system`);{console.log("Found orphaned auth user, creating profile for existing auth user:",m.id);const{data:b,error:S}=await te.from("users").insert({id:m.id,email:r.email,name:r.name,address:r.address,username:r.username,password:"managed_by_supabase_auth",phone_number:r.phoneNumber,profile_image:r.profileImage||null,role:r.role??"user"}).select().single();if(S)throw console.error("Failed to create profile for orphaned auth user:",S),new Error(`Failed to create user profile: ${S.message}`);return console.log("Successfully created profile for orphaned auth user"),this.mapDatabaseUserToAppUser(b)}}console.log("Attempting to create auth user...");const{data:f,error:g}=await te.auth.signUp({email:r.email,password:r.password,options:{data:{name:r.name,username:r.username,address:r.address,phone:r.phoneNumber,role:r.role??"user"}}});if(g)throw console.error("Auth signup error:",g),g.message.includes("User already registered")?new Error(`The email "${r.email}" is already registered. If this is an orphaned user, please contact an administrator.`):new Error(`Failed to create user account: ${g.message}`);if(!f.user)throw new Error("No user data returned from signup");if(console.log("Auth user created successfully:",f.user.id),await te.auth.signOut(),i?.session){const{error:k}=await te.auth.setSession(i.session);k&&console.warn("Could not restore admin session:",k)}console.log("Creating custom user profile...");let x=3,y=null,j=null;for(;x>0&&!y;){if(x<3){console.log(` Retry ${4-x}: Re-checking for conflicts before insert...`);const{data:w}=await te.from("users").select("*").eq("email",r.email);if(w&&w.length>0){const O=w[0];if(O.id===f.user.id)return console.log(" SUCCESS: Our user was actually created successfully on previous attempt!"),console.log(" User details:",O),this.mapDatabaseUserToAppUser(O);throw console.log(" RACE CONDITION DETECTED: Email created by different auth user"),console.log(" Existing user ID:",O.id),console.log(" Our auth user ID:",f.user.id),new Error(`Race condition detected: Email "${r.email}" was created by another process`)}const{data:_}=await te.from("users").select("id, username").eq("username",r.username);if(_&&_.length>0&&_[0].id!==f.user.id)throw console.log(" RACE CONDITION DETECTED: Username created by different auth user"),new Error(`Race condition detected: Username "${r.username}" was created by another process`)}const k={id:f.user.id,email:r.email,name:r.name,address:r.address,username:r.username,password:"managed_by_supabase_auth",phone_number:r.phoneNumber,profile_image:r.profileImage||null,role:r.role??"user"};console.log(" INSERTING DATA:",{address:k.address,phone_number:k.phone_number,email:k.email,name:k.name,username:k.username});const{data:b,error:S}=await te.from("users").insert(k).select().single();if(!S){y=b;break}if(j=S,x--,console.log(` Database insert failed (${x} attempts left):`,{code:S.code,message:S.message,details:S.details,hint:S.hint}),S.code==="23505"||S.message.includes("duplicate key")){if(console.log(" UNIQUE CONSTRAINT VIOLATION - Likely race condition"),x>0){const w=(4-x)*1e3;console.log(` Waiting ${w}ms before retry to avoid race condition...`),await new Promise(_=>setTimeout(_,w))}}else{console.log(" Non-constraint error, stopping retries");break}}if(j||!y){console.error("Database insert error after retries:",j),console.error(`CRITICAL: Orphaned auth user created: ${f.user.id} (${r.email})`),console.error("Attempting to clean up orphaned auth user...");try{console.log(" Attempting to cleanup orphaned auth user..."),console.log(" Admin access available:",nl),console.log(" Service role key configured:",!1),nl&&Ai||(console.log(" Admin client not available, using edge function..."),console.log(" To fix: Set VITE_SUPABASE_SERVICE_ROLE_KEY in your .env file"),await this.cleanupOrphanedAuthUser(f.user.id))}catch(k){console.error(" Failed to cleanup orphaned auth user:",k),console.error(" Manual cleanup required for auth user:",f.user.id),console.error(" Run this SQL: DELETE FROM auth.users WHERE id = '"+f.user.id+"';")}throw j?.message.includes("users_email_key")||j?.code==="23505"?new Error(`Database error: The email "${r.email}" is already in use. This indicates a race condition or data inconsistency.`):j?.message.includes("users_username_key")?new Error(`Database error: The username "${r.username}" is already in use. This indicates a race condition or data inconsistency.`):new Error(`Failed to create user profile: ${j?.message||"Unknown database error"}. The orphaned auth user has been cleaned up.`)}return console.log("Custom user created successfully:",y),this.mapDatabaseUserToAppUser(y)}catch(n){throw console.error("Error in createUser:",n),n}}async createUserBypassValidation(r){try{console.log(" BYPASS MODE: Creating user without validation checks");const{data:n}=await te.auth.getSession();console.log(" BYPASS: Creating auth user...");const{data:i,error:o}=await te.auth.signUp({email:r.email,password:r.password,options:{data:{name:r.name,username:r.username,role:r.role??"user"}}});if(o)throw console.error(" BYPASS: Auth signup error:",o),new Error(`Auth signup failed: ${o.message}`);if(!i.user)throw new Error(" BYPASS: No user data returned from signup");console.log(" BYPASS: Auth user created:",i.user.id),await te.auth.signOut(),n?.session&&await te.auth.setSession(n.session),console.log(" BYPASS: Creating custom user record...");const{data:u,error:m}=await te.from("users").insert({id:i.user.id,email:r.email,name:r.name,address:r.address,username:r.username,password:"managed_by_supabase_auth",phone_number:r.phoneNumber,profile_image:r.profileImage||null,role:r.role??"user"}).select().single();if(m)throw console.error(" BYPASS: Database error:",m),console.error(" BYPASS: Error code:",m.code),console.error(" BYPASS: Error details:",m.details),console.error(" BYPASS: Error hint:",m.hint),console.error(" BYPASS: Error message:",m.message),new Error(`Database insert failed: ${m.message} (Code: ${m.code})`);return console.log(" BYPASS: Success! User created:",u),this.mapDatabaseUserToAppUser(u)}catch(n){throw console.error(" BYPASS: Error in createUserBypassValidation:",n),n}}async updateUser(r,n){try{const i={...n,updated_at:new Date().toISOString()};n.phoneNumber&&(i.phone_number=n.phoneNumber,delete i.phoneNumber),n.profileImage&&(i.profile_image=n.profileImage,delete i.profileImage),console.log("Updating user with data:",i);const{data:o,error:u}=await te.from("users").update(i).eq("id",r).select().single();if(u)throw console.error("Supabase error details:",u),console.error("Update data that failed:",i),new Error(`Failed to update user: ${u.message}`);return o?this.mapDatabaseUserToAppUser(o):null}catch(i){throw console.error("Error in updateUser:",i),i}}async deleteUser(r){try{console.log("Deleting user with ID:",r);try{const{data:i,error:o}=await te.functions.invoke("delete-user-admin",{body:{userId:r}});if(!o&&!i?.error)return console.log("User deleted via edge function:",i),!0;console.log("Edge function not available, using database trigger method")}catch(i){console.log("Edge function failed, using database trigger method:",i)}const{error:n}=await te.from("users").delete().eq("id",r);if(n)throw console.error("Database deletion failed:",n),new Error(`Failed to delete user: ${n.message}`);return console.log("User deleted successfully via database trigger"),!0}catch(n){throw console.error("Error in deleteUser:",n),n}}async authenticateUser(r,n){try{const{data:i,error:o}=await te.from("users").select("*").eq("username",r).eq("password",n).single();return o?(console.error("Error authenticating user:",o),null):i?this.mapDatabaseUserToAppUser(i):null}catch(i){return console.error("Error in authenticateUser:",i),null}}async checkUsernameExists(r){try{console.log(` DEBUGGING: Checking if username exists: "${r}"`),console.log(` Username length: ${r.length}`),console.log(` Username trimmed: "${r.trim()}"`);const{data:n,error:i}=await te.from("users").select("id, username").eq("username",r).limit(1);if(console.log(" Username query result:",{data:n,error:i}),console.log(" Data length:",n?.length||0),i)return console.error(" Error checking username:",i),console.log(" Returning false due to error"),!1;const o=n&&n.length>0;return console.log(` Username exists result: ${o}`),o&&n&&console.log(" Existing username details:",n[0]),o}catch(n){return console.error(" Exception in checkUsernameExists:",n),console.log(" Returning false due to exception"),!1}}async checkEmailExists(r){try{console.log(` DEBUGGING: Checking if email exists: "${r}"`),console.log(` Email length: ${r.length}`),console.log(` Email trimmed: "${r.trim()}"`);const{data:n,error:i}=await te.from("users").select("id, email").eq("email",r).limit(1);if(console.log(" Supabase query result:",{data:n,error:i}),console.log(" Data length:",n?.length||0),i)return console.error(" Error checking email:",i),console.log(" Returning false due to error"),!1;const o=n&&n.length>0;return console.log(` Email exists result: ${o}`),o&&n&&console.log(" Existing user details:",n[0]),o}catch(n){return console.error(" Exception in checkEmailExists:",n),console.log(" Returning false due to exception"),!1}}async checkForOrphanedAuthUsers(){try{return[]}catch(r){return console.error("Error checking for orphaned auth users:",r),[]}}async cleanupOrphanedAuthUser(r){try{nl&&Ai||console.warn("Admin client not available, trying edge function...");const{error:n}=await te.functions.invoke("delete-user-admin",{body:{userId:r,forceAuthDelete:!0}});if(n)throw console.error("Edge function cleanup failed:",n),new Error(`Failed to cleanup orphaned auth user: ${n.message}`);console.log("Successfully cleaned up orphaned auth user via edge function")}catch(n){throw console.error("Error cleaning up orphaned auth user:",n),n}}async seedUsers(){try{const r=[{name:"Regular User",address:"123 Main St",username:"user",password:"1234567890",email:"user@restaurantapp.com",phoneNumber:"555-1234",role:"user"},{name:"Admin Account",address:"Admin St",username:"admin",password:"0987654321",email:"admin@restaurantapp.com",phoneNumber:"555-0000",role:"admin"}];for(const n of r)await this.checkUsernameExists(n.username)||await this.createUser(n)}catch(r){console.error("Error seeding users:",r)}}mapDatabaseUserToAppUser(r){return{id:r.id,name:r.name,address:r.address,username:r.username,password:r.password,email:r.email,phoneNumber:r.phone_number,profileImage:r.profile_image,role:r.role,comments:r.comments}}}const Va=new iw,S0=E.createContext(null);function ow({children:c}){const[r,n]=E.useState([]),[i,o]=E.useState(!0),[u,m]=E.useState(null),f=async()=>{try{o(!0),m(null);const b=await Va.getAllUsers();if(b.length===0){await Va.seedUsers();const S=await Va.getAllUsers();n(S)}else n(b)}catch(b){console.error("Error loading users:",b),m("Failed to load users")}finally{o(!1)}};E.useEffect(()=>{f()},[]);const g=async b=>{try{m(null);const S=await Va.createUser(b);S&&n(w=>[S,...w])}catch(S){throw console.error("Error creating user:",S),m(S.message||"Failed to create user"),S}},x=async(b,S)=>{try{m(null);const w=await Va.updateUser(b,S);w&&n(_=>_.map(O=>O.id===b?w:O))}catch(w){throw console.error("Error updating user:",w),m(w.message||"Failed to update user"),w}},y=async b=>{try{m(null),await Va.deleteUser(b)&&(n(w=>w.filter(_=>_.id!==b)),await k())}catch(S){throw console.error("Error deleting user:",S),m(S.message||"Failed to delete user"),S}},j=async(b,S)=>{try{return m(null),await Va.authenticateUser(b,S)}catch(w){return console.error("Error authenticating user:",w),m(w.message||"Authentication failed"),null}},k=async()=>{await f()};return s.jsx(S0.Provider,{value:{users:r,createUser:g,updateUser:x,deleteUser:y,authenticate:j,isLoading:i,error:u,refreshUsers:k},children:c})}function ns(){const c=E.useContext(S0);if(!c)throw new Error("useUsers must be inside UsersProvider");return c}function cw(){const[c,r]=E.useState(!1),{id:n}=ms(),{users:i}=ns(),{user:o}=Vt(),u=hs(),m=i.find(f=>f.id===n);return E.useEffect(()=>{!o||!n||o.id!==n&&u(`/user/${o.id}/dashboard`,{replace:!0})},[o,n,u]),s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsxs("header",{className:"flex items-center sm:h-16 px-4 shadow-sm bg-white sticky top-0 z-30",children:[s.jsx(nw,{onClick:()=>r(!0)}),s.jsx("div",{className:"ml-4",children:s.jsx(Be,{to:"/",children:s.jsx("img",{src:Zr,alt:"TWC logo",className:"h-16 sm:h-20 md:h-24 w-auto"})})})]}),s.jsx(lw,{open:c,onClose:()=>r(!1),user:m,userId:n}),s.jsxs("main",{className:"w-full",children:[s.jsx(Xg,{})," "]})]})}class dw{generateOrderNumber(){const r=Date.now(),n=Math.random().toString(36).substr(2,5).toUpperCase();return`ORD-${r}-${n}`}async createOrder(r){try{console.log("OrderService: Creating order with data:",r);const n=this.generateOrderNumber();let i;try{const y=new Date(r.deliveryDate);if(isNaN(y.getTime()))throw new Error("Invalid delivery date");i=y.toISOString().split("T")[0]}catch(y){return console.error("OrderService: Invalid delivery date:",r.deliveryDate,y),null}const o={user_id:r.userId,order_number:n,total:Number(r.total),status:r.paymentMethod==="Pay on Delivery"?"confirmed":"paid",payment_method:r.paymentMethod,delivery_date:i,delivery_time:r.deliveryTime,delivery_address:r.deliveryAddress||"",notes:r.notes||""};console.log("OrderService: Inserting order:",o);const{data:u,error:m}=await te.from("orders").insert(o).select().single();if(m)return console.error("OrderService: Error creating order:",m),console.error("OrderService: Error details:",{message:m.message,details:m.details,hint:m.hint,code:m.code}),null;console.log("OrderService: Order created successfully:",u);const f=r.items.map(y=>({order_id:u.id,menu_item_id:y.menuItemId||null,menu_item_name:y.menuItemName,menu_item_ingredients:y.menuItemIngredients||"",unit_size:y.unitSize||"",abv:Number(y.abv)||0,price:Number(y.price),quantity:Number(y.quantity),subtotal:Number(y.price)*Number(y.quantity)}));console.log("OrderService: Inserting order items:",f);const{data:g,error:x}=await te.from("order_items").insert(f).select();return x?(console.error("OrderService: Error creating order items:",x),console.error("OrderService: Order items error details:",{message:x.message,details:x.details,hint:x.hint,code:x.code}),await te.from("orders").delete().eq("id",u.id),null):(console.log("OrderService: Order items created successfully:",g),{id:u.id,userId:u.user_id,orderNumber:u.order_number,total:u.total,status:u.status,paymentMethod:u.payment_method,deliveryDate:u.delivery_date,deliveryTime:u.delivery_time,deliveryAddress:u.delivery_address,notes:u.notes,items:g.map(y=>({id:y.id,menuItemId:y.menu_item_id,menuItemName:y.menu_item_name,menuItemIngredients:y.menu_item_ingredients,unitSize:y.unit_size,abv:y.abv,price:y.price,quantity:y.quantity,subtotal:y.subtotal})),createdAt:u.created_at,updatedAt:u.updated_at})}catch(n){return console.error("Error in createOrder:",n),null}}async getUserOrders(r){try{const{data:n,error:i}=await te.from("orders").select(`
          *,
          order_items (*)
        `).eq("user_id",r).order("created_at",{ascending:!1});return i?(console.error("Error fetching user orders:",i),[]):n.map(o=>({id:o.id,userId:o.user_id,orderNumber:o.order_number,total:o.total,status:o.status,paymentMethod:o.payment_method,deliveryDate:o.delivery_date,deliveryTime:o.delivery_time,deliveryAddress:o.delivery_address,notes:o.notes,items:o.order_items.map(u=>({id:u.id,menuItemId:u.menu_item_id,menuItemName:u.menu_item_name,menuItemIngredients:u.menu_item_ingredients,unitSize:u.unit_size,abv:u.abv,price:u.price,quantity:u.quantity,subtotal:u.subtotal})),createdAt:o.created_at,updatedAt:o.updated_at}))}catch(n){return console.error("Error in getUserOrders:",n),[]}}async getAllOrders(){try{const{data:r,error:n}=await te.from("orders").select(`
          *,
          order_items (*),
          users!orders_user_id_fkey (name, email)
        `).order("created_at",{ascending:!1});return n?(console.error("Error fetching all orders:",n),[]):r.map(i=>({id:i.id,userId:i.user_id,orderNumber:i.order_number,total:i.total,status:i.status,paymentMethod:i.payment_method,deliveryDate:i.delivery_date,deliveryTime:i.delivery_time,deliveryAddress:i.delivery_address,notes:i.notes,items:i.order_items.map(o=>({id:o.id,menuItemId:o.menu_item_id,menuItemName:o.menu_item_name,menuItemIngredients:o.menu_item_ingredients,unitSize:o.unit_size,abv:o.abv,price:o.price,quantity:o.quantity,subtotal:o.subtotal})),createdAt:i.created_at,updatedAt:i.updated_at,userName:i.users?.name,userEmail:i.users?.email}))}catch(r){return console.error("Error in getAllOrders:",r),[]}}async updateOrderStatus(r,n){try{const{error:i}=await te.from("orders").update({status:n}).eq("id",r);return i?(console.error("Error updating order status:",i),!1):!0}catch(i){return console.error("Error in updateOrderStatus:",i),!1}}async getOrderById(r){try{const{data:n,error:i}=await te.from("orders").select(`
          *,
          order_items (*)
        `).eq("id",r).single();return i?(console.error("Error fetching order:",i),null):{id:n.id,userId:n.user_id,orderNumber:n.order_number,total:n.total,status:n.status,paymentMethod:n.payment_method,deliveryDate:n.delivery_date,deliveryTime:n.delivery_time,deliveryAddress:n.delivery_address,notes:n.notes,items:n.order_items.map(o=>({id:o.id,menuItemId:o.menu_item_id,menuItemName:o.menu_item_name,menuItemIngredients:o.menu_item_ingredients,unitSize:o.unit_size,abv:o.abv,price:o.price,quantity:o.quantity,subtotal:o.subtotal})),createdAt:n.created_at,updatedAt:n.updated_at}}catch(n){return console.error("Error in getOrderById:",n),null}}async getRecentOrders(r,n=5){try{const{data:i,error:o}=await te.from("orders").select(`
          *,
          order_items (*)
        `).eq("user_id",r).order("created_at",{ascending:!1}).limit(n);return o?(console.error("Error fetching recent orders:",o),[]):i.map(u=>({id:u.id,userId:u.user_id,orderNumber:u.order_number,total:u.total,status:u.status,paymentMethod:u.payment_method,deliveryDate:u.delivery_date,deliveryTime:u.delivery_time,deliveryAddress:u.delivery_address,notes:u.notes,items:u.order_items.map(m=>({id:m.id,menuItemId:m.menu_item_id,menuItemName:m.menu_item_name,menuItemIngredients:m.menu_item_ingredients,unitSize:m.unit_size,abv:m.abv,price:m.price,quantity:m.quantity,subtotal:m.subtotal})),createdAt:u.created_at,updatedAt:u.updated_at}))}catch(i){return console.error("Error in getRecentOrders:",i),[]}}async deleteOrder(r){try{const{error:n}=await te.from("order_items").delete().eq("order_id",r);if(n)return console.error("Error deleting order items:",n),!1;const{error:i}=await te.from("orders").delete().eq("id",r);return i?(console.error("Error deleting order:",i),!1):!0}catch(n){return console.error("Error in deleteOrder:",n),!1}}}const pa=new dw,Tg=Object.freeze(Object.defineProperty({__proto__:null,orderService:pa},Symbol.toStringTag,{value:"Module"}));function uw(){const{id:c}=ms(),{users:r}=ns(),{user:n,isLoading:i}=Vt(),[o,u]=E.useState([]),[m,f]=E.useState([]),[g,x]=E.useState([]),y=n||r.find(O=>O.id===c);if(E.useEffect(()=>{(async()=>{const P=y?.id||c;if(P)try{const D=await pa.getUserOrders(P);u(D);const z=[];D.slice(0,5).forEach(U=>{U.id&&(z.push({id:U.id,type:"order_placed",message:`Order #${U.orderNumber||U.id.slice(-5)} placed for $${U.total.toFixed(2)}`,timestamp:U.createdAt||new Date().toISOString(),icon:s.jsx(Bs,{className:"w-4 h-4"}),color:"bg-blue-500"}),U.status==="delivered"&&z.push({id:`${U.id}-delivered`,type:"order_delivered",message:`Order #${U.orderNumber||U.id.slice(-5)} delivered successfully`,timestamp:U.deliveryDate,icon:s.jsx(fl,{className:"w-4 h-4"}),color:"bg-emerald-500"}))}),f(z.sort((U,V)=>new Date(V.timestamp).getTime()-new Date(U.timestamp).getTime()))}catch(D){console.error("Error loading orders:",D)}})()},[y?.id,c]),E.useEffect(()=>{const O=localStorage.getItem("supportTickets");if(O){const P=JSON.parse(O),D=y?.id||c,z=P.filter(U=>U.userId===D);x(z)}},[y?.id,c]),i&&!y)return s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"Loading user data..."})]})});if(!y)return s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-600 mb-4",children:"User Not Found"}),s.jsx("p",{className:"text-gray-500",children:"The requested user could not be found."})]})});const j=o.filter(O=>O.status==="paid"||O.status==="confirmed").length,k=o.filter(O=>O.status==="processing"||O.status==="out_for_delivery").length,b=o.filter(O=>O.status==="delivered").length,S=g.filter(O=>O.status==="open"||O.status==="in_progress").length,w=g.filter(O=>O.adminResponse&&O.adminResponseDate&&new Date(O.adminResponseDate)>new Date(Date.now()-10080*60*1e3)).length,_=O=>{const P=new Date(O),z=Math.abs(new Date().getTime()-P.getTime()),U=Math.ceil(z/(1e3*60*60*24));return U===1?"1 day ago":U<7?`${U} days ago`:P.toLocaleDateString()};return s.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6 pb-safe-bottom",children:[s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-emerald-600 rounded-lg p-4 sm:p-6 text-white",children:[s.jsxs("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold mb-2",children:["Welcome back, ",y.name,"!"]}),s.jsx("p",{className:"text-emerald-100 text-sm sm:text-base",children:"Here's what's happening with your orders today"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3 sm:gap-4",children:[s.jsx("div",{className:"bg-white p-4 sm:p-5 rounded-lg shadow-md border border-gray-200 min-h-[80px] flex items-center touch-manipulation",children:s.jsxs("div",{className:"flex items-center w-full",children:[s.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg flex-shrink-0",children:s.jsx(Wr,{className:"w-5 h-5 text-yellow-600"})}),s.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600 truncate",children:"Active Orders"}),s.jsx("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:j})]})]})}),s.jsx("div",{className:"bg-white p-4 sm:p-5 rounded-lg shadow-md border border-gray-200 min-h-[80px] flex items-center touch-manipulation",children:s.jsxs("div",{className:"flex items-center w-full",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg flex-shrink-0",children:s.jsx(Bs,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600 truncate",children:"Processing Orders"}),s.jsx("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:k})]})]})}),s.jsx("div",{className:"bg-white p-4 sm:p-5 rounded-lg shadow-md border border-gray-200 min-h-[80px] flex items-center touch-manipulation",children:s.jsxs("div",{className:"flex items-center w-full",children:[s.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg flex-shrink-0",children:s.jsx(ew,{className:"w-5 h-5 text-emerald-600"})}),s.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600 truncate",children:"Delivered Orders"}),s.jsx("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:b})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx(Ja,{className:"w-5 h-5 text-purple-600"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Active Tickets"}),s.jsx("p",{className:"text-xl font-bold text-gray-900",children:S})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:s.jsx(Ii,{className:"w-5 h-5 text-orange-600"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600",children:"New Responses"}),s.jsx("p",{className:"text-xl font-bold text-gray-900",children:w})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Quick Actions"})}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs(Be,{to:`/user/${c}/inventory`,className:"flex flex-col items-center p-6 border border-gray-300 rounded-lg hover:bg-emerald-50 hover:border-emerald-300 transition-all duration-200 group",children:[s.jsx("div",{className:"p-3 bg-emerald-100 rounded-lg mb-3 group-hover:bg-emerald-200 transition-colors",children:s.jsx(Li,{className:"w-6 h-6 text-emerald-600"})}),s.jsx("span",{className:"font-medium text-gray-900 text-center",children:"Browse Menu"}),s.jsx("span",{className:"text-sm text-gray-500 text-center mt-1",children:"Order delicious drinks"})]}),s.jsxs(Be,{to:`/user/${c}/orders`,className:"flex flex-col items-center p-6 border border-gray-300 rounded-lg hover:bg-blue-50 hover:border-blue-300 transition-all duration-200 group",children:[s.jsx("div",{className:"p-3 bg-blue-100 rounded-lg mb-3 group-hover:bg-blue-200 transition-colors",children:s.jsx(Bs,{className:"w-6 h-6 text-blue-600"})}),s.jsx("span",{className:"font-medium text-gray-900 text-center",children:"My Orders"}),s.jsx("span",{className:"text-sm text-gray-500 text-center mt-1",children:"Track your orders"})]}),s.jsxs(Be,{to:`/user/${c}/support`,className:"flex flex-col items-center p-6 border border-gray-300 rounded-lg hover:bg-purple-50 hover:border-purple-300 transition-all duration-200 group",children:[s.jsx("div",{className:"p-3 bg-purple-100 rounded-lg mb-3 group-hover:bg-purple-200 transition-colors",children:s.jsx(b0,{className:"w-6 h-6 text-purple-600"})}),s.jsx("span",{className:"font-medium text-gray-900 text-center",children:"Get Support"}),s.jsx("span",{className:"text-sm text-gray-500 text-center mt-1",children:"Need help?"})]}),s.jsxs(Be,{to:`/user/${c}/settings`,className:"flex flex-col items-center p-6 border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 group",children:[s.jsx("div",{className:"p-3 bg-gray-100 rounded-lg mb-3 group-hover:bg-gray-200 transition-colors",children:s.jsx(Od,{className:"w-6 h-6 text-gray-600"})}),s.jsx("span",{className:"font-medium text-gray-900 text-center",children:"Settings"}),s.jsx("span",{className:"text-sm text-gray-500 text-center mt-1",children:"Manage account"})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Activities"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Your latest order updates"})]}),s.jsx("div",{className:"p-6",children:m.length>0?s.jsx("div",{className:"space-y-4",children:m.map(O=>s.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-50 rounded-lg",children:[s.jsx("div",{className:`p-2 rounded-full ${O.color}`,children:O.icon}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:O.message}),s.jsx("p",{className:"text-xs text-gray-500",children:_(O.timestamp)})]})]},O.id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Bs,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No recent activities"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Your order activities will appear here"})]})})]})]})}const hw=c=>{const r=[["Order ID","Customer Name","Order Date","Delivery Date","Delivery Time","Status","Payment Method","Total"],[c.id||"",c.userName||"Unknown",new Date(c.createdAt||"").toLocaleDateString(),new Date(c.deliveryDate).toLocaleDateString(),c.deliveryTime,c.status,c.paymentMethod,`$${c.total.toFixed(2)}`],[],["Item Name","Category","Size","ABV","Price","Quantity","Subtotal"],...c.items.map(u=>[u.menuItemName,"N/A",u.unitSize||"N/A",u.abv&&u.abv>0?`${u.abv}%`:"N/A",`$${u.price.toFixed(2)}`,u.quantity,`$${(u.price*u.quantity).toFixed(2)}`])].map(u=>u.join(",")).join(`
`),n=new Blob([r],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),o=URL.createObjectURL(n);i.setAttribute("href",o),i.setAttribute("download",`order-${c.id}.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)};function _0({order:c,isOpen:r,onClose:n}){const[i,o]=E.useState(!1),u=async()=>{if(c){o(!0);try{hw(c)}catch(f){console.error("Export failed:",f),alert("Failed to export order. Please try again.")}finally{o(!1)}}},m=f=>{switch(f){case"paid":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Paid"});case"confirmed":case"processing":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Processing"});case"out_for_delivery":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:"Out for Delivery"});case"delivered":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Delivered"});case"cancelled":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Cancelled"});default:return null}};return!r||!c?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Order Details"}),s.jsx("p",{className:"text-sm text-gray-600",children:c.id})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:u,disabled:i,className:"px-4 py-2 bg-emerald-600 text-white text-sm rounded-lg hover:bg-emerald-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center space-x-2",children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Exporting..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("span",{children:"Export CSV"})]})}),s.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Order Information"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Order ID:"}),s.jsx("span",{className:"font-medium",children:c.id})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Customer:"}),s.jsx("span",{className:"font-medium",children:c.userName||"Unknown"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Order Date:"}),s.jsx("span",{className:"font-medium",children:new Date(c.createdAt||"").toLocaleDateString()})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Status:"}),s.jsx("span",{children:m(c.status)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Payment Method:"}),s.jsx("span",{className:"font-medium",children:c.paymentMethod})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Delivery Information"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Delivery Date:"}),s.jsx("span",{className:"font-medium",children:new Date(c.deliveryDate).toLocaleDateString()})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Delivery Time:"}),s.jsx("span",{className:"font-medium",children:c.deliveryTime})]})]})]})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Order Summary"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Total Items:"}),s.jsx("span",{className:"font-medium",children:c.items.length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Total Quantity:"}),s.jsx("span",{className:"font-medium",children:c.items.reduce((f,g)=>f+g.quantity,0)})]}),s.jsxs("div",{className:"flex justify-between text-lg font-medium border-t pt-2",children:[s.jsx("span",{children:"Total Amount:"}),s.jsxs("span",{children:["$",c.total.toFixed(2)]})]})]})]})})]}),s.jsxs("div",{className:"mt-6",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Order Items"}),s.jsx("div",{className:"bg-white border rounded-lg overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Size"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subtotal"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.items.map(f=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg flex items-center justify-center overflow-hidden mr-3",children:s.jsx("span",{className:"text-gray-500 text-xs",children:"No Image"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:f.menuItemName}),s.jsx("div",{className:"text-sm text-gray-500",children:f.menuItemIngredients||"No ingredients listed"})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 capitalize",children:"N/A"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:f.unitSize||"N/A"}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",f.price.toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:f.quantity}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["$",(f.price*f.quantity).toFixed(2)]})]},f.id))})]})})})]})]})]})})}class as{static CACHE_EXPIRY=300*1e3;static getFromCache(r){try{const n=localStorage.getItem(r);if(!n)return null;const i=JSON.parse(n),o=Date.now();return i.timestamp&&o-i.timestamp<this.CACHE_EXPIRY?i.data:(localStorage.removeItem(r),null)}catch{return null}}static setToCache(r,n){try{const i={data:n,timestamp:Date.now()};localStorage.setItem(r,JSON.stringify(i))}catch{}}static getUserMenuCache(r){return this.getFromCache(`userMenu_${r}`)}static setUserMenuCache(r,n){this.setToCache(`userMenu_${r}`,n)}static getUserOrdersCache(r){return this.getFromCache(`userOrders_${r}`)}static setUserOrdersCache(r,n){this.setToCache(`userOrders_${r}`,n)}static getUserCartCache(r){return this.getFromCache(`userCart_${r}`)}static setUserCartCache(r,n){this.setToCache(`userCart_${r}`,n)}static getDeliverySlotsCache(){return this.getFromCache("deliverySlots")}static setDeliverySlotsCache(r){this.setToCache("deliverySlots",r)}static clearUserCache(r){localStorage.removeItem(`userMenu_${r}`),localStorage.removeItem(`userOrders_${r}`),localStorage.removeItem(`userCart_${r}`)}static clearUserMenuCache(r){r?localStorage.removeItem(`userMenu_${r}`):Object.keys(localStorage).forEach(i=>{i.startsWith("userMenu_")&&localStorage.removeItem(i)})}static clearAllCache(){Object.keys(localStorage).forEach(n=>{(n.startsWith("userMenu_")||n.startsWith("userOrders_")||n.startsWith("userCart_")||n==="deliverySlots")&&localStorage.removeItem(n)})}}function mw(){const{id:c}=ms(),r=hs(),{users:n}=ns(),{user:i,isLoading:o}=Vt(),u=i||n.find(W=>W.id===c),m=`orders_loaded_${u?.id||c}`,f=sessionStorage.getItem(m)==="true",[g,x]=E.useState(()=>u?.id||c?as.getUserOrdersCache(u?.id||c)||[]:[]),[y,j]=E.useState(null),[k,b]=E.useState(!1),[S,w]=E.useState(!f);E.useEffect(()=>{const W=async()=>{const ne=u?.id||c;if(ne)try{const ee=await pa.getUserOrders(ne);x(ee),as.setUserOrdersCache(ne,ee),sessionStorage.setItem(m,"true")}catch(ee){console.error("Error loading orders:",ee)}finally{w(!1)}else w(!1)};w(!f),W()},[u?.id,c]);const _=g.filter(W=>W.status==="paid"||W.status==="confirmed"),O=g.filter(W=>W.status==="processing"||W.status==="out_for_delivery"),P=g.filter(W=>W.status==="delivered"),D=g.length,z=W=>{switch(W){case"paid":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Paid"});case"confirmed":case"processing":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Processing"});case"out_for_delivery":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:"Out for Delivery"});case"delivered":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Delivered"});case"cancelled":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Cancelled"});default:return null}},U=W=>{switch(W){case"paid":return"Your order has been paid and is waiting to be processed by our team.";case"confirmed":case"processing":return"Your order is being prepared and will be delivered on the scheduled date.";case"out_for_delivery":return"Your order is on its way to you.";case"delivered":return"Your order has been successfully delivered.";case"cancelled":return"This order has been cancelled.";default:return""}},V=W=>{j(W),b(!0)},H=()=>{b(!1),j(null)},le=W=>{const ne=W.items.map(ee=>({id:ee.menuItemId||`temp-${Date.now()}-${Math.random()}`,name:ee.menuItemName,ingredients:ee.menuItemIngredients||"",unitSize:ee.unitSize||"",abv:ee.abv||0,price:ee.price,imageUrl:"",category:"",inStock:!0,createdAt:new Date,quantity:ee.quantity}));r(`/user/${c}/delivery-time`,{state:{cart:ne}})};return o&&!u?s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"Loading..."})]})}):u?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"mx-5 mt-2 text-3xl font-bold",children:"My Orders"}),s.jsx("p",{className:"mx-5 text-gray-600",children:"Track your ongoing orders and view order history"})]}),s.jsx(Gt,{to:`/user/${c}/inventory`,className:"mx-5 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Order from Menu"})]}),g.length>0&&s.jsxs("div",{className:"mx-5 grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:_.length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Active Orders"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:O.length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Processing"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:P.length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-600",children:D}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Orders"})]})]}),_.length>0&&s.jsxs("div",{className:"mx-5 bg-white rounded-lg shadow-md",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Active Orders"})}),s.jsx("div",{className:"divide-y divide-gray-200",children:_.map(W=>s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:W.orderNumber||W.id}),s.jsx("p",{className:"text-sm text-gray-600",children:W.items.map(ne=>ne.menuItemName).join(", ")})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-lg font-medium text-gray-900",children:["$",W.total.toFixed(2)]}),z(W.status)]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm text-gray-600 mb-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Order Date:"})," ",new Date(W.createdAt||"").toLocaleDateString()]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Delivery Date:"})," ",new Date(W.deliveryDate).toLocaleDateString()]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Delivery Time:"})," ",W.deliveryTime]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Items:"})," ",W.items.length," items"]})]}),s.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:s.jsx("p",{className:"text-sm text-gray-600",children:U(W.status)})}),s.jsx("div",{className:"flex space-x-2",children:s.jsx("button",{onClick:()=>V(W),className:"text-emerald-600 hover:text-emerald-700 text-sm font-medium",children:"View Details"})})]},W.id))})]}),P.length>0&&s.jsxs("div",{className:"mx-5 bg-white rounded-lg shadow-md",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Completed Orders"})}),s.jsx("div",{className:"divide-y divide-gray-200",children:P.slice(0,5).map(W=>s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:W.orderNumber||W.id}),s.jsx("p",{className:"text-sm text-gray-600",children:W.items.map(ne=>ne.menuItemName).join(", ")})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-lg font-medium text-gray-900",children:["$",W.total.toFixed(2)]}),z(W.status)]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Order Date:"})," ",new Date(W.createdAt||"").toLocaleDateString()]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Delivery Date:"})," ",new Date(W.deliveryDate).toLocaleDateString()]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Items:"})," ",W.items.length," items"]})]}),s.jsxs("div",{className:"mt-4 flex space-x-2",children:[s.jsx("button",{onClick:()=>V(W),className:"text-emerald-600 hover:text-emerald-700 text-sm font-medium",children:"View Details"}),s.jsx("button",{onClick:()=>le(W),className:"text-gray-600 hover:text-gray-700 text-sm font-medium",children:"Reorder"})]})]},W.id))})]}),!f&&S&&g.length===0&&s.jsxs("div",{className:"mx-5 bg-white rounded-lg shadow-md p-8 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading your orders..."})]}),!S&&g.length===0&&s.jsxs("div",{className:"mx-5 bg-white rounded-lg shadow-md p-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Orders Yet"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"You haven't placed any orders yet. Start shopping to see your orders here."}),s.jsx(Gt,{to:`/user/${c}/inventory`,className:"inline-flex px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Browse Menu"})]}),s.jsx(_0,{order:y,isOpen:k,onClose:H})]}):s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-600 mb-4",children:"User Not Found"}),s.jsx("p",{className:"text-gray-500",children:"The requested user could not be found."})]})})}class fw{async getAllMenuItems(r=!1){try{const{data:n,error:i}=await te.from("menu_items").select("*").eq("is_draft",r).order("name",{ascending:!0});if(i)throw console.error("Error fetching menu items:",i),i;return n?.map(this.mapDatabaseItemToMenuItem)||[]}catch(n){return console.error("Error in getAllMenuItems:",n),[]}}async getMenuItemsByCategory(r,n=!1){try{const{data:i,error:o}=await te.from("menu_items").select("*").eq("category",r).eq("is_draft",n).order("name",{ascending:!0});if(o)throw console.error("Error fetching menu items by category:",o),o;return i?.map(this.mapDatabaseItemToMenuItem)||[]}catch(i){return console.error("Error in getMenuItemsByCategory:",i),[]}}async getMenuItemById(r){try{const{data:n,error:i}=await te.from("menu_items").select("*").eq("id",r).single();return i?(console.error("Error fetching menu item:",i),null):n?this.mapDatabaseItemToMenuItem(n):null}catch(n){return console.error("Error in getMenuItemById:",n),null}}async createMenuItem(r){try{const n={name:r.name,ingredients:r.ingredients,unit_size:r.unitSize,abv:r.abv??0,price:r.price,image_url:r.imageUrl,category:r.category,in_stock:r.inStock??!0,is_draft:r.isDraft??!1,assignment_type:r.assignmentType??"all_users"},{data:i,error:o}=await te.from("menu_items").insert([n]).select().single();if(o)throw console.error("Error creating menu item:",o),o;return i?this.mapDatabaseItemToMenuItem(i):null}catch(n){throw console.error("Error in createMenuItem:",n),n}}async updateMenuItem(r,n){try{const i={};n.name!==void 0&&(i.name=n.name),n.ingredients!==void 0&&(i.ingredients=n.ingredients),n.unitSize!==void 0&&(i.unit_size=n.unitSize),n.abv!==void 0&&(i.abv=n.abv),n.price!==void 0&&(i.price=n.price),n.imageUrl!==void 0&&(i.image_url=n.imageUrl),n.category!==void 0&&(i.category=n.category),n.inStock!==void 0&&(i.in_stock=n.inStock),n.isDraft!==void 0&&(i.is_draft=n.isDraft),n.assignmentType!==void 0&&(i.assignment_type=n.assignmentType);const{data:o,error:u}=await te.from("menu_items").update(i).eq("id",r).select().single();if(u)throw console.error("Error updating menu item:",u),u;return o?this.mapDatabaseItemToMenuItem(o):null}catch(i){throw console.error("Error in updateMenuItem:",i),i}}async deleteMenuItem(r){try{const{error:n}=await te.from("menu_items").delete().eq("id",r);if(n)throw console.error("Error deleting menu item:",n),n;return!0}catch(n){return console.error("Error in deleteMenuItem:",n),!1}}async publishDraftItems(r){try{const{error:n}=await te.from("menu_items").update({is_draft:!1}).in("id",r);if(n)throw console.error("Error publishing draft items:",n),n;return!0}catch(n){return console.error("Error in publishDraftItems:",n),!1}}async copyLiveToDraft(){try{const{data:r,error:n}=await te.from("menu_items").select("*").eq("is_draft",!1);if(n)throw console.error("Error fetching live items:",n),n;if(!r||r.length===0)return!0;const i=r.map(u=>({name:u.name,ingredients:u.ingredients,unit_size:u.unit_size,abv:u.abv,price:u.price,image_url:u.image_url,category:u.category,in_stock:u.in_stock,is_draft:!0}));await te.from("menu_items").delete().eq("is_draft",!0);const{error:o}=await te.from("menu_items").insert(i);if(o)throw console.error("Error inserting draft items:",o),o;return!0}catch(r){return console.error("Error in copyLiveToDraft:",r),!1}}async getMenuItemsByAssignmentType(r,n=!1){try{const{data:i,error:o}=await te.from("menu_items").select("*").eq("assignment_type",r).eq("is_draft",n).order("name",{ascending:!0});if(o)throw console.error("Error fetching menu items by assignment type:",o),o;return i?.map(this.mapDatabaseItemToMenuItem)||[]}catch(i){return console.error("Error in getMenuItemsByAssignmentType:",i),[]}}async assignDrinkToUsers(r,n){try{if(await te.from("user_menus").delete().eq("menu_item_id",r),n.length>0){const i=n.map(u=>({user_id:u,menu_item_id:r,is_active:!0})),{error:o}=await te.from("user_menus").insert(i);if(o)throw console.error("Error assigning drink to users:",o),o}return!0}catch(i){return console.error("Error in assignDrinkToUsers:",i),!1}}async getUsersForDrink(r){try{const{data:n,error:i}=await te.from("user_menus").select("user_id").eq("menu_item_id",r).eq("is_active",!0);return i?(console.error("Error fetching users for drink:",i),[]):n?.map(o=>o.user_id)||[]}catch(n){return console.error("Error in getUsersForDrink:",n),[]}}mapDatabaseItemToMenuItem(r){return{id:r.id,name:r.name,ingredients:r.ingredients,unitSize:r.unit_size,abv:r.abv,price:r.price,imageUrl:r.image_url||"",category:r.category,inStock:r.in_stock,assignmentType:r.assignment_type||"all_users",createdAt:new Date(r.created_at)}}async migrateFromLocalStorage(){try{const r=localStorage.getItem("menuItems");if(r){const i=JSON.parse(r);for(const o of i)await this.createMenuItem({name:o.name,ingredients:o.ingredients,unitSize:o.unitSize,abv:o.abv,price:o.price,imageUrl:o.imageUrl,category:o.category,inStock:o.inStock,isDraft:!1,assignmentType:"all_users"})}const n=localStorage.getItem("draftMenuItems");if(n){const i=JSON.parse(n);for(const o of i)await this.createMenuItem({name:o.name,ingredients:o.ingredients,unitSize:o.unitSize,abv:o.abv,price:o.price,imageUrl:o.imageUrl,category:o.category,inStock:o.inStock,isDraft:!0,assignmentType:"all_users"})}console.log("Successfully migrated menu items from localStorage to Supabase")}catch(r){throw console.error("Error migrating from localStorage:",r),r}}}const ct=new fw,Ad=Object.freeze(Object.defineProperty({__proto__:null,menuService:ct},Symbol.toStringTag,{value:"Module"}));class qi{static async getUserMenu(r){try{const n=await ct.getMenuItemsByAssignmentType("all_users",!1),{data:i,error:o}=await te.from("user_menus").select(`
          menu_item_id,
          menu_items (*)
        `).eq("user_id",r).eq("is_active",!0);if(o)return console.error("Error fetching user specialized drinks:",o),n;let u=[];return i&&i.length>0&&(u=i.map(g=>g.menu_items).filter(Boolean).filter(g=>g.assignment_type==="specific_users").map(g=>({id:g.id,name:g.name,ingredients:g.ingredients,unitSize:g.unit_size,abv:g.abv,price:g.price,imageUrl:g.image_url||"",category:g.category,inStock:g.in_stock,assignmentType:g.assignment_type,createdAt:new Date(g.created_at)}))),[...n,...u].filter((g,x,y)=>x===y.findIndex(j=>j.id===g.id))}catch(n){return console.error("Error loading user menu:",n),await ct.getMenuItemsByAssignmentType("all_users",!1)}}static async saveUserSpecializedDrinks(r,n){try{if(await te.from("user_menus").delete().eq("user_id",r),n.length>0){const i=n.map(u=>({user_id:r,menu_item_id:u,is_active:!0})),{error:o}=await te.from("user_menus").insert(i);if(o)throw console.error("Error saving user specialized drinks:",o),o}}catch(i){throw console.error("Error saving user specialized drinks:",i),i}}static async getAllUserMenus(){try{const{data:r,error:n}=await te.from("user_menus").select(`
          user_id,
          menu_item_id,
          menu_items (*)
        `).eq("is_active",!0);if(n)return console.error("Error loading all user menus:",n),{};const i={};return r&&r.forEach(o=>{i[o.user_id]||(i[o.user_id]=[]),o.menu_items&&i[o.user_id].push({id:o.menu_items.id,name:o.menu_items.name,ingredients:o.menu_items.ingredients,unitSize:o.menu_items.unit_size,abv:o.menu_items.abv,price:o.menu_items.price,imageUrl:o.menu_items.image_url||"",category:o.menu_items.category,inStock:o.menu_items.in_stock,assignmentType:o.menu_items.assignment_type||"all_users",createdAt:new Date(o.menu_items.created_at)})}),i}catch(r){return console.error("Error loading all user menus:",r),{}}}static async getSpecializedDrinksAssignments(){try{const{data:r,error:n}=await te.from("user_menus").select(`
          user_id,
          menu_item_id,
          menu_items!inner(assignment_type)
        `).eq("is_active",!0).eq("menu_items.assignment_type","specific_users");if(n)return console.error("Error loading specialized drink assignments:",n),{};const i={};return r&&r.forEach(o=>{i[o.menu_item_id]||(i[o.menu_item_id]=[]),i[o.menu_item_id].push(o.user_id)}),i}catch(r){return console.error("Error loading specialized drink assignments:",r),{}}}static async getAllSpecializedDrinksWithUsers(){try{const r=await ct.getMenuItemsByAssignmentType("specific_users",!1),n=await this.getSpecializedDrinksAssignments(),i={};return r.forEach(o=>{i[o.id]={drink:o,userIds:n[o.id]||[]}}),i}catch(r){return console.error("Error loading specialized drinks with users:",r),{}}}static async hasSpecializedDrinks(r){try{const{data:n,error:i}=await te.from("user_menus").select("id").eq("user_id",r).eq("is_active",!0).limit(1);return i?(console.error("Error checking specialized drinks:",i),!1):n&&n.length>0}catch(n){return console.error("Error checking specialized drinks:",n),!1}}static async migrateFromLocalStorage(){try{for(let r=0;r<localStorage.length;r++){const n=localStorage.key(r);if(n&&n.startsWith("userMenu_")){const i=n.replace("userMenu_",""),o=localStorage.getItem(n);if(o){const u=JSON.parse(o),m=[];for(const f of u)if(await ct.getMenuItemById(f.id))m.push(f.id);else{const x=await ct.createMenuItem({name:f.name,ingredients:f.ingredients,unitSize:f.unitSize,abv:f.abv,price:f.price,imageUrl:f.imageUrl,category:f.category,inStock:f.inStock,isDraft:!1});x&&m.push(x.id)}await this.saveUserSpecializedDrinks(i,m)}}}console.log("Successfully migrated user menus from localStorage to Supabase")}catch(r){throw console.error("Error migrating user menus from localStorage:",r),r}}}class gw{async getCart(r){try{const{data:n,error:i}=await te.from("shopping_carts").select(`
          quantity,
          menu_items (*)
        `).eq("user_id",r);return i?(console.error("Error fetching cart:",i),[]):n?n.filter(o=>o.menu_items).map(o=>({id:o.menu_items.id,name:o.menu_items.name,ingredients:o.menu_items.ingredients,unitSize:o.menu_items.unit_size,abv:o.menu_items.abv,price:o.menu_items.price,imageUrl:o.menu_items.image_url||"",category:o.menu_items.category,inStock:o.menu_items.in_stock,assignmentType:o.menu_items.assignment_type||"all_users",createdAt:new Date(o.menu_items.created_at),quantity:o.quantity})):[]}catch(n){return console.error("Error in getCart:",n),[]}}async addToCart(r,n,i){try{try{const m=await ct.getMenuItemById(n);if(!m||m.inStock===!1)return console.warn("Attempt to add out-of-stock item to cart:",n),!1}catch(m){console.warn("Failed to verify menu item stock before adding to cart",m)}const{data:o,error:u}=await te.from("shopping_carts").select("*").eq("user_id",r).eq("menu_item_id",n).single();if(u&&u.code!=="PGRST116")throw console.error("Error checking existing cart item:",u),u;if(o){const{error:m}=await te.from("shopping_carts").update({quantity:o.quantity+i}).eq("id",o.id);if(m)throw console.error("Error updating cart item:",m),m}else{const{error:m}=await te.from("shopping_carts").insert([{user_id:r,menu_item_id:n,quantity:i}]);if(m)throw console.error("Error adding item to cart:",m),m}return!0}catch(o){return console.error("Error in addToCart:",o),!1}}async updateCartItem(r,n,i){try{if(i<=0)return await this.removeFromCart(r,n);const{error:o}=await te.from("shopping_carts").update({quantity:i}).eq("user_id",r).eq("menu_item_id",n);if(o)throw console.error("Error updating cart item:",o),o;return!0}catch(o){return console.error("Error in updateCartItem:",o),!1}}async removeFromCart(r,n){try{const{error:i}=await te.from("shopping_carts").delete().eq("user_id",r).eq("menu_item_id",n);if(i)throw console.error("Error removing item from cart:",i),i;return!0}catch(i){return console.error("Error in removeFromCart:",i),!1}}async clearCart(r){try{const{error:n}=await te.from("shopping_carts").delete().eq("user_id",r);if(n)throw console.error("Error clearing cart:",n),n;return!0}catch(n){return console.error("Error in clearCart:",n),!1}}async getCartItemCount(r){try{const{data:n,error:i}=await te.from("shopping_carts").select("quantity").eq("user_id",r);return i?(console.error("Error fetching cart count:",i),0):n?.reduce((o,u)=>o+u.quantity,0)||0}catch(n){return console.error("Error in getCartItemCount:",n),0}}async getCartTotal(r){try{return(await this.getCart(r)).reduce((i,o)=>i+o.price*o.quantity,0)}catch(n){return console.error("Error in getCartTotal:",n),0}}}const Xa=new gw;function xw(){const{id:c}=ms(),{users:r}=ns(),{user:n,isLoading:i}=Vt(),{startNavigation:o}=rs(),[u,m]=E.useState(()=>c?as.getUserMenuCache(c)||[]:[]),[f,g]=E.useState(()=>c?as.getUserCartCache(c)||[]:[]),[x,y]=E.useState(""),[j,k]=E.useState("all"),[b,S]=E.useState("name"),[w,_]=E.useState(!1),[O,P]=E.useState({}),D=`inventory_loaded_${c}`,z=sessionStorage.getItem(D)==="true",[U,V]=E.useState(!z),H=n||r.find(N=>N.id===c);E.useEffect(()=>{const N=async()=>{if(c)try{const I=await qi.getUserMenu(c);m(I),as.setUserMenuCache(c,I),sessionStorage.setItem(D,"true");const se=await Xa.getCart(c);g(se),as.setUserCartCache(c,se)}catch(I){console.error("Error loading user data:",I)}finally{V(!1)}else try{const{menuService:I}=await rt(async()=>{const{menuService:ae}=await Promise.resolve().then(()=>Ad);return{menuService:ae}},void 0),se=await I.getAllMenuItems(!1);m(se),sessionStorage.setItem(D,"true")}catch(I){console.error("Error loading general menu:",I)}finally{V(!1)}};if(c){const I=as.getUserMenuCache(c);!I||I.length===0?V(!0):V(!1)}N()},[c]);const le=async()=>{if(c)try{const N=await Xa.getCart(c);g(N)}catch(N){console.error("Error refreshing cart:",N)}},W=async()=>{if(c)try{as.clearUserMenuCache(c);const N=await qi.getUserMenu(c);m(N),as.setUserMenuCache(c,N),console.log("Menu refreshed with latest data")}catch(N){console.error("Error refreshing menu:",N)}};E.useEffect(()=>{const N=()=>{document.visibilityState==="visible"&&(le(),W())},I=()=>{le(),W()};return document.addEventListener("visibilitychange",N),window.addEventListener("focus",I),()=>{document.removeEventListener("visibilitychange",N),window.removeEventListener("focus",I)}},[c]);const ne=u.filter(N=>{const I=N.name.toLowerCase().includes(x.toLowerCase())||N.ingredients.toLowerCase().includes(x.toLowerCase()),se=j==="all"||N.category===j;return I&&se}).sort((N,I)=>{switch(b){case"price-low":return N.price-I.price;case"price-high":return I.price-N.price;case"name":return N.name.localeCompare(I.name);default:return 0}}),ee=async N=>{if(!c)return;if(!N.inStock){alert("This item is currently out of stock");return}const I=O[N.id]||1;try{await Xa.addToCart(c,N.id,I)&&(g(ae=>ae.find(we=>we.id===N.id)?ae.map(we=>we.id===N.id?{...we,quantity:we.quantity+I}:we):[...ae,{...N,quantity:I}]),P(ae=>({...ae,[N.id]:1})))}catch(se){console.error("Error adding to cart:",se)}},ie=async N=>{if(c)try{await Xa.removeFromCart(c,N)&&g(se=>se.filter(ae=>ae.id!==N))}catch(I){console.error("Error removing from cart:",I)}},fe=async(N,I)=>{if(c){if(I<=0){await ie(N);return}try{await Xa.updateCartItem(c,N,I)&&g(ae=>ae.map(he=>he.id===N?{...he,quantity:I}:he))}catch(se){console.error("Error updating cart quantity:",se)}}},Y=f.reduce((N,I)=>N+I.price*I.quantity,0),ce=f.reduce((N,I)=>N+I.quantity,0),T=N=>O[N]||1,L=(N,I)=>{I<1||P(se=>({...se,[N]:I}))},X=N=>{L(N,T(N)+1)},Ne=N=>{L(N,T(N)-1)};return i&&!H?s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"Loading..."})]})}):H?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"mt-2 mx-5 text-3xl font-bold",children:"Our Inventory"}),s.jsx("p",{className:"mx-5 text-gray-600",children:"Browse our selection of premium beverages and place your order"})]}),s.jsx("div",{className:"relative",children:s.jsxs("button",{onClick:()=>_(!0),className:"mt-2 mx-5 relative p-3 bg-emerald-600 text-white rounded-full hover:bg-emerald-700 transition-colors shadow-lg",children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m8 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"})}),ce>0&&s.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center",children:ce})]})})]}),s.jsx("div",{className:"mx-4 bg-white p-4 rounded-lg shadow-md",children:s.jsxs("div",{className:"flex flex-wrap gap-4",children:[s.jsx("input",{type:"text",placeholder:"Search menu items...",value:x,onChange:N=>y(N.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}),s.jsxs("select",{value:j,onChange:N=>k(N.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[s.jsx("option",{value:"all",children:"All Categories"}),s.jsx("option",{value:"wine",children:"Wine"}),s.jsx("option",{value:"beer",children:"Beer"}),s.jsx("option",{value:"spirits",children:"Spirits"}),s.jsx("option",{value:"cocktails",children:"Cocktails"}),s.jsx("option",{value:"mixers",children:"Mixers"})]}),s.jsxs("select",{value:b,onChange:N=>S(N.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[s.jsx("option",{value:"name",children:"Name: A to Z"}),s.jsx("option",{value:"price-low",children:"Price: Low to High"}),s.jsx("option",{value:"price-high",children:"Price: High to Low"})]})]})}),s.jsx("div",{className:"w-full",children:s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4 px-4",children:ne.map(N=>s.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[s.jsx("div",{className:"h-40 bg-gray-200 flex items-center justify-center overflow-hidden",children:N.imageUrl?s.jsx("img",{src:N.imageUrl,alt:N.name,className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-gray-500",children:"No Image"})}),s.jsxs("div",{className:"p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:N.name}),s.jsxs("div",{className:"flex items-center space-x-2",children:[N.assignmentType==="specific_users"&&s.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded-full",children:"Specialized"}),!N.inStock&&s.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs font-medium rounded-full",children:"Out of Stock"})]})]}),s.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:N.ingredients}),s.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[s.jsxs("div",{children:["Size: ",N.unitSize]}),N.abv>0&&s.jsxs("div",{children:["ABV: ",N.abv,"%"]}),s.jsxs("div",{className:"font-medium text-gray-900",children:["$",N.price.toFixed(2)]})]}),s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs text-gray-600",children:"Quantity:"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>Ne(N.id),className:`w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center text-sm ${N.inStock?"hover:bg-gray-300":"opacity-50 cursor-not-allowed"}`,disabled:!N.inStock,children:"-"}),s.jsx("input",{type:"number",min:"1",value:T(N.id),onChange:I=>L(N.id,parseInt(I.target.value)||1),className:`w-12 text-center text-sm border border-gray-300 rounded px-1 py-1 ${N.inStock?"":"bg-gray-100"}`,disabled:!N.inStock}),s.jsx("button",{onClick:()=>X(N.id),className:`w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center text-sm ${N.inStock?"hover:bg-gray-300":"opacity-50 cursor-not-allowed"}`,disabled:!N.inStock,children:"+"})]})]}),N.inStock?s.jsx("button",{onClick:()=>ee(N),className:"w-full px-3 py-1 bg-emerald-600 text-white text-sm rounded hover:bg-emerald-700 transition-colors",children:"Add to Cart"}):s.jsx("button",{className:"w-full px-3 py-1 bg-gray-300 text-gray-700 text-sm rounded cursor-not-allowed",disabled:!0,children:"Out of stock"})]})]})]},N.id))})}),!z&&U&&u.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading menu items..."})]}):ne.length===0?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:x||j!=="all"?"No items match your search criteria.":"No items available at the moment."})}):null,w&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[80vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Shopping Cart (",ce," items)"]}),s.jsx("button",{onClick:()=>_(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"p-4 overflow-y-auto max-h-[60vh]",children:f.length===0?s.jsx("p",{className:"text-gray-500 text-center py-8",children:"Your cart is empty"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"space-y-3 mb-4",children:f.map(N=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:N.name}),s.jsxs("p",{className:"text-xs text-gray-600",children:["$",N.price.toFixed(2)," each"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>fe(N.id,N.quantity-1),className:"w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center hover:bg-gray-300 text-sm",children:"-"}),s.jsx("span",{className:"w-8 text-center text-sm",children:N.quantity}),s.jsx("button",{onClick:()=>fe(N.id,N.quantity+1),className:"w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center hover:bg-gray-300 text-sm",children:"+"}),s.jsx("button",{onClick:()=>ie(N.id),className:"ml-2 text-red-600 hover:text-red-700 text-xs",children:"Remove"})]})]},N.id))}),s.jsxs("div",{className:"border-t pt-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Subtotal:"}),s.jsxs("span",{children:["$",Y.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Shipping:"}),s.jsx("span",{children:"$0.00"})]}),s.jsx("div",{className:"border-t pt-2",children:s.jsxs("div",{className:"flex justify-between font-medium",children:[s.jsx("span",{children:"Total:"}),s.jsxs("span",{children:["$",Y.toFixed(2)]})]})})]})]})}),f.length>0&&s.jsx("div",{className:"p-4 border-t",children:s.jsx("button",{onClick:async()=>{sessionStorage.setItem("checkout-cart",JSON.stringify(f)),await o(`/user/${c}/delivery-time`)},className:"w-full px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Proceed to Checkout"})})]})})]}):s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-600 mb-4",children:"User Not Found"}),s.jsx("p",{className:"text-gray-500",children:"The requested user could not be found."})]})})}function pw({isOpen:c,onClose:r,onSubmit:n,user:i}){const[o,u]=E.useState({subject:"",category:"",priority:"medium",description:""}),[m,f]=E.useState(!1),[g,x]=E.useState(""),y=b=>{const{name:S,value:w}=b.target;u(_=>({..._,[S]:w}))},j=async b=>{if(b.preventDefault(),x(""),!o.subject.trim()){x("Please enter a subject");return}if(!o.category){x("Please select a category");return}if(!o.description.trim()){x("Please enter a description");return}f(!0);try{const S={userId:i.id,userName:i.name,userEmail:i.email,subject:o.subject.trim(),category:o.category,priority:o.priority,description:o.description.trim()};await n(S),u({subject:"",category:"",priority:"medium",description:""}),r()}catch{x("Failed to submit ticket. Please try again.")}finally{f(!1)}},k=()=>{m||(u({subject:"",category:"",priority:"medium",description:""}),x(""),r())};return c?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Create Support Ticket"}),s.jsx("button",{onClick:k,disabled:m,className:"p-3 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 touch-manipulation min-h-[44px] min-w-[44px] flex items-center justify-center",children:s.jsx(rw,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:j,className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[g&&s.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[s.jsx(Pi,{className:"w-5 h-5 text-red-500"}),s.jsx("span",{className:"text-red-700 text-sm",children:g})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject *"}),s.jsx("input",{type:"text",name:"subject",value:o.subject,onChange:y,placeholder:"Brief description of your issue",className:"w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 touch-manipulation",disabled:m})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),s.jsxs("select",{name:"category",value:o.category,onChange:y,className:"w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 touch-manipulation",disabled:m,children:[s.jsx("option",{value:"",children:"Select a category"}),s.jsx("option",{value:"order",children:"Order Issues"}),s.jsx("option",{value:"shipping",children:"Shipping & Delivery"}),s.jsx("option",{value:"product",children:"Product Quality"}),s.jsx("option",{value:"account",children:"Account Access"}),s.jsx("option",{value:"payment",children:"Payment Issues"}),s.jsx("option",{value:"technical",children:"Technical Issues"}),s.jsx("option",{value:"other",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),s.jsxs("select",{name:"priority",value:o.priority,onChange:y,className:"w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 touch-manipulation",disabled:m,children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),s.jsx("textarea",{name:"description",value:o.description,onChange:y,rows:6,placeholder:"Please provide detailed information about your issue. Include order numbers if applicable, steps to reproduce the problem, and any relevant details...",className:"w-full px-3 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none touch-manipulation",disabled:m})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Ticket Information"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Submitted by:"}),s.jsx("p",{className:"font-medium text-gray-900",children:i.name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Email:"}),s.jsx("p",{className:"font-medium text-gray-900",children:i.email})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:k,disabled:m,className:"px-4 py-3 text-base text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50 touch-manipulation min-h-[48px]",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:m,className:"px-4 py-3 text-base bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 flex items-center justify-center space-x-2 touch-manipulation min-h-[48px]",children:m?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Submitting..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Xj,{className:"w-4 h-4"}),s.jsx("span",{children:"Submit Ticket"})]})})]})]})]})}):null}function yw(){const{id:c}=ms(),{users:r}=ns(),{user:n,isLoading:i}=Vt(),[o,u]=E.useState(!1),[m,f]=E.useState([]),[g,x]=E.useState(!0),[y,j]=E.useState(""),[k,b]=E.useState(new Set),S=n||r.find(z=>z.id===c);E.useEffect(()=>{const z=()=>{try{const H=localStorage.getItem("adminSettings");if(H){const le=JSON.parse(H);le.phoneNumber&&j(le.phoneNumber)}}catch(H){console.error("Failed to load admin phone from settings:",H)}};z();const U=H=>{H.detail&&H.detail.phoneNumber&&j(H.detail.phoneNumber)},V=H=>{H.key==="adminSettings"&&z()};return window.addEventListener("adminSettingsUpdated",U),window.addEventListener("storage",V),()=>{window.removeEventListener("adminSettingsUpdated",U),window.removeEventListener("storage",V)}},[]),E.useEffect(()=>{const z=localStorage.getItem("supportTickets");if(z){const U=JSON.parse(z),V=S?.id||c,H=U.filter(le=>le.userId===V);f(H.sort((le,W)=>new Date(W.createdAt).getTime()-new Date(le.createdAt).getTime()))}x(!1)},[S?.id,c]);const w=async z=>{const U={...z,id:`TICKET-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,status:"open",createdAt:new Date().toISOString()},V=JSON.parse(localStorage.getItem("supportTickets")||"[]");V.push(U),localStorage.setItem("supportTickets",JSON.stringify(V)),f(H=>[U,...H])},_=z=>{b(U=>{const V=new Set(U);return V.has(z)?V.delete(z):V.add(z),V})},O=z=>{switch(z){case"open":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Open"});case"in_progress":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"In Progress"});case"resolved":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Resolved"});case"closed":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Closed"});default:return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:z})}},P=z=>{switch(z){case"urgent":return s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800",children:"Urgent"});case"high":return s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-orange-100 text-orange-800",children:"High"});case"medium":return s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-yellow-100 text-yellow-800",children:"Medium"});case"low":return s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800",children:"Low"});default:return s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800",children:z})}},D=z=>new Date(z).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return i&&!S?s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"Loading..."})]})}):S?s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Support Center"}),s.jsx("p",{className:"text-gray-600",children:"Get help with your orders and account issues"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(b0,{className:"w-6 h-6 text-blue-600"})}),s.jsx("h3",{className:"ml-3 text-lg font-medium text-gray-900",children:"FAQ"})]}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Find answers to common questions about ordering, shipping, and returns."}),s.jsx("button",{className:"text-blue-600 hover:text-blue-700 font-medium",children:"Browse FAQ "})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(Cd,{className:"w-6 h-6 text-green-600"})}),s.jsx("h3",{className:"ml-3 text-lg font-medium text-gray-900",children:"Contact Admin"})]}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Get in touch with our admin team for immediate assistance."}),y?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Cd,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"text-green-600 font-medium",children:y})]}),s.jsx("a",{href:`tel:${y}`,className:"inline-block text-green-600 hover:text-green-700 font-medium",children:"Call Now "})]}):s.jsx("p",{className:"text-gray-400 text-sm italic",children:"No contact number available"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx(Ja,{className:"w-6 h-6 text-purple-600"})}),s.jsx("h3",{className:"ml-3 text-lg font-medium text-gray-900",children:"New Ticket"})]}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Create a new support ticket for specific issues or questions."}),s.jsx("button",{onClick:()=>u(!0),className:"text-purple-600 hover:text-purple-700 font-medium",children:"Create Ticket "})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"My Support Tickets"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Track your support requests and responses"})]}),s.jsxs("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors flex items-center space-x-2",children:[s.jsx(Ja,{className:"w-4 h-4"}),s.jsx("span",{children:"New Ticket"})]})]})}),s.jsx("div",{className:"divide-y divide-gray-200",children:g?s.jsxs("div",{className:"p-6 text-center",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-emerald-600 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500",children:"Loading tickets..."})]}):m.length>0?m.map(z=>{const U=k.has(z.id);return s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"flex items-start justify-between mb-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:z.subject}),O(z.status),P(z.priority)]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Ticket #",z.id.slice(-8)," - ",z.category]})]})}),s.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:z.description}),s.jsx("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx(Wr,{className:"w-4 h-4"}),s.jsxs("span",{children:["Created: ",D(z.createdAt)]})]}),z.adminResponseDate&&s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx(Ii,{className:"w-4 h-4"}),s.jsxs("span",{children:["Replied: ",D(z.adminResponseDate)]})]})]})}),U&&s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4 border border-gray-200",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Full Details"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ticket ID:"}),s.jsx("span",{className:"text-sm text-gray-600 ml-2",children:z.id})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Category:"}),s.jsx("span",{className:"text-sm text-gray-600 ml-2",children:z.category})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Priority:"}),s.jsx("span",{className:"ml-2",children:P(z.priority)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Status:"}),s.jsx("span",{className:"ml-2",children:O(z.status)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Description:"}),s.jsx("div",{className:"text-sm text-gray-600 mt-1 whitespace-pre-wrap",children:z.description})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Created:"}),s.jsx("span",{className:"text-sm text-gray-600 ml-2",children:D(z.createdAt)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Contact:"}),s.jsx("span",{className:"text-sm text-gray-600 ml-2",children:z.userEmail})]})]})]}),z.adminResponse&&s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(fl,{className:"w-4 h-4 text-emerald-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Admin Response"})]}),s.jsx("p",{className:"text-gray-700 text-sm",children:z.adminResponse})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:()=>_(z.id),className:"text-emerald-600 hover:text-emerald-700 text-sm font-medium flex items-center space-x-1",children:[s.jsx("span",{children:U?"Hide Details":"View Details"}),s.jsx("svg",{className:`w-4 h-4 transform transition-transform ${U?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),z.status==="open"&&s.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Reply"})]})]},z.id)}):s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(Ja,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500 mb-2",children:"No support tickets yet"}),s.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Create your first support ticket to get help"}),s.jsx("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Create Your First Ticket"})]})})]}),s.jsx(pw,{isOpen:o,onClose:()=>u(!1),onSubmit:w,user:S})]}):s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-600 mb-4",children:"User Not Found"}),s.jsx("p",{className:"text-gray-500",children:"The requested user could not be found."})]})})}function vw(){const{id:c}=ms(),{users:r,updateUser:n}=ns(),{user:i,isLoading:o}=Vt(),{getPreloadedData:u}=rs(),[m,f]=E.useState(!1),[g,x]=E.useState(!1),[y,j]=E.useState(""),[k,b]=E.useState(!0),S=c?u(`user-settings-${c}`):null,w=S||i||r.find(V=>V.id===c),[_,O]=E.useState({name:w?.name||"",phoneNumber:w?.phoneNumber||"",address:w?.address||"",username:w?.username||"",profileImage:w?.profileImage||""});if(E.useEffect(()=>{w?(console.log("Using user data for settings:",S?"preloaded":"from context"),O({name:w.name,phoneNumber:w.phoneNumber,address:w.address,username:w.username,profileImage:w.profileImage||""}),b(!1)):o||b(!0)},[w,S,o]),k&&!w)return s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsx("div",{className:"max-w-2xl mx-auto px-4",children:s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded mb-4"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]})})})});const P=V=>{const{name:H,value:le}=V.target;O(W=>({...W,[H]:le}))},D=V=>{const H=V.target.files?.[0];if(H){const le=new FileReader;le.onload=W=>{const ne=W.target?.result;O(ee=>({...ee,profileImage:ne}))},le.readAsDataURL(H)}},z=async()=>{if(w){if(!_.name||!_.username){j("Please fill in all required fields.");return}x(!0),j("");try{const V={name:_.name,phoneNumber:_.phoneNumber,address:_.address,username:_.username,profileImage:_.profileImage||void 0};n(w.id,V),f(!1),j("Profile updated successfully!"),setTimeout(()=>j(""),3e3)}catch{j("Failed to update profile. Please try again.")}finally{x(!1)}}},U=()=>{w&&O({name:w.name,phoneNumber:w.phoneNumber,address:w.address,username:w.username,profileImage:w.profileImage||""}),f(!1),j("")};return o&&!w?s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"Loading..."})]})}):w?s.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Account Settings"}),s.jsx("p",{className:"text-gray-600",children:"Manage your profile information and preferences"})]}),s.jsx("div",{className:"flex space-x-3",children:m?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:U,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:z,disabled:g,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center space-x-2",children:g?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Saving..."})]}):s.jsx("span",{children:"Save Changes"})})]}):s.jsx("button",{onClick:()=>f(!0),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Edit Profile"})})]}),y&&s.jsx("div",{className:`p-4 rounded-lg ${y.includes("successfully")?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"}`,children:y}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Profile Picture"}),s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsxs("div",{className:"relative z-0",children:[s.jsx("div",{className:"relative w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:_.profileImage?s.jsx("img",{src:_.profileImage,alt:"Profile",className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-16 h-16 bg-gray-400 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-2xl font-medium",children:w.name.charAt(0).toUpperCase()})})}),m&&s.jsx("label",{htmlFor:"profile-image-input",className:"absolute bottom-2 right-2 p-2 bg-emerald-600 rounded-full cursor-pointer hover:bg-emerald-700 transition-colors",children:s.jsxs("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),s.jsx("input",{id:"profile-image-input",type:"file",accept:"image/*",onChange:D,className:"hidden",disabled:!m})]}),m&&s.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Click the camera icon to upload a new profile picture"})]})]})}),s.jsxs("div",{className:"lg:col-span-2",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Profile Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),s.jsx("input",{type:"text",name:"name",value:_.name,onChange:P,disabled:!m,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 disabled:bg-gray-50 disabled:text-gray-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),s.jsx("div",{className:"w-full px-3 py-2 border border-gray-200 rounded-lg bg-gray-50 text-gray-700",children:w.email}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email changes require verification. Contact support if needed."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),s.jsx("input",{type:"tel",name:"phoneNumber",value:_.phoneNumber,onChange:P,disabled:!m,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 disabled:bg-gray-50 disabled:text-gray-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username *"}),s.jsx("input",{type:"text",name:"username",value:_.username,onChange:P,disabled:!m,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 disabled:bg-gray-50 disabled:text-gray-500"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),s.jsx("textarea",{name:"address",value:_.address,onChange:P,disabled:!m,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 disabled:bg-gray-50 disabled:text-gray-500"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mt-6",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Password & Security"}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),s.jsxs("div",{className:"ml-3 flex-1",children:[s.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Secure Password Reset"}),s.jsx("p",{className:"mt-1 text-sm text-blue-700",children:"For security reasons, password changes are handled through a secure email verification process."}),s.jsx("div",{className:"mt-3",children:s.jsxs("button",{onClick:()=>{w?.email&&sessionStorage.setItem("forgot-password-email",w.email),window.location.href="/sign-in"},className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 7.89a1 1 0 001.42 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Reset Password via Email"]})}),s.jsx("p",{className:"mt-2 text-xs text-blue-600",children:'Click "Forgot your password?" on the sign-in page to receive a secure password reset link.'})]})]})})]})]})]})]}):s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-600 mb-4",children:"User Not Found"}),s.jsx("p",{className:"text-gray-500",children:"The requested user could not be found."})]})})}const ya=()=>({adminEmail:"admin@gmail.com",phoneNumber:"",enableEmailNotifications:!0,enableSMSNotifications:!1,notificationEmail:"",profileImage:"",displayName:"Admin User",businessHours:{monday:{isOpen:!0,openTime:"09:00",closeTime:"17:00"},tuesday:{isOpen:!0,openTime:"09:00",closeTime:"17:00"},wednesday:{isOpen:!0,openTime:"09:00",closeTime:"17:00"},thursday:{isOpen:!0,openTime:"09:00",closeTime:"17:00"},friday:{isOpen:!0,openTime:"09:00",closeTime:"17:00"},saturday:{isOpen:!0,openTime:"10:00",closeTime:"22:00"},sunday:{isOpen:!1,openTime:"09:00",closeTime:"17:00"}},deliverySettings:{enabled:!0,deliverySlotDuration:120,advanceNoticeHours:24,maxDaysInAdvance:7,unavailableDates:[]}});class Ht{static async getSettings(){const{data:r,error:n}=await te.from("admin_settings").select("*").single();if(n)throw console.error("Failed to load settings from Supabase:",n),n;if(!r)throw new Error("No admin settings found");return{adminEmail:r.admin_email,phoneNumber:r.phone_number||"",enableEmailNotifications:r.enable_email_notifications,enableSMSNotifications:r.enable_sms_notifications,notificationEmail:r.notification_email||"",profileImage:r.profile_image||"",displayName:r.display_name||"Admin User",businessHours:r.business_hours||ya().businessHours,deliverySettings:r.delivery_settings||ya().deliverySettings}}static async updateSettings(r){const{data:n,error:i}=await te.from("admin_settings").select("id").single();if(i)throw i;const o={admin_email:r.adminEmail,phone_number:r.phoneNumber||null,enable_email_notifications:r.enableEmailNotifications,enable_sms_notifications:r.enableSMSNotifications,notification_email:r.notificationEmail||null,profile_image:r.profileImage||null,display_name:r.displayName||null,business_hours:r.businessHours,delivery_settings:r.deliverySettings},{error:u}=await te.from("admin_settings").update(o).eq("id",n.id);if(u)throw u}static async resetToDefaults(){const r=ya();await this.updateSettings(r)}static async initializeSettings(){const{error:r}=await te.from("admin_settings").select("id").single();if(r&&r.code==="PGRST116"){const n=ya(),i={admin_email:n.adminEmail,phone_number:n.phoneNumber||null,enable_email_notifications:n.enableEmailNotifications,enable_sms_notifications:n.enableSMSNotifications,notification_email:n.notificationEmail||null,profile_image:n.profileImage||null,display_name:n.displayName||null,business_hours:n.businessHours,delivery_settings:n.deliverySettings},{error:o}=await te.from("admin_settings").insert([i]);if(o)throw o}else if(r)throw r}static async updateAdminAccount(r){const{data:n,error:i}=await te.auth.getUser();if(i||!n.user)throw new Error("Failed to get current user");const{error:o}=await te.auth.signInWithPassword({email:n.user.email,password:r.currentPassword});if(o)throw new Error("Current password is incorrect");if(r.newEmail){const{error:u}=await te.auth.updateUser({email:r.newEmail});if(u)throw new Error(`Failed to update email: ${u.message}`);const{error:m}=await te.from("users").update({email:r.newEmail}).eq("email",n.user.email);if(m)throw new Error(`Failed to update user email in database: ${m.message}`)}if(r.newUsername){const{data:u,error:m}=await te.from("users").select("id").eq("username",r.newUsername).neq("email",n.user.email).single();if(m&&m.code!=="PGRST116")throw new Error("Failed to check username availability");if(u)throw new Error("Username is already taken");const{error:f}=await te.from("users").update({username:r.newUsername}).eq("email",n.user.email);if(f)throw new Error(`Failed to update username: ${f.message}`)}if(r.newPassword){const{error:u}=await te.auth.updateUser({password:r.newPassword});if(u)throw new Error(`Failed to update password: ${u.message}`)}}static async getCurrentAdminUser(){const{data:r,error:n}=await te.auth.getUser();if(n||!r.user)return null;const{data:i,error:o}=await te.from("users").select("username, email").eq("email",r.user.email).single();return o||!i?{email:r.user.email,username:""}:{email:i.email,username:i.username}}}const Cg=Object.freeze(Object.defineProperty({__proto__:null,AdminSettingsService:Ht,getDefaultSettings:ya},Symbol.toStringTag,{value:"Module"}));class bw{static async getAvailableDeliverySlots(){try{const r=await Ht.getSettings();return r.deliverySettings.enabled?this.generateDeliverySlots(r):[]}catch(r){return console.error("Error loading admin settings for delivery:",r),this.generateFallbackSlots()}}static generateDeliverySlots(r){const n=[],i=new Date,{deliverySettings:o,businessHours:u}=r,m=new Date(i);m.setHours(m.getHours()+o.advanceNoticeHours);for(let f=0;f<=o.maxDaysInAdvance;f++){const g=new Date(i);if(g.setDate(i.getDate()+f),g<m)continue;const x=g.toISOString().split("T")[0];if(o.unavailableDates.includes(x))continue;const y=g.getDay(),j=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][y],k=u[j];if(!k.isOpen)continue;const b=this.generateTimeSlotsForDay(x,k.openTime,k.closeTime,o.deliverySlotDuration,g,m);n.push(...b)}return n}static generateTimeSlotsForDay(r,n,i,o,u,m){const f=[],[g,x]=n.split(":").map(Number),[y,j]=i.split(":").map(Number),k=new Date(u);k.setHours(g,x,0,0);const b=new Date(u);b.setHours(y,j,0,0);const S=new Date(k);for(;S<b;){const w=new Date(S);if(w.setMinutes(w.getMinutes()+o),w>b)break;const _=S.toTimeString().slice(0,5),O=S>=m,P=O?void 0:"Too soon to book";f.push({date:r,time:_,available:O,reason:P}),S.setMinutes(S.getMinutes()+o)}return f}static generateFallbackSlots(){const r=[],n=new Date;for(let i=1;i<=7;i++){const o=new Date(n);o.setDate(n.getDate()+i);const u=o.toISOString().split("T")[0];["10:00","12:00","14:00","16:00","18:00","20:00"].forEach(f=>{r.push({date:u,time:f,available:Math.random()>.2})})}return r}static async isSlotAvailable(r,n){return(await this.getAvailableDeliverySlots()).find(u=>u.date===r&&u.time===n)?.available||!1}static async getDeliverySlotsGroupedByDate(){const r=await this.getAvailableDeliverySlots(),n={};return r.forEach(i=>{n[i.date]||(n[i.date]=[]),n[i.date].push(i)}),n}}function jw(){const{id:c}=ms(),r=hs(),n=us(),{users:i}=ns(),{user:o,isLoading:u}=Vt(),{startNavigation:m}=rs(),[f,g]=E.useState(""),[x,y]=E.useState(""),j="delivery_slots_loaded",k=sessionStorage.getItem(j)==="true",[b,S]=E.useState(()=>as.getDeliverySlotsCache()||[]),[w,_]=E.useState(()=>{const Y=n.state?.cart;if(Y&&Y.length>0)return Y;const ce=sessionStorage.getItem("checkout-cart");if(ce)try{return JSON.parse(ce)}catch(T){console.error("Error parsing cart from session storage:",T)}return[]}),O=o||i.find(Y=>Y.id===c),[P,D]=E.useState(!k),z=w.reduce((Y,ce)=>Y+ce.price*ce.quantity,0);E.useEffect(()=>{const Y=async()=>{try{const ce=await bw.getAvailableDeliverySlots();S(ce),as.setDeliverySlotsCache(ce),sessionStorage.setItem(j,"true")}catch(ce){console.error("Error loading delivery slots:",ce),S([])}finally{D(!1)}};D(!k),Y()},[]);const U=Y=>{g(Y),y("")},V=Y=>{y(Y)},H=(Y,ce)=>{if(ce<=0){_(T=>T.filter(L=>L.id!==Y));return}_(T=>T.map(L=>L.id===Y?{...L,quantity:ce}:L))},le=Y=>{const ce=w.find(T=>T.id===Y);ce&&H(Y,ce.quantity+1)},W=Y=>{const ce=w.find(T=>T.id===Y);ce&&H(Y,ce.quantity-1)},ne=async()=>{if(!f||!x){alert("Please select both a date and time for delivery.");return}sessionStorage.setItem("checkout-cart",JSON.stringify(w)),sessionStorage.setItem("delivery-date",f),sessionStorage.setItem("delivery-time",x),await m(`/user/${c}/payment`)},ee=async()=>{sessionStorage.setItem("checkout-cart",JSON.stringify(w)),await m(`/user/${c}/inventory`)};if(u&&!O)return s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"Loading..."})]})});if(!O)return s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-600 mb-4",children:"User Not Found"}),s.jsx("p",{className:"text-gray-500",children:"The requested user could not be found."})]})});if(w.length===0)return s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-600 mb-4",children:"Empty Cart"}),s.jsx("p",{className:"text-gray-500",children:"Your cart is empty. Please add items before proceeding."}),s.jsx("button",{onClick:()=>r(`/user/${c}/inventory`),className:"mt-4 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Back to Inventory"})]})});const ie=[...new Set(b.map(Y=>Y.date))],fe=b.filter(Y=>Y.date===f&&Y.available);return!k&&P&&b.length===0?s.jsx("div",{className:"max-w-4xl mx-auto p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading delivery options..."})]})}):b.length===0?s.jsx("div",{className:"max-w-4xl mx-auto p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-600 mb-4",children:"Delivery Not Available"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Sorry, delivery is currently not available. Please contact us for more information."}),s.jsx("button",{onClick:()=>r(`/user/${c}/inventory`),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Back to Inventory"})]})}):s.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Select Delivery Time"}),s.jsx("p",{className:"text-gray-600",children:"Choose when you'd like your order delivered"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Order Total"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",z.toFixed(2)]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Summary"}),s.jsx("div",{className:"space-y-3",children:w.map(Y=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center overflow-hidden",children:Y.imageUrl?s.jsx("img",{src:Y.imageUrl,alt:Y.name,className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-gray-500 text-xs",children:"No Image"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:Y.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["$",Y.price.toFixed(2)," each"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>W(Y.id),className:"w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center hover:bg-gray-300 text-sm",children:"-"}),s.jsx("input",{type:"number",min:"1",value:Y.quantity,onChange:ce=>H(Y.id,parseInt(ce.target.value)||1),className:"w-12 text-center text-sm border border-gray-300 rounded px-1 py-1"}),s.jsx("button",{onClick:()=>le(Y.id),className:"w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center hover:bg-gray-300 text-sm",children:"+"})]}),s.jsxs("p",{className:"font-medium text-gray-900 w-16 text-right",children:["$",(Y.price*Y.quantity).toFixed(2)]})]})]},Y.id))}),s.jsx("div",{className:"border-t pt-4 mt-4",children:s.jsxs("div",{className:"flex justify-between font-medium",children:[s.jsx("span",{children:"Total:"}),s.jsxs("span",{children:["$",z.toFixed(2)]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Select Delivery Date"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3",children:ie.map(Y=>{const ce=new Date(Y),T=f===Y,L=ce.toDateString()===new Date().toDateString();return s.jsxs("button",{onClick:()=>U(Y),className:`p-4 rounded-lg border-2 text-center transition-colors ${T?"border-emerald-500 bg-emerald-50 text-emerald-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:[s.jsx("div",{className:"text-sm font-medium",children:ce.toLocaleDateString("en-US",{weekday:"short"})}),s.jsx("div",{className:"text-lg font-bold",children:ce.getDate()}),s.jsx("div",{className:"text-xs text-gray-500",children:ce.toLocaleDateString("en-US",{month:"short"})}),L&&s.jsx("div",{className:"text-xs text-emerald-600 font-medium mt-1",children:"Today"})]},Y)})})]}),f&&s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:["Select Delivery Time for ",new Date(f).toLocaleDateString()]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:fe.map(Y=>s.jsxs("button",{onClick:()=>V(Y.time),className:`p-4 rounded-lg border-2 text-center transition-colors ${x===Y.time?"border-emerald-500 bg-emerald-50 text-emerald-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:[s.jsx("div",{className:"text-lg font-medium",children:Y.time}),s.jsx("div",{className:"text-sm text-gray-500",children:"Available"})]},`${f}-${Y.time}`))}),fe.length===0&&s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No available time slots for this date. Please select a different date."})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("button",{onClick:ee,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Back to Cart"}),s.jsx("button",{onClick:ne,disabled:!f||!x,className:"px-6 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Continue to Payment"})]})]})}class ww{async createInvoice(r,n,i){try{const{data:{user:o},error:u}=await te.auth.getUser();if(u||!o)throw new Error("User authentication required");console.log("Creating Square invoice via Edge Function..."),console.log("Cart items:",r),console.log("Total with tax:",n);try{const{data:w,error:_}=await te.functions.invoke("create-square-invoice",{body:{cartItems:r,totalWithTax:n,deliveryTime:i,userId:o.id}});if(_)console.warn("Edge Function not available, falling back to demo mode:",_);else{if(w&&w.success)return console.log("Production Square invoice created successfully"),{invoiceId:w.invoiceId,publicUrl:w.publicUrl,orderNumber:w.orderNumber,total:n,isDemo:!1};console.warn("Edge Function returned error, falling back to demo mode:",w)}}catch(w){console.warn("Edge Function failed, falling back to demo mode:",w)}console.log("Running in demo mode"),await new Promise(w=>setTimeout(w,1e3));const m=`ORDER-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,f=`https://squareup.com/pay/${m}`;let g,x;try{if(i&&i.includes(" ")){const[w,_]=i.split(" "),O=new Date(w);if(isNaN(O.getTime()))throw new Error("Invalid delivery date");g=O.toISOString().split("T")[0],x=_}else i&&i.match(/^\d{1,2}:\d{2}$/)?(g=new Date().toISOString().split("T")[0],x=i):(g=new Date().toISOString().split("T")[0],x="TBD")}catch(w){console.error("Error parsing delivery time:",i,w),g=new Date().toISOString().split("T")[0],x="TBD"}console.log("Preparing to insert order with data:",{user_id:o.id,order_number:m,total:n,status:"paid",payment_method:"Square Invoice",delivery_date:g,delivery_time:x,delivery_address:"",notes:""});const{data:y,error:j}=await te.from("orders").insert({user_id:o.id,order_number:m,total:n,status:"paid",payment_method:"Square Invoice",delivery_date:g,delivery_time:x,delivery_address:"",notes:""}).select().single();if(j)throw console.error("Database error saving order:",j),console.error("Error details:",JSON.stringify(j,null,2)),new Error(`Failed to save order to database: ${j.message||JSON.stringify(j)}`);console.log("Order saved successfully:",y);const k=r.map(w=>({order_id:y.id,menu_item_id:w.id||null,menu_item_name:w.name,menu_item_ingredients:w.specialInstructions||"",unit_size:"",abv:0,price:Number(w.price),quantity:Number(w.quantity),subtotal:Number(w.price)*Number(w.quantity)}));console.log("Inserting order items:",k);const{data:b,error:S}=await te.from("order_items").insert(k).select();if(S)throw console.error("Database error saving order items:",S),await te.from("orders").delete().eq("id",y.id),new Error(`Failed to save order items to database: ${S.message||JSON.stringify(S)}`);return console.log("Order items saved successfully:",b),{invoiceId:`mock_invoice_${m}`,publicUrl:f,orderNumber:m,total:n,isDemo:!0}}catch(o){throw console.error("Error creating Square invoice:",o),o}}}const Nw=new ww,Sw=({isOpen:c,onClose:r,orderNumber:n,total:i,isDemo:o=!0})=>c?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-xl",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center w-12 h-12 rounded-full bg-green-100 mb-4",children:s.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:o?"Demo Payment Successful!":"Payment Successful!"}),s.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:[s.jsxs("p",{className:"mb-2",children:[s.jsx("strong",{children:"Order Number:"})," ",n]}),s.jsxs("p",{className:"mb-2",children:[s.jsx("strong",{children:"Total:"})," $",i.toFixed(2)]}),o&&s.jsx("p",{className:"text-orange-600 font-medium",children:"This is demo mode. In production, you would be redirected to Square's payment page."})]}),s.jsx("button",{onClick:r,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Continue"})]})})}):null;function _w(){const{id:c}=ms(),r=hs(),n=us(),{users:i}=ns(),{user:o,isLoading:u}=Vt(),{startNavigation:m}=rs(),[f,g]=E.useState("square"),[x,y]=E.useState(!1),[j,k]=E.useState(""),[b,S]=E.useState(!1),[w,_]=E.useState(!0),[O,P]=E.useState(!1),[D,z]=E.useState(null),U=o||i.find(T=>T.id===c),V=(()=>{const T=n.state?.cart;if(T&&T.length>0)return T;const L=sessionStorage.getItem("checkout-cart");if(L)try{return JSON.parse(L)}catch(X){console.error("Error parsing cart from session storage:",X)}return[]})(),H=n.state?.deliveryDate||sessionStorage.getItem("delivery-date")||"",le=n.state?.deliveryTime||sessionStorage.getItem("delivery-time")||"",W=V.reduce((T,L)=>T+L.price*L.quantity,0),ne=.0825,ee=W*ne,ie=W+ee;E.useEffect(()=>{(async()=>{try{_(!0),void 0||(console.log("No Square payment configuration found, defaulting to pay on delivery"),S(!0))}catch(L){console.error("Error checking payment configuration:",L),S(!0)}finally{_(!1)}})()},[]);const fe=async()=>{if(U){y(!0),k("");try{if(f==="square"){console.log("Creating Square invoice for cart:",V);const T=V.map(X=>({id:X.id,name:X.name,price:X.price,quantity:X.quantity,specialInstructions:X.specialInstructions})),L=await Nw.createInvoice(T,ie,le);console.log("Square invoice created:",L);try{await Xa.clearCart(c),console.log("Cart cleared successfully")}catch(X){console.error("Error clearing cart:",X)}z({orderNumber:L.orderNumber,total:ie,isDemo:L.isDemo||!1}),P(!0);return}else{const T={userId:U.id,items:V.map(X=>({menuItemId:X.id,menuItemName:X.name,menuItemIngredients:X.ingredients,unitSize:X.unitSize,abv:X.abv,price:X.price,quantity:X.quantity})),total:ie,paymentMethod:"Pay on Delivery",deliveryDate:H,deliveryTime:le,deliveryAddress:U.address||"",notes:""};console.log("Creating order with data:",T);const L=await pa.createOrder(T);if(L){console.log("Order created successfully:",L);try{await Xa.clearCart(c),console.log("Cart cleared successfully after order creation")}catch(X){console.error("Error clearing cart after order creation:",X)}sessionStorage.setItem("order-success-data",JSON.stringify({orderId:L.id,orderNumber:L.orderNumber,orderTotal:ie,deliveryDate:H,deliveryTime:le,paymentMethod:L.paymentMethod})),sessionStorage.removeItem("checkout-cart"),sessionStorage.removeItem("delivery-date"),sessionStorage.removeItem("delivery-time"),await m(`/user/${c}/order-success`)}else k("Failed to save order. Please try again.")}}catch(T){console.error("Error processing payment:",T),k(T instanceof Error?T.message:"Payment processing failed. Please try again.")}finally{y(!1)}}},Y=async()=>{sessionStorage.setItem("checkout-cart",JSON.stringify(V)),sessionStorage.setItem("delivery-date",H),sessionStorage.setItem("delivery-time",le),await m(`/user/${c}/delivery-time`)},ce=()=>{P(!1),z(null),D&&r(`/user/${c}/order-success`,{state:{orderId:D.orderNumber,orderNumber:D.orderNumber,orderTotal:D.total,deliveryDate:H,deliveryTime:le,paymentMethod:D.isDemo?"Square - Invoice (Demo)":"Square - Invoice",demoMode:D.isDemo||!1}})};return u&&!U?s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"Loading..."})]})}):U?V.length===0?s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-600 mb-4",children:"Empty Cart"}),s.jsx("p",{className:"text-gray-500",children:"Your cart is empty. Please add items before proceeding."}),s.jsx("button",{onClick:()=>r(`/user/${c}/inventory`),className:"mt-4 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Back to Inventory"})]})}):s.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Order Total"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",ie.toFixed(2)]})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Summary"}),s.jsx("div",{className:"space-y-3",children:V.map(T=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center overflow-hidden",children:T.imageUrl?s.jsx("img",{src:T.imageUrl,alt:T.name,className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-gray-500 text-xs",children:"No Image"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:T.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Qty: ",T.quantity]})]})]}),s.jsxs("p",{className:"font-medium text-gray-900",children:["$",(T.price*T.quantity).toFixed(2)]})]},T.id))}),s.jsxs("div",{className:"border-t pt-4 mt-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Subtotal:"}),s.jsxs("span",{children:["$",W.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{children:["Tax (",(ne*100).toFixed(2),"%):"]}),s.jsxs("span",{children:["$",ee.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Delivery:"}),s.jsx("span",{children:"$0.00"})]}),s.jsxs("div",{className:"flex justify-between font-medium text-lg",children:[s.jsx("span",{children:"Total:"}),s.jsxs("span",{children:["$",ie.toFixed(2)]})]})]}),s.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Delivery Details"}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",new Date(H).toLocaleDateString()]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Time: ",le]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Payment Information"}),j&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-red-600 text-sm",children:j})}),w?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-emerald-600 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"ml-2 text-gray-600",children:"Loading payment options..."})]}):b?s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"p-4 bg-emerald-50 border border-emerald-200 rounded-lg",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-6 h-6 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-emerald-900",children:"Pay on Delivery"}),s.jsx("p",{className:"text-sm text-emerald-700",children:"You'll pay when your order is delivered"})]})]})}),s.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Order Confirmation"}),s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["By confirming this order, you agree to pay ",s.jsxs("strong",{children:["$",ie.toFixed(2)]})," upon delivery."]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Delivery Date: ",s.jsx("strong",{children:new Date(H).toLocaleDateString()}),s.jsx("br",{}),"Delivery Time: ",s.jsx("strong",{children:le})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-50 to-green-100 border border-green-200 p-3 rounded-lg mb-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-6 h-6 bg-green-600 rounded flex items-center justify-center",children:s.jsx("span",{className:"text-white text-xs font-bold",children:""})}),s.jsx("span",{className:"text-green-800 font-medium text-sm",children:" Powered by Square Payments"})]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),s.jsx("div",{className:"space-y-3",children:s.jsxs("label",{className:"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[s.jsx("input",{type:"radio",value:"square",checked:f==="square",onChange:T=>g(T.target.value),className:"mr-3"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Square Invoice Payment"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Secure payment via Square - You'll be redirected to complete payment"})]})]})})]}),s.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:" Secure Payment Process"}),s.jsx("p",{className:"text-blue-700 text-sm mb-2",children:`When you click "Pay with Square", we'll create a secure invoice and redirect you to Square's payment page where you can:`}),s.jsxs("ul",{className:"text-blue-700 text-sm space-y-1 ml-4",children:[s.jsx("li",{children:" Pay with any major credit or debit card"}),s.jsx("li",{children:" Use Cash App Pay (if available)"}),s.jsx("li",{children:" Complete payment on any device"}),s.jsx("li",{children:" Get an instant receipt via email"})]}),s.jsx("p",{className:"text-blue-700 text-sm mt-2",children:"Your payment information is processed securely by Square and never stored on our servers."})]})]})]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("button",{onClick:Y,disabled:x,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Back"}),s.jsx("button",{onClick:fe,disabled:x||w,className:"px-6 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center space-x-2",children:x?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Processing..."})]}):w?s.jsx("span",{children:"Loading..."}):b?s.jsx("span",{children:"Confirm Order"}):f==="square"?s.jsxs("span",{children:["Pay with Square $",ie.toFixed(2)]}):s.jsxs("span",{children:["Pay $",ie.toFixed(2)]})})]}),D&&s.jsx(Sw,{isOpen:O,onClose:ce,orderNumber:D.orderNumber,total:D.total,isDemo:D.isDemo})]}):s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-600 mb-4",children:"User Not Found"}),s.jsx("p",{className:"text-gray-500",children:"The requested user could not be found."})]})})}function Ew(){const{id:c}=ms(),r=us(),{users:n}=ns(),{user:i,isLoading:o}=Vt(),{startNavigation:u}=rs(),m=i||n.find(S=>S.id===c),f=(()=>{if(r.state?.orderId)return{orderId:r.state.orderId,orderNumber:r.state.orderNumber,orderTotal:r.state.orderTotal,deliveryDate:r.state.deliveryDate,deliveryTime:r.state.deliveryTime,paymentMethod:r.state.paymentMethod};const S=sessionStorage.getItem("order-success-data");if(S)try{const w=JSON.parse(S);return sessionStorage.removeItem("order-success-data"),w}catch(w){console.error("Error parsing order success data from session storage:",w)}return{orderId:"",orderNumber:"",orderTotal:0,deliveryDate:"",deliveryTime:"",paymentMethod:""}})(),{orderId:g,orderNumber:x,orderTotal:y,deliveryDate:j,deliveryTime:k,paymentMethod:b}=f;return E.useEffect(()=>{const S=setTimeout(()=>{u(`/user/${c}/orders`)},1e4);return()=>clearTimeout(S)},[u,c]),o&&!m?s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"Loading..."})]})}):m?g?s.jsx("div",{className:"max-w-2xl mx-auto p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-6",children:s.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Order Confirmed!"}),s.jsx("p",{className:"text-gray-600 mb-8",children:"Thank you for your order. We'll start preparing it right away."}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Details"}),s.jsxs("div",{className:"space-y-3 text-left",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Order Number:"}),s.jsx("span",{className:"font-medium text-gray-900",children:x||g?.slice(-8)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),s.jsxs("span",{className:"font-medium text-gray-900",children:["$",y.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Delivery Date:"}),s.jsx("span",{className:"font-medium text-gray-900",children:new Date(j).toLocaleDateString()})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Delivery Time:"}),s.jsx("span",{className:"font-medium text-gray-900",children:k})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Payment Method:"}),s.jsx("span",{className:"font-medium text-gray-900",children:b||"Credit Card"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Status:"}),s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:b==="Pay on Delivery"?"Confirmed":"Paid"})]})]})]}),s.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 mb-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"What's Next?"}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[s.jsx("p",{children:" We'll send you an email confirmation shortly"}),s.jsx("p",{children:" Your order will be processed and prepared for delivery"}),s.jsx("p",{children:" You can track your order status in the Orders section"}),s.jsx("p",{children:" We'll notify you when your order is out for delivery"}),b==="Pay on Delivery"&&s.jsxs("p",{children:[" ",s.jsxs("strong",{children:["Please have $",y.toFixed(2)," in cash ready for payment upon delivery"]})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[s.jsx("button",{onClick:()=>u(`/user/${c}/orders`),className:"px-6 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"View My Orders"}),s.jsx("button",{onClick:()=>u(`/user/${c}/inventory`),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Continue Shopping"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-6",children:"You'll be automatically redirected to your orders page in 10 seconds..."})]})}):s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-600 mb-4",children:"Invalid Order"}),s.jsx("p",{className:"text-gray-500",children:"No order information found."}),s.jsx("button",{onClick:()=>u(`/user/${c}/inventory`),className:"mt-4 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Back to Inventory"})]})}):s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-600 mb-4",children:"User Not Found"}),s.jsx("p",{className:"text-gray-500",children:"The requested user could not be found."})]})})}function kw({onClick:c}){return s.jsx("button",{onClick:c,"aria-label":"Open menu",className:"p-3 rounded-lg hover:bg-gray-100 touch-manipulation min-h-[44px] min-w-[44px] flex items-center justify-center",children:s.jsx(w0,{className:"h-6 w-6"})})}function Tw({open:c,onClose:r}){const[n,i]=E.useState(""),[o,u]=E.useState("Admin User");return E.useEffect(()=>{const m=f=>f.key==="Escape"&&r();return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[r]),E.useEffect(()=>{(async()=>{try{const g=await Ht.getSettings();i(g.profileImage||""),u(g.displayName||"Admin User")}catch(g){console.error("Failed to load profile settings from Supabase:",g),i(""),u("Admin User")}})();const f=g=>{g.detail&&(g.detail.profileImage!==void 0&&i(g.detail.profileImage),g.detail.displayName!==void 0&&u(g.detail.displayName||"Admin User"))};return window.addEventListener("adminSettingsUpdated",f),()=>{window.removeEventListener("adminSettingsUpdated",f)}},[]),s.jsxs(s.Fragment,{children:[s.jsx("div",{onClick:r,className:`fixed inset-0 bg-black/50 transition-opacity z-40 ${c?"opacity-100":"opacity-0 pointer-events-none"}`}),s.jsxs("nav",{className:`fixed top-0 left-0 h-full w-72 sm:w-80 max-w-[85vw] bg-white shadow-lg transform transition-transform duration-300 ease-in-out z-50 ${c?"translate-x-0":"-translate-x-full"} flex flex-col pt-4 sm:pt-6 pb-safe-bottom`,children:[s.jsx("div",{className:"px-6 pb-6 border-b border-gray-200 mb-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:n?s.jsx("img",{src:n,alt:"Profile",className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-8 h-8 bg-gray-400 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-sm font-medium",children:"A"})})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:o}),s.jsx("p",{className:"text-sm text-gray-500",children:"Administrator"})]})]})}),s.jsxs("ul",{className:"px-4 sm:px-6 text-base sm:text-lg font-medium space-y-1",children:[s.jsx("li",{children:s.jsx(Be,{to:"/admin/dashboard",onClick:r,className:"block py-3 px-2 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors touch-manipulation min-h-[48px] flex items-center",children:"Dashboard"})}),s.jsx("li",{children:s.jsx(Be,{to:"/admin/users",onClick:r,className:"block py-3 px-2 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors touch-manipulation min-h-[48px] flex items-center",children:"Manage Users"})}),s.jsx("li",{children:s.jsx(Be,{to:"/admin/orders",onClick:r,className:"block py-3 px-2 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors touch-manipulation min-h-[48px] flex items-center",children:"Manage Orders"})}),s.jsx("li",{children:s.jsx(Be,{to:"/admin/inventory",onClick:r,className:"block py-3 px-2 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors touch-manipulation min-h-[48px] flex items-center",children:"Inventory"})}),s.jsx("li",{children:s.jsx(Be,{to:"/admin/analytics",onClick:r,className:"block py-3 px-2 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors touch-manipulation min-h-[48px] flex items-center",children:"Analytics"})}),s.jsx("li",{children:s.jsx(Be,{to:"/admin/support",onClick:r,className:"block py-3 px-2 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors touch-manipulation min-h-[48px] flex items-center",children:"Support"})}),s.jsx("li",{children:s.jsx(Be,{to:"/admin/settings",onClick:r,className:"block py-3 px-2 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors touch-manipulation min-h-[48px] flex items-center",children:"Settings"})})]}),s.jsx("div",{className:"mt-auto px-4 sm:px-6 pb-4 sm:pb-6",children:s.jsxs(Be,{to:"/",onClick:r,className:"flex items-center space-x-2 py-3 px-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors touch-manipulation min-h-[48px]",children:[s.jsx(j0,{className:"h-5 w-5"}),s.jsx("span",{children:"Sign Out"})]})})]})]})}function Cw(){const[c,r]=E.useState(!1),{user:n,isLoading:i}=Vt(),o=hs();return E.useEffect(()=>{if(!i){if(!n){o("/sign-in",{replace:!0});return}n.role!=="admin"&&o(`/user/${n.id}/dashboard`,{replace:!0})}},[n,i,o]),s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsxs("header",{className:"flex items-center h-14 sm:h-16 px-4 shadow-sm bg-white sticky top-0 z-30",children:[s.jsx(kw,{onClick:()=>r(!0)}),s.jsx("div",{className:"ml-4",children:s.jsx(Be,{to:"/",children:s.jsx("img",{src:Zr,alt:"TWC logo",className:"h-16 sm:h-20 md:h-24 w-auto"})})})]}),s.jsx(Tw,{open:c,onClose:()=>r(!1)}),s.jsxs("main",{className:"w-full",children:[s.jsx(Xg,{})," "]})]})}function Ow(){const[c,r]=E.useState([]),[n,i]=E.useState({totalOrders:0,paidOrders:0,processedOrders:0,deliveredOrders:0,totalRevenue:0,averageOrderValue:0}),[o,u]=E.useState([]),[m,f]=E.useState(""),{getPreloadedData:g}=rs();E.useEffect(()=>{try{const S=g("admin-dashboard-orders");if(S&&S.length>0){console.log("Using preloaded dashboard orders");const V=S.map(fe=>({...fe,items:fe.items||[],userName:fe.userName||fe.user_name||"Unknown User",date:fe.date||fe.created_at||new Date().toISOString()}));r(V);const H=V.length,le=V.filter(fe=>fe.status==="paid").length,W=V.filter(fe=>fe.status==="processed").length,ne=V.filter(fe=>fe.status==="delivered").length,ee=V.reduce((fe,Y)=>fe+(Y.total||0),0),ie=H>0?ee/H:0;i({totalOrders:H,paidOrders:le,processedOrders:W,deliveredOrders:ne,totalRevenue:ee,averageOrderValue:ie});return}console.log("Using localStorage orders as fallback");const w=JSON.parse(localStorage.getItem("orders")||"[]");r(w);const _=w.length,O=w.filter(V=>V.status==="paid").length,P=w.filter(V=>V.status==="processed").length,D=w.filter(V=>V.status==="delivered").length,z=w.reduce((V,H)=>V+(H.total||0),0),U=_>0?z/_:0;i({totalOrders:_,paidOrders:O,processedOrders:P,deliveredOrders:D,totalRevenue:z,averageOrderValue:U})}catch(S){console.error("Failed to load orders:",S)}},[]),E.useEffect(()=>{const S=localStorage.getItem("supportTickets");if(S)try{const w=JSON.parse(S);u(w)}catch(w){console.error("Failed to load support tickets:",w)}},[]),E.useEffect(()=>{(async()=>{try{const w=g("admin-dashboard-settings");if(w){console.log("Using preloaded dashboard settings"),f(w.displayName);return}const _=g("admin-settings");if(_){console.log("Using preloaded general settings"),f(_.displayName);return}console.log("Fetching admin settings from API");const O=await Ht.getSettings();f(O.displayName)}catch(w){console.error("Failed to load admin settings:",w)}})()},[g]);const x=c.filter(S=>S.status==="paid").slice(0,5),y=o.filter(S=>S.status==="open"&&new Date(S.createdAt)>new Date(Date.now()-10080*60*1e3)).length,j=o.filter(S=>S.status==="in_progress").length,k=S=>new Date(S).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),b=S=>{switch(S){case"paid":return s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full",children:"Paid"});case"processed":return s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:"Processed"});case"delivered":return s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-emerald-100 text-emerald-800 rounded-full",children:"Delivered"});default:return s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded-full",children:S})}};return s.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6 pb-safe-bottom",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg p-4 sm:p-6 text-white",children:s.jsx("div",{className:"flex justify-between items-start",children:s.jsxs("div",{children:[s.jsxs("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold mb-2",children:["Welcome, ",m,"!"]}),s.jsx("p",{className:"text-blue-100 text-sm sm:text-base",children:"Manage admin operations and track customer orders"})]})})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3 sm:gap-4",children:[s.jsx("div",{className:"bg-white p-4 sm:p-5 rounded-lg shadow-md border border-gray-200 min-h-[80px] flex items-center touch-manipulation",children:s.jsxs("div",{className:"flex items-center w-full",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg flex-shrink-0",children:s.jsx(Bs,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600 truncate",children:"Total Orders"}),s.jsx("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:n.totalOrders})]})]})}),s.jsx("div",{className:"bg-white p-4 sm:p-5 rounded-lg shadow-md border border-gray-200 min-h-[80px] flex items-center touch-manipulation",children:s.jsxs("div",{className:"flex items-center w-full",children:[s.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg flex-shrink-0",children:s.jsx(Wr,{className:"w-5 h-5 text-yellow-600"})}),s.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600 truncate",children:"Pending Orders"}),s.jsx("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:n.paidOrders})]})]})}),s.jsx("div",{className:"bg-white p-4 sm:p-5 rounded-lg shadow-md border border-gray-200 min-h-[80px] flex items-center touch-manipulation",children:s.jsxs("div",{className:"flex items-center w-full",children:[s.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg flex-shrink-0",children:s.jsx(fl,{className:"w-5 h-5 text-emerald-600"})}),s.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600 truncate",children:"Delivered"}),s.jsx("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:n.deliveredOrders})]})]})}),s.jsx("div",{className:"bg-white p-4 sm:p-5 rounded-lg shadow-md border border-gray-200 min-h-[80px] flex items-center touch-manipulation",children:s.jsxs("div",{className:"flex items-center w-full",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg flex-shrink-0",children:s.jsx(Ja,{className:"w-5 h-5 text-purple-600"})}),s.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600 truncate",children:"New Support Tickets"}),s.jsx("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:y})]})]})}),s.jsx("div",{className:"bg-white p-4 sm:p-5 rounded-lg shadow-md border border-gray-200 min-h-[80px] flex items-center touch-manipulation",children:s.jsxs("div",{className:"flex items-center w-full",children:[s.jsx("div",{className:"p-2 bg-orange-100 rounded-lg flex-shrink-0",children:s.jsx(Ii,{className:"w-5 h-5 text-orange-600"})}),s.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600 truncate",children:"In-Progress Tickets"}),s.jsx("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:j})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:[s.jsxs("div",{className:"px-4 sm:px-6 py-4 border-b border-gray-200",children:[s.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Quick Actions"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage your restaurant operations"})]}),s.jsx("div",{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[s.jsxs(Gt,{to:"/admin/inventory",className:"flex flex-col items-center p-4 sm:p-6 border border-gray-300 rounded-lg hover:bg-emerald-50 hover:border-emerald-300 transition-all duration-200 group touch-manipulation min-h-[120px] justify-center",children:[s.jsx("div",{className:"p-3 bg-emerald-100 rounded-lg mb-3 group-hover:bg-emerald-200 transition-colors",children:s.jsx(Li,{className:"w-6 h-6 text-emerald-600"})}),s.jsx("span",{className:"font-medium text-gray-900 text-center text-sm sm:text-base",children:"Manage Menu"}),s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 text-center mt-1",children:"Update inventory"})]}),s.jsxs(Gt,{to:"/admin/orders",className:"flex flex-col items-center p-4 sm:p-6 border border-gray-300 rounded-lg hover:bg-blue-50 hover:border-blue-300 transition-all duration-200 group touch-manipulation min-h-[120px] justify-center",children:[s.jsx("div",{className:"p-3 bg-blue-100 rounded-lg mb-3 group-hover:bg-blue-200 transition-colors",children:s.jsx(Bs,{className:"w-6 h-6 text-blue-600"})}),s.jsx("span",{className:"font-medium text-gray-900 text-center text-sm sm:text-base",children:"View Orders"}),s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 text-center mt-1",children:"Process orders"})]}),s.jsxs(Gt,{to:"/admin/users",className:"flex flex-col items-center p-4 sm:p-6 border border-gray-300 rounded-lg hover:bg-purple-50 hover:border-purple-300 transition-all duration-200 group touch-manipulation min-h-[120px] justify-center",children:[s.jsx("div",{className:"p-3 bg-purple-100 rounded-lg mb-3 group-hover:bg-purple-200 transition-colors",children:s.jsx(il,{className:"w-6 h-6 text-purple-600"})}),s.jsx("span",{className:"font-medium text-gray-900 text-center text-sm sm:text-base",children:"Manage Users"}),s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 text-center mt-1",children:"Customer accounts"})]}),s.jsxs(Gt,{to:"/admin/analytics",className:"flex flex-col items-center p-4 sm:p-6 border border-gray-300 rounded-lg hover:bg-orange-50 hover:border-orange-300 transition-all duration-200 group touch-manipulation min-h-[120px] justify-center",children:[s.jsx("div",{className:"p-3 bg-orange-100 rounded-lg mb-3 group-hover:bg-orange-200 transition-colors",children:s.jsx(v0,{className:"w-6 h-6 text-orange-600"})}),s.jsx("span",{className:"font-medium text-gray-900 text-center text-sm sm:text-base",children:"Analytics"}),s.jsx("span",{className:"text-xs sm:text-sm text-gray-500 text-center mt-1",children:"View reports"})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:[s.jsxs("div",{className:"px-4 sm:px-6 py-4 border-b border-gray-200",children:[s.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"New Orders"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Orders waiting for processing"})]}),s.jsx("div",{className:"p-4 sm:p-6",children:x.length>0?s.jsx("div",{className:"space-y-3 sm:space-y-4",children:x.map(S=>s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 sm:p-4 bg-yellow-50 border border-yellow-200 rounded-lg space-y-3 sm:space-y-0",children:[s.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[s.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg flex-shrink-0",children:s.jsx(Pi,{className:"w-5 h-5 text-yellow-600"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("p",{className:"font-medium text-gray-900 text-sm sm:text-base",children:["Order #",S.id.slice(-5)]}),s.jsx("p",{className:"text-sm text-gray-600 truncate",children:S.userName}),s.jsx("p",{className:"text-xs text-gray-500",children:k(S.date)})]})]}),s.jsxs("div",{className:"flex items-center justify-between sm:justify-end space-x-3",children:[s.jsxs("div",{className:"text-left sm:text-right",children:[s.jsxs("p",{className:"font-medium text-gray-900 text-sm sm:text-base",children:["$",(S.total||0).toFixed(2)]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[S.items?.length||0," items"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[b(S.status),s.jsxs(Gt,{to:"/admin/orders",className:"px-3 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors touch-manipulation mobile-touch-target flex items-center justify-center",children:[s.jsx("span",{className:"hidden sm:inline",children:"Process"}),s.jsx("span",{className:"sm:hidden",children:"Go"})]})]})]})]},S.id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Bs,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No new orders"}),s.jsx("p",{className:"text-sm text-gray-400",children:"All orders have been processed"})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Order Status Breakdown"})}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),s.jsx("span",{className:"text-gray-700",children:"Paid"})]}),s.jsx("span",{className:"font-medium",children:n.paidOrders})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),s.jsx("span",{className:"text-gray-700",children:"Processed"})]}),s.jsx("span",{className:"font-medium",children:n.processedOrders})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-3 h-3 bg-emerald-500 rounded-full"}),s.jsx("span",{className:"text-gray-700",children:"Delivered"})]}),s.jsx("span",{className:"font-medium",children:n.deliveredOrders})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Revenue Overview"})}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-700",children:"Total Revenue"}),s.jsxs("span",{className:"font-medium text-lg",children:["$",n.totalRevenue.toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-700",children:"Average Order Value"}),s.jsxs("span",{className:"font-medium text-lg",children:["$",n.averageOrderValue.toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-700",children:"Total Orders"}),s.jsx("span",{className:"font-medium text-lg",children:n.totalOrders})]}),n.totalOrders>0&&s.jsx("div",{className:"mt-4 pt-4 border-t",children:s.jsx(Gt,{to:"/admin/analytics",className:"text-emerald-600 hover:text-emerald-700 text-sm font-medium",children:"View detailed analytics "})})]})})]})]})]})}const Og=c=>(c??"").toString().toLowerCase();function Aw(){const{users:c,createUser:r,deleteUser:n}=ns(),{user:i}=Vt(),{getPreloadedData:o}=rs(),[u,m]=E.useState(""),[f,g]=E.useState("all"),[x,y]=E.useState(!1),[j,k]=E.useState(!1),[b,S]=E.useState(!1),[w,_]=E.useState(!1),[O,P]=E.useState(null),[D,z]=E.useState({show:!1,message:"",type:"success"}),[U,V]=E.useState({name:"",username:"",password:"",confirmPassword:"",email:"",address:"",phoneNumber:"",role:"user"});E.useEffect(()=>{const T=o("admin-users-list");T&&T.length>0?console.log("Preloaded users data available:",T.length,"users"):console.log("No preloaded users data, using context data")},[o]);const H=T=>{const L=T.replace(/\D/g,"");if(L.length===0)return"";if(L.length<=3)return L;if(L.length<=6)return`${L.slice(0,3)}-${L.slice(3)}`;if(L.length<=10)return`${L.slice(0,3)}-${L.slice(3,6)}-${L.slice(6)}`;if(L.length===11)return`${L.slice(0,1)}-${L.slice(1,4)}-${L.slice(4,7)}-${L.slice(7)}`;if(L.length===12)return`${L.slice(0,2)}-${L.slice(2,5)}-${L.slice(5,8)}-${L.slice(8)}`;if(L.length===13)return`${L.slice(0,3)}-${L.slice(3,6)}-${L.slice(6,9)}-${L.slice(9)}`;{const X=L.slice(0,L.length-10),Ne=L.slice(L.length-10);return`${X}-${Ne.slice(0,3)}-${Ne.slice(3,6)}-${Ne.slice(6)}`}},le=T=>T.replace(/\D/g,""),W=E.useMemo(()=>{const T=i?c.filter(X=>X.id!==i.id):c,L=u.trim().toLowerCase();return L?T.filter(X=>f==="all"?[X.name,X.username,X.email,X.address,X.phoneNumber,X.role].some(Ne=>Og(Ne).includes(L)):Og(X[f]).includes(L)):T},[c,u,f,i]),ne=(T,L="error")=>{z({show:!0,message:T,type:L})},ee=()=>{z({show:!1,message:"",type:"success"})},ie=async T=>{if(T.preventDefault(),!(!U.name||!U.username||!U.password||!U.email||!U.address||!U.phoneNumber)){if(U.password.length<6){ne("Password must be at least 6 characters long.");return}if(U.password!==U.confirmPassword){ne("Passwords do not match. Please try again.");return}try{const L={...U,phoneNumber:le(U.phoneNumber),role:"user"},{confirmPassword:X,...Ne}=L;await r(Ne),V({name:"",username:"",password:"",confirmPassword:"",email:"",address:"",phoneNumber:"",role:"user"}),y(!1),ne("User created successfully!","success")}catch(L){const X=L?.message||"Failed to create user";X.includes("already exists")?ne(X):X.includes("User already registered")?ne("This email is already registered. Please use a different email address."):X.includes("duplicate key")?ne("This email or username is already taken. Please choose different values."):ne(X)}}},fe=async T=>{if(i&&T===i.id){ne("You cannot delete your own account.");return}const L=c.find(X=>X.id===T);L&&(P(L),_(!0))},Y=async()=>{if(O)try{await n(O.id),ne("User deleted successfully!","success")}catch(T){ne(T?.message||"Failed to delete user")}finally{_(!1),P(null)}},ce=[{value:"all",label:"All Fields"},{value:"name",label:"Name"},{value:"username",label:"Username"},{value:"email",label:"Email"},{value:"address",label:"Address"},{value:"phoneNumber",label:"Phone Number"},{value:"role",label:"Role"}];return s.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 pb-safe-bottom",children:[s.jsx("h1",{className:"mb-4 sm:mb-6 text-2xl sm:text-3xl font-bold",children:"Manage Users"}),s.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row gap-3 sm:gap-4",children:[s.jsxs("div",{className:"flex flex-1 gap-2",children:[s.jsx("select",{value:f,onChange:T=>g(T.target.value),className:"rounded border p-2 bg-white mobile-input",children:ce.map(T=>s.jsx("option",{value:T.value,children:T.label},T.value))}),s.jsx("input",{value:u,onChange:T=>m(T.target.value),placeholder:`Search ${f==="all"?"all fields":f}...`,className:"flex-1 rounded border p-2 mobile-input"})]}),s.jsx("button",{onClick:()=>y(T=>!T),className:"rounded bg-emerald-600 px-4 py-2 text-white hover:bg-emerald-700 mobile-button touch-manipulation",children:x?"Cancel":"New User"})]}),x&&s.jsxs("form",{onSubmit:ie,className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700 border-b pb-2",children:"Personal Information"}),s.jsx("input",{value:U.name,onChange:T=>V(L=>({...L,name:T.target.value})),placeholder:"Restaurant Name",className:"w-full rounded border p-2",required:!0,type:"text"}),s.jsx("input",{value:U.address,onChange:T=>V(L=>({...L,address:T.target.value})),placeholder:"Address",className:"w-full rounded border p-2",required:!0,type:"text"}),s.jsx("input",{value:U.phoneNumber,onChange:T=>{const L=H(T.target.value);V(X=>({...X,phoneNumber:L}))},placeholder:"Phone Number",className:"w-full rounded border p-2",required:!0,type:"tel"}),s.jsx("input",{value:U.email,onChange:T=>V(L=>({...L,email:T.target.value})),placeholder:"Email",className:"w-full rounded border p-2",required:!0,type:"email"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700 border-b pb-2",children:"Account Information"}),s.jsx("input",{value:U.username,onChange:T=>V(L=>({...L,username:T.target.value})),placeholder:"Username",className:"w-full rounded border p-2",required:!0,type:"text"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{value:U.password,onChange:T=>{V(L=>({...L,password:T.target.value}))},placeholder:"Password",className:"w-full rounded border p-2 pr-10",required:!0,type:j?"text":"password"}),s.jsx("button",{type:"button",onClick:()=>k(!j),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:j?"Hide":"Show"})]}),U.password&&s.jsx("div",{className:"-mt-2",children:s.jsxs("p",{className:`text-sm ${U.password.length<6?"text-red-600":U.password.length<8?"text-yellow-600":"text-green-600"}`,children:["Password length: ",U.password.length," characters",U.password.length<6&&" (minimum 6 required)",U.password.length>=6&&U.password.length<8&&" (good)",U.password.length>=8&&" (strong)"]})}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{value:U.confirmPassword,onChange:T=>{V(L=>({...L,confirmPassword:T.target.value}))},placeholder:"Confirm Password",className:`w-full rounded border p-2 pr-10 ${U.confirmPassword&&U.password!==U.confirmPassword?"border-red-400 bg-red-50":U.confirmPassword&&U.password===U.confirmPassword?"border-green-400 bg-green-50":""}`,required:!0,type:b?"text":"password"}),s.jsx("button",{type:"button",onClick:()=>S(!b),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:b?"Hide":"Show"})]}),U.confirmPassword&&s.jsx("div",{className:"-mt-2",children:U.password===U.confirmPassword?s.jsx("p",{className:"text-sm text-green-600",children:" Passwords match"}):s.jsx("p",{className:"text-sm text-red-600",children:" Passwords do not match"})})]}),s.jsx("div",{className:"md:col-span-2",children:s.jsx("button",{type:"submit",className:"w-full rounded bg-blue-600 py-3 text-white font-semibold hover:bg-blue-700 transition-colors",children:"Add User"})})]}),s.jsx("div",{className:"hidden lg:block mobile-table-container",children:s.jsxs("table",{className:"w-full table-auto border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-200 text-left",children:[s.jsx("th",{className:"px-3 py-2",children:"Name"}),s.jsx("th",{className:"px-3 py-2",children:"Username"}),s.jsx("th",{className:"px-3 py-2",children:"Email"}),s.jsx("th",{className:"px-3 py-2",children:"Phone"}),s.jsx("th",{className:"px-3 py-2",children:"Role"}),s.jsx("th",{className:"px-3 py-2",children:"Actions"})]})}),s.jsxs("tbody",{children:[W.map(T=>s.jsxs("tr",{className:"border-b last:border-0 hover:bg-gray-50",children:[s.jsx("td",{className:"px-3 py-2",children:T.name}),s.jsx("td",{className:"px-3 py-2",children:T.username}),s.jsx("td",{className:"px-3 py-2",children:T.email}),s.jsx("td",{className:"px-3 py-2",children:T.phoneNumber}),s.jsx("td",{className:"px-3 py-2",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${T.role==="admin"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:T.role})}),s.jsx("td",{className:"px-3 py-2",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(Be,{to:`/admin/users/${T.id}`,className:"text-emerald-600 hover:text-emerald-700 hover:bg-emerald-50 text-sm font-medium px-2 py-1 rounded transition-colors",children:"View"}),s.jsx("button",{onClick:()=>fe(T.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 text-sm font-medium px-2 py-1 rounded transition-colors",children:"Delete"})]})})]},T.id)),W.length===0&&s.jsx("tr",{children:s.jsxs("td",{colSpan:6,className:"px-3 py-6 text-center text-gray-500",children:['No users match "',u,'".']})})]})]})}),s.jsxs("div",{className:"lg:hidden space-y-3",children:[W.map(T=>s.jsxs("div",{className:"mobile-table-card",children:[s.jsxs("div",{className:"mobile-table-card-header flex items-center justify-between",children:[s.jsx("span",{className:"font-semibold text-gray-900 truncate",children:T.name}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${T.role==="admin"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:T.role})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"mobile-table-card-row",children:[s.jsx("span",{className:"mobile-table-card-label",children:"Username:"}),s.jsx("span",{className:"mobile-table-card-value",children:T.username})]}),s.jsxs("div",{className:"mobile-table-card-row",children:[s.jsx("span",{className:"mobile-table-card-label",children:"Email:"}),s.jsx("span",{className:"mobile-table-card-value truncate",children:T.email})]}),s.jsxs("div",{className:"mobile-table-card-row",children:[s.jsx("span",{className:"mobile-table-card-label",children:"Phone:"}),s.jsx("span",{className:"mobile-table-card-value",children:T.phoneNumber})]}),s.jsxs("div",{className:"flex space-x-3 pt-2 border-t border-gray-200",children:[s.jsx(Be,{to:`/admin/users/${T.id}`,className:"flex-1 text-center bg-emerald-600 text-white py-2 px-3 rounded-lg text-sm font-medium hover:bg-emerald-700 transition-colors touch-manipulation mobile-touch-target",children:"View Details"}),s.jsx("button",{onClick:()=>fe(T.id),className:"flex-1 text-center bg-red-600 text-white py-2 px-3 rounded-lg text-sm font-medium hover:bg-red-700 transition-colors touch-manipulation mobile-touch-target",children:"Delete"})]})]})]},T.id)),W.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx("div",{className:"mb-4",children:s.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),s.jsxs("p",{children:['No users match "',u,'".']})]})]}),D.show&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center mr-3 ${D.type==="success"?"bg-green-100":"bg-red-100"}`,children:D.type==="success"?s.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):s.jsx("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsx("h3",{className:`text-lg font-medium ${D.type==="success"?"text-green-800":"text-red-800"}`,children:D.type==="success"?"Success":"Error"})]}),s.jsx("p",{className:"text-gray-700 mb-6",children:D.message}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:ee,className:`px-4 py-2 rounded-lg font-medium transition-colors ${D.type==="success"?"bg-green-600 text-white hover:bg-green-700":"bg-red-600 text-white hover:bg-red-700"}`,children:"OK"})})]})}),w&&O&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-red-100 flex items-center justify-center mr-3",children:s.jsx("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Confirm Delete"})]}),s.jsx("p",{className:"text-gray-700 mb-2",children:"Are you sure you want to delete the user:"}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-6",children:[s.jsx("p",{className:"font-medium text-gray-900",children:O.name}),s.jsx("p",{className:"text-sm text-gray-600",children:O.email})]}),s.jsx("p",{className:"text-sm text-red-600 mb-6",children:"This action cannot be undone."}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>{_(!1),P(null)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:Y,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete User"})]})]})})]})}function Dw(){const{id:c}=ms(),{users:r,updateUser:n,deleteUser:i}=ns(),o=hs(),[u,m]=E.useState(null),[f,g]=E.useState(!1),[x,y]=E.useState({}),[j,k]=E.useState(!1),[b,S]=E.useState(!1),[w,_]=E.useState(!1),[O,P]=E.useState(""),[D,z]=E.useState({show:!1,message:"",type:"success"});E.useEffect(()=>{if(c){const ee=r.find(ie=>ie.id===c);ee&&(m(ee),y(ee))}},[c,r]);const U=(ee,ie="error")=>{z({show:!0,message:ee,type:ie})},V=()=>{z({show:!1,message:"",type:"success"})},H=async()=>{if(u&&x)try{const ee={name:x.name,address:x.address,username:x.username,email:x.email,phoneNumber:x.phoneNumber,role:x.role,comments:x.comments},ie=Object.fromEntries(Object.entries(ee).filter(([fe,Y])=>Y!==void 0));await n(u.id,ie),m({...u,...x}),g(!1),U("User updated successfully!","success")}catch(ee){console.error("Error updating user:",ee),U("Failed to update user. Please try again.")}},le=()=>{u&&(y(u),g(!1))},W=async()=>{if(u)try{await i(u.id),U("User deleted successfully!","success"),setTimeout(()=>{o("/admin/users")},1500)}catch(ee){console.error("Error deleting user:",ee),U("Failed to delete user. Please try again.")}finally{k(!1)}},ne=async()=>{if(!u||!O.trim()){U("Please enter a new password.");return}if(O.length<6){U("Password must be at least 6 characters long.");return}try{await n(u.id,{password:O}),U("Password reset successfully!","success"),P(""),S(!1),_(!1)}catch(ee){console.error("Error resetting password:",ee),U("Failed to reset password. Please try again.")}};return u?s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"User Profile"}),s.jsx("p",{className:"text-gray-600",children:"Manage user information and settings"})]}),s.jsx(Gt,{to:"/admin/users",className:"text-emerald-600 hover:underline",children:" Back to Users"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-2xl font-bold text-emerald-600",children:u.name.charAt(0).toUpperCase()})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:u.name}),s.jsxs("p",{className:"text-gray-600",children:["@",u.username]})]})]}),s.jsx("div",{className:"flex space-x-2",children:f?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:H,className:"px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700",children:"Save Changes"}),s.jsx("button",{onClick:le,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Cancel"})]}):s.jsx("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700",children:"Edit Profile"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Restaurant Name"}),f?s.jsx("input",{type:"text",value:x.name||"",onChange:ee=>y({...x,name:ee.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}):s.jsx("p",{className:"text-gray-900",children:u.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),f?s.jsx("input",{type:"text",value:x.username||"",onChange:ee=>y({...x,username:ee.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}):s.jsxs("p",{className:"text-gray-900",children:["@",u.username]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),f?s.jsx("input",{type:"email",value:x.email||"",onChange:ee=>y({...x,email:ee.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}):s.jsx("p",{className:"text-gray-900",children:u.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),f?s.jsx("input",{type:"tel",value:x.phoneNumber||"",onChange:ee=>y({...x,phoneNumber:ee.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}):s.jsx("p",{className:"text-gray-900",children:u.phoneNumber})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),f?s.jsx("textarea",{value:x.address||"",onChange:ee=>y({...x,address:ee.target.value}),rows:3,className:"w-full p-2 border rounded focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}):s.jsx("p",{className:"text-gray-900",children:u.address})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),f?s.jsxs("select",{value:x.role||"user",onChange:ee=>y({...x,role:ee.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[s.jsx("option",{value:"user",children:"User"}),s.jsx("option",{value:"admin",children:"Admin"}),s.jsx("option",{value:"manager",children:"Manager"})]}):s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800",children:u.role||"user"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comments & Notes"}),f?s.jsx("textarea",{value:x.comments||"",onChange:ee=>y({...x,comments:ee.target.value}),rows:4,placeholder:"Add notes about this restaurant user...",className:"w-full p-2 border rounded focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}):s.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded min-h-[100px]",children:u.comments||"No comments added"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User ID"}),s.jsx("p",{className:"text-gray-500 text-sm font-mono",children:u.id})]}),f&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),s.jsx("input",{type:"password",value:x.password||"",onChange:ee=>y({...x,password:ee.target.value}),className:"w-full p-2 border rounded focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter new password (leave blank to keep current)"})]})]})]}),!f&&s.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Account Actions"}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx("button",{onClick:()=>k(!0),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Delete User"}),s.jsx("button",{onClick:()=>S(!0),className:"px-4 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700 transition-colors",children:"Reset Password"})]})]})]}),D.show&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center mr-3 ${D.type==="success"?"bg-green-100":"bg-red-100"}`,children:D.type==="success"?s.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):s.jsx("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsx("h3",{className:`text-lg font-medium ${D.type==="success"?"text-green-800":"text-red-800"}`,children:D.type==="success"?"Success":"Error"})]}),s.jsx("p",{className:"text-gray-700 mb-6",children:D.message}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:V,className:`px-4 py-2 rounded-lg font-medium transition-colors ${D.type==="success"?"bg-green-600 text-white hover:bg-green-700":"bg-red-600 text-white hover:bg-red-700"}`,children:"OK"})})]})}),j&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-red-100 flex items-center justify-center mr-3",children:s.jsx("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Confirm Delete"})]}),s.jsx("p",{className:"text-gray-700 mb-2",children:"Are you sure you want to delete this user?"}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-6",children:[s.jsx("p",{className:"font-medium text-gray-900",children:u?.name}),s.jsx("p",{className:"text-sm text-gray-600",children:u?.email})]}),s.jsx("p",{className:"text-sm text-red-600 mb-6",children:"This action cannot be undone."}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:W,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete User"})]})]})}),b&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-yellow-100 flex items-center justify-center mr-3",children:s.jsx("svg",{className:"w-4 h-4 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-3a1 1 0 011-1h2.586l4.707-4.707A6 6 0 1121 9z"})})}),s.jsx("h3",{className:"text-lg font-medium text-yellow-800",children:"Reset Password"})]}),s.jsxs("p",{className:"text-gray-700 mb-4",children:["Enter a new password for ",s.jsx("strong",{children:u?.name}),":"]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("input",{type:"password",value:O,onChange:ee=>P(ee.target.value),placeholder:"Enter new password",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500",minLength:6}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Password must be at least 6 characters long."})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>{S(!1),_(!1),P("")},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:()=>_(!0),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors",disabled:!O.trim()||O.length<6,children:"Reset Password"})]})]})}),w&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-red-100 flex items-center justify-center mr-3",children:s.jsx("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Confirm Password Reset"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("p",{className:"text-gray-700 mb-3",children:["Are you sure you want to reset the password for ",s.jsx("strong",{children:u?.name}),"?"]}),s.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("svg",{className:"w-5 h-5 text-orange-600 mt-0.5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-orange-800",children:"Security Warning"}),s.jsx("p",{className:"text-sm text-orange-700 mt-1",children:"This will immediately change the user's password. The user will need to use the new password to log in."})]})]})})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:()=>{ne(),_(!1)},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Confirm Reset"})]})]})})]}):s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-600 mb-4",children:"User Not Found"}),s.jsx(Gt,{to:"/admin/users",className:"text-emerald-600 hover:underline",children:" Back to Users"})]})})}function Uw(){const{getPreloadedData:c}=rs(),[r,n]=E.useState([]),[i,o]=E.useState("all"),[u,m]=E.useState(null),[f,g]=E.useState(!1),[x,y]=E.useState(null),[j,k]=E.useState(!1),[b,S]=E.useState(!0);E.useEffect(()=>{w()},[]);const w=async()=>{try{S(!0);const Y=c("admin-orders-list");if(Y&&Y.length>0){console.log("Using preloaded orders data:",Y.length,"orders"),n(Y),S(!1);return}console.log("No preloaded orders, fetching from API");const ce=await pa.getAllOrders();n(ce),S(!1)}catch(Y){console.error("Error loading orders:",Y),S(!1)}},_=r.filter(Y=>i==="all"?!0:Y.status===i),O=r.filter(Y=>Y.status==="paid"),P=r.filter(Y=>Y.status==="processing"||Y.status==="confirmed"),D=r.filter(Y=>Y.status==="delivered"),z=r.length,U=async Y=>{try{await pa.updateOrderStatus(Y,"processing")&&await w()}catch(ce){console.error("Error confirming order:",ce)}},V=async Y=>{try{await pa.updateOrderStatus(Y,"delivered")&&await w()}catch(ce){console.error("Error marking order as delivered:",ce)}},H=Y=>{m(Y),g(!0)},le=()=>{g(!1),m(null)},W=async Y=>{y(Y)},ne=async()=>{if(x){k(!0);try{await pa.deleteOrder(x.id)?(await w(),y(null)):console.error("Failed to delete order")}catch(Y){console.error("Error deleting order:",Y)}finally{k(!1)}}},ee=()=>{y(null)},ie=Y=>{switch(Y){case"paid":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Paid"});case"confirmed":case"processing":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Processing"});case"out_for_delivery":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:"Out for Delivery"});case"delivered":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Delivered"});case"cancelled":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Cancelled"});default:return null}},fe=Y=>{switch(Y){case"paid":return"Order has been paid and is waiting for confirmation.";case"processed":return"Order has been confirmed and is being prepared for delivery.";case"delivered":return"Order has been successfully delivered to the customer.";default:return""}};return s.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6 pb-safe-bottom",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Orders Management"}),s.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Manage customer orders and track delivery status"})]}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[s.jsxs("div",{className:"bg-white p-3 sm:p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-blue-600",children:O.length}),s.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Pending Confirmation"})]}),s.jsxs("div",{className:"bg-white p-3 sm:p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-yellow-600",children:P.length}),s.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Processing"})]}),s.jsxs("div",{className:"bg-white p-3 sm:p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-green-600",children:D.length}),s.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Delivered"})]}),s.jsxs("div",{className:"bg-white p-3 sm:p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-gray-600",children:z}),s.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Total Orders"})]})]}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Filter by Status:"}),s.jsxs("select",{value:i,onChange:Y=>o(Y.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 mobile-input",children:[s.jsx("option",{value:"all",children:"All Orders"}),s.jsx("option",{value:"paid",children:"Paid (Pending)"}),s.jsx("option",{value:"processed",children:"Processing"}),s.jsx("option",{value:"delivered",children:"Delivered"})]})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[s.jsx("div",{className:"px-4 sm:px-6 py-4 border-b border-gray-200",children:s.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Orders (",_.length,")"]})}),_.length===0?s.jsxs("div",{className:"p-6 sm:p-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Orders Found"}),s.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:i==="all"?"No orders have been placed yet.":`No orders with status "${i}" found.`})]}):s.jsx("div",{className:"divide-y divide-gray-200",children:_.map(Y=>s.jsxs("div",{className:"p-4 sm:p-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 truncate",children:Y.id}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Customer: ",Y.userName]})]}),s.jsxs("div",{className:"text-left sm:text-right",children:[s.jsxs("p",{className:"text-lg font-medium text-gray-900",children:["$",Y.total.toFixed(2)]}),ie(Y.status)]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4 text-sm text-gray-600 mb-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Order Date:"}),s.jsx("span",{className:"block sm:inline sm:ml-1",children:new Date(Y.createdAt||"").toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Delivery Date:"}),s.jsx("span",{className:"block sm:inline sm:ml-1",children:new Date(Y.deliveryDate).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Delivery Time:"}),s.jsx("span",{className:"block sm:inline sm:ml-1",children:Y.deliveryTime})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Payment:"}),s.jsx("span",{className:"block sm:inline sm:ml-1",children:Y.paymentMethod})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 sm:p-4 mb-4",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2 text-sm sm:text-base",children:"Order Items:"}),s.jsx("div",{className:"space-y-2",children:Y.items.map(ce=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"truncate pr-2",children:[ce.menuItemName," (Qty: ",ce.quantity,")"]}),s.jsxs("span",{className:"font-medium flex-shrink-0",children:["$",(ce.price*ce.quantity).toFixed(2)]})]},ce.id))})]}),s.jsx("div",{className:"bg-blue-50 rounded-lg p-3 mb-4",children:s.jsx("p",{className:"text-sm text-gray-600",children:fe(Y.status)})}),s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[Y.status==="paid"&&s.jsx("button",{onClick:()=>U(Y.id),className:"px-4 py-2 bg-emerald-600 text-white text-sm rounded-lg hover:bg-emerald-700 transition-colors touch-manipulation mobile-touch-target",children:"Confirm Order"}),(Y.status==="processing"||Y.status==="confirmed")&&s.jsx("button",{onClick:()=>V(Y.id),className:"px-4 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors touch-manipulation mobile-touch-target",children:"Mark as Delivered"}),s.jsx("button",{onClick:()=>H(Y),className:"px-4 py-2 border border-gray-300 text-gray-700 text-sm rounded-lg hover:bg-gray-50 transition-colors touch-manipulation mobile-touch-target",children:"View Details"}),s.jsx("button",{onClick:()=>W(Y),className:"px-4 py-2 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors touch-manipulation mobile-touch-target",children:"Delete Order"})]})]},Y.id))})]}),x&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirm Delete Order"}),s.jsx("p",{className:"text-gray-600 mb-2",children:"Are you sure you want to delete this order?"}),s.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg mb-4",children:[s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("strong",{children:"Order ID:"})," ",x.id]}),s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("strong",{children:"Customer:"})," ",x.userName||"N/A"]}),s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("strong",{children:"Total:"})," $",x.total?.toFixed(2)||"0.00"]}),s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("strong",{children:"Status:"})," ",x.status]})]}),s.jsx("p",{className:"text-red-600 text-sm mb-4",children:"This action cannot be undone. All order items and payment records will be permanently deleted."}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:ee,disabled:j,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),s.jsx("button",{onClick:ne,disabled:j,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center",children:j?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):"Delete Order"})]})]})})}),s.jsx(_0,{order:u,isOpen:f,onClose:le})]})}function Mw(){const{users:c}=ns(),[r,n]=E.useState([]),[i,o]=E.useState([]),[u,m]=E.useState([]),[f,g]=E.useState(null),[x,y]=E.useState([]),[j,k]=E.useState({}),[b,S]=E.useState(!1),[w,_]=E.useState(null),[O,P]=E.useState(""),[D,z]=E.useState("all"),[U,V]=E.useState("draft"),[H,le]=E.useState({}),[W,ne]=E.useState(!1),[ee,ie]=E.useState(""),[fe,Y]=E.useState(""),[ce,T]=E.useState(""),[L,X]=E.useState([]),[Ne,N]=E.useState(null),[I,se]=E.useState(!1),[ae,he]=E.useState(null),[we,pe]=E.useState(null),Ze=M=>{he(M),setTimeout(()=>he(null),5e3)},F=M=>{pe(M),setTimeout(()=>pe(null),5e3)},ue=E.useMemo(()=>{const M=r.filter(Z=>!i.some(re=>re.id===Z.id)&&!u.includes(Z.id));return[...i,...M]},[i,r,u]),Te=U==="draft"?ue:U==="live"?r:[],[ye,Se]=E.useState({name:"",ingredients:"",unitSize:"",abv:0,price:0,imageUrl:"",category:"spirits",inStock:!0,assignmentType:"all_users"});E.useEffect(()=>{(async()=>{try{const[Z,re]=await Promise.all([ct.getAllMenuItems(!1),ct.getAllMenuItems(!0)]);n(Z),o(re)}catch(Z){console.error("Error loading menu items:",Z)}})()},[]),E.useEffect(()=>{U==="user-menus"&&(async()=>{const Z=await qi.getAllSpecializedDrinksWithUsers();le(Z)})()},[U]);const ht=M=>{const Z=M.target.files?.[0];if(Z){const re=new FileReader;re.onload=ge=>{const mt=ge.target?.result;Se(Qt=>({...Qt,imageUrl:mt}))},re.readAsDataURL(Z)}},Tt=async M=>{if(M.preventDefault(),!ye.name||!ye.ingredients||!ye.unitSize||ye.price<=0){F("Please fill in all required fields");return}try{if(w){const Z=await ct.updateMenuItem(w.id,ye);Z&&o(re=>re.map(ge=>ge.id===w.id?Z:ge)),_(null)}else{const Z=await ct.createMenuItem({...ye,isDraft:!0});Z&&o(re=>[...re,Z])}Se({name:"",ingredients:"",unitSize:"",abv:0,price:0,imageUrl:"",category:"spirits",inStock:!0,assignmentType:"all_users"}),S(!1)}catch(Z){console.error("Error saving menu item:",Z),F("Failed to save menu item")}},Yt=M=>{if(!i.some(ge=>ge.id===M.id)){const ge={...M,isDraft:!0};o(mt=>[...mt,ge])}const re={...M};_(re),Se({name:re.name,ingredients:re.ingredients,unitSize:re.unitSize,abv:re.abv,price:re.price,imageUrl:re.imageUrl,category:re.category,inStock:re.inStock,assignmentType:re.assignmentType}),S(!0)},Fa=M=>{g(M)},Ct=async()=>{if(!f)return;const M=f.id;try{if(!i.some(re=>re.id===M)){const re={...f,isDraft:!0};o(ge=>[...ge,re]),y(ge=>Array.from(new Set([...ge,M])))}m(re=>Array.from(new Set([...re,M]))),g(null),Ze('Marked for deletion. Click "Update Live Menu" to apply.')}catch(Z){console.error("Error marking menu item for deletion:",Z),F("Failed to mark menu item for deletion")}},Wa=()=>g(null),wa=M=>{m(Z=>Z.filter(re=>re!==M)),x.includes(M)&&(o(Z=>Z.filter(re=>re.id!==M)),y(Z=>Z.filter(re=>re!==M))),Ze("Pending deletion canceled.")},Na=async M=>{try{const Z=i.find(ge=>ge.id===M);if(Z){const ge=await ct.updateMenuItem(M,{inStock:!Z.inStock});ge&&(o(mt=>mt.map(Qt=>Qt.id===M?ge:Qt)),Ze('Stock status updated in draft. Click "Update Live Menu" to apply changes.'));return}const re=r.find(ge=>ge.id===M);if(re){const ge=await ct.createMenuItem({name:re.name,ingredients:re.ingredients,unitSize:re.unitSize,abv:re.abv,price:re.price,imageUrl:re.imageUrl,category:re.category,inStock:!re.inStock,isDraft:!0,assignmentType:re.assignmentType});ge&&(o(mt=>[...mt,ge]),k(mt=>({...mt,[ge.id]:re.id})),Ze('Stock status updated in draft. Click "Update Live Menu" to apply changes.'));return}}catch(Z){console.error("Error toggling stock locally:",Z),F("Failed to toggle stock")}},[Ps,Sa]=E.useState(!1),an=async()=>{try{for(const re of u)try{await ct.deleteMenuItem(re)}catch(ge){console.warn("Failed to delete item during publish:",re,ge)}for(const[re,ge]of Object.entries(j))try{await ct.deleteMenuItem(ge),console.log(`Deleted original live item ${ge} (replaced by draft ${re})`)}catch(mt){console.warn("Failed to delete original live item during publish:",ge,mt)}try{const re=i.map(ge=>ge.id);re.length>0&&await ct.publishDraftItems(re)}catch(re){console.warn("Failed to publish draft items in batch",re)}const[M,Z]=await Promise.all([ct.getAllMenuItems(!1),ct.getAllMenuItems(!0)]);n(M),o(Z),m([]),k({}),as.clearUserMenuCache(),Sa(!1),Ze("Live menu updated successfully!")}catch(M){console.error("Error updating live menu:",M),F("Failed to update live menu")}},oe=async()=>{if(!ee){F("Please select a user first");return}if(L.length===0){F("Please select at least one specialized drink");return}try{for(const Z of L){const re=await ct.getUsersForDrink(Z);re.includes(ee)||await ct.assignDrinkToUsers(Z,[...re,ee])}const M=await qi.getAllSpecializedDrinksWithUsers();le(M),ie(""),X([]),Y(""),T(""),ne(!1),Ze("Custom menu created successfully!")}catch(M){console.error("Error creating custom menu:",M),F("Failed to create custom menu")}},de=(M,Z)=>{X(Z?re=>[...re,M]:re=>re.filter(ge=>ge!==M))},_e=r.filter(M=>M.assignmentType==="specific_users").filter(M=>{const Z=ce.toLowerCase();return M.name.toLowerCase().includes(Z)||M.ingredients.toLowerCase().includes(Z)||M.category.toLowerCase().includes(Z)}),Ie=(()=>{const M=[];return c.filter(Z=>Z.role!=="admin").forEach(Z=>{const re=[];Object.entries(H).forEach(([ge,{drink:mt,userIds:Qt}])=>{Qt.includes(Z.id)&&re.push(mt)}),re.length>0&&M.push({user:Z,customDrinks:re})}),M})(),lt=c.filter(M=>M.role!=="admin").filter(M=>{const Z=fe.toLowerCase();return M.name.toLowerCase().includes(Z)||M.email.toLowerCase().includes(Z)||M.username.toLowerCase().includes(Z)}),gl=i.filter(M=>!r.some(Z=>Z.id===M.id)).length,rn=Te.filter(M=>{const Z=M.name.toLowerCase().includes(O.toLowerCase())||M.ingredients.toLowerCase().includes(O.toLowerCase()),re=D==="all"||M.category===D;return Z&&re}),bs=[{value:"all",label:"All Categories"},{value:"spirits",label:"Spirits"},{value:"wine",label:"Wine"},{value:"beer",label:"Beer"},{value:"cocktails",label:"Cocktails"},{value:"mixers",label:"Mixers"}],Is=(()=>{if(i.length===0)return!1;if(r.length===0&&i.length>0)return!0;const M=ge=>({name:String(ge.name||"").trim(),ingredients:String(ge.ingredients||"").trim(),unitSize:String(ge.unitSize||"").trim(),abv:Number(ge.abv||0),price:Number(ge.price||0),imageUrl:String(ge.imageUrl||"").trim(),category:String(ge.category||"").trim(),inStock:!!ge.inStock,assignmentType:String(ge.assignmentType||"all_users")}),Z=new Map,re=new Map;i.forEach(ge=>{Z.set(ge.id,M(ge))}),r.forEach(ge=>{re.set(ge.id,M(ge))});for(const[ge]of Z)if(!re.has(ge))return!0;for(const[ge]of re)if(!Z.has(ge))return!0;for(const[ge,mt]of Z){const Qt=re.get(ge);if(Qt){const nn=JSON.stringify(mt),_a=JSON.stringify(Qt);if(nn!==_a)return!0}}return!1})();return s.jsxs("div",{className:"w-full",children:[ae&&s.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg shadow-lg flex items-center space-x-2",children:[s.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),s.jsx("span",{children:ae}),s.jsx("button",{onClick:()=>he(null),className:"ml-2 text-green-500 hover:text-green-700",children:s.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),we&&s.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg shadow-lg flex items-center space-x-2",children:[s.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),s.jsx("span",{children:we}),s.jsx("button",{onClick:()=>pe(null),className:"ml-2 text-red-500 hover:text-red-700",children:s.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),U==="draft"&&s.jsxs("div",{className:"w-full px-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Draft Menu"}),s.jsx("p",{className:"text-gray-600",children:"Make your changes here before they go live."})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>V("draft"),className:"px-3 py-2 rounded-lg text-sm font-medium bg-emerald-600 text-white",children:"Draft Menu"}),s.jsx("button",{onClick:()=>{V("live"),S(!1),_(null)},className:"px-3 py-2 rounded-lg text-sm font-medium bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Live Menu"}),s.jsx("button",{onClick:()=>{V("user-menus"),S(!1),_(null)},className:"px-3 py-2 rounded-lg text-sm font-medium bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Drink Assignments"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6",children:[s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:gl}),s.jsx("div",{className:"text-sm text-gray-600",children:"Draft Items"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.filter(M=>M.inStock).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"In Stock"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:i.filter(M=>!M.inStock).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Out of Stock"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center flex flex-col items-center",children:[s.jsx("div",{className:"text-xs font-small text-gray-700",children:Is?" Draft changes detected":" Up to Date"}),s.jsx("button",{onClick:()=>Sa(!0),disabled:!Is,className:`px-4 py-2 rounded-lg text-xs font-medium transition-colors ${Is?"bg-yellow-600 text-white hover:bg-yellow-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Update Live Menu"})]})]}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md mt-6 mb-6",children:s.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[s.jsx("input",{type:"text",placeholder:"Search items...",value:O,onChange:M=>P(M.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}),s.jsx("select",{value:D,onChange:M=>z(M.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:bs.map(M=>s.jsx("option",{value:M.value,children:M.label},M.value))}),s.jsx("button",{onClick:()=>{S(!0),_(null),Se({name:"",ingredients:"",unitSize:"",abv:0,price:0,imageUrl:"",category:"spirits",inStock:!0,assignmentType:"all_users"})},className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Add New Item"})]})})]}),U==="live"&&s.jsxs("div",{className:"w-full px-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Live Menu Preview"}),s.jsx("p",{className:"text-gray-600",children:"Customers will see these items."})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>V("draft"),className:"px-3 py-2 rounded-lg text-sm font-medium bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Draft Menu"}),s.jsx("button",{onClick:()=>V("live"),className:"px-3 py-2 rounded-lg text-sm font-medium bg-blue-600 text-white",children:"Live Menu"}),s.jsx("button",{onClick:()=>V("user-menus"),className:"px-3 py-2 rounded-lg text-sm font-medium bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Drink Assignments"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Live Items"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.filter(M=>M.inStock).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"In Stock"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:r.filter(M=>!M.inStock).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Out of Stock"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center flex flex-col items-center",children:[s.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:"LIVE"}),s.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Status"})]})]}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md mb-6",children:s.jsxs("div",{className:"flex flex-wrap gap-4",children:[s.jsx("input",{type:"text",placeholder:"Search items...",value:O,onChange:M=>P(M.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}),s.jsx("select",{value:D,onChange:M=>z(M.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:bs.map(M=>s.jsx("option",{value:M.value,children:M.label},M.value))})]})})]}),U==="user-menus"&&s.jsxs("div",{className:"w-full px-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Restaurant Profiles"}),s.jsx("p",{className:"text-gray-600",children:"View restaurant profiles and their custom drink access"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>V("draft"),className:"px-3 py-2 rounded-lg text-sm font-medium bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Draft Menu"}),s.jsx("button",{onClick:()=>V("live"),className:"px-3 py-2 rounded-lg text-sm font-medium bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Live Menu"}),s.jsx("button",{onClick:()=>V("user-menus"),className:"px-3 py-2 rounded-lg text-sm font-medium bg-purple-600 text-white",children:"Restaurant Profiles"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:Object.keys(H).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Specialized Drinks"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:Object.values(H).reduce((M,Z)=>M+Z.userIds.length,0)}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Assignments"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-600",children:c.filter(M=>M.role!=="admin").length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Users"})]}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md text-center flex flex-col items-center justify-center",children:s.jsx("button",{onClick:()=>ne(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm font-medium",children:"Create Custom Menu"})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md mb-6",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-xl font-semibold",children:"Restaurant Profiles"})}),s.jsx("div",{className:"p-6",children:Ie.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"text-gray-500",children:"No restaurant profiles found"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Create custom menus for users to see their profiles here"})]}):s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:Ie.map(({user:M,customDrinks:Z})=>s.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-4 hover:border-purple-400 hover:shadow-md cursor-pointer transition-all duration-200 aspect-square flex flex-col items-center justify-center text-center",onClick:()=>{N(M.id),se(!0)},children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-blue-600 rounded-lg flex items-center justify-center mb-3",children:s.jsx("span",{className:"text-white font-bold text-xl",children:M.name.charAt(0).toUpperCase()})}),s.jsx("h3",{className:"font-medium text-gray-900 text-sm mb-1 line-clamp-2",children:M.name}),s.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-1",children:M.email}),s.jsxs("div",{className:"text-xs text-purple-600 font-medium",children:[Z.length," drink",Z.length!==1?"s":""]})]},M.id))})})]})]}),b&&s.jsx("div",{className:"w-full px-4 mb-6",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:w?"Edit Menu Item":"Add New Menu Item"}),s.jsxs("form",{onSubmit:Tt,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Name"}),s.jsx("input",{type:"text",value:ye.name,onChange:M=>Se(Z=>({...Z,name:M.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),s.jsxs("select",{value:ye.category,onChange:M=>Se(Z=>({...Z,category:M.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[s.jsx("option",{value:"spirits",children:"Spirits"}),s.jsx("option",{value:"wine",children:"Wine"}),s.jsx("option",{value:"beer",children:"Beer"}),s.jsx("option",{value:"cocktails",children:"Cocktails"}),s.jsx("option",{value:"mixers",children:"Mixers"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assignment Type"}),s.jsxs("select",{value:ye.assignmentType,onChange:M=>Se(Z=>({...Z,assignmentType:M.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[s.jsx("option",{value:"all_users",children:"Available to All Users"}),s.jsx("option",{value:"specific_users",children:"Specialized (Assign to Specific Users)"})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:ye.assignmentType==="all_users"?"This drink will be available to all users on their menu.":"This drink will only be available to users you specifically assign it to."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),s.jsx("textarea",{value:ye.ingredients,onChange:M=>Se(Z=>({...Z,ingredients:M.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"List the ingredients...",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Size"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"number",value:ye.unitSize.split(" ")[0]||"",onChange:M=>{const Z=ye.unitSize.split(" ")[1]||"ml";Se(re=>({...re,unitSize:`${M.target.value} ${Z}`}))},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"750",required:!0}),s.jsxs("select",{value:ye.unitSize.split(" ")[1]||"ml",onChange:M=>{const Z=ye.unitSize.split(" ")[0]||"";Se(re=>({...re,unitSize:`${Z} ${M.target.value}`}))},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[s.jsx("option",{value:"ml",children:"ml"}),s.jsx("option",{value:"oz",children:"oz"}),s.jsx("option",{value:"cl",children:"cl"}),s.jsx("option",{value:"l",children:"L"}),s.jsx("option",{value:"gal",children:"gal"}),s.jsx("option",{value:"pint",children:"pint"}),s.jsx("option",{value:"shot",children:"shot"}),s.jsx("option",{value:"serving",children:"serving"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ABV (%)"}),s.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:ye.abv,onChange:M=>Se(Z=>({...Z,abv:parseFloat(M.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price ($)"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:ye.price,onChange:M=>Se(Z=>({...Z,price:parseFloat(M.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image Thumbnail"}),s.jsx("input",{type:"file",accept:"image/*",onChange:ht,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"}),ye.imageUrl&&s.jsx("div",{className:"mt-2",children:s.jsx("img",{src:ye.imageUrl,alt:"Preview",className:"w-20 h-20 object-cover rounded border"})})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"inStock",checked:ye.inStock,onChange:M=>Se(Z=>({...Z,inStock:M.target.checked})),className:"mr-2"}),s.jsx("label",{htmlFor:"inStock",className:"text-sm text-gray-700",children:"In Stock"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{type:"submit",className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:w?"Update Item":"Add Item"}),s.jsx("button",{type:"button",onClick:()=>{S(!1),_(null)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})]})}),U!=="user-menus"&&s.jsx("div",{className:"w-full",children:s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4 px-4",children:rn.map(M=>s.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[s.jsxs("div",{className:"h-40 bg-gray-200 flex items-center justify-center overflow-hidden relative",children:[U==="draft"&&r.some(Z=>Z.id===M.id)&&s.jsx("div",{className:"absolute top-2 left-2 z-10",children:s.jsx("span",{className:"px-2 py-1 bg-blue-600 text-white text-xs font-medium rounded-full",children:"LIVE"})}),s.jsxs("div",{className:"absolute top-2 right-2 z-10 flex items-center space-x-2",children:[M.assignmentType==="specific_users"&&s.jsx("div",{children:s.jsx("span",{className:"px-2 py-1 bg-purple-500 text-white text-xs font-medium rounded-full",children:"Specialized"})}),U==="draft"&&u.includes(M.id)&&s.jsx("div",{children:s.jsx("span",{className:"px-2 py-1 bg-red-500 text-white text-xs font-medium rounded-full",children:"Pending Delete"})})]}),M.imageUrl?s.jsx("img",{src:M.imageUrl,alt:M.name,className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-gray-500",children:"No Image"})]}),s.jsxs("div",{className:"p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:M.name}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${M.inStock?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:M.inStock?"In Stock":"Out of Stock"})]}),s.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:M.ingredients}),s.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[s.jsxs("div",{children:["Size: ",M.unitSize]}),M.abv>0&&s.jsxs("div",{children:["ABV: ",M.abv,"%"]}),s.jsxs("div",{className:"font-medium text-gray-900",children:["$",M.price.toFixed(2)]}),s.jsx("div",{className:`text-xs ${M.assignmentType==="all_users"?"text-blue-600":"text-purple-600"}`,children:M.assignmentType==="all_users"?"All Users":"Specialized"})]}),U==="draft"&&s.jsxs("div",{className:"mt-4 flex space-x-2",children:[s.jsx("button",{onClick:()=>Yt(M),className:"text-emerald-600 hover:text-emerald-700 text-sm font-medium",children:"Edit"}),s.jsx("button",{onClick:()=>Na(M.id),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:M.inStock?"Mark Out of Stock":"Mark In Stock"}),u.includes(M.id)?s.jsx("button",{onClick:()=>wa(M.id),className:"text-gray-700 hover:text-gray-900 text-sm font-medium",children:"Cancel Delete"}):s.jsx("button",{onClick:()=>Fa(M),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Delete"})]})]})]},M.id))})}),U!=="user-menus"&&rn.length===0&&s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:U==="draft"?"No draft items found.":"No live items found."})}),W&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create Custom Menu"}),s.jsx("button",{onClick:()=>{ne(!1),ie(""),X([]),Y(""),T("")},className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"1. Select User"}),s.jsx("div",{className:"mb-4",children:s.jsx("input",{type:"text",placeholder:"Search users by name, email, or username...",value:fe,onChange:M=>Y(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})}),s.jsx("div",{className:"max-h-64 overflow-y-auto border border-gray-200 rounded-lg",children:lt.length===0?s.jsx("div",{className:"p-4 text-center text-gray-500",children:fe?"No users found matching your search":"No users available"}):lt.map(M=>s.jsx("div",{onClick:()=>ie(M.id),className:`p-3 border-b border-gray-200 cursor-pointer hover:bg-gray-50 ${ee===M.id?"bg-purple-50 border-purple-200":""}`,children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${ee===M.id?"bg-purple-600":"bg-gray-300"}`}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:M.name}),s.jsx("div",{className:"text-sm text-gray-600",children:M.email})]})]})},M.id))}),ee&&s.jsx("div",{className:"mt-3 p-3 bg-purple-50 rounded-lg",children:s.jsxs("div",{className:"text-sm text-purple-800",children:["Selected: ",c.find(M=>M.id===ee)?.name]})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"2. Select Specialized Drinks"}),s.jsx("div",{className:"mb-4",children:s.jsx("input",{type:"text",placeholder:"Search drinks by name, ingredients, or category...",value:ce,onChange:M=>T(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})}),s.jsx("div",{className:"max-h-80 overflow-y-auto border border-gray-200 rounded-lg",children:_e.length===0?s.jsx("div",{className:"p-4 text-center text-gray-500",children:ce?"No drinks found matching your search":'No specialized drinks available. Create drinks with "Specialized" assignment type first.'}):_e.map(M=>s.jsx("div",{className:"p-3 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",checked:L.includes(M.id),onChange:Z=>de(M.id,Z.target.checked),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center overflow-hidden",children:M.imageUrl?s.jsx("img",{src:M.imageUrl,alt:M.name,className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-gray-500 text-xs",children:"No Image"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:M.name}),s.jsxs("div",{className:"text-sm text-gray-600",children:[M.category,"  $",M.price.toFixed(2)]}),s.jsx("div",{className:"text-xs text-gray-500 truncate max-w-xs",children:M.ingredients})]})]})})]})},M.id))}),L.length>0&&s.jsx("div",{className:"mt-3 p-3 bg-purple-50 rounded-lg",children:s.jsxs("div",{className:"text-sm text-purple-800",children:[L.length," drink",L.length!==1?"s":""," selected"]})})]})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-4 mt-6 pt-6 border-t border-gray-200",children:[s.jsx("button",{onClick:()=>{ne(!1),ie(""),X([]),Y(""),T("")},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:oe,disabled:!ee||L.length===0,className:`px-6 py-2 rounded-lg font-medium transition-colors ${ee&&L.length>0?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Create Custom Menu"})]})]})}),I&&Ne&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:(()=>{const M=Ie.find(Z=>Z.user.id===Ne);return M?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-semibold",children:[M.user.name,"'s Custom Menu"]}),s.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Specialized drinks assigned to this restaurant"})]}),s.jsx("button",{onClick:()=>{se(!1),N(null)},className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-blue-600 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-xl",children:M.user.name.charAt(0).toUpperCase()})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900 text-lg",children:M.user.name}),s.jsx("div",{className:"text-sm text-gray-600",children:M.user.email}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Username: ",M.user.username]}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[M.user.address&&` ${M.user.address}`,M.user.phone&&`   ${M.user.phone}`]})]}),s.jsxs("div",{className:"ml-auto text-right",children:[s.jsxs("div",{className:"text-lg font-semibold text-purple-600",children:[M.customDrinks.length," drink",M.customDrinks.length!==1?"s":""]}),s.jsx("div",{className:"text-sm text-gray-600",children:"custom access"})]})]})}),s.jsx("div",{className:"divide-y divide-gray-200",children:M.customDrinks.length===0?s.jsx("div",{className:"p-6 text-center text-gray-500",children:"No custom drinks assigned to this restaurant yet."}):M.customDrinks.map(Z=>s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center overflow-hidden",children:Z.imageUrl?s.jsx("img",{src:Z.imageUrl,alt:Z.name,className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-gray-500 text-xs",children:"No Image"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-lg font-medium text-gray-900",children:Z.name}),s.jsx("p",{className:"text-sm text-gray-600",children:Z.ingredients}),s.jsxs("div",{className:"flex items-center mt-2 space-x-4",children:[s.jsx("span",{className:"text-sm text-gray-500",children:Z.category}),s.jsx("span",{className:"text-sm text-gray-500",children:Z.unitSize}),Z.abv>0&&s.jsxs("span",{className:"text-sm text-gray-500",children:[Z.abv,"% ABV"]}),s.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["$",Z.price.toFixed(2)]}),s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${Z.inStock?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:Z.inStock?"In Stock":"Out of Stock"})]})]})]})},Z.id))})]}):null})()})}),f&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Confirm Delete"}),s.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:['Are you sure you want to delete "',f.name,'"? This will mark the item for deletion and it will be removed from the live menu once you click "Update Live Menu".']}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:Wa,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg",children:"Cancel"}),s.jsx("button",{onClick:Ct,className:"px-4 py-2 bg-red-600 text-white rounded-lg",children:"Mark for Deletion"})]})]})}),Ps&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Confirm Publish"}),s.jsx("p",{className:"text-sm text-gray-700 mb-4",children:"This will apply pending deletions and publish draft changes to the live menu. Are you sure you want to continue?"}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>Sa(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg",children:"Cancel"}),s.jsx("button",{onClick:an,className:"px-4 py-2 bg-yellow-600 text-white rounded-lg",children:"Yes, Publish"})]})]})})]})}function Rw({isOpen:c,onClose:r,ticket:n,onUpdateStatus:i,onAddResponse:o}){const[u,m]=E.useState(""),[f,g]=E.useState(!1),x=async j=>{if(j.preventDefault(),!(!n||!u.trim())){g(!0);try{await o(n.id,u.trim()),m("")}finally{g(!1)}}},y=j=>{n&&i(n.id,j)};return!c||!n?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Support Ticket #",n.id.slice(-8)]}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["From: ",n.userName," (",n.userEmail,")"]})]}),s.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(Pi,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Subject"}),s.jsx("p",{className:"text-gray-700",children:n.subject})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Category"}),s.jsx("p",{className:"text-gray-700 capitalize",children:n.category})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Priority"}),s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${n.priority==="urgent"?"bg-red-100 text-red-800":n.priority==="high"?"bg-orange-100 text-orange-800":n.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:n.priority})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Description"}),s.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:s.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:n.description})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Status"}),s.jsx("div",{className:"flex space-x-2",children:["open","in_progress","resolved","closed"].map(j=>s.jsx("button",{onClick:()=>y(j),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${n.status===j?"bg-emerald-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:j.replace("_"," ")},j))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Admin Response"}),n.adminResponse?s.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(fl,{className:"w-4 h-4 text-emerald-600"}),s.jsx("span",{className:"text-sm font-medium text-emerald-900",children:"Response"})]}),s.jsx("p",{className:"text-emerald-800 whitespace-pre-wrap",children:n.adminResponse}),n.adminResponseDate&&s.jsxs("p",{className:"text-xs text-emerald-600 mt-2",children:["Replied: ",new Date(n.adminResponseDate).toLocaleString()]})]}):s.jsxs("form",{onSubmit:x,className:"space-y-4",children:[s.jsx("textarea",{value:u,onChange:j=>m(j.target.value),rows:4,placeholder:"Type your response to the user...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none",disabled:f}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"submit",disabled:f||!u.trim(),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:f?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Sending..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Ij,{className:"w-4 h-4"}),s.jsx("span",{children:"Send Response"})]})})})]})]})]})]})})}function zw(){const[c,r]=E.useState([]),[n,i]=E.useState([]),[o,u]=E.useState(null),[m,f]=E.useState(!1),[g,x]=E.useState("all"),[y,j]=E.useState(""),[k,b]=E.useState(!0);E.useEffect(()=>{const H=localStorage.getItem("supportTickets");if(H){const le=JSON.parse(H);r(le.sort((W,ne)=>new Date(ne.createdAt).getTime()-new Date(W.createdAt).getTime()))}b(!1)},[]),E.useEffect(()=>{let H=c;g!=="all"&&(H=H.filter(le=>le.status===g)),y&&(H=H.filter(le=>le.subject.toLowerCase().includes(y.toLowerCase())||le.userName.toLowerCase().includes(y.toLowerCase())||le.userEmail.toLowerCase().includes(y.toLowerCase())||le.description.toLowerCase().includes(y.toLowerCase()))),i(H)},[c,g,y]);const S=(H,le)=>{const W=c.map(ne=>ne.id===H?{...ne,status:le}:ne);r(W),localStorage.setItem("supportTickets",JSON.stringify(W)),o&&o.id===H&&u({...o,status:le})},w=async(H,le)=>{const W=c.map(ne=>ne.id===H?{...ne,adminResponse:le,adminResponseDate:new Date().toISOString(),status:"resolved"}:ne);r(W),localStorage.setItem("supportTickets",JSON.stringify(W)),o&&o.id===H&&u({...o,adminResponse:le,adminResponseDate:new Date().toISOString(),status:"resolved"})},_=H=>{u(H),f(!0)},O=()=>{u(null),f(!1)},P=H=>{switch(H){case"open":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Open"});case"in_progress":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"In Progress"});case"resolved":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Resolved"});case"closed":return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Closed"});default:return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:H})}},D=H=>{switch(H){case"urgent":return s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800",children:"Urgent"});case"high":return s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-orange-100 text-orange-800",children:"High"});case"medium":return s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-yellow-100 text-yellow-800",children:"Medium"});case"low":return s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800",children:"Low"});default:return s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800",children:H})}},z=H=>new Date(H).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),U=H=>{if(H.status!=="open")return!1;const le=new Date(H.createdAt),W=new Date;return W.setDate(W.getDate()-3),le<W},V={total:c.length,newTickets:c.filter(H=>H.status==="open").length,urgentTickets:c.filter(H=>U(H)).length,inProgress:c.filter(H=>H.status==="in_progress").length};return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Support Tickets"}),s.jsx("p",{className:"text-gray-600",children:"Manage customer support requests and provide assistance"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:s.jsx(Ja,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tickets"}),s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"New / Urgent / In-Progress"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:V.total})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:s.jsx(Ii,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"New Tickets"}),s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Just received"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:V.newTickets})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:s.jsx(Pi,{className:"w-6 h-6 text-red-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Urgent Tickets"}),s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Open for 3+ days"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:V.urgentTickets})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:s.jsx(Wr,{className:"w-6 h-6 text-yellow-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"In-Progress"}),s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Being worked on"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:V.inProgress})]})]})})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Aj,{className:"w-5 h-5 text-gray-500"}),s.jsxs("select",{value:g,onChange:H=>x(H.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"open",children:"Open"}),s.jsx("option",{value:"in_progress",children:"In Progress"}),s.jsx("option",{value:"resolved",children:"Resolved"}),s.jsx("option",{value:"closed",children:"Closed"})]})]})}),s.jsxs("div",{className:"relative",children:[s.jsx(Yj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search tickets...",value:y,onChange:H=>j(H.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 w-full md:w-64"})]})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Support Tickets (",n.length,")"]})}),s.jsx("div",{className:"divide-y divide-gray-200",children:k?s.jsxs("div",{className:"p-6 text-center",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-emerald-600 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500",children:"Loading tickets..."})]}):n.length>0?n.map(H=>s.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:H.subject}),P(H.status),D(H.priority)]}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-2",children:[s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx(N0,{className:"w-4 h-4"}),s.jsx("span",{children:H.userName})]}),s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx(Mj,{className:"w-4 h-4"}),s.jsx("span",{children:H.userEmail})]}),s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx(Wr,{className:"w-4 h-4"}),s.jsx("span",{children:z(H.createdAt)})]})]}),s.jsx("p",{className:"text-gray-600 line-clamp-2",children:H.description}),H.adminResponse&&s.jsxs("div",{className:"mt-3 flex items-center space-x-2 text-sm text-emerald-600",children:[s.jsx(fl,{className:"w-4 h-4"}),s.jsx("span",{children:"Admin responded"})]})]}),s.jsxs("button",{onClick:()=>_(H),className:"ml-4 px-3 py-1 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors flex items-center space-x-2",children:[s.jsx(Di,{className:"w-4 h-4"}),s.jsx("span",{children:"View"})]})]})},H.id)):s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(Ja,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500 mb-2",children:"No support tickets found"}),s.jsx("p",{className:"text-sm text-gray-400",children:y||g!=="all"?"Try adjusting your search or filter criteria":"Support tickets from users will appear here"})]})})]}),s.jsx(Rw,{isOpen:m,onClose:O,ticket:o,onUpdateStatus:S,onAddResponse:w})]})}function Lw(){const{getPreloadedData:c}=rs(),r=ya(),n=c("admin-settings-page"),i=n||r,[o,u]=E.useState(i),[m,f]=E.useState(i),[g,x]=E.useState(!n),[y,j]=E.useState(!1),[k,b]=E.useState(null),[S,w]=E.useState(null),[_,O]=E.useState(null),[P,D]=E.useState({newEmail:"",newUsername:"",newPassword:"",confirmPassword:""}),[z,U]=E.useState({newPassword:!1,confirmPassword:!1}),[V,H]=E.useState(!1),[le,W]=E.useState("save"),[ne,ee]=E.useState(""),[ie,fe]=E.useState(!1),Y=JSON.stringify(o)!==JSON.stringify(m)||P.newEmail.length>0||P.newUsername.length>0||P.newPassword.length>0,ce=(F,ue,Te)=>{u(ye=>({...ye,businessHours:{...ye.businessHours,[F]:{...ye.businessHours[F],[ue]:Te}}}))},T=(F,ue)=>{u(Te=>({...Te,deliverySettings:{...Te.deliverySettings,[F]:ue}}))},L=F=>{const ue=F.target.files?.[0];if(ue){const Te=new FileReader;Te.onload=ye=>{const Se=ye.target?.result;X("profileImage",Se)},Te.readAsDataURL(ue)}};E.useEffect(()=>{(async()=>{try{if(n){console.log("Using preloaded admin settings"),u(n),f(n),x(!1);try{const ye=await Ht.getCurrentAdminUser();O(ye),ye&&D(Se=>({...Se,newEmail:"",newUsername:""}))}catch(ye){console.log("Failed to load admin user info:",ye)}b(new Date);return}console.log("Loading admin settings from API"),x(!0),await Ht.initializeSettings();const ue=await Ht.getSettings();u(ue),f(ue);const Te=await Ht.getCurrentAdminUser();O(Te),Te&&D(ye=>({...ye,newEmail:"",newUsername:""})),b(new Date),x(!1)}catch(ue){console.error("Failed to load settings:",ue),w({type:"error",text:"Failed to load settings from database"});const Te=ya();u(Te),f(Te),x(!1)}})()},[n]);const X=(F,ue)=>{u(Te=>({...Te,[F]:ue}))},Ne=F=>{const ue=F.replace(/\D/g,"");if(ue.length<=3)return ue;if(ue.length<=6)return`${ue.slice(0,3)}-${ue.slice(3)}`;if(ue.length<=10)return`${ue.slice(0,3)}-${ue.slice(3,6)}-${ue.slice(6)}`;{const ye=ue.length-4;if(ye<=3){const Se=ue.slice(0,ye),ht=ue.slice(ye);return`${Se}-${ht}`}else if(ye<=6){const Se=ye-3,ht=ue.slice(0,Se),Tt=ue.slice(Se,Se+3),Yt=ue.slice(Se+3);return`${ht}-${Tt}-${Yt}`}else{const Se=ye-6,ht=ue.slice(0,Se),Tt=ue.slice(Se,Se+3),Yt=ue.slice(Se+3,Se+6),Fa=ue.slice(Se+6);return`${ht}-${Tt}-${Yt}-${Fa}`}}},N=F=>{const ue=Ne(F);X("phoneNumber",ue)},I=async()=>{const F=P.newUsername.length>0&&_&&P.newUsername!==_.username,ue=P.newPassword.length>0;if(F){if(P.newUsername.length<3){w({type:"error",text:"Username must be at least 3 characters long"});return}if(!/^[a-zA-Z0-9_]+$/.test(P.newUsername)){w({type:"error",text:"Username can only contain letters, numbers, and underscores"});return}}if(ue){if(P.newPassword.length<6){w({type:"error",text:"New password must be at least 6 characters long"});return}if(P.newPassword!==P.confirmPassword){w({type:"error",text:"New password and confirmation do not match"});return}}W("save"),H(!0)},se=async()=>{W("reset"),H(!0)},ae=async()=>{if(!ne){w({type:"error",text:"Current password is required"});return}j(!0),w(null);try{const F=await Ht.getCurrentAdminUser();if(!F)throw new Error("Failed to get current user");const{error:ue}=await te.auth.signInWithPassword({email:F.email,password:ne});if(ue)throw new Error("Current password is incorrect");le==="save"?await he():await we(),H(!1),ee("")}catch(F){console.error("Failed to verify password:",F),w({type:"error",text:F.message||"Failed to verify password. Please try again."})}finally{j(!1)}},he=async()=>{const F=P.newEmail.length>0&&_&&P.newEmail!==_.email,ue=P.newUsername.length>0&&_&&P.newUsername!==_.username,Te=P.newPassword.length>0;if(await Ht.updateSettings(o),F||ue||Te){const ht={currentPassword:ne};F&&(ht.newEmail=P.newEmail),ue&&(ht.newUsername=P.newUsername),Te&&(ht.newPassword=P.newPassword),await Ht.updateAdminAccount(ht);const Tt=await Ht.getCurrentAdminUser();O(Tt),D({newEmail:"",newUsername:"",newPassword:"",confirmPassword:""})}b(new Date),f(o),window.dispatchEvent(new CustomEvent("adminSettingsUpdated",{detail:o}));let Se="Settings saved successfully!";F&&(Se+=" Please check your new email for verification."),w({type:"success",text:Se}),setTimeout(()=>w(null),3e3)},we=async()=>{await Ht.resetToDefaults();const F=ya();u(F),f(F),w({type:"success",text:"Settings reset to defaults"}),setTimeout(()=>w(null),3e3),window.dispatchEvent(new CustomEvent("adminSettingsUpdated",{detail:F}))},pe=(F,ue)=>{D(Te=>({...Te,[F]:ue}))},Ze=F=>{U(ue=>({...ue,[F]:!ue[F]}))};return g?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded w-64 mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-48"})]}),s.jsx("div",{className:"h-10 bg-gray-200 rounded w-32"})]}),s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[s.jsx("div",{className:"h-6 bg-gray-200 rounded w-48 mb-4"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]})})]})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[s.jsx(Od,{className:"w-8 h-8 mr-3 text-emerald-600"}),"Admin Settings"]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Configure admin account settings"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[k&&s.jsxs("span",{className:"text-sm text-gray-500",children:["Last saved: ",k.toLocaleTimeString()]}),s.jsxs("button",{onClick:se,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[s.jsx($j,{className:"w-4 h-4"}),s.jsx("span",{children:"Reset"})]}),s.jsxs("button",{onClick:Y?I:void 0,disabled:y||!Y,className:`px-6 py-2 rounded-lg transition-colors flex items-center space-x-2 ${Y?"bg-emerald-600 text-white hover:bg-emerald-700":"bg-gray-400 text-white cursor-not-allowed"} disabled:opacity-50`,children:[s.jsx(Gj,{className:"w-4 h-4"}),s.jsx("span",{children:y?"Saving...":Y?"Save Changes":"No Changes"})]})]})]}),S&&s.jsx("div",{className:`p-4 rounded-lg border ${S.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:s.jsx("p",{className:"text-sm font-medium",children:S.text})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(Cd,{className:"w-5 h-5 text-emerald-600 mr-2"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Contact Information"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Email"}),s.jsx("input",{type:"email",value:o.adminEmail,onChange:F=>X("adminEmail",F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),s.jsx("input",{type:"tel",value:o.phoneNumber,onChange:F=>N(F.target.value),placeholder:"123-456-7890",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500"})]}),s.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-700",children:[s.jsx("strong",{children:"Note:"})," This information is used for the customer to contact support."]})})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(Eg,{className:"w-5 h-5 text-emerald-600 mr-2"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Profile Management"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["New Display Name",o.displayName!==m.displayName&&s.jsx("span",{className:"ml-2 text-xs text-orange-600 font-medium",children:" Unsaved changes"})]}),s.jsx("input",{type:"text",value:o.displayName,onChange:F=>X("displayName",F.target.value),placeholder:"Enter new display name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This is the name that appears next to your profile picture"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Profile Picture",o.profileImage!==m.profileImage&&s.jsx("span",{className:"ml-2 text-xs text-orange-600 font-medium",children:" Unsaved changes"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:o.profileImage?s.jsx("img",{src:o.profileImage,alt:"Profile",className:"w-full h-full object-cover"}):s.jsx(N0,{className:"w-10 h-10 text-gray-400"})}),s.jsxs("div",{children:[s.jsx("input",{id:"profile-image-upload",type:"file",accept:"image/*",onChange:L,className:"hidden"}),s.jsxs("label",{htmlFor:"profile-image-upload",className:"cursor-pointer px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors inline-flex items-center space-x-2",children:[s.jsx(Eg,{className:"w-4 h-4"}),s.jsx("span",{children:"Upload Picture"})]}),o.profileImage&&s.jsx("button",{onClick:()=>{X("profileImage","")},className:"ml-2 px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Remove"})]})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(Oi,{className:"w-5 h-5 text-emerald-600 mr-2"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Account Management"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Current Username: ",_?.username||"Loading..."]}),s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Username"}),s.jsx("input",{type:"text",value:P.newUsername,onChange:F=>pe("newUsername",F.target.value),placeholder:"Enter new username",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Username must be at least 3 characters and can only contain letters, numbers, and underscores"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Current Email: ",_?.email||"Loading..."]}),s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Email Address"}),s.jsx("input",{type:"email",value:P.newEmail,onChange:F=>pe("newEmail",F.target.value),placeholder:"Enter new email address",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:z.newPassword?"text":"password",value:P.newPassword,onChange:F=>pe("newPassword",F.target.value),placeholder:"Enter new password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500"}),s.jsx("button",{type:"button",onClick:()=>Ze("newPassword"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:z.newPassword?s.jsx(fd,{className:"h-4 w-4 text-gray-400"}):s.jsx(Di,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 6 characters long"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:z.confirmPassword?"text":"password",value:P.confirmPassword,onChange:F=>pe("confirmPassword",F.target.value),placeholder:"Confirm your new password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500",disabled:!P.newPassword}),s.jsx("button",{type:"button",onClick:()=>Ze("confirmPassword"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:!P.newPassword,children:z.confirmPassword?s.jsx(fd,{className:"h-4 w-4 text-gray-400"}):s.jsx(Di,{className:"h-4 w-4 text-gray-400"})})]})]})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(Oi,{className:"w-5 h-5 text-blue-700 mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Security Reminder"}),s.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"After updating your account information, make sure to write down your new credentials in a secure location. You'll need to use the new credentials for future logins."})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(_g,{className:"w-5 h-5 text-emerald-600 mr-2"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Notifications"})]}),s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[s.jsx(_g,{className:"w-4 h-4 text-emerald-600 mr-2"}),"Notifications"]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notification Email"}),s.jsx("input",{type:"email",value:o.notificationEmail,onChange:F=>X("notificationEmail",F.target.value),placeholder:"notifications@restaurant.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Email address for receiving order and support ticket notifications"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email Notifications"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Receive order and system notifications via email"})]}),s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:o.enableEmailNotifications,onChange:F=>X("enableEmailNotifications",F.target.checked),className:"sr-only"}),s.jsx("div",{className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${o.enableEmailNotifications?"bg-emerald-600":"bg-gray-200"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${o.enableEmailNotifications?"translate-x-6":"translate-x-1"}`})})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"SMS Notifications"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Receive urgent notifications via SMS"})]}),s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:o.enableSMSNotifications,onChange:F=>X("enableSMSNotifications",F.target.checked),className:"sr-only"}),s.jsx("div",{className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${o.enableSMSNotifications?"bg-emerald-600":"bg-gray-200"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${o.enableSMSNotifications?"translate-x-6":"translate-x-1"}`})})]})]})]})})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(Wr,{className:"w-5 h-5 text-emerald-600 mr-2"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Active Hours"})]}),s.jsx("div",{className:"space-y-4",children:Object.entries(o.businessHours).map(([F,ue])=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-24",children:s.jsx("span",{className:"text-sm font-medium text-gray-900 capitalize",children:F})}),s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:ue.isOpen,onChange:Te=>ce(F,"isOpen",Te.target.checked),className:"sr-only"}),s.jsx("div",{className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${ue.isOpen?"bg-emerald-600":"bg-gray-200"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${ue.isOpen?"translate-x-6":"translate-x-1"}`})}),s.jsx("span",{className:"ml-2 text-sm text-gray-600",children:ue.isOpen?"Open":"Closed"})]})]}),ue.isOpen&&s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Open"}),s.jsx("input",{type:"time",value:ue.openTime,onChange:Te=>ce(F,"openTime",Te.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm focus:ring-emerald-500 focus:border-emerald-500"})]}),s.jsx("span",{className:"text-gray-400",children:"-"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Close"}),s.jsx("input",{type:"time",value:ue.closeTime,onChange:Te=>ce(F,"closeTime",Te.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm focus:ring-emerald-500 focus:border-emerald-500"})]})]})]},F))}),s.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-700",children:[s.jsx("strong",{children:"Note:"})," These hours will be used to show customers when orders can be placed and for delivery scheduling."]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(Od,{className:"w-5 h-5 text-emerald-600 mr-2"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Delivery Settings"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Enable Delivery Service"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Turn delivery on or off for all customers"})]}),s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:o.deliverySettings.enabled,onChange:F=>T("enabled",F.target.checked),className:"sr-only"}),s.jsx("div",{className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${o.deliverySettings.enabled?"bg-emerald-600":"bg-gray-200"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${o.deliverySettings.enabled?"translate-x-6":"translate-x-1"}`})}),s.jsx("span",{className:"ml-2 text-sm text-gray-600",children:o.deliverySettings.enabled?"Enabled":"Disabled"})]})]}),o.deliverySettings.enabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery Slot Duration (minutes)"}),s.jsxs("select",{value:o.deliverySettings.deliverySlotDuration,onChange:F=>T("deliverySlotDuration",parseInt(F.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500",children:[s.jsx("option",{value:60,children:"1 hour"}),s.jsx("option",{value:120,children:"2 hours"}),s.jsx("option",{value:180,children:"3 hours"}),s.jsx("option",{value:240,children:"4 hours"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How long each delivery time slot lasts"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Advance Notice (hours)"}),s.jsxs("select",{value:o.deliverySettings.advanceNoticeHours,onChange:F=>T("advanceNoticeHours",parseInt(F.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500",children:[s.jsx("option",{value:1,children:"1 hour"}),s.jsx("option",{value:4,children:"4 hours"}),s.jsx("option",{value:12,children:"12 hours"}),s.jsx("option",{value:24,children:"24 hours"}),s.jsx("option",{value:48,children:"48 hours"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum time customers must order in advance"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Days to Book in Advance"}),s.jsxs("select",{value:o.deliverySettings.maxDaysInAdvance,onChange:F=>T("maxDaysInAdvance",parseInt(F.target.value)),className:"w-full md:w-1/2 px-3 py-2 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500",children:[s.jsx("option",{value:3,children:"3 days"}),s.jsx("option",{value:7,children:"1 week"}),s.jsx("option",{value:14,children:"2 weeks"}),s.jsx("option",{value:30,children:"1 month"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How far in advance customers can book deliveries"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unavailable Dates"}),s.jsxs("div",{className:"space-y-2",children:[o.deliverySettings.unavailableDates.map((F,ue)=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"date",value:F,onChange:Te=>{const ye=[...o.deliverySettings.unavailableDates];ye[ue]=Te.target.value,T("unavailableDates",ye)},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500"}),s.jsx("button",{onClick:()=>{const Te=o.deliverySettings.unavailableDates.filter((ye,Se)=>Se!==ue);T("unavailableDates",Te)},className:"px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Remove"})]},ue)),s.jsx("button",{onClick:()=>{const F=new Date().toISOString().split("T")[0];T("unavailableDates",[...o.deliverySettings.unavailableDates,F])},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Add Unavailable Date"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Dates when delivery is not available (holidays, maintenance, etc.)"})]})]})]}),s.jsx("div",{className:"mt-4 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-amber-700",children:[s.jsx("strong",{children:"Note:"})," Delivery slots will be generated based on your business hours and these settings. Customers will only see available slots during your open hours."]})})]}),V&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(Oi,{className:"w-6 h-6 text-emerald-600 mr-3"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Confirm Password"})]}),s.jsx("p",{className:"text-gray-600 mb-4",children:le==="save"?"Please enter your current password to save these settings:":"Please enter your current password to reset settings to defaults:"}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:ie?"text":"password",value:ne,onChange:F=>ee(F.target.value),placeholder:"Enter your current password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500",autoFocus:!0}),s.jsx("button",{type:"button",onClick:()=>fe(!ie),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:ie?s.jsx(fd,{className:"h-4 w-4 text-gray-400"}):s.jsx(Di,{className:"h-4 w-4 text-gray-400"})})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>{H(!1),ee(""),fe(!1)},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",disabled:y,children:"Cancel"}),s.jsx("button",{onClick:ae,disabled:y||!ne,className:`px-4 py-2 rounded-lg transition-colors flex items-center space-x-2 ${y||!ne?"bg-gray-400 text-white cursor-not-allowed":"bg-emerald-600 text-white hover:bg-emerald-700"}`,children:y?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),s.jsx("span",{children:"Processing..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Oi,{className:"w-4 h-4"}),s.jsx("span",{children:"Confirm"})]})})]})]})})]})}const Ag=[{id:"1",name:"Premium Red Wine",ingredients:"Cabernet Sauvignon grapes, oak barrel aged",unitSize:"750 ml",abv:13.5,price:29.99,imageUrl:"",category:"wine",inStock:!0,createdAt:new Date},{id:"2",name:"Craft IPA Beer",ingredients:"Malted barley, hops, yeast, water",unitSize:"330 ml",abv:6.2,price:12.99,imageUrl:"",category:"beer",inStock:!0,createdAt:new Date},{id:"3",name:"Premium Vodka",ingredients:"Distilled grain, triple filtered",unitSize:"750 ml",abv:40,price:45.99,imageUrl:"",category:"spirits",inStock:!0,createdAt:new Date},{id:"4",name:"Whiskey Collection",ingredients:"Aged corn, rye, barley, oak barrel",unitSize:"750 ml",abv:43,price:125.99,imageUrl:"",category:"spirits",inStock:!0,createdAt:new Date},{id:"5",name:"Champagne Brut",ingredients:"Chardonnay, Pinot Noir, Pinot Meunier grapes",unitSize:"750 ml",abv:12,price:65.99,imageUrl:"",category:"wine",inStock:!0,createdAt:new Date},{id:"6",name:"Gin & Tonic Mix",ingredients:"Premium gin, tonic water, lime",unitSize:"1 L",abv:37.5,price:34.99,imageUrl:"",category:"cocktails",inStock:!0,createdAt:new Date},{id:"7",name:"Margarita Mix",ingredients:"Tequila, triple sec, lime juice, agave",unitSize:"750 ml",abv:15,price:42.99,imageUrl:"",category:"cocktails",inStock:!0,createdAt:new Date},{id:"8",name:"Cocktail Mixer Set",ingredients:"Various mixers, syrups, and garnishes",unitSize:"1 serving",abv:0,price:89.99,imageUrl:"",category:"mixers",inStock:!0,createdAt:new Date}],qw=[{id:"user-1",name:"John Smith"},{id:"user-2",name:"Sarah Johnson"},{id:"user-3",name:"Mike Chen"},{id:"user-4",name:"Emily Davis"},{id:"user-5",name:"David Wilson"},{id:"user-6",name:"Lisa Anderson"},{id:"user-7",name:"Robert Taylor"},{id:"user-8",name:"Jennifer Brown"},{id:"user-9",name:"Michael Lee"},{id:"user-10",name:"Jessica Garcia"},{id:"user-11",name:"Christopher Martinez"},{id:"user-12",name:"Amanda Rodriguez"},{id:"user-13",name:"Daniel Thompson"},{id:"user-14",name:"Nicole White"},{id:"user-15",name:"Kevin Harris"}],Bw=["Credit Card","Debit Card"],$w=["10:00","12:00","14:00","16:00","18:00","20:00"],Ui=c=>c[Math.floor(Math.random()*c.length)],$s=(c,r)=>Math.floor(Math.random()*(r-c+1))+c,Dg=c=>{const r=new Date,n=new Date(r.getTime()-c*24*60*60*1e3),i=n.getTime()+Math.random()*(r.getTime()-n.getTime());return new Date(i)},Pw=c=>{const r=new Date(c);return r.setDate(r.getDate()+$s(1,7)),r},Ug=(c,r)=>{const n=`ORD-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,i=Math.random()<.7?$s(1,3):$s(4,5),o=[],u=new Set,m={wine:Math.random()*.4+.1,spirits:Math.random()*.3+.2,beer:Math.random()*.4+.1,cocktails:Math.random()*.5+.2,mixers:Math.random()*.2+.05};for(let k=0;k<i;k++){let b,S=0;do{const w=Math.random();let _=0,O="wine";for(const[D,z]of Object.entries(m))if(_+=z,w<=_){O=D;break}const P=Ag.filter(D=>D.category===O);b=Ui(P.length>0?P:Ag),S++}while(u.has(b.id)&&S<10);if(!u.has(b.id)){u.add(b.id);const w=Math.random()<.8?$s(1,2):$s(3,4);o.push({...b,quantity:w})}}const f=o.reduce((k,b)=>k+b.price*b.quantity,0),g=Pw(r),x=Ui($w),y=Math.floor((Date.now()-r.getTime())/(1440*60*1e3));let j;return y<1?j=Math.random()<.7?"paid":"processed":y<3?j=Math.random()<.3?"paid":Math.random()<.6?"processed":"delivered":j=Math.random()<.1?"processed":"delivered",{id:n,userId:c.id,userName:c.name,items:o,total:f,deliveryDate:g.toISOString().split("T")[0],deliveryTime:x,status:j,orderDate:r.toISOString(),paymentMethod:Ui(Bw)}},Iw=(c=150)=>{const r=[];for(let n=0;n<c;n++){const i=Math.random()<.5?$s(0,30):Math.random()<.7?$s(31,90):$s(91,180),o=Dg(i),u=Ui(qw);if(Math.random()<.3&&Math.random()<.4){const f=Dg(i+$s(1,14));r.push(Ug(u,f))}r.push(Ug(u,o))}return r.sort((n,i)=>new Date(i.orderDate).getTime()-new Date(n.orderDate).getTime()),r},Hw=(c=150)=>{const r=Iw(c);try{const n=JSON.parse(localStorage.getItem("orders")||"[]"),i=new Set(n.map(m=>m.id)),o=r.filter(m=>!i.has(m.id)),u=[...n,...o];localStorage.setItem("orders",JSON.stringify(u)),console.log(`Added ${o.length} sample orders. Total orders: ${u.length}`)}catch(n){console.error("Error populating sample orders:",n)}},Gw=()=>{localStorage.removeItem("orders"),console.log("All orders cleared")},Mg=()=>{try{return JSON.parse(localStorage.getItem("orders")||"[]")}catch{return[]}};function Vw(){const[c,r]=E.useState(Mg()),[n,i]=E.useState(null),[o,u]=E.useState("month"),[m,f]=E.useState(!0),[g,x]=E.useState(!1),y=()=>{if(confirm("This will add 150 sample orders to your existing data. Continue?")){Hw(150);const b=Mg();r(b)}},j=()=>{confirm("This will permanently delete ALL order data. This cannot be undone. Continue?")&&(Gw(),r([]))};E.useEffect(()=>{(()=>{f(!0);const S=new Date,w=new Date;switch(o){case"week":w.setDate(S.getDate()-7);break;case"month":w.setMonth(S.getMonth()-1);break;case"quarter":w.setMonth(S.getMonth()-3);break;case"year":w.setFullYear(S.getFullYear()-1);break}const _=c.filter(oe=>new Date(oe.orderDate)>=w),O=new Map;_.forEach(oe=>{oe.items.forEach(de=>{const Re=de.name;O.has(Re)||O.set(Re,{name:de.name,category:de.category,totalOrdered:0,totalRevenue:0,averageOrderSize:0,uniqueCustomers:new Set,ordersCount:0});const _e=O.get(Re);_e.totalOrdered+=de.quantity,_e.totalRevenue+=de.price*de.quantity,_e.uniqueCustomers.add(oe.userId),_e.ordersCount++})});const D=Array.from(O.values()).map(oe=>({...oe,averageOrderSize:oe.totalOrdered/oe.ordersCount,uniqueCustomers:oe.uniqueCustomers})).sort((oe,de)=>de.totalOrdered-oe.totalOrdered).slice(0,10),z=new Map;_.forEach(oe=>{z.has(oe.userId)||z.set(oe.userId,{userId:oe.userId,userName:oe.userName,totalOrders:0,totalSpent:0,favoriteCategory:"",lastOrderDate:oe.orderDate,drinkPreferences:{}});const de=z.get(oe.userId);de.totalOrders++,de.totalSpent+=oe.total,new Date(oe.orderDate)>new Date(de.lastOrderDate)&&(de.lastOrderDate=oe.orderDate),oe.items.forEach(Re=>{de.drinkPreferences[Re.name]=(de.drinkPreferences[Re.name]||0)+Re.quantity})});const V=Array.from(z.values()).map(oe=>{const de={};_.filter(_e=>_e.userId===oe.userId).forEach(_e=>{_e.items.forEach(Ye=>{de[Ye.category]=(de[Ye.category]||0)+Ye.quantity})});const Re=Object.entries(de).sort(([,_e],[,Ye])=>Ye-_e)[0]?.[0]||"N/A";return{...oe,favoriteCategory:Re}}).sort((oe,de)=>de.totalSpent-oe.totalSpent).slice(0,10),H={};_.forEach(oe=>{oe.items.forEach(de=>{H[de.category]||(H[de.category]={orders:0,revenue:0}),H[de.category].orders+=de.quantity,H[de.category].revenue+=de.price*de.quantity})});const le=[];for(let oe=5;oe>=0;oe--){const de=new Date;de.setMonth(de.getMonth()-oe);const Re=new Date(de.getFullYear(),de.getMonth(),1),_e=new Date(de.getFullYear(),de.getMonth()+1,0),Ye=c.filter(Ie=>{const lt=new Date(Ie.orderDate);return lt>=Re&&lt<=_e});le.push({month:de.toLocaleDateString("en-US",{month:"short",year:"numeric"}),orders:Ye.length,revenue:Ye.reduce((Ie,lt)=>Ie+lt.total,0)})}const W=[];for(let oe=6;oe>=0;oe--){const de=new Date;de.setDate(de.getDate()-oe);const Re=new Date(de.getFullYear(),de.getMonth(),de.getDate()),_e=new Date(Re);_e.setDate(_e.getDate()+1);const Ye=c.filter(Ie=>{const lt=new Date(Ie.orderDate);return lt>=Re&&lt<_e});W.push({date:de.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),orders:Ye.length,revenue:Ye.reduce((Ie,lt)=>Ie+lt.total,0)})}const ne=_.reduce((oe,de)=>oe+de.total,0),ee=_.length,ie=new Set(_.map(oe=>oe.userId)).size,fe=ee>0?ne/ee:0,Y=[];for(let oe=0;oe<24;oe++){const de=_.filter(Re=>new Date(Re.orderDate).getHours()===oe);Y.push({hour:`${oe.toString().padStart(2,"0")}:00`,orders:de.length,revenue:de.reduce((Re,_e)=>Re+_e.total,0)})}const T=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((oe,de)=>{const Re=_.filter(_e=>new Date(_e.orderDate).getDay()===de);return{day:oe,orders:Re.length,revenue:Re.reduce((_e,Ye)=>_e+Ye.total,0)}}),L=[],X=new Date,Ne=new Date(X.getTime()-10080*60*1e3),N=new Date(X.getTime()-336*60*60*1e3),I=c.filter(oe=>new Date(oe.orderDate)>=Ne),se=c.filter(oe=>{const de=new Date(oe.orderDate);return de>=N&&de<Ne}),ae=I.reduce((oe,de)=>oe+de.total,0),he=se.reduce((oe,de)=>oe+de.total,0),we=he>0?(ae-he)/he*100:0;L.push({period:"Week over Week",growth:we});const pe=new Date(X.getFullYear(),X.getMonth(),1),Ze=new Date(X.getFullYear(),X.getMonth()-1,1),F=new Date(X.getFullYear(),X.getMonth(),0),ue=c.filter(oe=>new Date(oe.orderDate)>=pe),Te=c.filter(oe=>{const de=new Date(oe.orderDate);return de>=Ze&&de<=F}),ye=ue.reduce((oe,de)=>oe+de.total,0),Se=Te.reduce((oe,de)=>oe+de.total,0),ht=Se>0?(ye-Se)/Se*100:0;L.push({period:"Month over Month",growth:ht});const Tt=[],Yt=new Map;_.forEach(oe=>{Yt.has(oe.userId)||Yt.set(oe.userId,[]),Yt.get(oe.userId).push(new Date(oe.orderDate))}),[{name:"Last 30 Days",days:30},{name:"Last 90 Days",days:90}].forEach(oe=>{const de=new Date(X.getTime()-oe.days*24*60*60*1e3),Re=_.filter(lt=>new Date(lt.orderDate)>=de),_e=new Set(Re.map(lt=>lt.userId));let Ye=0,Ie=0;_e.forEach(lt=>{(Yt.get(lt)||[]).filter(bs=>bs<de).length>0?Ie++:Ye++}),Tt.push({period:oe.name,returning:Ie,new:Ye})});const Ct=15,Wa=_.reduce((oe,de)=>oe+de.items.reduce((Re,_e)=>Re+_e.quantity,0),0),wa=Wa*Ct,Na=ne-wa,Ps=ne>0?Na/ne*100:0,Sa=ee>0?Wa/ee:0;i({totalRevenue:ne,totalOrders:ee,totalCustomers:ie,averageOrderValue:fe,topDrinks:D,topCustomers:V,categoryBreakdown:H,monthlyTrends:le,recentActivity:W,hourlyPattern:Y,dayOfWeekPattern:T,salesTrends:L,customerRetention:Tt,profitabilityMetrics:{totalCosts:wa,grossProfit:Na,profitMargin:Ps,avgItemsPerOrder:Sa}}),f(!1)})()},[c,o]);const k=b=>`$${b.toFixed(2)}`;return m?s.jsx("div",{className:"p-6 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Calculating analytics..."})]})}):n?s.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6 pb-safe-bottom",children:[s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 flex items-center",children:[s.jsx(v0,{className:"w-6 sm:w-8 h-6 sm:h-8 mr-2 sm:mr-3 text-emerald-600"}),s.jsx("span",{className:"hidden sm:inline",children:"Analytics & Reports"}),s.jsx("span",{className:"sm:hidden",children:"Analytics"})]}),s.jsx("p",{className:"text-gray-600 mt-1 text-sm sm:text-base",children:"Track your business performance and customer insights"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-3 w-full sm:w-auto",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Time Range:"}),s.jsxs("select",{value:o,onChange:b=>u(b.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500 mobile-input w-full sm:w-auto",children:[s.jsx("option",{value:"week",children:"Last Week"}),s.jsx("option",{value:"month",children:"Last Month"}),s.jsx("option",{value:"quarter",children:"Last Quarter"}),s.jsx("option",{value:"year",children:"Last Year"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 w-full sm:w-auto",children:[s.jsx("button",{onClick:()=>x(!g),className:"px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors mobile-button-compact w-full sm:w-auto",children:"Sample Data"}),g&&s.jsxs("div",{className:"absolute top-full right-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-lg p-3 space-y-2 z-10",children:[s.jsx("button",{onClick:y,className:"block w-full px-3 py-2 text-sm text-left hover:bg-emerald-50 rounded",children:"Generate Sample Orders"}),s.jsx("button",{onClick:j,className:"block w-full px-3 py-2 text-sm text-left hover:bg-red-50 text-red-600 rounded",children:"Clear All Data"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-emerald-100 rounded-lg",children:s.jsx(kg,{className:"w-6 h-6 text-emerald-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k(n.totalRevenue)})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:s.jsx(Li,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.totalOrders})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:s.jsx(il,{className:"w-6 h-6 text-purple-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Customers"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.totalCustomers})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:s.jsx(gd,{className:"w-6 h-6 text-orange-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Order Value"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k(n.averageOrderValue)})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(gd,{className:"w-5 h-5 text-emerald-600 mr-2"}),"Sales Growth"]}),s.jsx("div",{className:"space-y-4",children:n.salesTrends.map((b,S)=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsx("span",{className:"font-medium text-gray-900",children:b.period}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:`font-bold ${b.growth>=0?"text-green-600":"text-red-600"}`,children:[b.growth>=0?"+":"",b.growth.toFixed(1),"%"]}),b.growth>=0?s.jsx(gd,{className:"w-4 h-4 text-green-600"}):s.jsx("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})]})]},S))})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(il,{className:"w-5 h-5 text-emerald-600 mr-2"}),"Customer Retention"]}),s.jsx("div",{className:"space-y-4",children:n.customerRetention.map((b,S)=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-medium text-gray-900",children:b.period}),s.jsxs("span",{className:"text-sm text-gray-600",children:[b.returning+b.new," total customers"]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-3",children:s.jsx("div",{className:"bg-emerald-600 h-3 rounded-l-full",style:{width:`${b.returning/(b.returning+b.new)*100}%`}})}),s.jsxs("div",{className:"text-sm text-gray-600 min-w-max",children:[s.jsx("span",{className:"text-emerald-600 font-medium",children:b.returning})," returning,"," ",s.jsx("span",{className:"text-blue-600 font-medium",children:b.new})," new"]})]})]},S))})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[s.jsx(kg,{className:"w-5 h-5 text-emerald-600 mr-2"}),"Profitability Analysis"]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Estimated profitability metrics based on industry averages"})]}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"text-center p-4 bg-emerald-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:k(n.profitabilityMetrics.grossProfit)}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Gross Profit"}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Revenue - Estimated Costs"})]}),s.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[s.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[n.profitabilityMetrics.profitMargin.toFixed(1),"%"]}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Profit Margin"}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Gross Profit / Revenue"})]}),s.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:n.profitabilityMetrics.avgItemsPerOrder.toFixed(1)}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Avg Items/Order"}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Items per customer order"})]}),s.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:k(n.profitabilityMetrics.totalCosts)}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Est. Total Costs"}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Based on 30% of revenue"})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Peak Hours Analysis"}),s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:n.hourlyPattern.filter(b=>b.orders>0).sort((b,S)=>S.orders-b.orders).slice(0,12).map((b,S)=>{const w=Math.max(...n.hourlyPattern.map(O=>O.orders)),_=w>0?b.orders/w*100:0;return s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"font-medium text-gray-900",children:b.hour}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-medium text-gray-900",children:[b.orders," orders"]}),s.jsx("div",{className:"text-xs text-gray-500",children:k(b.revenue)})]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-emerald-600 h-2 rounded-full transition-all duration-300",style:{width:`${_}%`}})})]},S)})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Weekly Patterns"}),s.jsx("div",{className:"space-y-3",children:n.dayOfWeekPattern.map((b,S)=>{const w=Math.max(...n.dayOfWeekPattern.map(O=>O.orders)),_=w>0?b.orders/w*100:0;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-medium text-gray-900",children:b.day}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[b.orders," orders"]}),s.jsx("div",{className:"text-xs text-gray-500",children:k(b.revenue)})]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:s.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:{width:`${_}%`}})})]},S)})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Category Performance"}),s.jsx("div",{className:"space-y-4",children:Object.entries(n.categoryBreakdown).sort(([,b],[,S])=>S.revenue-b.revenue).map(([b,S])=>{const w=Math.max(...Object.values(n.categoryBreakdown).map(O=>O.revenue)),_=S.revenue/w*100;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-medium text-gray-900 capitalize",children:b}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:k(S.revenue)}),s.jsxs("div",{className:"text-xs text-gray-500",children:[S.orders," items sold"]})]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:s.jsx("div",{className:"bg-emerald-600 h-3 rounded-full transition-all duration-300",style:{width:`${_}%`}})})]},b)})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Daily Activity (Last 7 Days)"}),s.jsx("div",{className:"space-y-3",children:n.recentActivity.map((b,S)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-2 h-2 bg-emerald-600 rounded-full"}),s.jsx("span",{className:"font-medium text-gray-900",children:b.date})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:k(b.revenue)}),s.jsxs("div",{className:"text-xs text-gray-500",children:[b.orders," orders"]})]})]},S))})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Bs,{className:"w-5 h-5 text-emerald-600 mr-2"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Drink Performance Analytics"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Comprehensive analysis of drink sales and customer preferences"})]})]})})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 mb-4 sm:mb-6",children:[s.jsxs("div",{className:"bg-emerald-50 p-3 sm:p-4 rounded-lg text-center",children:[s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-emerald-600",children:n.topDrinks.length}),s.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Active Drinks"})]}),s.jsxs("div",{className:"bg-blue-50 p-3 sm:p-4 rounded-lg text-center",children:[s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-blue-600",children:n.topDrinks.reduce((b,S)=>b+S.totalOrdered,0)}),s.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Total Units Sold"})]}),s.jsxs("div",{className:"bg-purple-50 p-3 sm:p-4 rounded-lg text-center",children:[s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-purple-600",children:n.topDrinks[0]?.name.substring(0,15)+(n.topDrinks[0]?.name.length>15?"...":"")||"N/A"}),s.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Top Seller"})]})]}),s.jsx("div",{className:"hidden md:block mobile-table-container",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),s.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Drink Name"}),s.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),s.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Units Sold"}),s.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Revenue"}),s.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell",children:"Avg/Order"}),s.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell",children:"Customers"}),s.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Performance"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.topDrinks.map((b,S)=>{const w=b.totalRevenue/Math.max(...n.topDrinks.map(_=>_.totalRevenue))*100;return s.jsxs("tr",{className:S<3?"bg-yellow-50":"",children:[s.jsx("td",{className:"px-4 lg:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:S<3?s.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:["#",S+1]}):s.jsxs("span",{className:"text-gray-500",children:["#",S+1]})}),s.jsx("td",{className:"px-4 lg:px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm font-medium text-gray-900 truncate max-w-[120px] md:max-w-none",children:b.name})}),s.jsx("td",{className:"px-4 lg:px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 capitalize",children:b.category})}),s.jsxs("td",{className:"px-4 lg:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[s.jsx("div",{className:"font-medium",children:b.totalOrdered}),s.jsxs("div",{className:"text-xs text-gray-500",children:[b.ordersCount," orders"]})]}),s.jsx("td",{className:"px-4 lg:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:k(b.totalRevenue)}),s.jsx("td",{className:"px-4 lg:px-6 py-4 whitespace-nowrap text-sm text-gray-900 hidden lg:table-cell",children:b.averageOrderSize.toFixed(1)}),s.jsxs("td",{className:"px-4 lg:px-6 py-4 whitespace-nowrap text-sm text-gray-900 hidden lg:table-cell",children:[s.jsx("div",{className:"font-medium",children:b.uniqueCustomers.size}),s.jsxs("div",{className:"text-xs text-gray-500",children:[(b.uniqueCustomers.size/n.totalCustomers*100).toFixed(1),"% reach"]})]}),s.jsx("td",{className:"px-4 lg:px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-12 lg:w-16 bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-emerald-600 h-2 rounded-full",style:{width:`${w}%`}})}),s.jsxs("span",{className:"text-xs text-gray-500",children:[w.toFixed(0),"%"]})]})})]},b.name)})})]})}),s.jsx("div",{className:"md:hidden space-y-3",children:n.topDrinks.map((b,S)=>{const w=b.totalRevenue/Math.max(...n.topDrinks.map(_=>_.totalRevenue))*100;return s.jsxs("div",{className:`mobile-table-card ${S<3?"border-yellow-300 bg-yellow-50":""}`,children:[s.jsxs("div",{className:"mobile-table-card-header flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[S<3?s.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:["#",S+1]}):s.jsxs("span",{className:"text-gray-500 text-sm",children:["#",S+1]}),s.jsx("span",{className:"font-semibold text-gray-900 truncate",children:b.name})]}),s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 capitalize",children:b.category})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"mobile-table-card-row",children:[s.jsx("span",{className:"mobile-table-card-label",children:"Units Sold:"}),s.jsxs("span",{className:"mobile-table-card-value",children:[b.totalOrdered," (",b.ordersCount," orders)"]})]}),s.jsxs("div",{className:"mobile-table-card-row",children:[s.jsx("span",{className:"mobile-table-card-label",children:"Revenue:"}),s.jsx("span",{className:"mobile-table-card-value font-semibold",children:k(b.totalRevenue)})]}),s.jsxs("div",{className:"mobile-table-card-row",children:[s.jsx("span",{className:"mobile-table-card-label",children:"Avg/Order:"}),s.jsx("span",{className:"mobile-table-card-value",children:b.averageOrderSize.toFixed(1)})]}),s.jsxs("div",{className:"mobile-table-card-row",children:[s.jsx("span",{className:"mobile-table-card-label",children:"Customers:"}),s.jsxs("span",{className:"mobile-table-card-value",children:[b.uniqueCustomers.size," (",(b.uniqueCustomers.size/n.totalCustomers*100).toFixed(1),"% reach)"]})]}),s.jsxs("div",{className:"mobile-table-card-row",children:[s.jsx("span",{className:"mobile-table-card-label",children:"Performance:"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-emerald-600 h-2 rounded-full",style:{width:`${w}%`}})}),s.jsxs("span",{className:"text-xs text-gray-500",children:[w.toFixed(0),"%"]})]})]})]})]},b.name)})}),n.topDrinks.length===0&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Bs,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No drink data available for the selected time period"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:[s.jsx("div",{className:"px-4 sm:px-6 py-4 border-b border-gray-200",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(il,{className:"w-5 h-5 text-emerald-600 mr-2"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Customer Analysis & Preferences"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Top customers and their detailed drink preferences"})]})]})})}),s.jsxs("div",{className:"p-4 sm:p-6",children:[s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:n.topCustomers.map((b,S)=>{const w=Object.entries(b.drinkPreferences).sort(([,O],[,P])=>P-O).slice(0,5),_=Object.values(b.drinkPreferences).reduce((O,P)=>O+P,0);return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 space-y-3 sm:space-y-0",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:`w-10 sm:w-12 h-10 sm:h-12 rounded-full flex items-center justify-center text-white font-bold text-sm sm:text-base ${S===0?"bg-yellow-500":S===1?"bg-gray-400":S===2?"bg-orange-500":"bg-emerald-500"}`,children:["#",S+1]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 truncate",children:b.userName}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Customer since orders began"})]})]}),s.jsxs("div",{className:"text-left sm:text-right",children:[s.jsx("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:k(b.totalSpent)}),s.jsxs("p",{className:"text-sm text-gray-500",children:[b.totalOrders," orders"]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-3 mb-4",children:[s.jsxs("div",{className:"bg-blue-50 p-2 sm:p-3 rounded-lg text-center",children:[s.jsx("div",{className:"text-sm sm:text-lg font-bold text-blue-600",children:k(b.totalSpent/b.totalOrders)}),s.jsx("div",{className:"text-xs text-gray-600",children:"Avg Order"})]}),s.jsxs("div",{className:"bg-purple-50 p-2 sm:p-3 rounded-lg text-center",children:[s.jsx("div",{className:"text-sm sm:text-lg font-bold text-purple-600 capitalize truncate",children:b.favoriteCategory}),s.jsx("div",{className:"text-xs text-gray-600",children:"Fav Category"})]}),s.jsxs("div",{className:"bg-emerald-50 p-2 sm:p-3 rounded-lg text-center",children:[s.jsx("div",{className:"text-sm sm:text-lg font-bold text-emerald-600",children:_}),s.jsx("div",{className:"text-xs text-gray-600",children:"Total Items"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h4",{className:"font-medium text-gray-900 flex items-center text-sm sm:text-base",children:[s.jsx(Li,{className:"w-4 h-4 mr-2 text-emerald-600"}),"Drink Preferences"]}),w.length>0?s.jsx("div",{className:"space-y-2",children:w.map(([O,P],D)=>{const z=P/_*100;return s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-gray-700 truncate max-w-[120px] sm:max-w-[180px]",title:O,children:O}),s.jsxs("div",{className:"text-right",children:[s.jsxs("span",{className:"font-medium text-gray-900",children:[P,"x"]}),s.jsxs("span",{className:"text-gray-500 ml-1",children:["(",z.toFixed(1),"%)"]})]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full ${D===0?"bg-emerald-500":D===1?"bg-blue-500":D===2?"bg-purple-500":D===3?"bg-orange-500":"bg-gray-500"}`,style:{width:`${z}%`}})})]},O)})}):s.jsx("p",{className:"text-sm text-gray-500 italic",children:"No drink preference data available"})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Last Order:"}),s.jsx("span",{className:"font-medium text-gray-900",children:new Date(b.lastOrderDate).toLocaleDateString()})]})})]},b.userId)})}),n.topCustomers.length===0&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx(il,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No customer data available for the selected time period"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Monthly Trends"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Order and revenue trends over the last 6 months"})]}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.monthlyTrends.map((b,S)=>s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:b.month}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:k(b.revenue)}),s.jsxs("p",{className:"text-sm text-gray-600",children:[b.orders," orders"]})]})]},S))})})]})]}):s.jsx("div",{className:"p-6 text-center",children:s.jsx("p",{className:"text-gray-600",children:"Unable to load analytics data."})})}const Yw=()=>{const{isNavigating:c}=rs();return c?s.jsx("div",{className:"fixed top-0 left-0 w-full z-50 h-1 bg-gray-100 shadow-sm",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 via-purple-500 to-emerald-500 progress-slide shadow-sm"})}):null};function Rg({children:c,requiredRole:r,allowOwnUserOnly:n}){const{user:i,isLoading:o}=Vt(),u=us(),m=ms(),[f,g]=E.useState(!1),[x,y]=E.useState(!1);return E.useEffect(()=>{(async()=>{try{const{data:{session:k},error:b}=await te.auth.getSession();y(!!(k?.user&&!b))}catch{y(!1)}g(!0)})()},[]),o||!f?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Checking authentication..."})]})}):!i||!x?(localStorage.removeItem("currentUser"),s.jsx(Ka,{to:"/sign-in",state:{from:u},replace:!0})):n&&m.id&&m.id!==i.id?s.jsx(Ka,{to:`/user/${i.id}/dashboard`,replace:!0}):r&&i.role!==r?i.role==="admin"?s.jsx(Ka,{to:"/admin/dashboard",replace:!0}):s.jsx(Ka,{to:`/user/${i.id}/dashboard`,replace:!0}):s.jsx(s.Fragment,{children:c})}Jp.createRoot(document.getElementById("root")).render(s.jsx(zg.StrictMode,{children:s.jsxs(ow,{children:["         ",s.jsxs(cj,{children:["        ",s.jsx(Zy,{children:s.jsxs(nv,{children:[s.jsx(Yw,{}),s.jsxs(Hy,{children:[s.jsx(Ke,{path:"/",element:s.jsx(lv,{})}),s.jsx(Ke,{path:"/sign-in",element:s.jsx(uj,{})}),s.jsx(Ke,{path:"/contact-admin",element:s.jsx(mj,{})}),s.jsx(Ke,{path:"/auth/reset-password",element:s.jsx(hj,{})}),s.jsxs(Ke,{path:"/user/:id",element:s.jsx(Rg,{allowOwnUserOnly:!0,children:s.jsx(cw,{})}),children:[s.jsx(Ke,{index:!0,element:s.jsx(Ka,{to:"dashboard",replace:!0})}),s.jsx(Ke,{path:"dashboard",element:s.jsx(uw,{})}),s.jsx(Ke,{path:"orders",element:s.jsx(mw,{})}),s.jsx(Ke,{path:"inventory",element:s.jsx(xw,{})}),s.jsx(Ke,{path:"support",element:s.jsx(yw,{})}),s.jsx(Ke,{path:"settings",element:s.jsx(vw,{})}),s.jsx(Ke,{path:"delivery-time",element:s.jsx(jw,{})}),s.jsx(Ke,{path:"payment",element:s.jsx(_w,{})}),s.jsx(Ke,{path:"order-success",element:s.jsx(Ew,{})})]}),s.jsxs(Ke,{path:"/admin",element:s.jsx(Rg,{requiredRole:"admin",children:s.jsx(Cw,{})}),children:[s.jsx(Ke,{index:!0,element:s.jsx(Ka,{to:"dashboard",replace:!0})}),s.jsx(Ke,{path:"dashboard",element:s.jsx(Ow,{})}),s.jsx(Ke,{path:"users",element:s.jsx(Aw,{})}),s.jsx(Ke,{path:"users/:id",element:s.jsx(Dw,{})}),s.jsx(Ke,{path:"orders",element:s.jsx(Uw,{})}),s.jsx(Ke,{path:"inventory",element:s.jsx(Mw,{})}),s.jsx(Ke,{path:"analytics",element:s.jsx(Vw,{})}),s.jsx(Ke,{path:"support",element:s.jsx(zw,{})}),s.jsx(Ke,{path:"settings",element:s.jsx(Lw,{})})]}),s.jsx(Ke,{path:"*",element:s.jsx(Ka,{to:"/",replace:!0})})]})]})})]})]})}));
